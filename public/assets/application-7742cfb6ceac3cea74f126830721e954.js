function setup(){createCanvas(windowWidth,windowHeight),drums=EDrums("x*o*x*o-"),drums.amp=1,bass=FM("bass").note.seq([0,0,0,7,14,13].rnd(),[1/8,1/16].rnd(1/16,2)),rhodes=Synth("rhodes",{amp:.35}).chord.seq(Rndi(0,6,3),1).fx.add(Delay()),fft=FFT(fftSize),Gibber.scale.root.seq(["c4","ab3","bb3"],[4,2,2]),Gibber.scale.mode.seq(["Minor","Mixolydian"],[6,2]),noStroke(),colorMode(HSB,255)}function draw(){background(64);for(var e=fftSize/2,t=(height-1)/e,n=null,i=null,r=0;e>r;r++)n=color(r/e*255,255,255),fill(n),i=fft[r]/255*width,rect(0,t*r,i,t)}!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function n(e){var t=e.length,n=rt.type(e);return"function"===n||rt.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e}function i(e,t,n){if(rt.isFunction(t))return rt.grep(e,function(e,i){return!!t.call(e,i,e)!==n});if(t.nodeType)return rt.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(ht.test(t))return rt.filter(t,e,n);t=rt.filter(t,e)}return rt.grep(e,function(e){return rt.inArray(e,t)>=0!==n})}function r(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function o(e){var t=xt[e]={};return rt.each(e.match(vt)||[],function(e,n){t[n]=!0}),t}function s(){dt.addEventListener?(dt.removeEventListener("DOMContentLoaded",a,!1),e.removeEventListener("load",a,!1)):(dt.detachEvent("onreadystatechange",a),e.detachEvent("onload",a))}function a(){(dt.addEventListener||"load"===event.type||"complete"===dt.readyState)&&(s(),rt.ready())}function u(e,t,n){if(void 0===n&&1===e.nodeType){var i="data-"+t.replace(jt,"-$1").toLowerCase();if(n=e.getAttribute(i),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:_t.test(n)?rt.parseJSON(n):n}catch(r){}rt.data(e,t,n)}else n=void 0}return n}function c(e){var t;for(t in e)if(("data"!==t||!rt.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function l(e,t,n,i){if(rt.acceptData(e)){var r,o,s=rt.expando,a=e.nodeType,u=a?rt.cache:e,c=a?e[s]:e[s]&&s;if(c&&u[c]&&(i||u[c].data)||void 0!==n||"string"!=typeof t)return c||(c=a?e[s]=X.pop()||rt.guid++:s),u[c]||(u[c]=a?{}:{toJSON:rt.noop}),("object"==typeof t||"function"==typeof t)&&(i?u[c]=rt.extend(u[c],t):u[c].data=rt.extend(u[c].data,t)),o=u[c],i||(o.data||(o.data={}),o=o.data),void 0!==n&&(o[rt.camelCase(t)]=n),"string"==typeof t?(r=o[t],null==r&&(r=o[rt.camelCase(t)])):r=o,r}}function p(e,t,n){if(rt.acceptData(e)){var i,r,o=e.nodeType,s=o?rt.cache:e,a=o?e[rt.expando]:rt.expando;if(s[a]){if(t&&(i=n?s[a]:s[a].data)){rt.isArray(t)?t=t.concat(rt.map(t,rt.camelCase)):t in i?t=[t]:(t=rt.camelCase(t),t=t in i?[t]:t.split(" ")),r=t.length;for(;r--;)delete i[t[r]];if(n?!c(i):!rt.isEmptyObject(i))return}(n||(delete s[a].data,c(s[a])))&&(o?rt.cleanData([e],!0):nt.deleteExpando||s!=s.window?delete s[a]:s[a]=null)}}}function h(){return!0}function f(){return!1}function d(){try{return dt.activeElement}catch(e){}}function m(e){var t=Ot.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}function b(e,t){var n,i,r=0,o=typeof e.getElementsByTagName!==kt?e.getElementsByTagName(t||"*"):typeof e.querySelectorAll!==kt?e.querySelectorAll(t||"*"):void 0;if(!o)for(o=[],n=e.childNodes||e;null!=(i=n[r]);r++)!t||rt.nodeName(i,t)?o.push(i):rt.merge(o,b(i,t));return void 0===t||t&&rt.nodeName(e,t)?rt.merge([e],o):o}function g(e){Pt.test(e.type)&&(e.defaultChecked=e.checked)}function y(e,t){return rt.nodeName(e,"table")&&rt.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function v(e){return e.type=(null!==rt.find.attr(e,"type"))+"/"+e.type,e}function x(e){var t=Wt.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function w(e,t){for(var n,i=0;null!=(n=e[i]);i++)rt._data(n,"globalEval",!t||rt._data(t[i],"globalEval"))}function G(e,t){if(1===t.nodeType&&rt.hasData(e)){var n,i,r,o=rt._data(e),s=rt._data(t,o),a=o.events;if(a){delete s.handle,s.events={};for(n in a)for(i=0,r=a[n].length;r>i;i++)rt.event.add(t,n,a[n][i])}s.data&&(s.data=rt.extend({},s.data))}}function k(e,t){var n,i,r;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!nt.noCloneEvent&&t[rt.expando]){r=rt._data(t);for(i in r.events)rt.removeEvent(t,i,r.handle);t.removeAttribute(rt.expando)}"script"===n&&t.text!==e.text?(v(t).text=e.text,x(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),nt.html5Clone&&e.innerHTML&&!rt.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&Pt.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}}function _(t,n){var i,r=rt(n.createElement(t)).appendTo(n.body),o=e.getDefaultComputedStyle&&(i=e.getDefaultComputedStyle(r[0]))?i.display:rt.css(r[0],"display");return r.detach(),o}function j(e){var t=dt,n=Zt[e];return n||(n=_(e,t),"none"!==n&&n||(Jt=(Jt||rt("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=(Jt[0].contentWindow||Jt[0].contentDocument).document,t.write(),t.close(),n=_(e,t),Jt.detach()),Zt[e]=n),n}function C(e,t){return{get:function(){var n=e();if(null!=n)return n?void delete this.get:(this.get=t).apply(this,arguments)}}}function S(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),i=t,r=fn.length;r--;)if(t=fn[r]+n,t in e)return t;return i}function A(e,t){for(var n,i,r,o=[],s=0,a=e.length;a>s;s++)i=e[s],i.style&&(o[s]=rt._data(i,"olddisplay"),n=i.style.display,t?(o[s]||"none"!==n||(i.style.display=""),""===i.style.display&&At(i)&&(o[s]=rt._data(i,"olddisplay",j(i.nodeName)))):(r=At(i),(n&&"none"!==n||!r)&&rt._data(i,"olddisplay",r?n:rt.css(i,"display"))));for(s=0;a>s;s++)i=e[s],i.style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?o[s]||"":"none"));return e}function M(e,t,n){var i=cn.exec(t);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):t}function P(e,t,n,i,r){for(var o=n===(i?"border":"content")?4:"width"===t?1:0,s=0;4>o;o+=2)"margin"===n&&(s+=rt.css(e,n+St[o],!0,r)),i?("content"===n&&(s-=rt.css(e,"padding"+St[o],!0,r)),"margin"!==n&&(s-=rt.css(e,"border"+St[o]+"Width",!0,r))):(s+=rt.css(e,"padding"+St[o],!0,r),"padding"!==n&&(s+=rt.css(e,"border"+St[o]+"Width",!0,r)));return s}function q(e,t,n){var i=!0,r="width"===t?e.offsetWidth:e.offsetHeight,o=en(e),s=nt.boxSizing&&"border-box"===rt.css(e,"boxSizing",!1,o);if(0>=r||null==r){if(r=tn(e,t,o),(0>r||null==r)&&(r=e.style[t]),rn.test(r))return r;i=s&&(nt.boxSizingReliable()||r===e.style[t]),r=parseFloat(r)||0}return r+P(e,t,n||(s?"border":"content"),i,o)+"px"}function T(e,t,n,i,r){return new T.prototype.init(e,t,n,i,r)}function R(){return setTimeout(function(){dn=void 0}),dn=rt.now()}function E(e,t){var n,i={height:e},r=0;for(t=t?1:0;4>r;r+=2-t)n=St[r],i["margin"+n]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function N(e,t,n){for(var i,r=(xn[t]||[]).concat(xn["*"]),o=0,s=r.length;s>o;o++)if(i=r[o].call(n,t,e))return i}function O(e,t,n){var i,r,o,s,a,u,c,l,p=this,h={},f=e.style,d=e.nodeType&&At(e),m=rt._data(e,"fxshow");n.queue||(a=rt._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,u=a.empty.fire,a.empty.fire=function(){a.unqueued||u()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,rt.queue(e,"fx").length||a.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],c=rt.css(e,"display"),l="none"===c?rt._data(e,"olddisplay")||j(e.nodeName):c,"inline"===l&&"none"===rt.css(e,"float")&&(nt.inlineBlockNeedsLayout&&"inline"!==j(e.nodeName)?f.zoom=1:f.display="inline-block")),n.overflow&&(f.overflow="hidden",nt.shrinkWrapBlocks()||p.always(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]}));for(i in t)if(r=t[i],bn.exec(r)){if(delete t[i],o=o||"toggle"===r,r===(d?"hide":"show")){if("show"!==r||!m||void 0===m[i])continue;d=!0}h[i]=m&&m[i]||rt.style(e,i)}else c=void 0;if(rt.isEmptyObject(h))"inline"===("none"===c?j(e.nodeName):c)&&(f.display=c);else{m?"hidden"in m&&(d=m.hidden):m=rt._data(e,"fxshow",{}),o&&(m.hidden=!d),d?rt(e).show():p.done(function(){rt(e).hide()}),p.done(function(){var t;rt._removeData(e,"fxshow");for(t in h)rt.style(e,t,h[t])});for(i in h)s=N(d?m[i]:0,i,p),i in m||(m[i]=s.start,d&&(s.end=s.start,s.start="width"===i||"height"===i?1:0))}}function I(e,t){var n,i,r,o,s;for(n in e)if(i=rt.camelCase(n),r=t[i],o=e[n],rt.isArray(o)&&(r=o[1],o=e[n]=o[0]),n!==i&&(e[i]=o,delete e[n]),s=rt.cssHooks[i],s&&"expand"in s){o=s.expand(o),delete e[i];for(n in o)n in e||(e[n]=o[n],t[n]=r)}else t[i]=r}function L(e,t,n){var i,r,o=0,s=vn.length,a=rt.Deferred().always(function(){delete u.elem}),u=function(){if(r)return!1;for(var t=dn||R(),n=Math.max(0,c.startTime+c.duration-t),i=n/c.duration||0,o=1-i,s=0,u=c.tweens.length;u>s;s++)c.tweens[s].run(o);return a.notifyWith(e,[c,o,n]),1>o&&u?n:(a.resolveWith(e,[c]),!1)},c=a.promise({elem:e,props:rt.extend({},t),opts:rt.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:dn||R(),duration:n.duration,tweens:[],createTween:function(t,n){var i=rt.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(i),i},stop:function(t){var n=0,i=t?c.tweens.length:0;if(r)return this;for(r=!0;i>n;n++)c.tweens[n].run(1);return t?a.resolveWith(e,[c,t]):a.rejectWith(e,[c,t]),this}}),l=c.props;for(I(l,c.opts.specialEasing);s>o;o++)if(i=vn[o].call(c,e,l,c.opts))return i;return rt.map(l,N,c),rt.isFunction(c.opts.start)&&c.opts.start.call(e,c),rt.fx.timer(rt.extend(u,{elem:e,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function D(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,r=0,o=t.toLowerCase().match(vt)||[];if(rt.isFunction(n))for(;i=o[r++];)"+"===i.charAt(0)?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function F(e,t,n,i){function r(a){var u;return o[a]=!0,rt.each(e[a]||[],function(e,a){var c=a(t,n,i);return"string"!=typeof c||s||o[c]?s?!(u=c):void 0:(t.dataTypes.unshift(c),r(c),!1)}),u}var o={},s=e===$n;return r(t.dataTypes[0])||!o["*"]&&r("*")}function B(e,t){var n,i,r=rt.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((r[i]?e:n||(n={}))[i]=t[i]);return n&&rt.extend(!0,e,n),e}function H(e,t,n){for(var i,r,o,s,a=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(s in a)if(a[s]&&a[s].test(r)){u.unshift(s);break}if(u[0]in n)o=u[0];else{for(s in n){if(!u[0]||e.converters[s+" "+u[0]]){o=s;break}i||(i=s)}o=o||i}return o?(o!==u[0]&&u.unshift(o),n[o]):void 0}function V(e,t,n,i){var r,o,s,a,u,c={},l=e.dataTypes.slice();if(l[1])for(s in e.converters)c[s.toLowerCase()]=e.converters[s];for(o=l.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=l.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(s=c[u+" "+o]||c["* "+o],!s)for(r in c)if(a=r.split(" "),a[1]===o&&(s=c[u+" "+a[0]]||c["* "+a[0]])){s===!0?s=c[r]:c[r]!==!0&&(o=a[0],l.unshift(a[1]));break}if(s!==!0)if(s&&e["throws"])t=s(t);else try{t=s(t)}catch(p){return{state:"parsererror",error:s?p:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}function $(e,t,n,i){var r;if(rt.isArray(t))rt.each(t,function(t,r){n||Xn.test(e)?i(e,r):$(e+"["+("object"==typeof r?t:"")+"]",r,n,i)});else if(n||"object"!==rt.type(t))i(e,t);else for(r in t)$(e+"["+r+"]",t[r],n,i)}function z(){try{return new e.XMLHttpRequest}catch(t){}}function U(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function W(e){return rt.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var X=[],Q=X.slice,K=X.concat,Y=X.push,J=X.indexOf,Z={},et=Z.toString,tt=Z.hasOwnProperty,nt={},it="1.11.1",rt=function(e,t){return new rt.fn.init(e,t)},ot=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,st=/^-ms-/,at=/-([\da-z])/gi,ut=function(e,t){return t.toUpperCase()};rt.fn=rt.prototype={jquery:it,constructor:rt,selector:"",length:0,toArray:function(){return Q.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:Q.call(this)},pushStack:function(e){var t=rt.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return rt.each(this,e,t)},map:function(e){return this.pushStack(rt.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(Q.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:Y,sort:X.sort,splice:X.splice},rt.extend=rt.fn.extend=function(){var e,t,n,i,r,o,s=arguments[0]||{},a=1,u=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[a]||{},a++),"object"==typeof s||rt.isFunction(s)||(s={}),a===u&&(s=this,a--);u>a;a++)if(null!=(r=arguments[a]))for(i in r)e=s[i],n=r[i],s!==n&&(c&&n&&(rt.isPlainObject(n)||(t=rt.isArray(n)))?(t?(t=!1,o=e&&rt.isArray(e)?e:[]):o=e&&rt.isPlainObject(e)?e:{},s[i]=rt.extend(c,o,n)):void 0!==n&&(s[i]=n));return s},rt.extend({expando:"jQuery"+(it+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===rt.type(e)},isArray:Array.isArray||function(e){return"array"===rt.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!rt.isArray(e)&&e-parseFloat(e)>=0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},isPlainObject:function(e){var t;if(!e||"object"!==rt.type(e)||e.nodeType||rt.isWindow(e))return!1;try{if(e.constructor&&!tt.call(e,"constructor")&&!tt.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}if(nt.ownLast)for(t in e)return tt.call(e,t);for(t in e);return void 0===t||tt.call(e,t)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?Z[et.call(e)]||"object":typeof e},globalEval:function(t){t&&rt.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(st,"ms-").replace(at,ut)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,i){var r,o=0,s=e.length,a=n(e);if(i){if(a)for(;s>o&&(r=t.apply(e[o],i),r!==!1);o++);else for(o in e)if(r=t.apply(e[o],i),r===!1)break}else if(a)for(;s>o&&(r=t.call(e[o],o,e[o]),r!==!1);o++);else for(o in e)if(r=t.call(e[o],o,e[o]),r===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(ot,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(n(Object(e))?rt.merge(i,"string"==typeof e?[e]:e):Y.call(i,e)),i},inArray:function(e,t,n){var i;if(t){if(J)return J.call(t,e,n);for(i=t.length,n=n?0>n?Math.max(0,i+n):n:0;i>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,t){for(var n=+t.length,i=0,r=e.length;n>i;)e[r++]=t[i++];if(n!==n)for(;void 0!==t[i];)e[r++]=t[i++];return e.length=r,e},grep:function(e,t,n){for(var i,r=[],o=0,s=e.length,a=!n;s>o;o++)i=!t(e[o],o),i!==a&&r.push(e[o]);return r},map:function(e,t,i){var r,o=0,s=e.length,a=n(e),u=[];if(a)for(;s>o;o++)r=t(e[o],o,i),null!=r&&u.push(r);else for(o in e)r=t(e[o],o,i),null!=r&&u.push(r);return K.apply([],u)},guid:1,proxy:function(e,t){var n,i,r;return"string"==typeof t&&(r=e[t],t=e,e=r),rt.isFunction(e)?(n=Q.call(arguments,2),i=function(){return e.apply(t||this,n.concat(Q.call(arguments)))},i.guid=e.guid=e.guid||rt.guid++,i):void 0},now:function(){return+new Date},support:nt}),rt.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){Z["[object "+t+"]"]=t.toLowerCase()});var ct=function(e){function t(e,t,n,i){var r,o,s,a,u,c,p,f,d,m;if((t?t.ownerDocument||t:F)!==T&&q(t),t=t||T,n=n||[],!e||"string"!=typeof e)return n;if(1!==(a=t.nodeType)&&9!==a)return[];if(E&&!i){if(r=yt.exec(e))if(s=r[1]){if(9===a){if(o=t.getElementById(s),!o||!o.parentNode)return n;if(o.id===s)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(s))&&L(t,o)&&o.id===s)return n.push(o),n}else{if(r[2])return Z.apply(n,t.getElementsByTagName(e)),n;if((s=r[3])&&w.getElementsByClassName&&t.getElementsByClassName)return Z.apply(n,t.getElementsByClassName(s)),n}if(w.qsa&&(!N||!N.test(e))){if(f=p=D,d=t,m=9===a&&e,1===a&&"object"!==t.nodeName.toLowerCase()){for(c=j(e),(p=t.getAttribute("id"))?f=p.replace(xt,"\\$&"):t.setAttribute("id",f),f="[id='"+f+"'] ",u=c.length;u--;)c[u]=f+h(c[u]);d=vt.test(e)&&l(t.parentNode)||t,m=c.join(",")}if(m)try{return Z.apply(n,d.querySelectorAll(m)),n}catch(b){}finally{p||t.removeAttribute("id")}}}return S(e.replace(ut,"$1"),t,n,i)}function n(){function e(n,i){return t.push(n+" ")>G.cacheLength&&delete e[t.shift()],e[n+" "]=i}var t=[];return e}function i(e){return e[D]=!0,e}function r(e){var t=T.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var n=e.split("|"),i=e.length;i--;)G.attrHandle[n[i]]=t}function s(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||X)-(~e.sourceIndex||X);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function a(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function u(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function c(e){return i(function(t){return t=+t,i(function(n,i){for(var r,o=e([],n.length,t),s=o.length;s--;)n[r=o[s]]&&(n[r]=!(i[r]=n[r]))})})}function l(e){return e&&typeof e.getElementsByTagName!==W&&e}function p(){}function h(e){for(var t=0,n=e.length,i="";n>t;t++)i+=e[t].value;return i}function f(e,t,n){var i=t.dir,r=n&&"parentNode"===i,o=H++;return t.first?function(t,n,o){for(;t=t[i];)if(1===t.nodeType||r)return e(t,n,o)}:function(t,n,s){var a,u,c=[B,o];if(s){for(;t=t[i];)if((1===t.nodeType||r)&&e(t,n,s))return!0}else for(;t=t[i];)if(1===t.nodeType||r){if(u=t[D]||(t[D]={}),(a=u[i])&&a[0]===B&&a[1]===o)return c[2]=a[2];if(u[i]=c,c[2]=e(t,n,s))return!0}}}function d(e){return e.length>1?function(t,n,i){for(var r=e.length;r--;)if(!e[r](t,n,i))return!1;return!0}:e[0]}function m(e,n,i){for(var r=0,o=n.length;o>r;r++)t(e,n[r],i);return i}function b(e,t,n,i,r){for(var o,s=[],a=0,u=e.length,c=null!=t;u>a;a++)(o=e[a])&&(!n||n(o,i,r))&&(s.push(o),c&&t.push(a));return s}function g(e,t,n,r,o,s){return r&&!r[D]&&(r=g(r)),o&&!o[D]&&(o=g(o,s)),i(function(i,s,a,u){var c,l,p,h=[],f=[],d=s.length,g=i||m(t||"*",a.nodeType?[a]:a,[]),y=!e||!i&&t?g:b(g,h,e,a,u),v=n?o||(i?e:d||r)?[]:s:y;if(n&&n(y,v,a,u),r)for(c=b(v,f),r(c,[],a,u),l=c.length;l--;)(p=c[l])&&(v[f[l]]=!(y[f[l]]=p));if(i){if(o||e){if(o){for(c=[],l=v.length;l--;)(p=v[l])&&c.push(y[l]=p);o(null,v=[],c,u)}for(l=v.length;l--;)(p=v[l])&&(c=o?tt.call(i,p):h[l])>-1&&(i[c]=!(s[c]=p))}}else v=b(v===s?v.splice(d,v.length):v),o?o(null,s,v,u):Z.apply(s,v)})}function y(e){for(var t,n,i,r=e.length,o=G.relative[e[0].type],s=o||G.relative[" "],a=o?1:0,u=f(function(e){return e===t},s,!0),c=f(function(e){return tt.call(t,e)>-1},s,!0),l=[function(e,n,i){return!o&&(i||n!==A)||((t=n).nodeType?u(e,n,i):c(e,n,i))}];r>a;a++)if(n=G.relative[e[a].type])l=[f(d(l),n)];else{if(n=G.filter[e[a].type].apply(null,e[a].matches),n[D]){for(i=++a;r>i&&!G.relative[e[i].type];i++);return g(a>1&&d(l),a>1&&h(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(ut,"$1"),n,i>a&&y(e.slice(a,i)),r>i&&y(e=e.slice(i)),r>i&&h(e))}l.push(n)}return d(l)}function v(e,n){var r=n.length>0,o=e.length>0,s=function(i,s,a,u,c){var l,p,h,f=0,d="0",m=i&&[],g=[],y=A,v=i||o&&G.find.TAG("*",c),x=B+=null==y?1:Math.random()||.1,w=v.length;for(c&&(A=s!==T&&s);d!==w&&null!=(l=v[d]);d++){if(o&&l){for(p=0;h=e[p++];)if(h(l,s,a)){u.push(l);break}c&&(B=x)}r&&((l=!h&&l)&&f--,i&&m.push(l))}if(f+=d,r&&d!==f){for(p=0;h=n[p++];)h(m,g,s,a);if(i){if(f>0)for(;d--;)m[d]||g[d]||(g[d]=Y.call(u));g=b(g)}Z.apply(u,g),c&&!i&&g.length>0&&f+n.length>1&&t.uniqueSort(u)}return c&&(B=x,A=y),m};return r?i(s):s}var x,w,G,k,_,j,C,S,A,M,P,q,T,R,E,N,O,I,L,D="sizzle"+-new Date,F=e.document,B=0,H=0,V=n(),$=n(),z=n(),U=function(e,t){return e===t&&(P=!0),0},W="undefined",X=1<<31,Q={}.hasOwnProperty,K=[],Y=K.pop,J=K.push,Z=K.push,et=K.slice,tt=K.indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},nt="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",it="[\\x20\\t\\r\\n\\f]",rt="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ot=rt.replace("w","w#"),st="\\["+it+"*("+rt+")(?:"+it+"*([*^$|!~]?=)"+it+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ot+"))|)"+it+"*\\]",at=":("+rt+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+st+")*)|.*)\\)|)",ut=new RegExp("^"+it+"+|((?:^|[^\\\\])(?:\\\\.)*)"+it+"+$","g"),ct=new RegExp("^"+it+"*,"+it+"*"),lt=new RegExp("^"+it+"*([>+~]|"+it+")"+it+"*"),pt=new RegExp("="+it+"*([^\\]'\"]*?)"+it+"*\\]","g"),ht=new RegExp(at),ft=new RegExp("^"+ot+"$"),dt={ID:new RegExp("^#("+rt+")"),CLASS:new RegExp("^\\.("+rt+")"),TAG:new RegExp("^("+rt.replace("w","w*")+")"),ATTR:new RegExp("^"+st),PSEUDO:new RegExp("^"+at),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+it+"*(even|odd|(([+-]|)(\\d*)n|)"+it+"*(?:([+-]|)"+it+"*(\\d+)|))"+it+"*\\)|)","i"),bool:new RegExp("^(?:"+nt+")$","i"),needsContext:new RegExp("^"+it+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+it+"*((?:-\\d)?\\d*)"+it+"*\\)|)(?=[^-]|$)","i")},mt=/^(?:input|select|textarea|button)$/i,bt=/^h\d$/i,gt=/^[^{]+\{\s*\[native \w/,yt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,vt=/[+~]/,xt=/'|\\/g,wt=new RegExp("\\\\([\\da-f]{1,6}"+it+"?|("+it+")|.)","ig"),Gt=function(e,t,n){var i="0x"+t-65536;return i!==i||n?t:0>i?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)};try{Z.apply(K=et.call(F.childNodes),F.childNodes),K[F.childNodes.length].nodeType}catch(kt){Z={apply:K.length?function(e,t){J.apply(e,et.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}w=t.support={},_=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},q=t.setDocument=function(e){var t,n=e?e.ownerDocument||e:F,i=n.defaultView;return n!==T&&9===n.nodeType&&n.documentElement?(T=n,R=n.documentElement,E=!_(n),i&&i!==i.top&&(i.addEventListener?i.addEventListener("unload",function(){q()},!1):i.attachEvent&&i.attachEvent("onunload",function(){q()})),w.attributes=r(function(e){return e.className="i",!e.getAttribute("className")}),w.getElementsByTagName=r(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),w.getElementsByClassName=gt.test(n.getElementsByClassName)&&r(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),w.getById=r(function(e){return R.appendChild(e).id=D,!n.getElementsByName||!n.getElementsByName(D).length}),w.getById?(G.find.ID=function(e,t){if(typeof t.getElementById!==W&&E){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},G.filter.ID=function(e){var t=e.replace(wt,Gt);return function(e){return e.getAttribute("id")===t}}):(delete G.find.ID,G.filter.ID=function(e){var t=e.replace(wt,Gt);return function(e){var n=typeof e.getAttributeNode!==W&&e.getAttributeNode("id");return n&&n.value===t}}),G.find.TAG=w.getElementsByTagName?function(e,t){return typeof t.getElementsByTagName!==W?t.getElementsByTagName(e):void 0}:function(e,t){var n,i=[],r=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[r++];)1===n.nodeType&&i.push(n);return i}return o},G.find.CLASS=w.getElementsByClassName&&function(e,t){return typeof t.getElementsByClassName!==W&&E?t.getElementsByClassName(e):void 0},O=[],N=[],(w.qsa=gt.test(n.querySelectorAll))&&(r(function(e){e.innerHTML="<select msallowclip=''><option selected=''></option></select>",e.querySelectorAll("[msallowclip^='']").length&&N.push("[*^$]="+it+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||N.push("\\["+it+"*(?:value|"+nt+")"),e.querySelectorAll(":checked").length||N.push(":checked")}),r(function(e){var t=n.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&N.push("name"+it+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||N.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),N.push(",.*:")})),(w.matchesSelector=gt.test(I=R.matches||R.webkitMatchesSelector||R.mozMatchesSelector||R.oMatchesSelector||R.msMatchesSelector))&&r(function(e){w.disconnectedMatch=I.call(e,"div"),I.call(e,"[s!='']:x"),O.push("!=",at)}),N=N.length&&new RegExp(N.join("|")),O=O.length&&new RegExp(O.join("|")),t=gt.test(R.compareDocumentPosition),L=t||gt.test(R.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},U=t?function(e,t){if(e===t)return P=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i?i:(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&i||!w.sortDetached&&t.compareDocumentPosition(e)===i?e===n||e.ownerDocument===F&&L(F,e)?-1:t===n||t.ownerDocument===F&&L(F,t)?1:M?tt.call(M,e)-tt.call(M,t):0:4&i?-1:1)}:function(e,t){if(e===t)return P=!0,0;var i,r=0,o=e.parentNode,a=t.parentNode,u=[e],c=[t];if(!o||!a)return e===n?-1:t===n?1:o?-1:a?1:M?tt.call(M,e)-tt.call(M,t):0;if(o===a)return s(e,t);for(i=e;i=i.parentNode;)u.unshift(i);for(i=t;i=i.parentNode;)c.unshift(i);for(;u[r]===c[r];)r++;return r?s(u[r],c[r]):u[r]===F?-1:c[r]===F?1:0},n):T},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==T&&q(e),n=n.replace(pt,"='$1']"),!(!w.matchesSelector||!E||O&&O.test(n)||N&&N.test(n)))try{var i=I.call(e,n);if(i||w.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(r){}return t(n,T,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==T&&q(e),L(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==T&&q(e);var n=G.attrHandle[t.toLowerCase()],i=n&&Q.call(G.attrHandle,t.toLowerCase())?n(e,t,!E):void 0;return void 0!==i?i:w.attributes||!E?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],i=0,r=0;if(P=!w.detectDuplicates,M=!w.sortStable&&e.slice(0),e.sort(U),P){for(;t=e[r++];)t===e[r]&&(i=n.push(r));for(;i--;)e.splice(n[i],1)}return M=null,e},k=t.getText=function(e){var t,n="",i=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=k(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[i++];)n+=k(t);return n},G=t.selectors={cacheLength:50,createPseudo:i,match:dt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(wt,Gt),e[3]=(e[3]||e[4]||e[5]||"").replace(wt,Gt),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return dt.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&ht.test(n)&&(t=j(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(wt,Gt).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=V[e+" "];return t||(t=new RegExp("(^|"+it+")"+e+"("+it+"|$)"))&&V(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==W&&e.getAttribute("class")||"")})},ATTR:function(e,n,i){return function(r){var o=t.attr(r,e);return null==o?"!="===n:n?(o+="","="===n?o===i:"!="===n?o!==i:"^="===n?i&&0===o.indexOf(i):"*="===n?i&&o.indexOf(i)>-1:"$="===n?i&&o.slice(-i.length)===i:"~="===n?(" "+o+" ").indexOf(i)>-1:"|="===n?o===i||o.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(e,t,n,i,r){var o="nth"!==e.slice(0,3),s="last"!==e.slice(-4),a="of-type"===t;return 1===i&&0===r?function(e){return!!e.parentNode}:function(t,n,u){var c,l,p,h,f,d,m=o!==s?"nextSibling":"previousSibling",b=t.parentNode,g=a&&t.nodeName.toLowerCase(),y=!u&&!a;if(b){if(o){for(;m;){for(p=t;p=p[m];)if(a?p.nodeName.toLowerCase()===g:1===p.nodeType)return!1;d=m="only"===e&&!d&&"nextSibling"}return!0}if(d=[s?b.firstChild:b.lastChild],s&&y){for(l=b[D]||(b[D]={}),c=l[e]||[],f=c[0]===B&&c[1],h=c[0]===B&&c[2],p=f&&b.childNodes[f];p=++f&&p&&p[m]||(h=f=0)||d.pop();)if(1===p.nodeType&&++h&&p===t){l[e]=[B,f,h];break}}else if(y&&(c=(t[D]||(t[D]={}))[e])&&c[0]===B)h=c[1];else for(;(p=++f&&p&&p[m]||(h=f=0)||d.pop())&&((a?p.nodeName.toLowerCase()!==g:1!==p.nodeType)||!++h||(y&&((p[D]||(p[D]={}))[e]=[B,h]),p!==t)););return h-=r,h===i||h%i===0&&h/i>=0}}},PSEUDO:function(e,n){var r,o=G.pseudos[e]||G.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[D]?o(n):o.length>1?(r=[e,e,"",n],G.setFilters.hasOwnProperty(e.toLowerCase())?i(function(e,t){for(var i,r=o(e,n),s=r.length;s--;)i=tt.call(e,r[s]),e[i]=!(t[i]=r[s])}):function(e){return o(e,0,r)}):o}},pseudos:{not:i(function(e){var t=[],n=[],r=C(e.replace(ut,"$1"));return r[D]?i(function(e,t,n,i){for(var o,s=r(e,null,i,[]),a=e.length;a--;)(o=s[a])&&(e[a]=!(t[a]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),!n.pop()}}),has:i(function(e){return function(n){return t(e,n).length>0}}),contains:i(function(e){return function(t){return(t.textContent||t.innerText||k(t)).indexOf(e)>-1}}),lang:i(function(e){return ft.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(wt,Gt).toLowerCase(),function(t){var n;do if(n=E?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===R},focus:function(e){return e===T.activeElement&&(!T.hasFocus||T.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!G.pseudos.empty(e)},header:function(e){return bt.test(e.nodeName)},input:function(e){return mt.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:c(function(){return[0]}),last:c(function(e,t){return[t-1]}),eq:c(function(e,t,n){return[0>n?n+t:n]}),even:c(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:c(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:c(function(e,t,n){for(var i=0>n?n+t:n;--i>=0;)e.push(i);return e}),gt:c(function(e,t,n){for(var i=0>n?n+t:n;++i<t;)e.push(i);return e})}},G.pseudos.nth=G.pseudos.eq;for(x in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})G.pseudos[x]=a(x);for(x in{submit:!0,reset:!0})G.pseudos[x]=u(x);return p.prototype=G.filters=G.pseudos,G.setFilters=new p,j=t.tokenize=function(e,n){var i,r,o,s,a,u,c,l=$[e+" "];if(l)return n?0:l.slice(0);for(a=e,u=[],c=G.preFilter;a;){(!i||(r=ct.exec(a)))&&(r&&(a=a.slice(r[0].length)||a),u.push(o=[])),i=!1,(r=lt.exec(a))&&(i=r.shift(),o.push({value:i,type:r[0].replace(ut," ")}),a=a.slice(i.length));for(s in G.filter)!(r=dt[s].exec(a))||c[s]&&!(r=c[s](r))||(i=r.shift(),o.push({value:i,type:s,matches:r}),a=a.slice(i.length));if(!i)break}return n?a.length:a?t.error(e):$(e,u).slice(0)},C=t.compile=function(e,t){var n,i=[],r=[],o=z[e+" "];if(!o){for(t||(t=j(e)),n=t.length;n--;)o=y(t[n]),o[D]?i.push(o):r.push(o);o=z(e,v(r,i)),o.selector=e
}return o},S=t.select=function(e,t,n,i){var r,o,s,a,u,c="function"==typeof e&&e,p=!i&&j(e=c.selector||e);if(n=n||[],1===p.length){if(o=p[0]=p[0].slice(0),o.length>2&&"ID"===(s=o[0]).type&&w.getById&&9===t.nodeType&&E&&G.relative[o[1].type]){if(t=(G.find.ID(s.matches[0].replace(wt,Gt),t)||[])[0],!t)return n;c&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(r=dt.needsContext.test(e)?0:o.length;r--&&(s=o[r],!G.relative[a=s.type]);)if((u=G.find[a])&&(i=u(s.matches[0].replace(wt,Gt),vt.test(o[0].type)&&l(t.parentNode)||t))){if(o.splice(r,1),e=i.length&&h(o),!e)return Z.apply(n,i),n;break}}return(c||C(e,p))(i,t,!E,n,vt.test(e)&&l(t.parentNode)||t),n},w.sortStable=D.split("").sort(U).join("")===D,w.detectDuplicates=!!P,q(),w.sortDetached=r(function(e){return 1&e.compareDocumentPosition(T.createElement("div"))}),r(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),w.attributes&&r(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),r(function(e){return null==e.getAttribute("disabled")})||o(nt,function(e,t,n){var i;return n?void 0:e[t]===!0?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),t}(e);rt.find=ct,rt.expr=ct.selectors,rt.expr[":"]=rt.expr.pseudos,rt.unique=ct.uniqueSort,rt.text=ct.getText,rt.isXMLDoc=ct.isXML,rt.contains=ct.contains;var lt=rt.expr.match.needsContext,pt=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ht=/^.[^:#\[\.,]*$/;rt.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?rt.find.matchesSelector(i,e)?[i]:[]:rt.find.matches(e,rt.grep(t,function(e){return 1===e.nodeType}))},rt.fn.extend({find:function(e){var t,n=[],i=this,r=i.length;if("string"!=typeof e)return this.pushStack(rt(e).filter(function(){for(t=0;r>t;t++)if(rt.contains(i[t],this))return!0}));for(t=0;r>t;t++)rt.find(e,i[t],n);return n=this.pushStack(r>1?rt.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},filter:function(e){return this.pushStack(i(this,e||[],!1))},not:function(e){return this.pushStack(i(this,e||[],!0))},is:function(e){return!!i(this,"string"==typeof e&&lt.test(e)?rt(e):e||[],!1).length}});var ft,dt=e.document,mt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,bt=rt.fn.init=function(e,t){var n,i;if(!e)return this;if("string"==typeof e){if(n="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:mt.exec(e),!n||!n[1]&&t)return!t||t.jquery?(t||ft).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof rt?t[0]:t,rt.merge(this,rt.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:dt,!0)),pt.test(n[1])&&rt.isPlainObject(t))for(n in t)rt.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}if(i=dt.getElementById(n[2]),i&&i.parentNode){if(i.id!==n[2])return ft.find(e);this.length=1,this[0]=i}return this.context=dt,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):rt.isFunction(e)?"undefined"!=typeof ft.ready?ft.ready(e):e(rt):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),rt.makeArray(e,this))};bt.prototype=rt.fn,ft=rt(dt);var gt=/^(?:parents|prev(?:Until|All))/,yt={children:!0,contents:!0,next:!0,prev:!0};rt.extend({dir:function(e,t,n){for(var i=[],r=e[t];r&&9!==r.nodeType&&(void 0===n||1!==r.nodeType||!rt(r).is(n));)1===r.nodeType&&i.push(r),r=r[t];return i},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),rt.fn.extend({has:function(e){var t,n=rt(e,this),i=n.length;return this.filter(function(){for(t=0;i>t;t++)if(rt.contains(this,n[t]))return!0})},closest:function(e,t){for(var n,i=0,r=this.length,o=[],s=lt.test(e)||"string"!=typeof e?rt(e,t||this.context):0;r>i;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&rt.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?rt.unique(o):o)},index:function(e){return e?"string"==typeof e?rt.inArray(this[0],rt(e)):rt.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(rt.unique(rt.merge(this.get(),rt(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),rt.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return rt.dir(e,"parentNode")},parentsUntil:function(e,t,n){return rt.dir(e,"parentNode",n)},next:function(e){return r(e,"nextSibling")},prev:function(e){return r(e,"previousSibling")},nextAll:function(e){return rt.dir(e,"nextSibling")},prevAll:function(e){return rt.dir(e,"previousSibling")},nextUntil:function(e,t,n){return rt.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return rt.dir(e,"previousSibling",n)},siblings:function(e){return rt.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return rt.sibling(e.firstChild)},contents:function(e){return rt.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:rt.merge([],e.childNodes)}},function(e,t){rt.fn[e]=function(n,i){var r=rt.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=rt.filter(i,r)),this.length>1&&(yt[e]||(r=rt.unique(r)),gt.test(e)&&(r=r.reverse())),this.pushStack(r)}});var vt=/\S+/g,xt={};rt.Callbacks=function(e){e="string"==typeof e?xt[e]||o(e):rt.extend({},e);var t,n,i,r,s,a,u=[],c=!e.once&&[],l=function(o){for(n=e.memory&&o,i=!0,s=a||0,a=0,r=u.length,t=!0;u&&r>s;s++)if(u[s].apply(o[0],o[1])===!1&&e.stopOnFalse){n=!1;break}t=!1,u&&(c?c.length&&l(c.shift()):n?u=[]:p.disable())},p={add:function(){if(u){var i=u.length;!function o(t){rt.each(t,function(t,n){var i=rt.type(n);"function"===i?e.unique&&p.has(n)||u.push(n):n&&n.length&&"string"!==i&&o(n)})}(arguments),t?r=u.length:n&&(a=i,l(n))}return this},remove:function(){return u&&rt.each(arguments,function(e,n){for(var i;(i=rt.inArray(n,u,i))>-1;)u.splice(i,1),t&&(r>=i&&r--,s>=i&&s--)}),this},has:function(e){return e?rt.inArray(e,u)>-1:!(!u||!u.length)},empty:function(){return u=[],r=0,this},disable:function(){return u=c=n=void 0,this},disabled:function(){return!u},lock:function(){return c=void 0,n||p.disable(),this},locked:function(){return!c},fireWith:function(e,n){return!u||i&&!c||(n=n||[],n=[e,n.slice?n.slice():n],t?c.push(n):l(n)),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!i}};return p},rt.extend({Deferred:function(e){var t=[["resolve","done",rt.Callbacks("once memory"),"resolved"],["reject","fail",rt.Callbacks("once memory"),"rejected"],["notify","progress",rt.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var e=arguments;return rt.Deferred(function(n){rt.each(t,function(t,o){var s=rt.isFunction(e[t])&&e[t];r[o[1]](function(){var e=s&&s.apply(this,arguments);e&&rt.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o[0]+"With"](this===i?n.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?rt.extend(e,i):i}},r={};return i.pipe=i.then,rt.each(t,function(e,o){var s=o[2],a=o[3];i[o[1]]=s.add,a&&s.add(function(){n=a},t[1^e][2].disable,t[2][2].lock),r[o[0]]=function(){return r[o[0]+"With"](this===r?i:this,arguments),this},r[o[0]+"With"]=s.fireWith}),i.promise(r),e&&e.call(r,r),r},when:function(e){var t,n,i,r=0,o=Q.call(arguments),s=o.length,a=1!==s||e&&rt.isFunction(e.promise)?s:0,u=1===a?e:rt.Deferred(),c=function(e,n,i){return function(r){n[e]=this,i[e]=arguments.length>1?Q.call(arguments):r,i===t?u.notifyWith(n,i):--a||u.resolveWith(n,i)}};if(s>1)for(t=new Array(s),n=new Array(s),i=new Array(s);s>r;r++)o[r]&&rt.isFunction(o[r].promise)?o[r].promise().done(c(r,i,o)).fail(u.reject).progress(c(r,n,t)):--a;return a||u.resolveWith(i,o),u.promise()}});var wt;rt.fn.ready=function(e){return rt.ready.promise().done(e),this},rt.extend({isReady:!1,readyWait:1,holdReady:function(e){e?rt.readyWait++:rt.ready(!0)},ready:function(e){if(e===!0?!--rt.readyWait:!rt.isReady){if(!dt.body)return setTimeout(rt.ready);rt.isReady=!0,e!==!0&&--rt.readyWait>0||(wt.resolveWith(dt,[rt]),rt.fn.triggerHandler&&(rt(dt).triggerHandler("ready"),rt(dt).off("ready")))}}}),rt.ready.promise=function(t){if(!wt)if(wt=rt.Deferred(),"complete"===dt.readyState)setTimeout(rt.ready);else if(dt.addEventListener)dt.addEventListener("DOMContentLoaded",a,!1),e.addEventListener("load",a,!1);else{dt.attachEvent("onreadystatechange",a),e.attachEvent("onload",a);var n=!1;try{n=null==e.frameElement&&dt.documentElement}catch(i){}n&&n.doScroll&&!function r(){if(!rt.isReady){try{n.doScroll("left")}catch(e){return setTimeout(r,50)}s(),rt.ready()}}()}return wt.promise(t)};var Gt,kt="undefined";for(Gt in rt(nt))break;nt.ownLast="0"!==Gt,nt.inlineBlockNeedsLayout=!1,rt(function(){var e,t,n,i;n=dt.getElementsByTagName("body")[0],n&&n.style&&(t=dt.createElement("div"),i=dt.createElement("div"),i.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(t),typeof t.style.zoom!==kt&&(t.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",nt.inlineBlockNeedsLayout=e=3===t.offsetWidth,e&&(n.style.zoom=1)),n.removeChild(i))}),function(){var e=dt.createElement("div");if(null==nt.deleteExpando){nt.deleteExpando=!0;try{delete e.test}catch(t){nt.deleteExpando=!1}}e=null}(),rt.acceptData=function(e){var t=rt.noData[(e.nodeName+" ").toLowerCase()],n=+e.nodeType||1;return 1!==n&&9!==n?!1:!t||t!==!0&&e.getAttribute("classid")===t};var _t=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,jt=/([A-Z])/g;rt.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return e=e.nodeType?rt.cache[e[rt.expando]]:e[rt.expando],!!e&&!c(e)},data:function(e,t,n){return l(e,t,n)},removeData:function(e,t){return p(e,t)},_data:function(e,t,n){return l(e,t,n,!0)},_removeData:function(e,t){return p(e,t,!0)}}),rt.fn.extend({data:function(e,t){var n,i,r,o=this[0],s=o&&o.attributes;if(void 0===e){if(this.length&&(r=rt.data(o),1===o.nodeType&&!rt._data(o,"parsedAttrs"))){for(n=s.length;n--;)s[n]&&(i=s[n].name,0===i.indexOf("data-")&&(i=rt.camelCase(i.slice(5)),u(o,i,r[i])));rt._data(o,"parsedAttrs",!0)}return r}return"object"==typeof e?this.each(function(){rt.data(this,e)}):arguments.length>1?this.each(function(){rt.data(this,e,t)}):o?u(o,e,rt.data(o,e)):void 0},removeData:function(e){return this.each(function(){rt.removeData(this,e)})}}),rt.extend({queue:function(e,t,n){var i;return e?(t=(t||"fx")+"queue",i=rt._data(e,t),n&&(!i||rt.isArray(n)?i=rt._data(e,t,rt.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=rt.queue(e,t),i=n.length,r=n.shift(),o=rt._queueHooks(e,t),s=function(){rt.dequeue(e,t)};"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===t&&n.unshift("inprogress"),delete o.stop,r.call(e,s,o)),!i&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return rt._data(e,n)||rt._data(e,n,{empty:rt.Callbacks("once memory").add(function(){rt._removeData(e,t+"queue"),rt._removeData(e,n)})})}}),rt.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?rt.queue(this[0],e):void 0===t?this:this.each(function(){var n=rt.queue(this,e,t);rt._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&rt.dequeue(this,e)})},dequeue:function(e){return this.each(function(){rt.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,r=rt.Deferred(),o=this,s=this.length,a=function(){--i||r.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)n=rt._data(o[s],e+"queueHooks"),n&&n.empty&&(i++,n.empty.add(a));return a(),r.promise(t)}});var Ct=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,St=["Top","Right","Bottom","Left"],At=function(e,t){return e=t||e,"none"===rt.css(e,"display")||!rt.contains(e.ownerDocument,e)},Mt=rt.access=function(e,t,n,i,r,o,s){var a=0,u=e.length,c=null==n;if("object"===rt.type(n)){r=!0;for(a in n)rt.access(e,t,a,n[a],!0,o,s)}else if(void 0!==i&&(r=!0,rt.isFunction(i)||(s=!0),c&&(s?(t.call(e,i),t=null):(c=t,t=function(e,t,n){return c.call(rt(e),n)})),t))for(;u>a;a++)t(e[a],n,s?i:i.call(e[a],a,t(e[a],n)));return r?e:c?t.call(e):u?t(e[0],n):o},Pt=/^(?:checkbox|radio)$/i;!function(){var e=dt.createElement("input"),t=dt.createElement("div"),n=dt.createDocumentFragment();if(t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",nt.leadingWhitespace=3===t.firstChild.nodeType,nt.tbody=!t.getElementsByTagName("tbody").length,nt.htmlSerialize=!!t.getElementsByTagName("link").length,nt.html5Clone="<:nav></:nav>"!==dt.createElement("nav").cloneNode(!0).outerHTML,e.type="checkbox",e.checked=!0,n.appendChild(e),nt.appendChecked=e.checked,t.innerHTML="<textarea>x</textarea>",nt.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue,n.appendChild(t),t.innerHTML="<input type='radio' checked='checked' name='t'/>",nt.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,nt.noCloneEvent=!0,t.attachEvent&&(t.attachEvent("onclick",function(){nt.noCloneEvent=!1}),t.cloneNode(!0).click()),null==nt.deleteExpando){nt.deleteExpando=!0;try{delete t.test}catch(i){nt.deleteExpando=!1}}}(),function(){var t,n,i=dt.createElement("div");for(t in{submit:!0,change:!0,focusin:!0})n="on"+t,(nt[t+"Bubbles"]=n in e)||(i.setAttribute(n,"t"),nt[t+"Bubbles"]=i.attributes[n].expando===!1);i=null}();var qt=/^(?:input|select|textarea)$/i,Tt=/^key/,Rt=/^(?:mouse|pointer|contextmenu)|click/,Et=/^(?:focusinfocus|focusoutblur)$/,Nt=/^([^.]*)(?:\.(.+)|)$/;rt.event={global:{},add:function(e,t,n,i,r){var o,s,a,u,c,l,p,h,f,d,m,b=rt._data(e);if(b){for(n.handler&&(u=n,n=u.handler,r=u.selector),n.guid||(n.guid=rt.guid++),(s=b.events)||(s=b.events={}),(l=b.handle)||(l=b.handle=function(e){return typeof rt===kt||e&&rt.event.triggered===e.type?void 0:rt.event.dispatch.apply(l.elem,arguments)},l.elem=e),t=(t||"").match(vt)||[""],a=t.length;a--;)o=Nt.exec(t[a])||[],f=m=o[1],d=(o[2]||"").split(".").sort(),f&&(c=rt.event.special[f]||{},f=(r?c.delegateType:c.bindType)||f,c=rt.event.special[f]||{},p=rt.extend({type:f,origType:m,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&rt.expr.match.needsContext.test(r),namespace:d.join(".")},u),(h=s[f])||(h=s[f]=[],h.delegateCount=0,c.setup&&c.setup.call(e,i,d,l)!==!1||(e.addEventListener?e.addEventListener(f,l,!1):e.attachEvent&&e.attachEvent("on"+f,l))),c.add&&(c.add.call(e,p),p.handler.guid||(p.handler.guid=n.guid)),r?h.splice(h.delegateCount++,0,p):h.push(p),rt.event.global[f]=!0);e=null}},remove:function(e,t,n,i,r){var o,s,a,u,c,l,p,h,f,d,m,b=rt.hasData(e)&&rt._data(e);if(b&&(l=b.events)){for(t=(t||"").match(vt)||[""],c=t.length;c--;)if(a=Nt.exec(t[c])||[],f=m=a[1],d=(a[2]||"").split(".").sort(),f){for(p=rt.event.special[f]||{},f=(i?p.delegateType:p.bindType)||f,h=l[f]||[],a=a[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),u=o=h.length;o--;)s=h[o],!r&&m!==s.origType||n&&n.guid!==s.guid||a&&!a.test(s.namespace)||i&&i!==s.selector&&("**"!==i||!s.selector)||(h.splice(o,1),s.selector&&h.delegateCount--,p.remove&&p.remove.call(e,s));u&&!h.length&&(p.teardown&&p.teardown.call(e,d,b.handle)!==!1||rt.removeEvent(e,f,b.handle),delete l[f])}else for(f in l)rt.event.remove(e,f+t[c],n,i,!0);rt.isEmptyObject(l)&&(delete b.handle,rt._removeData(e,"events"))}},trigger:function(t,n,i,r){var o,s,a,u,c,l,p,h=[i||dt],f=tt.call(t,"type")?t.type:t,d=tt.call(t,"namespace")?t.namespace.split("."):[];if(a=l=i=i||dt,3!==i.nodeType&&8!==i.nodeType&&!Et.test(f+rt.event.triggered)&&(f.indexOf(".")>=0&&(d=f.split("."),f=d.shift(),d.sort()),s=f.indexOf(":")<0&&"on"+f,t=t[rt.expando]?t:new rt.Event(f,"object"==typeof t&&t),t.isTrigger=r?2:3,t.namespace=d.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),n=null==n?[t]:rt.makeArray(n,[t]),c=rt.event.special[f]||{},r||!c.trigger||c.trigger.apply(i,n)!==!1)){if(!r&&!c.noBubble&&!rt.isWindow(i)){for(u=c.delegateType||f,Et.test(u+f)||(a=a.parentNode);a;a=a.parentNode)h.push(a),l=a;l===(i.ownerDocument||dt)&&h.push(l.defaultView||l.parentWindow||e)}for(p=0;(a=h[p++])&&!t.isPropagationStopped();)t.type=p>1?u:c.bindType||f,o=(rt._data(a,"events")||{})[t.type]&&rt._data(a,"handle"),o&&o.apply(a,n),o=s&&a[s],o&&o.apply&&rt.acceptData(a)&&(t.result=o.apply(a,n),t.result===!1&&t.preventDefault());if(t.type=f,!r&&!t.isDefaultPrevented()&&(!c._default||c._default.apply(h.pop(),n)===!1)&&rt.acceptData(i)&&s&&i[f]&&!rt.isWindow(i)){l=i[s],l&&(i[s]=null),rt.event.triggered=f;try{i[f]()}catch(m){}rt.event.triggered=void 0,l&&(i[s]=l)}return t.result}},dispatch:function(e){e=rt.event.fix(e);var t,n,i,r,o,s=[],a=Q.call(arguments),u=(rt._data(this,"events")||{})[e.type]||[],c=rt.event.special[e.type]||{};if(a[0]=e,e.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,e)!==!1){for(s=rt.event.handlers.call(this,e,u),t=0;(r=s[t++])&&!e.isPropagationStopped();)for(e.currentTarget=r.elem,o=0;(i=r.handlers[o++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(i.namespace))&&(e.handleObj=i,e.data=i.data,n=((rt.event.special[i.origType]||{}).handle||i.handler).apply(r.elem,a),void 0!==n&&(e.result=n)===!1&&(e.preventDefault(),e.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,i,r,o,s=[],a=t.delegateCount,u=e.target;if(a&&u.nodeType&&(!e.button||"click"!==e.type))for(;u!=this;u=u.parentNode||this)if(1===u.nodeType&&(u.disabled!==!0||"click"!==e.type)){for(r=[],o=0;a>o;o++)i=t[o],n=i.selector+" ",void 0===r[n]&&(r[n]=i.needsContext?rt(n,this).index(u)>=0:rt.find(n,this,null,[u]).length),r[n]&&r.push(i);r.length&&s.push({elem:u,handlers:r})}return a<t.length&&s.push({elem:this,handlers:t.slice(a)}),s},fix:function(e){if(e[rt.expando])return e;var t,n,i,r=e.type,o=e,s=this.fixHooks[r];for(s||(this.fixHooks[r]=s=Rt.test(r)?this.mouseHooks:Tt.test(r)?this.keyHooks:{}),i=s.props?this.props.concat(s.props):this.props,e=new rt.Event(o),t=i.length;t--;)n=i[t],e[n]=o[n];return e.target||(e.target=o.srcElement||dt),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,s.filter?s.filter(e,o):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,i,r,o=t.button,s=t.fromElement;return null==e.pageX&&null!=t.clientX&&(i=e.target.ownerDocument||dt,r=i.documentElement,n=i.body,e.pageX=t.clientX+(r&&r.scrollLeft||n&&n.scrollLeft||0)-(r&&r.clientLeft||n&&n.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||n&&n.scrollTop||0)-(r&&r.clientTop||n&&n.clientTop||0)),!e.relatedTarget&&s&&(e.relatedTarget=s===e.target?t.toElement:s),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==d()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===d()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return rt.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(e){return rt.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,i){var r=rt.extend(new rt.Event,n,{type:e,isSimulated:!0,originalEvent:{}});i?rt.event.trigger(r,null,t):rt.event.dispatch.call(t,r),r.isDefaultPrevented()&&n.preventDefault()}},rt.removeEvent=dt.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var i="on"+t;e.detachEvent&&(typeof e[i]===kt&&(e[i]=null),e.detachEvent(i,n))},rt.Event=function(e,t){return this instanceof rt.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?h:f):this.type=e,t&&rt.extend(this,t),this.timeStamp=e&&e.timeStamp||rt.now(),void(this[rt.expando]=!0)):new rt.Event(e,t)},rt.Event.prototype={isDefaultPrevented:f,isPropagationStopped:f,isImmediatePropagationStopped:f,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=h,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=h,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=h,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},rt.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){rt.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,r=e.relatedTarget,o=e.handleObj;return(!r||r!==i&&!rt.contains(i,r))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),nt.submitBubbles||(rt.event.special.submit={setup:function(){return rt.nodeName(this,"form")?!1:void rt.event.add(this,"click._submit keypress._submit",function(e){var t=e.target,n=rt.nodeName(t,"input")||rt.nodeName(t,"button")?t.form:void 0;n&&!rt._data(n,"submitBubbles")&&(rt.event.add(n,"submit._submit",function(e){e._submit_bubble=!0}),rt._data(n,"submitBubbles",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&rt.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return rt.nodeName(this,"form")?!1:void rt.event.remove(this,"._submit")}}),nt.changeBubbles||(rt.event.special.change={setup:function(){return qt.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(rt.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),rt.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),rt.event.simulate("change",this,e,!0)})),!1):void rt.event.add(this,"beforeactivate._change",function(e){var t=e.target;qt.test(t.nodeName)&&!rt._data(t,"changeBubbles")&&(rt.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||rt.event.simulate("change",this.parentNode,e,!0)}),rt._data(t,"changeBubbles",!0))})},handle:function(e){var t=e.target;return this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type?e.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return rt.event.remove(this,"._change"),!qt.test(this.nodeName)}}),nt.focusinBubbles||rt.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){rt.event.simulate(t,e.target,rt.event.fix(e),!0)};rt.event.special[t]={setup:function(){var i=this.ownerDocument||this,r=rt._data(i,t);r||i.addEventListener(e,n,!0),rt._data(i,t,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this,r=rt._data(i,t)-1;r?rt._data(i,t,r):(i.removeEventListener(e,n,!0),rt._removeData(i,t))}}}),rt.fn.extend({on:function(e,t,n,i,r){var o,s;if("object"==typeof e){"string"!=typeof t&&(n=n||t,t=void 0);for(o in e)this.on(o,t,n,e[o],r);return this}if(null==n&&null==i?(i=t,n=t=void 0):null==i&&("string"==typeof t?(i=n,n=void 0):(i=n,n=t,t=void 0)),i===!1)i=f;else if(!i)return this;return 1===r&&(s=i,i=function(e){return rt().off(e),s.apply(this,arguments)},i.guid=s.guid||(s.guid=rt.guid++)),this.each(function(){rt.event.add(this,e,i,n,t)})},one:function(e,t,n,i){return this.on(e,t,n,i,1)},off:function(e,t,n){var i,r;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,rt(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return(t===!1||"function"==typeof t)&&(n=t,t=void 0),n===!1&&(n=f),this.each(function(){rt.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){rt.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?rt.event.trigger(e,t,n,!0):void 0}});var Ot="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",It=/ jQuery\d+="(?:null|\d+)"/g,Lt=new RegExp("<(?:"+Ot+")[\\s/>]","i"),Dt=/^\s+/,Ft=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Bt=/<([\w:]+)/,Ht=/<tbody/i,Vt=/<|&#?\w+;/,$t=/<(?:script|style|link)/i,zt=/checked\s*(?:[^=]|=\s*.checked.)/i,Ut=/^$|\/(?:java|ecma)script/i,Wt=/^true\/(.*)/,Xt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Qt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:nt.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Kt=m(dt),Yt=Kt.appendChild(dt.createElement("div"));Qt.optgroup=Qt.option,Qt.tbody=Qt.tfoot=Qt.colgroup=Qt.caption=Qt.thead,Qt.th=Qt.td,rt.extend({clone:function(e,t,n){var i,r,o,s,a,u=rt.contains(e.ownerDocument,e);if(nt.html5Clone||rt.isXMLDoc(e)||!Lt.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(Yt.innerHTML=e.outerHTML,Yt.removeChild(o=Yt.firstChild)),!(nt.noCloneEvent&&nt.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||rt.isXMLDoc(e)))for(i=b(o),a=b(e),s=0;null!=(r=a[s]);++s)i[s]&&k(r,i[s]);if(t)if(n)for(a=a||b(e),i=i||b(o),s=0;null!=(r=a[s]);s++)G(r,i[s]);else G(e,o);return i=b(o,"script"),i.length>0&&w(i,!u&&b(e,"script")),i=a=r=null,o},buildFragment:function(e,t,n,i){for(var r,o,s,a,u,c,l,p=e.length,h=m(t),f=[],d=0;p>d;d++)if(o=e[d],o||0===o)if("object"===rt.type(o))rt.merge(f,o.nodeType?[o]:o);else if(Vt.test(o)){for(a=a||h.appendChild(t.createElement("div")),u=(Bt.exec(o)||["",""])[1].toLowerCase(),l=Qt[u]||Qt._default,a.innerHTML=l[1]+o.replace(Ft,"<$1></$2>")+l[2],r=l[0];r--;)a=a.lastChild;if(!nt.leadingWhitespace&&Dt.test(o)&&f.push(t.createTextNode(Dt.exec(o)[0])),!nt.tbody)for(o="table"!==u||Ht.test(o)?"<table>"!==l[1]||Ht.test(o)?0:a:a.firstChild,r=o&&o.childNodes.length;r--;)rt.nodeName(c=o.childNodes[r],"tbody")&&!c.childNodes.length&&o.removeChild(c);for(rt.merge(f,a.childNodes),a.textContent="";a.firstChild;)a.removeChild(a.firstChild);a=h.lastChild}else f.push(t.createTextNode(o));for(a&&h.removeChild(a),nt.appendChecked||rt.grep(b(f,"input"),g),d=0;o=f[d++];)if((!i||-1===rt.inArray(o,i))&&(s=rt.contains(o.ownerDocument,o),a=b(h.appendChild(o),"script"),s&&w(a),n))for(r=0;o=a[r++];)Ut.test(o.type||"")&&n.push(o);return a=null,h},cleanData:function(e,t){for(var n,i,r,o,s=0,a=rt.expando,u=rt.cache,c=nt.deleteExpando,l=rt.event.special;null!=(n=e[s]);s++)if((t||rt.acceptData(n))&&(r=n[a],o=r&&u[r])){if(o.events)for(i in o.events)l[i]?rt.event.remove(n,i):rt.removeEvent(n,i,o.handle);u[r]&&(delete u[r],c?delete n[a]:typeof n.removeAttribute!==kt?n.removeAttribute(a):n[a]=null,X.push(r))}}}),rt.fn.extend({text:function(e){return Mt(this,function(e){return void 0===e?rt.text(this):this.empty().append((this[0]&&this[0].ownerDocument||dt).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=y(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=y(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,i=e?rt.filter(e,this):this,r=0;null!=(n=i[r]);r++)t||1!==n.nodeType||rt.cleanData(b(n)),n.parentNode&&(t&&rt.contains(n.ownerDocument,n)&&w(b(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&rt.cleanData(b(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&rt.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return rt.clone(this,e,t)})},html:function(e){return Mt(this,function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e)return 1===t.nodeType?t.innerHTML.replace(It,""):void 0;if(!("string"!=typeof e||$t.test(e)||!nt.htmlSerialize&&Lt.test(e)||!nt.leadingWhitespace&&Dt.test(e)||Qt[(Bt.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(Ft,"<$1></$2>");try{for(;i>n;n++)t=this[n]||{},1===t.nodeType&&(rt.cleanData(b(t,!1)),t.innerHTML=e);t=0}catch(r){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,rt.cleanData(b(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=K.apply([],e);var n,i,r,o,s,a,u=0,c=this.length,l=this,p=c-1,h=e[0],f=rt.isFunction(h);if(f||c>1&&"string"==typeof h&&!nt.checkClone&&zt.test(h))return this.each(function(n){var i=l.eq(n);f&&(e[0]=h.call(this,n,i.html())),i.domManip(e,t)});if(c&&(a=rt.buildFragment(e,this[0].ownerDocument,!1,this),n=a.firstChild,1===a.childNodes.length&&(a=n),n)){for(o=rt.map(b(a,"script"),v),r=o.length;c>u;u++)i=a,u!==p&&(i=rt.clone(i,!0,!0),r&&rt.merge(o,b(i,"script"))),t.call(this[u],i,u);if(r)for(s=o[o.length-1].ownerDocument,rt.map(o,x),u=0;r>u;u++)i=o[u],Ut.test(i.type||"")&&!rt._data(i,"globalEval")&&rt.contains(s,i)&&(i.src?rt._evalUrl&&rt._evalUrl(i.src):rt.globalEval((i.text||i.textContent||i.innerHTML||"").replace(Xt,"")));a=n=null}return this}}),rt.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){rt.fn[e]=function(e){for(var n,i=0,r=[],o=rt(e),s=o.length-1;s>=i;i++)n=i===s?this:this.clone(!0),rt(o[i])[t](n),Y.apply(r,n.get());return this.pushStack(r)}});var Jt,Zt={};!function(){var e;nt.shrinkWrapBlocks=function(){if(null!=e)return e;e=!1;var t,n,i;return n=dt.getElementsByTagName("body")[0],n&&n.style?(t=dt.createElement("div"),i=dt.createElement("div"),i.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(t),typeof t.style.zoom!==kt&&(t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",t.appendChild(dt.createElement("div")).style.width="5px",e=3!==t.offsetWidth),n.removeChild(i),e):void 0}}();var en,tn,nn=/^margin/,rn=new RegExp("^("+Ct+")(?!px)[a-z%]+$","i"),on=/^(top|right|bottom|left)$/;e.getComputedStyle?(en=function(e){return e.ownerDocument.defaultView.getComputedStyle(e,null)},tn=function(e,t,n){var i,r,o,s,a=e.style;return n=n||en(e),s=n?n.getPropertyValue(t)||n[t]:void 0,n&&(""!==s||rt.contains(e.ownerDocument,e)||(s=rt.style(e,t)),rn.test(s)&&nn.test(t)&&(i=a.width,r=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=i,a.minWidth=r,a.maxWidth=o)),void 0===s?s:s+""}):dt.documentElement.currentStyle&&(en=function(e){return e.currentStyle},tn=function(e,t,n){var i,r,o,s,a=e.style;return n=n||en(e),s=n?n[t]:void 0,null==s&&a&&a[t]&&(s=a[t]),rn.test(s)&&!on.test(t)&&(i=a.left,r=e.runtimeStyle,o=r&&r.left,o&&(r.left=e.currentStyle.left),a.left="fontSize"===t?"1em":s,s=a.pixelLeft+"px",a.left=i,o&&(r.left=o)),void 0===s?s:s+""||"auto"}),function(){function t(){var t,n,i,r;n=dt.getElementsByTagName("body")[0],n&&n.style&&(t=dt.createElement("div"),i=dt.createElement("div"),i.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(t),t.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",o=s=!1,u=!0,e.getComputedStyle&&(o="1%"!==(e.getComputedStyle(t,null)||{}).top,s="4px"===(e.getComputedStyle(t,null)||{width:"4px"}).width,r=t.appendChild(dt.createElement("div")),r.style.cssText=t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",r.style.marginRight=r.style.width="0",t.style.width="1px",u=!parseFloat((e.getComputedStyle(r,null)||{}).marginRight)),t.innerHTML="<table><tr><td></td><td>t</td></tr></table>",r=t.getElementsByTagName("td"),r[0].style.cssText="margin:0;border:0;padding:0;display:none",a=0===r[0].offsetHeight,a&&(r[0].style.display="",r[1].style.display="none",a=0===r[0].offsetHeight),n.removeChild(i))
}var n,i,r,o,s,a,u;n=dt.createElement("div"),n.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",r=n.getElementsByTagName("a")[0],i=r&&r.style,i&&(i.cssText="float:left;opacity:.5",nt.opacity="0.5"===i.opacity,nt.cssFloat=!!i.cssFloat,n.style.backgroundClip="content-box",n.cloneNode(!0).style.backgroundClip="",nt.clearCloneStyle="content-box"===n.style.backgroundClip,nt.boxSizing=""===i.boxSizing||""===i.MozBoxSizing||""===i.WebkitBoxSizing,rt.extend(nt,{reliableHiddenOffsets:function(){return null==a&&t(),a},boxSizingReliable:function(){return null==s&&t(),s},pixelPosition:function(){return null==o&&t(),o},reliableMarginRight:function(){return null==u&&t(),u}}))}(),rt.swap=function(e,t,n,i){var r,o,s={};for(o in t)s[o]=e.style[o],e.style[o]=t[o];r=n.apply(e,i||[]);for(o in t)e.style[o]=s[o];return r};var sn=/alpha\([^)]*\)/i,an=/opacity\s*=\s*([^)]*)/,un=/^(none|table(?!-c[ea]).+)/,cn=new RegExp("^("+Ct+")(.*)$","i"),ln=new RegExp("^([+-])=("+Ct+")","i"),pn={position:"absolute",visibility:"hidden",display:"block"},hn={letterSpacing:"0",fontWeight:"400"},fn=["Webkit","O","Moz","ms"];rt.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=tn(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":nt.cssFloat?"cssFloat":"styleFloat"},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,o,s,a=rt.camelCase(t),u=e.style;if(t=rt.cssProps[a]||(rt.cssProps[a]=S(u,a)),s=rt.cssHooks[t]||rt.cssHooks[a],void 0===n)return s&&"get"in s&&void 0!==(r=s.get(e,!1,i))?r:u[t];if(o=typeof n,"string"===o&&(r=ln.exec(n))&&(n=(r[1]+1)*r[2]+parseFloat(rt.css(e,t)),o="number"),null!=n&&n===n&&("number"!==o||rt.cssNumber[a]||(n+="px"),nt.clearCloneStyle||""!==n||0!==t.indexOf("background")||(u[t]="inherit"),!(s&&"set"in s&&void 0===(n=s.set(e,n,i)))))try{u[t]=n}catch(c){}}},css:function(e,t,n,i){var r,o,s,a=rt.camelCase(t);return t=rt.cssProps[a]||(rt.cssProps[a]=S(e.style,a)),s=rt.cssHooks[t]||rt.cssHooks[a],s&&"get"in s&&(o=s.get(e,!0,n)),void 0===o&&(o=tn(e,t,i)),"normal"===o&&t in hn&&(o=hn[t]),""===n||n?(r=parseFloat(o),n===!0||rt.isNumeric(r)?r||0:o):o}}),rt.each(["height","width"],function(e,t){rt.cssHooks[t]={get:function(e,n,i){return n?un.test(rt.css(e,"display"))&&0===e.offsetWidth?rt.swap(e,pn,function(){return q(e,t,i)}):q(e,t,i):void 0},set:function(e,n,i){var r=i&&en(e);return M(e,n,i?P(e,t,i,nt.boxSizing&&"border-box"===rt.css(e,"boxSizing",!1,r),r):0)}}}),nt.opacity||(rt.cssHooks.opacity={get:function(e,t){return an.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,i=e.currentStyle,r=rt.isNumeric(t)?"alpha(opacity="+100*t+")":"",o=i&&i.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===rt.trim(o.replace(sn,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||i&&!i.filter)||(n.filter=sn.test(o)?o.replace(sn,r):o+" "+r)}}),rt.cssHooks.marginRight=C(nt.reliableMarginRight,function(e,t){return t?rt.swap(e,{display:"inline-block"},tn,[e,"marginRight"]):void 0}),rt.each({margin:"",padding:"",border:"Width"},function(e,t){rt.cssHooks[e+t]={expand:function(n){for(var i=0,r={},o="string"==typeof n?n.split(" "):[n];4>i;i++)r[e+St[i]+t]=o[i]||o[i-2]||o[0];return r}},nn.test(e)||(rt.cssHooks[e+t].set=M)}),rt.fn.extend({css:function(e,t){return Mt(this,function(e,t,n){var i,r,o={},s=0;if(rt.isArray(t)){for(i=en(e),r=t.length;r>s;s++)o[t[s]]=rt.css(e,t[s],!1,i);return o}return void 0!==n?rt.style(e,t,n):rt.css(e,t)},e,t,arguments.length>1)},show:function(){return A(this,!0)},hide:function(){return A(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){At(this)?rt(this).show():rt(this).hide()})}}),rt.Tween=T,T.prototype={constructor:T,init:function(e,t,n,i,r,o){this.elem=e,this.prop=n,this.easing=r||"swing",this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=o||(rt.cssNumber[n]?"":"px")},cur:function(){var e=T.propHooks[this.prop];return e&&e.get?e.get(this):T.propHooks._default.get(this)},run:function(e){var t,n=T.propHooks[this.prop];return this.pos=t=this.options.duration?rt.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):T.propHooks._default.set(this),this}},T.prototype.init.prototype=T.prototype,T.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=rt.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){rt.fx.step[e.prop]?rt.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[rt.cssProps[e.prop]]||rt.cssHooks[e.prop])?rt.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},T.propHooks.scrollTop=T.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},rt.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},rt.fx=T.prototype.init,rt.fx.step={};var dn,mn,bn=/^(?:toggle|show|hide)$/,gn=new RegExp("^(?:([+-])=|)("+Ct+")([a-z%]*)$","i"),yn=/queueHooks$/,vn=[O],xn={"*":[function(e,t){var n=this.createTween(e,t),i=n.cur(),r=gn.exec(t),o=r&&r[3]||(rt.cssNumber[e]?"":"px"),s=(rt.cssNumber[e]||"px"!==o&&+i)&&gn.exec(rt.css(n.elem,e)),a=1,u=20;if(s&&s[3]!==o){o=o||s[3],r=r||[],s=+i||1;do a=a||".5",s/=a,rt.style(n.elem,e,s+o);while(a!==(a=n.cur()/i)&&1!==a&&--u)}return r&&(s=n.start=+s||+i||0,n.unit=o,n.end=r[1]?s+(r[1]+1)*r[2]:+r[2]),n}]};rt.Animation=rt.extend(L,{tweener:function(e,t){rt.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,i=0,r=e.length;r>i;i++)n=e[i],xn[n]=xn[n]||[],xn[n].unshift(t)},prefilter:function(e,t){t?vn.unshift(e):vn.push(e)}}),rt.speed=function(e,t,n){var i=e&&"object"==typeof e?rt.extend({},e):{complete:n||!n&&t||rt.isFunction(e)&&e,duration:e,easing:n&&t||t&&!rt.isFunction(t)&&t};return i.duration=rt.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in rt.fx.speeds?rt.fx.speeds[i.duration]:rt.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){rt.isFunction(i.old)&&i.old.call(this),i.queue&&rt.dequeue(this,i.queue)},i},rt.fn.extend({fadeTo:function(e,t,n,i){return this.filter(At).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var r=rt.isEmptyObject(e),o=rt.speed(t,n,i),s=function(){var t=L(this,rt.extend({},e),o);(r||rt._data(this,"finish"))&&t.stop(!0)};return s.finish=s,r||o.queue===!1?this.each(s):this.queue(o.queue,s)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,r=null!=e&&e+"queueHooks",o=rt.timers,s=rt._data(this);if(r)s[r]&&s[r].stop&&i(s[r]);else for(r in s)s[r]&&s[r].stop&&yn.test(r)&&i(s[r]);for(r=o.length;r--;)o[r].elem!==this||null!=e&&o[r].queue!==e||(o[r].anim.stop(n),t=!1,o.splice(r,1));(t||!n)&&rt.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=rt._data(this),i=n[e+"queue"],r=n[e+"queueHooks"],o=rt.timers,s=i?i.length:0;for(n.finish=!0,rt.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;s>t;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish})}}),rt.each(["toggle","show","hide"],function(e,t){var n=rt.fn[t];rt.fn[t]=function(e,i,r){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(E(t,!0),e,i,r)}}),rt.each({slideDown:E("show"),slideUp:E("hide"),slideToggle:E("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){rt.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),rt.timers=[],rt.fx.tick=function(){var e,t=rt.timers,n=0;for(dn=rt.now();n<t.length;n++)e=t[n],e()||t[n]!==e||t.splice(n--,1);t.length||rt.fx.stop(),dn=void 0},rt.fx.timer=function(e){rt.timers.push(e),e()?rt.fx.start():rt.timers.pop()},rt.fx.interval=13,rt.fx.start=function(){mn||(mn=setInterval(rt.fx.tick,rt.fx.interval))},rt.fx.stop=function(){clearInterval(mn),mn=null},rt.fx.speeds={slow:600,fast:200,_default:400},rt.fn.delay=function(e,t){return e=rt.fx?rt.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var i=setTimeout(t,e);n.stop=function(){clearTimeout(i)}})},function(){var e,t,n,i,r;t=dt.createElement("div"),t.setAttribute("className","t"),t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",i=t.getElementsByTagName("a")[0],n=dt.createElement("select"),r=n.appendChild(dt.createElement("option")),e=t.getElementsByTagName("input")[0],i.style.cssText="top:1px",nt.getSetAttribute="t"!==t.className,nt.style=/top/.test(i.getAttribute("style")),nt.hrefNormalized="/a"===i.getAttribute("href"),nt.checkOn=!!e.value,nt.optSelected=r.selected,nt.enctype=!!dt.createElement("form").enctype,n.disabled=!0,nt.optDisabled=!r.disabled,e=dt.createElement("input"),e.setAttribute("value",""),nt.input=""===e.getAttribute("value"),e.value="t",e.setAttribute("type","radio"),nt.radioValue="t"===e.value}();var wn=/\r/g;rt.fn.extend({val:function(e){var t,n,i,r=this[0];{if(arguments.length)return i=rt.isFunction(e),this.each(function(n){var r;1===this.nodeType&&(r=i?e.call(this,n,rt(this).val()):e,null==r?r="":"number"==typeof r?r+="":rt.isArray(r)&&(r=rt.map(r,function(e){return null==e?"":e+""})),t=rt.valHooks[this.type]||rt.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,r,"value")||(this.value=r))});if(r)return t=rt.valHooks[r.type]||rt.valHooks[r.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(r,"value"))?n:(n=r.value,"string"==typeof n?n.replace(wn,""):null==n?"":n)}}}),rt.extend({valHooks:{option:{get:function(e){var t=rt.find.attr(e,"value");return null!=t?t:rt.trim(rt.text(e))}},select:{get:function(e){for(var t,n,i=e.options,r=e.selectedIndex,o="select-one"===e.type||0>r,s=o?null:[],a=o?r+1:i.length,u=0>r?a:o?r:0;a>u;u++)if(n=i[u],!(!n.selected&&u!==r||(nt.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&rt.nodeName(n.parentNode,"optgroup"))){if(t=rt(n).val(),o)return t;s.push(t)}return s},set:function(e,t){for(var n,i,r=e.options,o=rt.makeArray(t),s=r.length;s--;)if(i=r[s],rt.inArray(rt.valHooks.option.get(i),o)>=0)try{i.selected=n=!0}catch(a){i.scrollHeight}else i.selected=!1;return n||(e.selectedIndex=-1),r}}}}),rt.each(["radio","checkbox"],function(){rt.valHooks[this]={set:function(e,t){return rt.isArray(t)?e.checked=rt.inArray(rt(e).val(),t)>=0:void 0}},nt.checkOn||(rt.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var Gn,kn,_n=rt.expr.attrHandle,jn=/^(?:checked|selected)$/i,Cn=nt.getSetAttribute,Sn=nt.input;rt.fn.extend({attr:function(e,t){return Mt(this,rt.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){rt.removeAttr(this,e)})}}),rt.extend({attr:function(e,t,n){var i,r,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return typeof e.getAttribute===kt?rt.prop(e,t,n):(1===o&&rt.isXMLDoc(e)||(t=t.toLowerCase(),i=rt.attrHooks[t]||(rt.expr.match.bool.test(t)?kn:Gn)),void 0===n?i&&"get"in i&&null!==(r=i.get(e,t))?r:(r=rt.find.attr(e,t),null==r?void 0:r):null!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):void rt.removeAttr(e,t))},removeAttr:function(e,t){var n,i,r=0,o=t&&t.match(vt);if(o&&1===e.nodeType)for(;n=o[r++];)i=rt.propFix[n]||n,rt.expr.match.bool.test(n)?Sn&&Cn||!jn.test(n)?e[i]=!1:e[rt.camelCase("default-"+n)]=e[i]=!1:rt.attr(e,n,""),e.removeAttribute(Cn?n:i)},attrHooks:{type:{set:function(e,t){if(!nt.radioValue&&"radio"===t&&rt.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}}}),kn={set:function(e,t,n){return t===!1?rt.removeAttr(e,n):Sn&&Cn||!jn.test(n)?e.setAttribute(!Cn&&rt.propFix[n]||n,n):e[rt.camelCase("default-"+n)]=e[n]=!0,n}},rt.each(rt.expr.match.bool.source.match(/\w+/g),function(e,t){var n=_n[t]||rt.find.attr;_n[t]=Sn&&Cn||!jn.test(t)?function(e,t,i){var r,o;return i||(o=_n[t],_n[t]=r,r=null!=n(e,t,i)?t.toLowerCase():null,_n[t]=o),r}:function(e,t,n){return n?void 0:e[rt.camelCase("default-"+t)]?t.toLowerCase():null}}),Sn&&Cn||(rt.attrHooks.value={set:function(e,t,n){return rt.nodeName(e,"input")?void(e.defaultValue=t):Gn&&Gn.set(e,t,n)}}),Cn||(Gn={set:function(e,t,n){var i=e.getAttributeNode(n);return i||e.setAttributeNode(i=e.ownerDocument.createAttribute(n)),i.value=t+="","value"===n||t===e.getAttribute(n)?t:void 0}},_n.id=_n.name=_n.coords=function(e,t,n){var i;return n?void 0:(i=e.getAttributeNode(t))&&""!==i.value?i.value:null},rt.valHooks.button={get:function(e,t){var n=e.getAttributeNode(t);return n&&n.specified?n.value:void 0},set:Gn.set},rt.attrHooks.contenteditable={set:function(e,t,n){Gn.set(e,""===t?!1:t,n)}},rt.each(["width","height"],function(e,t){rt.attrHooks[t]={set:function(e,n){return""===n?(e.setAttribute(t,"auto"),n):void 0}}})),nt.style||(rt.attrHooks.style={get:function(e){return e.style.cssText||void 0},set:function(e,t){return e.style.cssText=t+""}});var An=/^(?:input|select|textarea|button|object)$/i,Mn=/^(?:a|area)$/i;rt.fn.extend({prop:function(e,t){return Mt(this,rt.prop,e,t,arguments.length>1)},removeProp:function(e){return e=rt.propFix[e]||e,this.each(function(){try{this[e]=void 0,delete this[e]}catch(t){}})}}),rt.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,n){var i,r,o,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return o=1!==s||!rt.isXMLDoc(e),o&&(t=rt.propFix[t]||t,r=rt.propHooks[t]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:e[t]=n:r&&"get"in r&&null!==(i=r.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=rt.find.attr(e,"tabindex");return t?parseInt(t,10):An.test(e.nodeName)||Mn.test(e.nodeName)&&e.href?0:-1}}}}),nt.hrefNormalized||rt.each(["href","src"],function(e,t){rt.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),nt.optSelected||(rt.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),rt.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){rt.propFix[this.toLowerCase()]=this}),nt.enctype||(rt.propFix.enctype="encoding");var Pn=/[\t\r\n\f]/g;rt.fn.extend({addClass:function(e){var t,n,i,r,o,s,a=0,u=this.length,c="string"==typeof e&&e;if(rt.isFunction(e))return this.each(function(t){rt(this).addClass(e.call(this,t,this.className))});if(c)for(t=(e||"").match(vt)||[];u>a;a++)if(n=this[a],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Pn," "):" ")){for(o=0;r=t[o++];)i.indexOf(" "+r+" ")<0&&(i+=r+" ");s=rt.trim(i),n.className!==s&&(n.className=s)}return this},removeClass:function(e){var t,n,i,r,o,s,a=0,u=this.length,c=0===arguments.length||"string"==typeof e&&e;if(rt.isFunction(e))return this.each(function(t){rt(this).removeClass(e.call(this,t,this.className))});if(c)for(t=(e||"").match(vt)||[];u>a;a++)if(n=this[a],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Pn," "):"")){for(o=0;r=t[o++];)for(;i.indexOf(" "+r+" ")>=0;)i=i.replace(" "+r+" "," ");s=e?rt.trim(i):"",n.className!==s&&(n.className=s)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):this.each(rt.isFunction(e)?function(n){rt(this).toggleClass(e.call(this,n,this.className,t),t)}:function(){if("string"===n)for(var t,i=0,r=rt(this),o=e.match(vt)||[];t=o[i++];)r.hasClass(t)?r.removeClass(t):r.addClass(t);else(n===kt||"boolean"===n)&&(this.className&&rt._data(this,"__className__",this.className),this.className=this.className||e===!1?"":rt._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(Pn," ").indexOf(t)>=0)return!0;return!1}}),rt.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){rt.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),rt.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var qn=rt.now(),Tn=/\?/,Rn=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;rt.parseJSON=function(t){if(e.JSON&&e.JSON.parse)return e.JSON.parse(t+"");var n,i=null,r=rt.trim(t+"");return r&&!rt.trim(r.replace(Rn,function(e,t,r,o){return n&&t&&(i=0),0===i?e:(n=r||t,i+=!o-!r,"")}))?Function("return "+r)():rt.error("Invalid JSON: "+t)},rt.parseXML=function(t){var n,i;if(!t||"string"!=typeof t)return null;try{e.DOMParser?(i=new DOMParser,n=i.parseFromString(t,"text/xml")):(n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(t))}catch(r){n=void 0}return n&&n.documentElement&&!n.getElementsByTagName("parsererror").length||rt.error("Invalid XML: "+t),n};var En,Nn,On=/#.*$/,In=/([?&])_=[^&]*/,Ln=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Dn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Fn=/^(?:GET|HEAD)$/,Bn=/^\/\//,Hn=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Vn={},$n={},zn="*/".concat("*");try{Nn=location.href}catch(Un){Nn=dt.createElement("a"),Nn.href="",Nn=Nn.href}En=Hn.exec(Nn.toLowerCase())||[],rt.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Nn,type:"GET",isLocal:Dn.test(En[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":zn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":rt.parseJSON,"text xml":rt.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?B(B(e,rt.ajaxSettings),t):B(rt.ajaxSettings,e)},ajaxPrefilter:D(Vn),ajaxTransport:D($n),ajax:function(e,t){function n(e,t,n,i){var r,l,g,y,x,G=t;2!==v&&(v=2,a&&clearTimeout(a),c=void 0,s=i||"",w.readyState=e>0?4:0,r=e>=200&&300>e||304===e,n&&(y=H(p,w,n)),y=V(p,y,w,r),r?(p.ifModified&&(x=w.getResponseHeader("Last-Modified"),x&&(rt.lastModified[o]=x),x=w.getResponseHeader("etag"),x&&(rt.etag[o]=x)),204===e||"HEAD"===p.type?G="nocontent":304===e?G="notmodified":(G=y.state,l=y.data,g=y.error,r=!g)):(g=G,(e||!G)&&(G="error",0>e&&(e=0))),w.status=e,w.statusText=(t||G)+"",r?d.resolveWith(h,[l,G,w]):d.rejectWith(h,[w,G,g]),w.statusCode(b),b=void 0,u&&f.trigger(r?"ajaxSuccess":"ajaxError",[w,p,r?l:g]),m.fireWith(h,[w,G]),u&&(f.trigger("ajaxComplete",[w,p]),--rt.active||rt.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var i,r,o,s,a,u,c,l,p=rt.ajaxSetup({},t),h=p.context||p,f=p.context&&(h.nodeType||h.jquery)?rt(h):rt.event,d=rt.Deferred(),m=rt.Callbacks("once memory"),b=p.statusCode||{},g={},y={},v=0,x="canceled",w={readyState:0,getResponseHeader:function(e){var t;if(2===v){if(!l)for(l={};t=Ln.exec(s);)l[t[1].toLowerCase()]=t[2];t=l[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===v?s:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return v||(e=y[n]=y[n]||e,g[e]=t),this},overrideMimeType:function(e){return v||(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>v)for(t in e)b[t]=[b[t],e[t]];else w.always(e[w.status]);return this},abort:function(e){var t=e||x;return c&&c.abort(t),n(0,t),this}};if(d.promise(w).complete=m.add,w.success=w.done,w.error=w.fail,p.url=((e||p.url||Nn)+"").replace(On,"").replace(Bn,En[1]+"//"),p.type=t.method||t.type||p.method||p.type,p.dataTypes=rt.trim(p.dataType||"*").toLowerCase().match(vt)||[""],null==p.crossDomain&&(i=Hn.exec(p.url.toLowerCase()),p.crossDomain=!(!i||i[1]===En[1]&&i[2]===En[2]&&(i[3]||("http:"===i[1]?"80":"443"))===(En[3]||("http:"===En[1]?"80":"443")))),p.data&&p.processData&&"string"!=typeof p.data&&(p.data=rt.param(p.data,p.traditional)),F(Vn,p,t,w),2===v)return w;u=p.global,u&&0===rt.active++&&rt.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Fn.test(p.type),o=p.url,p.hasContent||(p.data&&(o=p.url+=(Tn.test(o)?"&":"?")+p.data,delete p.data),p.cache===!1&&(p.url=In.test(o)?o.replace(In,"$1_="+qn++):o+(Tn.test(o)?"&":"?")+"_="+qn++)),p.ifModified&&(rt.lastModified[o]&&w.setRequestHeader("If-Modified-Since",rt.lastModified[o]),rt.etag[o]&&w.setRequestHeader("If-None-Match",rt.etag[o])),(p.data&&p.hasContent&&p.contentType!==!1||t.contentType)&&w.setRequestHeader("Content-Type",p.contentType),w.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+zn+"; q=0.01":""):p.accepts["*"]);for(r in p.headers)w.setRequestHeader(r,p.headers[r]);if(p.beforeSend&&(p.beforeSend.call(h,w,p)===!1||2===v))return w.abort();x="abort";for(r in{success:1,error:1,complete:1})w[r](p[r]);if(c=F($n,p,t,w)){w.readyState=1,u&&f.trigger("ajaxSend",[w,p]),p.async&&p.timeout>0&&(a=setTimeout(function(){w.abort("timeout")},p.timeout));try{v=1,c.send(g,n)}catch(G){if(!(2>v))throw G;n(-1,G)}}else n(-1,"No Transport");return w},getJSON:function(e,t,n){return rt.get(e,t,n,"json")},getScript:function(e,t){return rt.get(e,void 0,t,"script")}}),rt.each(["get","post"],function(e,t){rt[t]=function(e,n,i,r){return rt.isFunction(n)&&(r=r||i,i=n,n=void 0),rt.ajax({url:e,type:t,dataType:r,data:n,success:i})}}),rt.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){rt.fn[t]=function(e){return this.on(t,e)}}),rt._evalUrl=function(e){return rt.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},rt.fn.extend({wrapAll:function(e){if(rt.isFunction(e))return this.each(function(t){rt(this).wrapAll(e.call(this,t))});if(this[0]){var t=rt(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return this.each(rt.isFunction(e)?function(t){rt(this).wrapInner(e.call(this,t))}:function(){var t=rt(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=rt.isFunction(e);return this.each(function(n){rt(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){rt.nodeName(this,"body")||rt(this).replaceWith(this.childNodes)}).end()}}),rt.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!nt.reliableHiddenOffsets()&&"none"===(e.style&&e.style.display||rt.css(e,"display"))},rt.expr.filters.visible=function(e){return!rt.expr.filters.hidden(e)};var Wn=/%20/g,Xn=/\[\]$/,Qn=/\r?\n/g,Kn=/^(?:submit|button|image|reset|file)$/i,Yn=/^(?:input|select|textarea|keygen)/i;rt.param=function(e,t){var n,i=[],r=function(e,t){t=rt.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=rt.ajaxSettings&&rt.ajaxSettings.traditional),rt.isArray(e)||e.jquery&&!rt.isPlainObject(e))rt.each(e,function(){r(this.name,this.value)});else for(n in e)$(n,e[n],t,r);return i.join("&").replace(Wn,"+")},rt.fn.extend({serialize:function(){return rt.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=rt.prop(this,"elements");return e?rt.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!rt(this).is(":disabled")&&Yn.test(this.nodeName)&&!Kn.test(e)&&(this.checked||!Pt.test(e))}).map(function(e,t){var n=rt(this).val();return null==n?null:rt.isArray(n)?rt.map(n,function(e){return{name:t.name,value:e.replace(Qn,"\r\n")}}):{name:t.name,value:n.replace(Qn,"\r\n")}}).get()}}),rt.ajaxSettings.xhr=void 0!==e.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&z()||U()}:z;var Jn=0,Zn={},ei=rt.ajaxSettings.xhr();e.ActiveXObject&&rt(e).on("unload",function(){for(var e in Zn)Zn[e](void 0,!0)}),nt.cors=!!ei&&"withCredentials"in ei,ei=nt.ajax=!!ei,ei&&rt.ajaxTransport(function(e){if(!e.crossDomain||nt.cors){var t;return{send:function(n,i){var r,o=e.xhr(),s=++Jn;if(o.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(r in e.xhrFields)o[r]=e.xhrFields[r];e.mimeType&&o.overrideMimeType&&o.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(r in n)void 0!==n[r]&&o.setRequestHeader(r,n[r]+"");o.send(e.hasContent&&e.data||null),t=function(n,r){var a,u,c;if(t&&(r||4===o.readyState))if(delete Zn[s],t=void 0,o.onreadystatechange=rt.noop,r)4!==o.readyState&&o.abort();else{c={},a=o.status,"string"==typeof o.responseText&&(c.text=o.responseText);try{u=o.statusText}catch(l){u=""}a||!e.isLocal||e.crossDomain?1223===a&&(a=204):a=c.text?200:404}c&&i(a,u,c,o.getAllResponseHeaders())},e.async?4===o.readyState?setTimeout(t):o.onreadystatechange=Zn[s]=t:t()},abort:function(){t&&t(void 0,!0)}}}}),rt.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return rt.globalEval(e),e}}}),rt.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),rt.ajaxTransport("script",function(e){if(e.crossDomain){var t,n=dt.head||rt("head")[0]||dt.documentElement;return{send:function(i,r){t=dt.createElement("script"),t.async=!0,e.scriptCharset&&(t.charset=e.scriptCharset),t.src=e.url,t.onload=t.onreadystatechange=function(e,n){(n||!t.readyState||/loaded|complete/.test(t.readyState))&&(t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t),t=null,n||r(200,"success"))},n.insertBefore(t,n.firstChild)},abort:function(){t&&t.onload(void 0,!0)}}}});var ti=[],ni=/(=)\?(?=&|$)|\?\?/;rt.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=ti.pop()||rt.expando+"_"+qn++;return this[e]=!0,e}}),rt.ajaxPrefilter("json jsonp",function(t,n,i){var r,o,s,a=t.jsonp!==!1&&(ni.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&ni.test(t.data)&&"data");return a||"jsonp"===t.dataTypes[0]?(r=t.jsonpCallback=rt.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(ni,"$1"+r):t.jsonp!==!1&&(t.url+=(Tn.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return s||rt.error(r+" was not called"),s[0]},t.dataTypes[0]="json",o=e[r],e[r]=function(){s=arguments},i.always(function(){e[r]=o,t[r]&&(t.jsonpCallback=n.jsonpCallback,ti.push(r)),s&&rt.isFunction(o)&&o(s[0]),s=o=void 0}),"script"):void 0}),rt.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||dt;var i=pt.exec(e),r=!n&&[];return i?[t.createElement(i[1])]:(i=rt.buildFragment([e],t,r),r&&r.length&&rt(r).remove(),rt.merge([],i.childNodes))};var ii=rt.fn.load;rt.fn.load=function(e,t,n){if("string"!=typeof e&&ii)return ii.apply(this,arguments);var i,r,o,s=this,a=e.indexOf(" ");return a>=0&&(i=rt.trim(e.slice(a,e.length)),e=e.slice(0,a)),rt.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(o="POST"),s.length>0&&rt.ajax({url:e,type:o,dataType:"html",data:t}).done(function(e){r=arguments,s.html(i?rt("<div>").append(rt.parseHTML(e)).find(i):e)}).complete(n&&function(e,t){s.each(n,r||[e.responseText,t,e])}),this},rt.expr.filters.animated=function(e){return rt.grep(rt.timers,function(t){return e===t.elem}).length};var ri=e.document.documentElement;rt.offset={setOffset:function(e,t,n){var i,r,o,s,a,u,c,l=rt.css(e,"position"),p=rt(e),h={};"static"===l&&(e.style.position="relative"),a=p.offset(),o=rt.css(e,"top"),u=rt.css(e,"left"),c=("absolute"===l||"fixed"===l)&&rt.inArray("auto",[o,u])>-1,c?(i=p.position(),s=i.top,r=i.left):(s=parseFloat(o)||0,r=parseFloat(u)||0),rt.isFunction(t)&&(t=t.call(e,n,a)),null!=t.top&&(h.top=t.top-a.top+s),null!=t.left&&(h.left=t.left-a.left+r),"using"in t?t.using.call(e,h):p.css(h)}},rt.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){rt.offset.setOffset(this,e,t)});var t,n,i={top:0,left:0},r=this[0],o=r&&r.ownerDocument;if(o)return t=o.documentElement,rt.contains(t,r)?(typeof r.getBoundingClientRect!==kt&&(i=r.getBoundingClientRect()),n=W(o),{top:i.top+(n.pageYOffset||t.scrollTop)-(t.clientTop||0),left:i.left+(n.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}):i},position:function(){if(this[0]){var e,t,n={top:0,left:0},i=this[0];return"fixed"===rt.css(i,"position")?t=i.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),rt.nodeName(e[0],"html")||(n=e.offset()),n.top+=rt.css(e[0],"borderTopWidth",!0),n.left+=rt.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-rt.css(i,"marginTop",!0),left:t.left-n.left-rt.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||ri;e&&!rt.nodeName(e,"html")&&"static"===rt.css(e,"position");)e=e.offsetParent;return e||ri})}}),rt.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n=/Y/.test(t);rt.fn[e]=function(i){return Mt(this,function(e,i,r){var o=W(e);return void 0===r?o?t in o?o[t]:o.document.documentElement[i]:e[i]:void(o?o.scrollTo(n?rt(o).scrollLeft():r,n?r:rt(o).scrollTop()):e[i]=r)},e,i,arguments.length,null)}}),rt.each(["top","left"],function(e,t){rt.cssHooks[t]=C(nt.pixelPosition,function(e,n){return n?(n=tn(e,t),rn.test(n)?rt(e).position()[t]+"px":n):void 0})}),rt.each({Height:"height",Width:"width"},function(e,t){rt.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,i){rt.fn[i]=function(i,r){var o=arguments.length&&(n||"boolean"!=typeof i),s=n||(i===!0||r===!0?"margin":"border");return Mt(this,function(t,n,i){var r;return rt.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(r=t.documentElement,Math.max(t.body["scroll"+e],r["scroll"+e],t.body["offset"+e],r["offset"+e],r["client"+e])):void 0===i?rt.css(t,n,s):rt.style(t,n,i,s)},t,o?i:void 0,o,null)}})}),rt.fn.size=function(){return this.length},rt.fn.andSelf=rt.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return rt});var oi=e.jQuery,si=e.$;return rt.noConflict=function(t){return e.$===rt&&(e.$=si),t&&e.jQuery===rt&&(e.jQuery=oi),rt},typeof t===kt&&(e.jQuery=e.$=rt),rt}),function(e,t){e.rails!==t&&e.error("jquery-ujs has already been loaded!");var n,i=e(document);e.rails=n={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with], a[data-disable]",buttonClickSelector:"button[data-remote]:not(form button), button[data-confirm]:not(form button)",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",disableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]",CSRFProtection:function(t){var n=e('meta[name="csrf-token"]').attr("content");n&&t.setRequestHeader("X-CSRF-Token",n)},refreshCSRFTokens:function(){var t=e("meta[name=csrf-token]").attr("content"),n=e("meta[name=csrf-param]").attr("content");e('form input[name="'+n+'"]').val(t)},fire:function(t,n,i){var r=e.Event(n);return t.trigger(r,i),r.result!==!1},confirm:function(e){return confirm(e)},ajax:function(t){return e.ajax(t)},href:function(e){return e.attr("href")},handleRemote:function(i){var r,o,s,a,u,c,l,p;
if(n.fire(i,"ajax:before")){if(a=i.data("cross-domain"),u=a===t?null:a,c=i.data("with-credentials")||null,l=i.data("type")||e.ajaxSettings&&e.ajaxSettings.dataType,i.is("form")){r=i.attr("method"),o=i.attr("action"),s=i.serializeArray();var h=i.data("ujs:submit-button");h&&(s.push(h),i.data("ujs:submit-button",null))}else i.is(n.inputChangeSelector)?(r=i.data("method"),o=i.data("url"),s=i.serialize(),i.data("params")&&(s=s+"&"+i.data("params"))):i.is(n.buttonClickSelector)?(r=i.data("method")||"get",o=i.data("url"),s=i.serialize(),i.data("params")&&(s=s+"&"+i.data("params"))):(r=i.data("method"),o=n.href(i),s=i.data("params")||null);return p={type:r||"GET",data:s,dataType:l,beforeSend:function(e,r){return r.dataType===t&&e.setRequestHeader("accept","*/*;q=0.5, "+r.accepts.script),n.fire(i,"ajax:beforeSend",[e,r])?void i.trigger("ajax:send",e):!1},success:function(e,t,n){i.trigger("ajax:success",[e,t,n])},complete:function(e,t){i.trigger("ajax:complete",[e,t])},error:function(e,t,n){i.trigger("ajax:error",[e,t,n])},crossDomain:u},c&&(p.xhrFields={withCredentials:c}),o&&(p.url=o),n.ajax(p)}return!1},handleMethod:function(i){var r=n.href(i),o=i.data("method"),s=i.attr("target"),a=e("meta[name=csrf-token]").attr("content"),u=e("meta[name=csrf-param]").attr("content"),c=e('<form method="post" action="'+r+'"></form>'),l='<input name="_method" value="'+o+'" type="hidden" />';u!==t&&a!==t&&(l+='<input name="'+u+'" value="'+a+'" type="hidden" />'),s&&c.attr("target",s),c.hide().append(l).appendTo("body"),c.submit()},formElements:function(t,n){return t.is("form")?e(t[0].elements).filter(n):t.find(n)},disableFormElements:function(t){n.formElements(t,n.disableSelector).each(function(){n.disableFormElement(e(this))})},disableFormElement:function(e){var n,i;n=e.is("button")?"html":"val",i=e.data("disable-with"),e.data("ujs:enable-with",e[n]()),i!==t&&e[n](i),e.prop("disabled",!0)},enableFormElements:function(t){n.formElements(t,n.enableSelector).each(function(){n.enableFormElement(e(this))})},enableFormElement:function(e){var t=e.is("button")?"html":"val";e.data("ujs:enable-with")&&e[t](e.data("ujs:enable-with")),e.prop("disabled",!1)},allowAction:function(e){var t,i=e.data("confirm"),r=!1;return i?(n.fire(e,"confirm")&&(r=n.confirm(i),t=n.fire(e,"confirm:complete",[r])),r&&t):!0},blankInputs:function(t,n,i){var r,o,s=e(),a=n||"input,textarea",u=t.find(a);return u.each(function(){if(r=e(this),o=r.is("input[type=checkbox],input[type=radio]")?r.is(":checked"):r.val(),!o==!i){if(r.is("input[type=radio]")&&u.filter('input[type=radio]:checked[name="'+r.attr("name")+'"]').length)return!0;s=s.add(r)}}),s.length?s:!1},nonBlankInputs:function(e,t){return n.blankInputs(e,t,!0)},stopEverything:function(t){return e(t.target).trigger("ujs:everythingStopped"),t.stopImmediatePropagation(),!1},disableElement:function(e){var i=e.data("disable-with");e.data("ujs:enable-with",e.html()),i!==t&&e.html(i),e.bind("click.railsDisable",function(e){return n.stopEverything(e)})},enableElement:function(e){e.data("ujs:enable-with")!==t&&(e.html(e.data("ujs:enable-with")),e.removeData("ujs:enable-with")),e.unbind("click.railsDisable")}},n.fire(i,"rails:attachBindings")&&(e.ajaxPrefilter(function(e,t,i){e.crossDomain||n.CSRFProtection(i)}),i.delegate(n.linkDisableSelector,"ajax:complete",function(){n.enableElement(e(this))}),i.delegate(n.buttonDisableSelector,"ajax:complete",function(){n.enableFormElement(e(this))}),i.delegate(n.linkClickSelector,"click.rails",function(i){var r=e(this),o=r.data("method"),s=r.data("params"),a=i.metaKey||i.ctrlKey;if(!n.allowAction(r))return n.stopEverything(i);if(!a&&r.is(n.linkDisableSelector)&&n.disableElement(r),r.data("remote")!==t){if(a&&(!o||"GET"===o)&&!s)return!0;var u=n.handleRemote(r);return u===!1?n.enableElement(r):u.error(function(){n.enableElement(r)}),!1}return r.data("method")?(n.handleMethod(r),!1):void 0}),i.delegate(n.buttonClickSelector,"click.rails",function(t){var i=e(this);if(!n.allowAction(i))return n.stopEverything(t);i.is(n.buttonDisableSelector)&&n.disableFormElement(i);var r=n.handleRemote(i);return r===!1?n.enableFormElement(i):r.error(function(){n.enableFormElement(i)}),!1}),i.delegate(n.inputChangeSelector,"change.rails",function(t){var i=e(this);return n.allowAction(i)?(n.handleRemote(i),!1):n.stopEverything(t)}),i.delegate(n.formSubmitSelector,"submit.rails",function(i){var r,o,s=e(this),a=s.data("remote")!==t;if(!n.allowAction(s))return n.stopEverything(i);if(s.attr("novalidate")==t&&(r=n.blankInputs(s,n.requiredInputSelector),r&&n.fire(s,"ajax:aborted:required",[r])))return n.stopEverything(i);if(a){if(o=n.nonBlankInputs(s,n.fileInputSelector)){setTimeout(function(){n.disableFormElements(s)},13);var u=n.fire(s,"ajax:aborted:file",[o]);return u||setTimeout(function(){n.enableFormElements(s)},13),u}return n.handleRemote(s),!1}setTimeout(function(){n.disableFormElements(s)},13)}),i.delegate(n.formInputClickSelector,"click.rails",function(t){var i=e(this);if(!n.allowAction(i))return n.stopEverything(t);var r=i.attr("name"),o=r?{name:r,value:i.val()}:null;i.closest("form").data("ujs:submit-button",o)}),i.delegate(n.formSubmitSelector,"ajax:send.rails",function(t){this==t.target&&n.disableFormElements(e(this))}),i.delegate(n.formSubmitSelector,"ajax:complete.rails",function(t){this==t.target&&n.enableFormElements(e(this))}),e(function(){n.refreshCSRFTokens()}))}(jQuery),+function(e){"use strict";function t(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(void 0!==e.style[n])return{end:t[n]};return!1}e.fn.emulateTransitionEnd=function(t){var n=!1,i=this;e(this).one(e.support.transition.end,function(){n=!0});var r=function(){n||e(i).trigger(e.support.transition.end)};return setTimeout(r,t),this},e(function(){e.support.transition=t()})}(jQuery),+function(e){"use strict";var t='[data-dismiss="alert"]',n=function(n){e(n).on("click",t,this.close)};n.prototype.close=function(t){function n(){o.trigger("closed.bs.alert").remove()}var i=e(this),r=i.attr("data-target");r||(r=i.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,""));var o=e(r);t&&t.preventDefault(),o.length||(o=i.hasClass("alert")?i:i.parent()),o.trigger(t=e.Event("close.bs.alert")),t.isDefaultPrevented()||(o.removeClass("in"),e.support.transition&&o.hasClass("fade")?o.one(e.support.transition.end,n).emulateTransitionEnd(150):n())};var i=e.fn.alert;e.fn.alert=function(t){return this.each(function(){var i=e(this),r=i.data("bs.alert");r||i.data("bs.alert",r=new n(this)),"string"==typeof t&&r[t].call(i)})},e.fn.alert.Constructor=n,e.fn.alert.noConflict=function(){return e.fn.alert=i,this},e(document).on("click.bs.alert.data-api",t,n.prototype.close)}(jQuery),+function(e){"use strict";var t=function(t,n){this.options=n,this.$element=e(t),this.$backdrop=this.isShown=null,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};t.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},t.prototype.toggle=function(e){return this[this.isShown?"hide":"show"](e)},t.prototype.show=function(t){var n=this,i=e.Event("show.bs.modal",{relatedTarget:t});this.$element.trigger(i),this.isShown||i.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.backdrop(function(){var i=e.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(document.body),n.$element.show().scrollTop(0),i&&n.$element[0].offsetWidth,n.$element.addClass("in").attr("aria-hidden",!1),n.enforceFocus();var r=e.Event("shown.bs.modal",{relatedTarget:t});i?n.$element.find(".modal-dialog").one(e.support.transition.end,function(){n.$element.focus().trigger(r)}).emulateTransitionEnd(300):n.$element.focus().trigger(r)}))},t.prototype.hide=function(t){t&&t.preventDefault(),t=e.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one(e.support.transition.end,e.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},t.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.focus()},this))},t.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",e.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},t.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.removeBackdrop(),e.$element.trigger("hidden.bs.modal")})},t.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},t.prototype.backdrop=function(t){var n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=e.support.transition&&n;if(this.$backdrop=e('<div class="modal-backdrop '+n+'" />').appendTo(document.body),this.$element.on("click.dismiss.bs.modal",e.proxy(function(e){e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;i?this.$backdrop.one(e.support.transition.end,t).emulateTransitionEnd(150):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e.support.transition.end,t).emulateTransitionEnd(150):t()):t&&t()};var n=e.fn.modal;e.fn.modal=function(n,i){return this.each(function(){var r=e(this),o=r.data("bs.modal"),s=e.extend({},t.DEFAULTS,r.data(),"object"==typeof n&&n);o||r.data("bs.modal",o=new t(this,s)),"string"==typeof n?o[n](i):s.show&&o.show(i)})},e.fn.modal.Constructor=t,e.fn.modal.noConflict=function(){return e.fn.modal=n,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(t){var n=e(this),i=n.attr("href"),r=e(n.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),o=r.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(i)&&i},r.data(),n.data());n.is("a")&&t.preventDefault(),r.modal(o,this).one("hide",function(){n.is(":visible")&&n.focus()})}),e(document).on("show.bs.modal",".modal",function(){e(document.body).addClass("modal-open")}).on("hidden.bs.modal",".modal",function(){e(document.body).removeClass("modal-open")})}(jQuery),+function(e){"use strict";function t(t){e(i).remove(),e(r).each(function(){var i=n(e(this)),r={relatedTarget:this};i.hasClass("open")&&(i.trigger(t=e.Event("hide.bs.dropdown",r)),t.isDefaultPrevented()||i.removeClass("open").trigger("hidden.bs.dropdown",r))})}function n(t){var n=t.attr("data-target");n||(n=t.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var i=n&&e(n);return i&&i.length?i:t.parent()}var i=".dropdown-backdrop",r="[data-toggle=dropdown]",o=function(t){e(t).on("click.bs.dropdown",this.toggle)};o.prototype.toggle=function(i){var r=e(this);if(!r.is(".disabled, :disabled")){var o=n(r),s=o.hasClass("open");if(t(),!s){"ontouchstart"in document.documentElement&&!o.closest(".navbar-nav").length&&e('<div class="dropdown-backdrop"/>').insertAfter(e(this)).on("click",t);var a={relatedTarget:this};if(o.trigger(i=e.Event("show.bs.dropdown",a)),i.isDefaultPrevented())return;o.toggleClass("open").trigger("shown.bs.dropdown",a),r.focus()}return!1}},o.prototype.keydown=function(t){if(/(38|40|27)/.test(t.keyCode)){var i=e(this);if(t.preventDefault(),t.stopPropagation(),!i.is(".disabled, :disabled")){var o=n(i),s=o.hasClass("open");if(!s||s&&27==t.keyCode)return 27==t.which&&o.find(r).focus(),i.click();var a=" li:not(.divider):visible a",u=o.find("[role=menu]"+a+", [role=listbox]"+a);if(u.length){var c=u.index(u.filter(":focus"));38==t.keyCode&&c>0&&c--,40==t.keyCode&&c<u.length-1&&c++,~c||(c=0),u.eq(c).focus()}}}};var s=e.fn.dropdown;e.fn.dropdown=function(t){return this.each(function(){var n=e(this),i=n.data("bs.dropdown");i||n.data("bs.dropdown",i=new o(this)),"string"==typeof t&&i[t].call(n)})},e.fn.dropdown.Constructor=o,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=s,this},e(document).on("click.bs.dropdown.data-api",t).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",r,o.prototype.toggle).on("keydown.bs.dropdown.data-api",r+", [role=menu], [role=listbox]",o.prototype.keydown)}(jQuery),+function(e){"use strict";function t(n,i){var r,o=e.proxy(this.process,this);this.$element=e(e(n).is("body")?window:n),this.$body=e("body"),this.$scrollElement=this.$element.on("scroll.bs.scroll-spy.data-api",o),this.options=e.extend({},t.DEFAULTS,i),this.selector=(this.options.target||(r=e(n).attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.offsets=e([]),this.targets=e([]),this.activeTarget=null,this.refresh(),this.process()}t.DEFAULTS={offset:10},t.prototype.refresh=function(){var t=this.$element[0]==window?"offset":"position";this.offsets=e([]),this.targets=e([]);{var n=this;this.$body.find(this.selector).map(function(){var i=e(this),r=i.data("target")||i.attr("href"),o=/^#./.test(r)&&e(r);return o&&o.length&&o.is(":visible")&&[[o[t]().top+(!e.isWindow(n.$scrollElement.get(0))&&n.$scrollElement.scrollTop()),r]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){n.offsets.push(this[0]),n.targets.push(this[1])})}},t.prototype.process=function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,n=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,i=n-this.$scrollElement.height(),r=this.offsets,o=this.targets,s=this.activeTarget;if(t>=i)return s!=(e=o.last()[0])&&this.activate(e);if(s&&t<=r[0])return s!=(e=o[0])&&this.activate(e);for(e=r.length;e--;)s!=o[e]&&t>=r[e]&&(!r[e+1]||t<=r[e+1])&&this.activate(o[e])},t.prototype.activate=function(t){this.activeTarget=t,e(this.selector).parentsUntil(this.options.target,".active").removeClass("active");var n=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',i=e(n).parents("li").addClass("active");i.parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active")),i.trigger("activate.bs.scrollspy")};var n=e.fn.scrollspy;e.fn.scrollspy=function(n){return this.each(function(){var i=e(this),r=i.data("bs.scrollspy"),o="object"==typeof n&&n;r||i.data("bs.scrollspy",r=new t(this,o)),"string"==typeof n&&r[n]()})},e.fn.scrollspy.Constructor=t,e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=n,this},e(window).on("load",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);t.scrollspy(t.data())})})}(jQuery),+function(e){"use strict";var t=function(t){this.element=e(t)};t.prototype.show=function(){var t=this.element,n=t.closest("ul:not(.dropdown-menu)"),i=t.data("target");if(i||(i=t.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var r=n.find(".active:last a")[0],o=e.Event("show.bs.tab",{relatedTarget:r});if(t.trigger(o),!o.isDefaultPrevented()){var s=e(i);this.activate(t.parent("li"),n),this.activate(s,s.parent(),function(){t.trigger({type:"shown.bs.tab",relatedTarget:r})})}}},t.prototype.activate=function(t,n,i){function r(){o.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),t.addClass("active"),s?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active"),i&&i()}var o=n.find("> .active"),s=i&&e.support.transition&&o.hasClass("fade");s?o.one(e.support.transition.end,r).emulateTransitionEnd(150):r(),o.removeClass("in")};var n=e.fn.tab;e.fn.tab=function(n){return this.each(function(){var i=e(this),r=i.data("bs.tab");r||i.data("bs.tab",r=new t(this)),"string"==typeof n&&r[n]()})},e.fn.tab.Constructor=t,e.fn.tab.noConflict=function(){return e.fn.tab=n,this},e(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(t){t.preventDefault(),e(this).tab("show")})}(jQuery),+function(e){"use strict";var t=function(e,t){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",e,t)};t.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},t.prototype.init=function(t,n,i){this.enabled=!0,this.type=t,this.$element=e(n),this.options=this.getOptions(i);for(var r=this.options.trigger.split(" "),o=r.length;o--;){var s=r[o];if("click"==s)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=s){var a="hover"==s?"mouseenter":"focusin",u="hover"==s?"mouseleave":"focusout";this.$element.on(a+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(u+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},t.prototype.getDefaults=function(){return t.DEFAULTS},t.prototype.getOptions=function(t){return t=e.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},t.prototype.getDelegateOptions=function(){var t={},n=this.getDefaults();return this._options&&e.each(this._options,function(e,i){n[e]!=i&&(t[e]=i)}),t},t.prototype.enter=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?void(n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)):n.show()},t.prototype.leave=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?void(n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)):n.hide()},t.prototype.show=function(){var t=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){if(this.$element.trigger(t),t.isDefaultPrevented())return;var n=this,i=this.tip();this.setContent(),this.options.animation&&i.addClass("fade");var r="function"==typeof this.options.placement?this.options.placement.call(this,i[0],this.$element[0]):this.options.placement,o=/\s?auto?\s?/i,s=o.test(r);s&&(r=r.replace(o,"")||"top"),i.detach().css({top:0,left:0,display:"block"}).addClass(r),this.options.container?i.appendTo(this.options.container):i.insertAfter(this.$element);var a=this.getPosition(),u=i[0].offsetWidth,c=i[0].offsetHeight;if(s){var l=this.$element.parent(),p=r,h=document.documentElement.scrollTop||document.body.scrollTop,f="body"==this.options.container?window.innerWidth:l.outerWidth(),d="body"==this.options.container?window.innerHeight:l.outerHeight(),m="body"==this.options.container?0:l.offset().left;r="bottom"==r&&a.top+a.height+c-h>d?"top":"top"==r&&a.top-h-c<0?"bottom":"right"==r&&a.right+u>f?"left":"left"==r&&a.left-u<m?"right":r,i.removeClass(p).addClass(r)}var b=this.getCalculatedOffset(r,a,u,c);this.applyPlacement(b,r),this.hoverState=null;var g=function(){n.$element.trigger("shown.bs."+n.type)};e.support.transition&&this.$tip.hasClass("fade")?i.one(e.support.transition.end,g).emulateTransitionEnd(150):g()}},t.prototype.applyPlacement=function(t,n){var i,r=this.tip(),o=r[0].offsetWidth,s=r[0].offsetHeight,a=parseInt(r.css("margin-top"),10),u=parseInt(r.css("margin-left"),10);isNaN(a)&&(a=0),isNaN(u)&&(u=0),t.top=t.top+a,t.left=t.left+u,e.offset.setOffset(r[0],e.extend({using:function(e){r.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),r.addClass("in");var c=r[0].offsetWidth,l=r[0].offsetHeight;if("top"==n&&l!=s&&(i=!0,t.top=t.top+s-l),/bottom|top/.test(n)){var p=0;t.left<0&&(p=-2*t.left,t.left=0,r.offset(t),c=r[0].offsetWidth,l=r[0].offsetHeight),this.replaceArrow(p-o+c,c,"left")}else this.replaceArrow(l-s,l,"top");i&&r.offset(t)},t.prototype.replaceArrow=function(e,t,n){this.arrow().css(n,e?50*(1-e/t)+"%":"")},t.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},t.prototype.hide=function(){function t(){"in"!=n.hoverState&&i.detach(),n.$element.trigger("hidden.bs."+n.type)}var n=this,i=this.tip(),r=e.Event("hide.bs."+this.type);return this.$element.trigger(r),r.isDefaultPrevented()?void 0:(i.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?i.one(e.support.transition.end,t).emulateTransitionEnd(150):t(),this.hoverState=null,this)},t.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},t.prototype.hasContent=function(){return this.getTitle()},t.prototype.getPosition=function(){var t=this.$element[0];return e.extend({},"function"==typeof t.getBoundingClientRect?t.getBoundingClientRect():{width:t.offsetWidth,height:t.offsetHeight},this.$element.offset())},t.prototype.getCalculatedOffset=function(e,t,n,i){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-n/2}:"top"==e?{top:t.top-i,left:t.left+t.width/2-n/2}:"left"==e?{top:t.top+t.height/2-i/2,left:t.left-n}:{top:t.top+t.height/2-i/2,left:t.left+t.width}},t.prototype.getTitle=function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||("function"==typeof n.title?n.title.call(t[0]):n.title)},t.prototype.tip=function(){return this.$tip=this.$tip||e(this.options.template)},t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},t.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},t.prototype.enable=function(){this.enabled=!0},t.prototype.disable=function(){this.enabled=!1},t.prototype.toggleEnabled=function(){this.enabled=!this.enabled},t.prototype.toggle=function(t){var n=t?e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;n.tip().hasClass("in")?n.leave(n):n.enter(n)},t.prototype.destroy=function(){clearTimeout(this.timeout),this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var n=e.fn.tooltip;e.fn.tooltip=function(n){return this.each(function(){var i=e(this),r=i.data("bs.tooltip"),o="object"==typeof n&&n;(r||"destroy"!=n)&&(r||i.data("bs.tooltip",r=new t(this,o)),"string"==typeof n&&r[n]())})},e.fn.tooltip.Constructor=t,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=n,this}}(jQuery),+function(e){"use strict";var t=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");t.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),t.prototype=e.extend({},e.fn.tooltip.Constructor.prototype),t.prototype.constructor=t,t.prototype.getDefaults=function(){return t.DEFAULTS},t.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content")[this.options.html?"string"==typeof n?"html":"append":"text"](n),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},t.prototype.hasContent=function(){return this.getTitle()||this.getContent()},t.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||("function"==typeof t.content?t.content.call(e[0]):t.content)},t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},t.prototype.tip=function(){return this.$tip||(this.$tip=e(this.options.template)),this.$tip};var n=e.fn.popover;e.fn.popover=function(n){return this.each(function(){var i=e(this),r=i.data("bs.popover"),o="object"==typeof n&&n;(r||"destroy"!=n)&&(r||i.data("bs.popover",r=new t(this,o)),"string"==typeof n&&r[n]())})},e.fn.popover.Constructor=t,e.fn.popover.noConflict=function(){return e.fn.popover=n,this}}(jQuery),+function(e){"use strict";var t=function(n,i){this.$element=e(n),this.options=e.extend({},t.DEFAULTS,i),this.isLoading=!1};t.DEFAULTS={loadingText:"loading..."},t.prototype.setState=function(t){var n="disabled",i=this.$element,r=i.is("input")?"val":"html",o=i.data();t+="Text",o.resetText||i.data("resetText",i[r]()),i[r](o[t]||this.options[t]),setTimeout(e.proxy(function(){"loadingText"==t?(this.isLoading=!0,i.addClass(n).attr(n,n)):this.isLoading&&(this.isLoading=!1,i.removeClass(n).removeAttr(n))},this),0)},t.prototype.toggle=function(){var e=!0,t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var n=this.$element.find("input");"radio"==n.prop("type")&&(n.prop("checked")&&this.$element.hasClass("active")?e=!1:t.find(".active").removeClass("active")),e&&n.prop("checked",!this.$element.hasClass("active")).trigger("change")}e&&this.$element.toggleClass("active")};var n=e.fn.button;e.fn.button=function(n){return this.each(function(){var i=e(this),r=i.data("bs.button"),o="object"==typeof n&&n;r||i.data("bs.button",r=new t(this,o)),"toggle"==n?r.toggle():n&&r.setState(n)})},e.fn.button.Constructor=t,e.fn.button.noConflict=function(){return e.fn.button=n,this},e(document).on("click.bs.button.data-api","[data-toggle^=button]",function(t){var n=e(t.target);n.hasClass("btn")||(n=n.closest(".btn")),n.button("toggle"),t.preventDefault()})}(jQuery),+function(e){"use strict";var t=function(n,i){this.$element=e(n),this.options=e.extend({},t.DEFAULTS,i),this.transitioning=null,this.options.parent&&(this.$parent=e(this.options.parent)),this.options.toggle&&this.toggle()};t.DEFAULTS={toggle:!0},t.prototype.dimension=function(){var e=this.$element.hasClass("width");return e?"width":"height"},t.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var t=e.Event("show.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var n=this.$parent&&this.$parent.find("> .panel > .in");if(n&&n.length){var i=n.data("bs.collapse");if(i&&i.transitioning)return;n.collapse("hide"),i||n.data("bs.collapse",null)}var r=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[r](0),this.transitioning=1;var o=function(){this.$element.removeClass("collapsing").addClass("collapse in")[r]("auto"),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return o.call(this);var s=e.camelCase(["scroll",r].join("-"));this.$element.one(e.support.transition.end,e.proxy(o,this)).emulateTransitionEnd(350)[r](this.$element[0][s])}}},t.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=e.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var i=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return e.support.transition?void this.$element[n](0).one(e.support.transition.end,e.proxy(i,this)).emulateTransitionEnd(350):i.call(this)}}},t.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var n=e.fn.collapse;e.fn.collapse=function(n){return this.each(function(){var i=e(this),r=i.data("bs.collapse"),o=e.extend({},t.DEFAULTS,i.data(),"object"==typeof n&&n);!r&&o.toggle&&"show"==n&&(n=!n),r||i.data("bs.collapse",r=new t(this,o)),"string"==typeof n&&r[n]()})},e.fn.collapse.Constructor=t,e.fn.collapse.noConflict=function(){return e.fn.collapse=n,this},e(document).on("click.bs.collapse.data-api","[data-toggle=collapse]",function(t){var n,i=e(this),r=i.attr("data-target")||t.preventDefault()||(n=i.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""),o=e(r),s=o.data("bs.collapse"),a=s?"toggle":i.data(),u=i.attr("data-parent"),c=u&&e(u);s&&s.transitioning||(c&&c.find('[data-toggle=collapse][data-parent="'+u+'"]').not(i).addClass("collapsed"),i[o.hasClass("in")?"addClass":"removeClass"]("collapsed")),o.collapse(a)})}(jQuery),+function(e){"use strict";var t=function(t,n){this.$element=e(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=this.sliding=this.interval=this.$active=this.$items=null,"hover"==this.options.pause&&this.$element.on("mouseenter",e.proxy(this.pause,this)).on("mouseleave",e.proxy(this.cycle,this))};t.DEFAULTS={interval:5e3,pause:"hover",wrap:!0},t.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},t.prototype.getActiveIndex=function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},t.prototype.to=function(t){var n=this,i=this.getActiveIndex();return t>this.$items.length-1||0>t?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){n.to(t)}):i==t?this.pause().cycle():this.slide(t>i?"next":"prev",e(this.$items[t]))},t.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},t.prototype.next=function(){return this.sliding?void 0:this.slide("next")},t.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},t.prototype.slide=function(t,n){var i=this.$element.find(".item.active"),r=n||i[t](),o=this.interval,s="next"==t?"left":"right",a="next"==t?"first":"last",u=this;if(!r.length){if(!this.options.wrap)return;r=this.$element.find(".item")[a]()}if(r.hasClass("active"))return this.sliding=!1;var c=e.Event("slide.bs.carousel",{relatedTarget:r[0],direction:s});return this.$element.trigger(c),c.isDefaultPrevented()?void 0:(this.sliding=!0,o&&this.pause(),this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid.bs.carousel",function(){var t=e(u.$indicators.children()[u.getActiveIndex()]);t&&t.addClass("active")})),e.support.transition&&this.$element.hasClass("slide")?(r.addClass(t),r[0].offsetWidth,i.addClass(s),r.addClass(s),i.one(e.support.transition.end,function(){r.removeClass([t,s].join(" ")).addClass("active"),i.removeClass(["active",s].join(" ")),u.sliding=!1,setTimeout(function(){u.$element.trigger("slid.bs.carousel")},0)}).emulateTransitionEnd(1e3*i.css("transition-duration").slice(0,-1))):(i.removeClass("active"),r.addClass("active"),this.sliding=!1,this.$element.trigger("slid.bs.carousel")),o&&this.cycle(),this)};var n=e.fn.carousel;e.fn.carousel=function(n){return this.each(function(){var i=e(this),r=i.data("bs.carousel"),o=e.extend({},t.DEFAULTS,i.data(),"object"==typeof n&&n),s="string"==typeof n?n:o.slide;r||i.data("bs.carousel",r=new t(this,o)),"number"==typeof n?r.to(n):s?r[s]():o.interval&&r.pause().cycle()})},e.fn.carousel.Constructor=t,e.fn.carousel.noConflict=function(){return e.fn.carousel=n,this},e(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(t){var n,i=e(this),r=e(i.attr("data-target")||(n=i.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"")),o=e.extend({},r.data(),i.data()),s=i.attr("data-slide-to");s&&(o.interval=!1),r.carousel(o),(s=i.attr("data-slide-to"))&&r.data("bs.carousel").to(s),t.preventDefault()}),e(window).on("load",function(){e('[data-ride="carousel"]').each(function(){var t=e(this);t.carousel(t.data())})})}(jQuery),+function(e){"use strict";var t=function(n,i){this.options=e.extend({},t.DEFAULTS,i),this.$window=e(window).on("scroll.bs.affix.data-api",e.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",e.proxy(this.checkPositionWithEventLoop,this)),this.$element=e(n),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};t.RESET="affix affix-top affix-bottom",t.DEFAULTS={offset:0},t.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(t.RESET).addClass("affix");var e=this.$window.scrollTop(),n=this.$element.offset();return this.pinnedOffset=n.top-e},t.prototype.checkPositionWithEventLoop=function(){setTimeout(e.proxy(this.checkPosition,this),1)
},t.prototype.checkPosition=function(){if(this.$element.is(":visible")){var n=e(document).height(),i=this.$window.scrollTop(),r=this.$element.offset(),o=this.options.offset,s=o.top,a=o.bottom;"top"==this.affixed&&(r.top+=i),"object"!=typeof o&&(a=s=o),"function"==typeof s&&(s=o.top(this.$element)),"function"==typeof a&&(a=o.bottom(this.$element));var u=null!=this.unpin&&i+this.unpin<=r.top?!1:null!=a&&r.top+this.$element.height()>=n-a?"bottom":null!=s&&s>=i?"top":!1;if(this.affixed!==u){this.unpin&&this.$element.css("top","");var c="affix"+(u?"-"+u:""),l=e.Event(c+".bs.affix");this.$element.trigger(l),l.isDefaultPrevented()||(this.affixed=u,this.unpin="bottom"==u?this.getPinnedOffset():null,this.$element.removeClass(t.RESET).addClass(c).trigger(e.Event(c.replace("affix","affixed"))),"bottom"==u&&this.$element.offset({top:n-a-this.$element.height()}))}}};var n=e.fn.affix;e.fn.affix=function(n){return this.each(function(){var i=e(this),r=i.data("bs.affix"),o="object"==typeof n&&n;r||i.data("bs.affix",r=new t(this,o)),"string"==typeof n&&r[n]()})},e.fn.affix.Constructor=t,e.fn.affix.noConflict=function(){return e.fn.affix=n,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var t=e(this),n=t.data();n.offset=n.offset||{},n.offsetBottom&&(n.offset.bottom=n.offsetBottom),n.offsetTop&&(n.offset.top=n.offsetTop),t.affix(n)})})}(jQuery),function(){var e,t,n,i,r,o,s,a,u,c,l,p,h,f,d,m,b,g,y,v,x,w,G,k,_,j,C,S,A,M,P,q,T,R,E,N,O,I,L,D,F,B,H,V,$,z,U,W,X,Q,K,Y,J,Z=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1},et={}.hasOwnProperty,tt=function(e,t){function n(){this.constructor=e}for(var i in t)et.call(t,i)&&(e[i]=t[i]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},nt=[].slice;q={},h=10,W=!1,g=null,M=null,I=null,b=null,Y=null,i={BEFORE_CHANGE:"page:before-change",FETCH:"page:fetch",RECEIVE:"page:receive",CHANGE:"page:change",UPDATE:"page:update",LOAD:"page:load",RESTORE:"page:restore",BEFORE_UNLOAD:"page:before-unload",EXPIRE:"page:expire"},w=function(e){var t;return e=new n(e),H(),p(),W&&(t=X(e.absolute))?(G(t),k(e)):k(e,z)},X=function(e){var t;return t=q[e],t&&!t.transitionCacheDisabled?t:void 0},y=function(e){return null==e&&(e=!0),W=e},k=function(e,t){return null==t&&(t=function(){return function(){}}(this)),Q(i.FETCH,{url:e.absolute}),null!=Y&&Y.abort(),Y=new XMLHttpRequest,Y.open("GET",e.withoutHashForIE10compatibility(),!0),Y.setRequestHeader("Accept","text/html, application/xhtml+xml, application/xml"),Y.setRequestHeader("X-XHR-Referer",I),Y.onload=function(){var n;return Q(i.RECEIVE,{url:e.absolute}),(n=N())?(L(e),f.apply(null,x(n)),P(),D(),t(),Q(i.LOAD)):document.location.href=e.absolute},Y.onloadend=function(){return Y=null},Y.onerror=function(){return document.location.href=e.absolute},Y.send()},G=function(e){return null!=Y&&Y.abort(),f(e.title,e.body),O(e),Q(i.RESTORE)},p=function(){var e;return e=new n(g.url),q[e.absolute]={url:e.relative,body:document.body,title:document.title,positionY:window.pageYOffset,positionX:window.pageXOffset,cachedAt:(new Date).getTime(),transitionCacheDisabled:null!=document.querySelector("[data-no-transition-cache]")},m(h)},R=function(e){return null==e&&(e=h),/^[\d]+$/.test(e)?h=parseInt(e):void 0},m=function(e){var t,n,r,o,s,a;for(r=Object.keys(q),t=r.map(function(e){return q[e].cachedAt}).sort(function(e,t){return t-e}),a=[],o=0,s=r.length;s>o;o++)n=r[o],q[n].cachedAt<=t[e]&&(Q(i.EXPIRE,q[n]),a.push(delete q[n]));return a},f=function(t,n,r,o){return Q(i.BEFORE_UNLOAD),document.title=t,document.documentElement.replaceChild(n,document.body),null!=r&&e.update(r),U(),o&&v(),g=window.history.state,Q(i.CHANGE),Q(i.UPDATE)},v=function(){var e,t,n,i,r,o,s,a,u,c,l,p;for(o=Array.prototype.slice.call(document.body.querySelectorAll('script:not([data-turbolinks-eval="false"])')),s=0,u=o.length;u>s;s++)if(r=o[s],""===(l=r.type)||"text/javascript"===l){for(t=document.createElement("script"),p=r.attributes,a=0,c=p.length;c>a;a++)e=p[a],t.setAttribute(e.name,e.value);r.hasAttribute("async")||(t.async=!1),t.appendChild(document.createTextNode(r.innerHTML)),i=r.parentNode,n=r.nextSibling,i.removeChild(r),i.insertBefore(t,n)}},V=function(e){return e.innerHTML=e.innerHTML.replace(/<noscript[\S\s]*?<\/noscript>/gi,""),e},U=function(){var e,t;return e=(t=document.querySelectorAll("input[autofocus], textarea[autofocus]"))[t.length-1],e&&document.activeElement!==e?e.focus():void 0},L=function(e){return(e=new n(e)).absolute!==I?window.history.pushState({turbolinks:!0,url:e.absolute},"",e.absolute):void 0},D=function(){var e,t;return(e=Y.getResponseHeader("X-XHR-Redirected-To"))?(e=new n(e),t=e.hasNoHash()?document.location.hash:"",window.history.replaceState(g,"",e.href+t)):void 0},H=function(){return I=document.location.href},B=function(){return window.history.replaceState({turbolinks:!0,url:document.location.href},"",document.location.href)},F=function(){return g=window.history.state},P=function(){var e;return navigator.userAgent.match(/Firefox/)&&!(e=new n).hasNoHash()?(window.history.replaceState(g,"",e.withoutHash()),document.location.hash=e.hash):void 0},O=function(e){return window.scrollTo(e.positionX,e.positionY)},z=function(){return document.location.hash?document.location.href=document.location.href:window.scrollTo(0,0)},d=function(e){var t,n,i;if(null==e||"object"!=typeof e)return e;t=new e.constructor;for(n in e)i=e[n],t[n]=d(i);return t},E=function(e){var t,n;return t=(null!=(n=document.cookie.match(new RegExp(e+"=(\\w+)")))?n[1].toUpperCase():void 0)||"",document.cookie=e+"=; expires=Thu, 01-Jan-70 00:00:01 GMT; path=/",t},Q=function(e,t){var n;return"undefined"!=typeof Prototype&&Event.fire(document,e,t,!0),n=document.createEvent("Events"),t&&(n.data=t),n.initEvent(e,!0,!0),document.dispatchEvent(n)},T=function(e){return!Q(i.BEFORE_CHANGE,{url:e})},N=function(){var e,t,n,i,r,o;return t=function(){var e;return 400<=(e=Y.status)&&600>e},o=function(){var e;return null!=(e=Y.getResponseHeader("Content-Type"))&&e.match(/^(?:text\/html|application\/xhtml\+xml|application\/xml)(?:;|$)/)},i=function(e){var t,n,i,r,o;for(r=e.querySelector("head").childNodes,o=[],n=0,i=r.length;i>n;n++)t=r[n],null!=("function"==typeof t.getAttribute?t.getAttribute("data-turbolinks-track"):void 0)&&o.push(t.getAttribute("src")||t.getAttribute("href"));return o},e=function(e){var t;return M||(M=i(document)),t=i(e),t.length!==M.length||r(t,M).length!==M.length},r=function(e,t){var n,i,r,o,s;for(e.length>t.length&&(o=[t,e],e=o[0],t=o[1]),s=[],i=0,r=e.length;r>i;i++)n=e[i],Z.call(t,n)>=0&&s.push(n);return s},!t()&&o()&&(n=b(Y.responseText),n&&!e(n))?n:void 0},x=function(t){var n;return n=t.querySelector("title"),[null!=n?n.textContent:void 0,V(t.querySelector("body")),e.get(t).token,"runScripts"]},e={get:function(e){var t;return null==e&&(e=document),{node:t=e.querySelector('meta[name="csrf-token"]'),token:null!=t&&"function"==typeof t.getAttribute?t.getAttribute("content"):void 0}},update:function(e){var t;return t=this.get(),null!=t.token&&null!=e&&t.token!==e?t.node.setAttribute("content",e):void 0}},o=function(){var e,t,n,i,r,o,s,a,u,c;i=function(e){return(new DOMParser).parseFromString(e,"text/html")},t=function(e){var t;return t=document.implementation.createHTMLDocument(""),t.documentElement.innerHTML=e,t},r=function(e){var t;return t=document.implementation.createHTMLDocument(""),t.open("replace"),t.write(e),t.close(),t},n=function(e){var t,n,i,r,o,s;return i=(null!=(o=e.match(/<head[^>]*>([\s\S.]*)<\/head>/i))?o[0]:void 0)||"<head></head>",t=(null!=(s=e.match(/<body[^>]*>([\s\S.]*)<\/body>/i))?s[0]:void 0)||"<body></body>",r=document.createElement("html"),r.innerHTML=i+t,n=document.createDocumentFragment(),n.appendChild(r),n},e=function(e){var t,i,o;return t=function(e,t){return{passes:t(),fallback:e}},o=t(r,function(){return function(){var t,n;return 1===(null!=(t=e("<html><body><p>test"))&&null!=(n=t.body)?n.childNodes.length:void 0)}}(this)),i=t(n,function(){return function(){var t,n;return 2===(null!=(t=e("<html><body><form></form><div></div></body></html>"))&&null!=(n=t.body)?n.childNodes.length:void 0)}}(this)),[o,i]};try{if(window.DOMParser)return s=e(i),i}catch(l){return a=l,s=e(t),t}finally{for(u=0,c=s.length;c>u;u++)if(o=s[u],!o.passes)return o.fallback}},n=function(){function e(t){return this.original=null!=t?t:document.location.href,this.original.constructor===e?this.original:void this._parse()}return e.prototype.withoutHash=function(){return this.href.replace(this.hash,"").replace("#","")},e.prototype.withoutHashForIE10compatibility=function(){return this.withoutHash()},e.prototype.hasNoHash=function(){return 0===this.hash.length},e.prototype._parse=function(){var e;return(null!=this.link?this.link:this.link=document.createElement("a")).href=this.original,e=this.link,this.href=e.href,this.protocol=e.protocol,this.host=e.host,this.hostname=e.hostname,this.port=e.port,this.pathname=e.pathname,this.search=e.search,this.hash=e.hash,this.origin=[this.protocol,"//",this.hostname].join(""),0!==this.port.length&&(this.origin+=":"+this.port),this.relative=[this.pathname,this.search,this.hash].join(""),this.absolute=this.href},e}(),r=function(e){function t(e){return this.link=e,this.link.constructor===t?this.link:(this.original=this.link.href,this.originalElement=this.link,this.link=this.link.cloneNode(!1),void t.__super__.constructor.apply(this,arguments))}return tt(t,e),t.HTML_EXTENSIONS=["html"],t.allowExtensions=function(){var e,n,i,r;for(n=1<=arguments.length?nt.call(arguments,0):[],i=0,r=n.length;r>i;i++)e=n[i],t.HTML_EXTENSIONS.push(e);return t.HTML_EXTENSIONS},t.prototype.shouldIgnore=function(){return this._crossOrigin()||this._anchored()||this._nonHtml()||this._optOut()||this._target()},t.prototype._crossOrigin=function(){return this.origin!==(new n).origin},t.prototype._anchored=function(){return(this.hash.length>0||"#"===this.href.charAt(this.href.length-1))&&this.withoutHash()===(new n).withoutHash()},t.prototype._nonHtml=function(){return this.pathname.match(/\.[a-z]+$/g)&&!this.pathname.match(new RegExp("\\.(?:"+t.HTML_EXTENSIONS.join("|")+")?$","g"))},t.prototype._optOut=function(){var e,t;for(t=this.originalElement;!e&&t!==document;)e=null!=t.getAttribute("data-no-turbolink"),t=t.parentNode;return e},t.prototype._target=function(){return 0!==this.link.target.length},t}(n),t=function(){function e(e){this.event=e,this.event.defaultPrevented||(this._extractLink(),this._validForTurbolinks()&&(T(this.link.absolute)||K(this.link.href),this.event.preventDefault()))}return e.installHandlerLast=function(t){return t.defaultPrevented?void 0:(document.removeEventListener("click",e.handle,!1),document.addEventListener("click",e.handle,!1))},e.handle=function(t){return new e(t)},e.prototype._extractLink=function(){var e;for(e=this.event.target;e.parentNode&&"A"!==e.nodeName;)e=e.parentNode;return"A"===e.nodeName&&0!==e.href.length?this.link=new r(e):void 0},e.prototype._validForTurbolinks=function(){return null!=this.link&&!(this.link.shouldIgnore()||this._nonStandardClick())},e.prototype._nonStandardClick=function(){return this.event.which>1||this.event.metaKey||this.event.ctrlKey||this.event.shiftKey||this.event.altKey},e}(),l=function(e){return setTimeout(e,500)},C=function(){return document.addEventListener("DOMContentLoaded",function(){return Q(i.CHANGE),Q(i.UPDATE)},!0)},A=function(){return"undefined"!=typeof jQuery?jQuery(document).on("ajaxSuccess",function(e,t){return jQuery.trim(t.responseText)?Q(i.UPDATE):void 0}):void 0},S=function(e){var t,i;return(null!=(i=e.state)?i.turbolinks:void 0)?(t=q[new n(e.state.url).absolute])?(p(),G(t)):K(e.target.location.href):void 0},j=function(){return B(),F(),b=o(),document.addEventListener("click",t.installHandlerLast,!0),window.addEventListener("hashchange",function(){return B(),F()},!1),l(function(){return window.addEventListener("popstate",S,!1)})},_=void 0!==window.history.state||navigator.userAgent.match(/Firefox\/2[6|7]/),u=window.history&&window.history.pushState&&window.history.replaceState&&_,s=!navigator.userAgent.match(/CriOS\//),$="GET"===(J=E("request_method"))||""===J,c=u&&s&&$,a=document.addEventListener&&document.createEvent,a&&(C(),A()),c?(K=w,j()):K=function(e){return document.location.href=e},this.Turbolinks={visit:K,pagesCached:R,enableTransitionCache:y,allowLinkExtensions:r.allowExtensions,supported:c,EVENTS:d(i)}}.call(this),function(){jQuery(function(){return $("a[rel~=popover], .has-popover").popover(),$("a[rel~=tooltip], .has-tooltip").tooltip()})}.call(this);var hljs=new function(){function e(e){return e.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;")}function t(e){return e.nodeName.toLowerCase()}function n(e,t){var n=e&&e.exec(t);return n&&0==n.index}function i(e){var t=(e.className+" "+(e.parentNode?e.parentNode.className:"")).split(/\s+/);return t=t.map(function(e){return e.replace(/^lang(uage)?-/,"")}),t.filter(function(e){return g(e)||/no(-?)highlight/.test(e)})[0]}function r(e,t){var n={};for(var i in e)n[i]=e[i];if(t)for(var i in t)n[i]=t[i];return n}function o(e){var n=[];return function i(e,r){for(var o=e.firstChild;o;o=o.nextSibling)3==o.nodeType?r+=o.nodeValue.length:1==o.nodeType&&(n.push({event:"start",offset:r,node:o}),r=i(o,r),t(o).match(/br|hr|img|input/)||n.push({event:"stop",offset:r,node:o}));return r}(e,0),n}function s(n,i,r){function o(){return n.length&&i.length?n[0].offset!=i[0].offset?n[0].offset<i[0].offset?n:i:"start"==i[0].event?n:i:n.length?n:i}function s(n){function i(t){return" "+t.nodeName+'="'+e(t.value)+'"'}l+="<"+t(n)+Array.prototype.map.call(n.attributes,i).join("")+">"}function a(e){l+="</"+t(e)+">"}function u(e){("start"==e.event?s:a)(e.node)}for(var c=0,l="",p=[];n.length||i.length;){var h=o();if(l+=e(r.substr(c,h[0].offset-c)),c=h[0].offset,h==n){p.reverse().forEach(a);do u(h.splice(0,1)[0]),h=o();while(h==n&&h.length&&h[0].offset==c);p.reverse().forEach(s)}else"start"==h[0].event?p.push(h[0].node):p.pop(),u(h.splice(0,1)[0])}return l+e(r.substr(c))}function a(e){function t(e){return e&&e.source||e}function n(n,i){return RegExp(t(n),"m"+(e.cI?"i":"")+(i?"g":""))}function i(o,s){if(!o.compiled){if(o.compiled=!0,o.k=o.k||o.bK,o.k){var a={},u=function(t,n){e.cI&&(n=n.toLowerCase()),n.split(" ").forEach(function(e){var n=e.split("|");a[n[0]]=[t,n[1]?Number(n[1]):1]})};"string"==typeof o.k?u("keyword",o.k):Object.keys(o.k).forEach(function(e){u(e,o.k[e])}),o.k=a}o.lR=n(o.l||/\b[A-Za-z0-9_]+\b/,!0),s&&(o.bK&&(o.b="\\b("+o.bK.split(" ").join("|")+")\\b"),o.b||(o.b=/\B|\b/),o.bR=n(o.b),o.e||o.eW||(o.e=/\B|\b/),o.e&&(o.eR=n(o.e)),o.tE=t(o.e)||"",o.eW&&s.tE&&(o.tE+=(o.e?"|":"")+s.tE)),o.i&&(o.iR=n(o.i)),void 0===o.r&&(o.r=1),o.c||(o.c=[]);var c=[];o.c.forEach(function(e){e.v?e.v.forEach(function(t){c.push(r(e,t))}):c.push("self"==e?o:e)}),o.c=c,o.c.forEach(function(e){i(e,o)}),o.starts&&i(o.starts,s);var l=o.c.map(function(e){return e.bK?"\\.?("+e.b+")\\.?":e.b}).concat([o.tE,o.i]).map(t).filter(Boolean);o.t=l.length?n(l.join("|"),!0):{exec:function(){return null}}}}i(e)}function u(t,i,r,o){function s(e,t){for(var i=0;i<t.c.length;i++)if(n(t.c[i].bR,e))return t.c[i]}function l(e,t){return n(e.eR,t)?e:e.eW?l(e.parent,t):void 0}function p(e,t){return!r&&n(t.iR,e)}function h(e,t){var n=G.cI?t[0].toLowerCase():t[0];return e.k.hasOwnProperty(n)&&e.k[n]}function f(e,t,n,i){var r=i?"":y.classPrefix,o='<span class="'+r,s=n?"":"</span>";return o+=e+'">',o+t+s}function d(){if(!_.k)return e(S);var t="",n=0;_.lR.lastIndex=0;for(var i=_.lR.exec(S);i;){t+=e(S.substr(n,i.index-n));var r=h(_,i);r?(A+=r[1],t+=f(r[0],e(i[0]))):t+=e(i[0]),n=_.lR.lastIndex,i=_.lR.exec(S)}return t+e(S.substr(n))}function m(){if(_.sL&&!v[_.sL])return e(S);var t=_.sL?u(_.sL,S,!0,k):c(S);return _.r>0&&(A+=t.r),"continuous"==_.subLanguageMode&&(k=t.top),f(t.language,t.value,!1,!0)}function b(){return void 0!==_.sL?m():d()}function x(t,n){var i=t.cN?f(t.cN,"",!0):"";t.rB?(j+=i,S=""):t.eB?(j+=e(n)+i,S=""):(j+=i,S=n),_=Object.create(t,{parent:{value:_}})}function w(t,n){if(S+=t,void 0===n)return j+=b(),0;var i=s(n,_);if(i)return j+=b(),x(i,n),i.rB?0:n.length;var r=l(_,n);if(r){var o=_;o.rE||o.eE||(S+=n),j+=b();do _.cN&&(j+="</span>"),A+=_.r,_=_.parent;while(_!=r.parent);return o.eE&&(j+=e(n)),S="",r.starts&&x(r.starts,""),o.rE?0:n.length}if(p(n,_))throw new Error('Illegal lexeme "'+n+'" for mode "'+(_.cN||"<unnamed>")+'"');return S+=n,n.length||1}var G=g(t);if(!G)throw new Error('Unknown language: "'+t+'"');a(G);for(var k,_=o||G,j="",C=_;C!=G;C=C.parent)C.cN&&(j=f(C.cN,"",!0)+j);var S="",A=0;try{for(var M,P,q=0;;){if(_.t.lastIndex=q,M=_.t.exec(i),!M)break;P=w(i.substr(q,M.index-q),M[0]),q=M.index+P}w(i.substr(q));for(var C=_;C.parent;C=C.parent)C.cN&&(j+="</span>");return{r:A,value:j,language:t,top:_}}catch(T){if(-1!=T.message.indexOf("Illegal"))return{r:0,value:e(i)};throw T}}function c(t,n){n=n||y.languages||Object.keys(v);var i={r:0,value:e(t)},r=i;return n.forEach(function(e){if(g(e)){var n=u(e,t,!1);n.language=e,n.r>r.r&&(r=n),n.r>i.r&&(r=i,i=n)}}),r.language&&(i.second_best=r),i}function l(e){return y.tabReplace&&(e=e.replace(/^((<[^>]+>|\t)+)/gm,function(e,t){return t.replace(/\t/g,y.tabReplace)})),y.useBR&&(e=e.replace(/\n/g,"<br>")),e}function p(e){var t=i(e);if(!/no(-?)highlight/.test(t)){var n;y.useBR?(n=document.createElementNS("http://www.w3.org/1999/xhtml","div"),n.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/<br[ \/]*>/g,"\n")):n=e;var r=n.textContent,a=t?u(t,r,!0):c(r),p=o(n);if(p.length){var h=document.createElementNS("http://www.w3.org/1999/xhtml","div");h.innerHTML=a.value,a.value=s(p,o(h),r)}a.value=l(a.value),e.innerHTML=a.value,e.className+=" hljs "+(!t&&a.language||""),e.result={language:a.language,re:a.r},a.second_best&&(e.second_best={language:a.second_best.language,re:a.second_best.r})}}function h(e){y=r(y,e)}function f(){if(!f.called){f.called=!0;var e=document.querySelectorAll("pre code");Array.prototype.forEach.call(e,p)}}function d(){addEventListener("DOMContentLoaded",f,!1),addEventListener("load",f,!1)}function m(e,t){var n=v[e]=t(this);n.aliases&&n.aliases.forEach(function(t){x[t]=e})}function b(){return Object.keys(v)}function g(e){return v[e]||v[x[e]]}var y={classPrefix:"hljs-",tabReplace:null,useBR:!1,languages:void 0},v={},x={};this.highlight=u,this.highlightAuto=c,this.fixMarkup=l,this.highlightBlock=p,this.configure=h,this.initHighlighting=f,this.initHighlightingOnLoad=d,this.registerLanguage=m,this.listLanguages=b,this.getLanguage=g,this.inherit=r,this.IR="[a-zA-Z][a-zA-Z0-9_]*",this.UIR="[a-zA-Z_][a-zA-Z0-9_]*",this.NR="\\b\\d+(\\.\\d+)?",this.CNR="(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",this.BNR="\\b(0b[01]+)",this.RSR="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",this.BE={b:"\\\\[\\s\\S]",r:0},this.ASM={cN:"string",b:"'",e:"'",i:"\\n",c:[this.BE]},this.QSM={cN:"string",b:'"',e:'"',i:"\\n",c:[this.BE]},this.PWM={b:/\b(a|an|the|are|I|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such)\b/},this.CLCM={cN:"comment",b:"//",e:"$",c:[this.PWM]},this.CBCM={cN:"comment",b:"/\\*",e:"\\*/",c:[this.PWM]},this.HCM={cN:"comment",b:"#",e:"$",c:[this.PWM]},this.NM={cN:"number",b:this.NR,r:0},this.CNM={cN:"number",b:this.CNR,r:0},this.BNM={cN:"number",b:this.BNR,r:0},this.CSSNM={cN:"number",b:this.NR+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",r:0},this.RM={cN:"regexp",b:/\//,e:/\/[gim]*/,i:/\n/,c:[this.BE,{b:/\[/,e:/\]/,r:0,c:[this.BE]}]},this.TM={cN:"title",b:this.IR,r:0},this.UTM={cN:"title",b:this.UIR,r:0}};hljs.registerLanguage("javascript",function(e){return{aliases:["js"],k:{keyword:"in if for while finally var new function do return void else break catch instanceof with throw case default try this switch continue typeof delete let yield const class",literal:"true false null undefined NaN Infinity",built_in:"eval isFinite isNaN parseFloat parseInt decodeURI decodeURIComponent encodeURI encodeURIComponent escape unescape Object Function Boolean Error EvalError InternalError RangeError ReferenceError StopIteration SyntaxError TypeError URIError Number Math Date String RegExp Array Float32Array Float64Array Int16Array Int32Array Int8Array Uint16Array Uint32Array Uint8Array Uint8ClampedArray ArrayBuffer DataView JSON Intl arguments require module console window document"},c:[{cN:"pi",b:/^\s*('|")use strict('|")/,r:10},e.ASM,e.QSM,e.CLCM,e.CBCM,e.CNM,{b:"("+e.RSR+"|\\b(case|return|throw)\\b)\\s*",k:"return throw case",c:[e.CLCM,e.CBCM,e.RM,{b:/</,e:/>;/,r:0,sL:"xml"}],r:0},{cN:"function",bK:"function",e:/\{/,eE:!0,c:[e.inherit(e.TM,{b:/[A-Za-z$_][0-9A-Za-z$_]*/}),{cN:"params",b:/\(/,e:/\)/,c:[e.CLCM,e.CBCM],i:/["'\(]/}],i:/\[|%/},{b:/\$[(.]/},{b:"\\."+e.IR,r:0}]}}),function(){}.call(this),function e(t,n,i){function r(s,a){if(!n[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}};t[s][0].call(l.exports,function(e){var n=t[s][1][e];return r(n?n:e)},l,l.exports,e,t,n,i)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(e){p5.prototype.Gibber=e("gibber.lib"),p5.prototype.Gibber.export(p5.prototype),p5.prototype.Gibber.init({globalize:!1,target:p5.prototype}),p5.prototype.Rndi=p5.prototype.Gibber.Audio.Rndi,p5.prototype.Rndf=p5.prototype.Gibber.Audio.Rndf,p5.prototype.rndi=p5.prototype.Gibber.Audio.rndi,p5.prototype.rndf=p5.prototype.Gibber.Audio.rndf},{"gibber.lib":2}],2:[function(require,module,exports){(function(global){!function(e){if("object"==typeof exports)module.exports=e();else if("function"==typeof define&&define.amd)define(e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.Gibber=e()}}(function(){var define,module,exports;return function e(t,n,i){function r(s,a){if(!n[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);throw new Error("Cannot find module '"+s+"'")}var c=n[s]={exports:{}};t[s][0].call(c.exports,function(e){var n=t[s][1][e];return r(n?n:e)},c,c.exports,e,t,n,i)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(_dereq_,module,exports){!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.Gibberish=t()}(this,function(){function createInput(){console.log("connecting audio input..."),navigator.webkitGetUserMedia({audio:!0},function(e){console.log("audio input connected"),Gibberish.mediaStreamSource=Gibberish.context.createMediaStreamSource(e),Gibberish.mediaStreamSource.connect(Gibberish.node),_hasInput=!0},function(){console.log("error opening audio input")})}var Gibberish={memo:{},codeblock:[],analysisCodeblock:[],analysisUgens:[],dirtied:[],id:0,isDirty:!1,out:null,debug:!1,callback:"",audioFiles:{},sequencers:[],callbackArgs:["input"],callbackObjects:[],analysisCallbackArgs:[],analysisCallbackObjects:[],createCallback:function(){this.memo={},this.codeblock.length=0,this.callbackArgs.length=0,this.callbackObjects.length=0,this.analysisCallbackArgs.length=0,this.dirtied.length=0,this.codestring="",this.args=["input"],this.memo={},this.out.codegen();var e=this.codeblock.slice(0);if(this.analysisUgens.length>0){this.analysisCodeblock.length=0;for(var t=0;t<this.analysisUgens.length;t++)this.analysisCallbackArgs.push(this.analysisUgens[t].analysisSymbol)}if(this.args=this.args.concat(this.callbackArgs),this.args=this.args.concat(this.analysisCallbackArgs),this.codestring+=e.join("	"),this.codestring+="\n	",this.analysisUgens.length>0){this.analysisCodeblock.length=0;for(var t=0;t<this.analysisUgens.length;t++)this.codeblock.length=0,this.analysisUgens[t].analysisCodegen();this.codestring+=this.analysisCodeblock.join("\n	"),this.codestring+="\n	"}return this.codestring+="return "+this.out.variable+";\n",this.callbackString=this.codestring,this.debug&&console.log(this.callbackString),[this.args,this.codestring]},audioProcess:function(e){var t,n,i=e.outputBuffer.getChannelData(0),r=e.outputBuffer.getChannelData(1),o=e.inputBuffer.getChannelData(0),s=Gibberish,a=s.callback,u=s.sequencers,c=(Gibberish.out.callback,s.callbackObjects.slice(0));c.unshift(0);for(var l=0,p=e.outputBuffer.length;p>l;l++){for(var h=0;h<u.length;h++)u[h].tick();if(s.isDirty){t=s.createCallback();try{a=s.callback=new Function(t[0],t[1])}catch(e){console.error("ERROR WITH CALLBACK : \n\n",t)}s.isDirty=!1,c=s.callbackObjects.slice(0),c.unshift(0)}c[0]=o[l],n=a.apply(null,c),i[l]=n[0],r[l]=n[1]}},audioProcessFirefox:function(e){var t,n=Gibberish,i=n.callback,r=n.sequencers,o=n.callbackObjects.slice(0);o.unshift(0);for(var s=0,a=e.length;a>s;s+=2){for(var u=0;u<r.length;u++)r[u].tick();if(n.isDirty){t=n.createCallback();try{i=n.callback=new Function(t[0],t[1])}catch(c){console.error("ERROR WITH CALLBACK : \n\n",i)}n.isDirty=!1,o=n.callbackObjects.slice(0),o.unshift(0)}var l=i.apply(null,o);e[s]=l[0],e[s+1]=l[1]}},clear:function(){this.out.inputs.length=0,this.analysisUgens.length=0,this.sequencers.length=0,this.callbackArgs.length=2,this.callbackObjects.length=1,Gibberish.dirty(this.out)},dirty:function(e){if("undefined"!=typeof e){for(var t=!1,n=0;n<this.dirtied.length;n++)this.dirtied[n].variable===e.variable&&(t=!0);t||(this.isDirty=!0,this.dirtied.push(e))}else this.isDirty=!0},generateSymbol:function(e){return e+"_"+this.id++},AudioDataDestination:function(e,t){var n=new Audio;n.mozSetup(2,e);var i,r=0,o=e/2,s=null;setInterval(function(){var e;if(s){if(e=n.mozWriteAudio(s.subarray(i)),r+=e,i+=e,i<s.length)return;s=null}var a=n.mozCurrentSampleOffset(),u=a+o-r;if(u>0){var c=new Float32Array(u);t(c),e=n.mozWriteAudio(c),a=n.mozCurrentSampleOffset(),e<c.length&&(s=c,i=e),r+=e}},100)},init:function(){var e,t,n="undefined"==typeof arguments[0]?1024:arguments[0];return"undefined"!=typeof webkitAudioContext?e=webkitAudioContext:"undefined"!=typeof AudioContext&&(e=AudioContext),t=function(){if("undefined"!=typeof e){if(document&&document.documentElement&&"ontouchstart"in document.documentElement&&(window.removeEventListener("touchstart",t),"ontouchstart"in document.documentElement)){var n=Gibberish.context.createBufferSource();n.connect(Gibberish.context.destination),n.noteOn(0)}}else alert("Your browser does not support javascript audio synthesis. Please download a modern web browser that is not Internet Explorer.");Gibberish.onstart&&Gibberish.onstart()},Gibberish.context=new e,Gibberish.node=Gibberish.context.createScriptProcessor(n,2,2,Gibberish.context.sampleRate),Gibberish.node.onaudioprocess=Gibberish.audioProcess,Gibberish.node.connect(Gibberish.context.destination),Gibberish.out=new Gibberish.Bus2,Gibberish.out.codegen(),Gibberish.dirty(Gibberish.out),document&&document.documentElement&&"ontouchstart"in document.documentElement?window.addEventListener("touchstart",t):t(),this},makePanner:function(){for(var e=[],t=[],n=Math.sqrt(2)/2,i=0;1024>i;i++){var r=-1+i/1024*2;e[i]=n*(Math.cos(r)-Math.sin(r)),t[i]=n*(Math.cos(r)+Math.sin(r))}return function(n,i,r){var o,s,a,u,c,l,p="object"==typeof n,h=p?n[0]:n,f=p?n[1]:n;return o=1023*(i+1)/2,s=0|o,a=o-s,s=1023&s,u=1023===s?0:s+1,c=e[s],l=e[u],r[0]=(c+a*(l-c))*h,c=t[s],l=t[u],r[1]=(c+a*(l-c))*f,r}},defineUgenProperty:function(e,t,n){var i=n.properties[e]={value:t,binops:[],parent:n,name:e};Object.defineProperty(n,e,{configurable:!0,get:function(){return i.value},set:function(e){i.value=e,Gibberish.dirty(n)}})},polyInit:function(e){e.mod=e.polyMod,e.removeMod=e.removePolyMod,e.voicesClear=function(){if(e.children.length>0){for(var t=0;t<e.children.length;t++)e.children[t].disconnect();e.children.length=0,e.voiceCount=0}};for(var t in e.polyProperties)!function(t){var n=e.polyProperties[t];Object.defineProperty(e,t,{configurable:!0,get:function(){return n},set:function(i){n=i;for(var r=0;r<e.children.length;r++)e.children[r][t]=n}})}(t);var n=e.maxVoices;Object.defineProperty(e,"maxVoices",{get:function(){return n},set:function(e){n=e,this.voicesClear(),this.initVoices()}})},interpolate:function(e,t){var n=0|t,i=n+1>e.length-1?0:n+1;return frac=t-n,e[n]+frac*(e[i]-e[n])},pushUnique:function(e,t){for(var n=e,i=!0,r=0;r<t.length;r++)if(n===t[r]){i=!1;break}i&&t.push(n)},"export":function(e,t){for(var n in Gibberish[e])t[n]=Gibberish[e][n]},ugen:function(){Gibberish.extend(this,{processProperties:function(){if("object"!=typeof arguments[0][0]||"undefined"!=typeof arguments[0][0].type||Array.isArray(arguments[0][0])||"op"===arguments[0][0].name){var e=0;for(var t in this.properties)"object"==typeof this.properties[t]&&"undefined"!=typeof this.properties[t].binops?"undefined"!=typeof arguments[0][e]&&(this.properties[t].value=arguments[0][e++]):"undefined"!=typeof arguments[0][e]&&(this.properties[t]=arguments[0][e++])}else{var n=arguments[0][0];for(var t in n)"undefined"!=typeof n[t]&&("object"==typeof this.properties[t]&&"undefined"!=typeof this.properties[t].binops?this.properties[t].value=n[t]:this[t]=n[t])}return this},valueOf:function(){return this.codegen(),this.variable},codegen:function(){var e="",t=null;if(Gibberish.memo[this.symbol])return Gibberish.memo[this.symbol];t=this.variable?this.variable:Gibberish.generateSymbol("v"),Gibberish.memo[this.symbol]=t,this.variable=t,e+="var "+t+" = "+this.symbol+"(";for(var n in this.properties){var i=this.properties[n],r="";if(Array.isArray(i.value)){0===i.value.length&&(r=0);for(var o=0;o<i.value.length;o++){var s=i.value[o];r+="object"==typeof s?null!==s?s.valueOf():"null":"function"==typeof i.value?i.value():i.value,r+=o<i.value.length-1?", ":""}}else"object"==typeof i.value?null!==i.value&&(r=i.value.codegen?i.value.valueOf():i.value):"undefined"!==i.name&&(r="function"==typeof i.value?i.value():i.value);if(0!=i.binops.length){for(var a=0;a<i.binops.length;a++)e+="(";for(var u=0;u<i.binops.length;u++){var c,l=i.binops[u];c="number"==typeof l.ugen?l.ugen:null!==l.ugen?l.ugen.valueOf():"null","="===l.binop?(e=e.replace(r,""),e+=c):"++"===l.binop?e+=" + Math.abs("+c+")":(0===u&&(e+=r),e+=" "+l.binop+" "+c+")")}}else e+=r;e+=", "}return" "===e.charAt(e.length-1)&&(e=e.slice(0,-2)),e+=");\n",this.codeblock=e,-1===Gibberish.codeblock.indexOf(this.codeblock)&&Gibberish.codeblock.push(this.codeblock),-1===Gibberish.callbackArgs.indexOf(this.symbol)&&"op"!==this.name&&Gibberish.callbackArgs.push(this.symbol),-1===Gibberish.callbackObjects.indexOf(this.callback)&&"op"!==this.name&&Gibberish.callbackObjects.push(this.callback),this.dirty=!1,t},init:function(){if(this.initalized||(this.symbol=Gibberish.generateSymbol(this.name),this.codeblock=null,this.variable=null),"undefined"==typeof this.properties&&(this.properties={}),!this.initialized){this.destinations=[];for(var e in this.properties)Gibberish.defineUgenProperty(e,this.properties[e],this)}if(arguments.length>0&&"object"==typeof arguments[0][0]&&"undefined"===arguments[0][0].type){var t=arguments[0][0];for(var e in t)this[e]=t[e]}return this.initialized=!0,this},mod:function(e,t,n){var i=this.properties[e],r={ugen:t,binop:n};i.binops.push(r),Gibberish.dirty(this)},removeMod:function(e,t){if("undefined"==typeof t)this.properties[e].binops.length=0;else if("number"==typeof t)this.properties[e].binops.splice(t,1);else if("object"==typeof t)for(var n=0,i=this.properties[e].binops.length;i>n;n++)this.properties[e].binops[n].ugen===t&&this.properties[e].binops.splice(n,1);Gibberish.dirty(this)},polyMod:function(e,t,n){for(var i=0;i<this.children.length;i++)this.children[i].mod(e,t,n);Gibberish.dirty(this)},removePolyMod:function(){var e=Array.prototype.slice.call(arguments,0);if("amp"!==arguments[0]&&"pan"!==arguments[0])for(var t=0;t<this.children.length;t++)this.children[t].removeMod.apply(this.children[t],e);else this.removeMod.apply(this,e);Gibberish.dirty(this)},smooth:function(e){var t=new Gibberish.OnePole;this.mod(e,t,"=")},connect:function(e,t){return"undefined"==typeof e&&(e=Gibberish.out),-1===this.destinations.indexOf(e)&&(e.addConnection(this,1,t),this.destinations.push(e)),this},send:function(e,t){return-1===this.destinations.indexOf(e)?(e.addConnection(this,t),this.destinations.push(e)):e.adjustSendAmount(this,t),this},disconnect:function(e){var t;if(e)t=this.destinations.indexOf(e),t>-1&&this.destinations.splice(t,1),e.removeConnection(this);else{for(var n=0;n<this.destinations.length;n++)this.destinations[n].removeConnection(this);this.destinations=[]}return Gibberish.dirty(this),this}})}};Array2=function(){this.length=0
},Array2.prototype=[],Array2.prototype.remove=function(e,t){if(t="undefined"==typeof t?!0:t,"undefined"==typeof e){for(var n=0;n<this.length;n++)delete this[n];this.length=0}else if("number"==typeof e)this.splice(e,1);else if("string"==typeof e){for(var i=[],n=0;n<this.length;n++){var r=this[n];if(r.type===e||r.name===e){if(!t)return void this.splice(n,1);i.push(n)}}for(var n=0;n<i.length;n++)this.splice(i[n],1)}else if("object"==typeof e)for(var o=this.indexOf(e);o>-1;)this.splice(o,1),o=this.indexOf(e);this.parent&&Gibberish.dirty(this.parent)},Array2.prototype.get=function(e){if("number"==typeof e)return this[e];if("string"==typeof e)for(var t=0;t<this.length;t++){var n=this[t];if(n.name===e)return n}else if("object"==typeof e){var i=this.indexOf(e);if(i>-1)return this[i]}return null},Array2.prototype.replace=function(e,t){if(t.parent=this,t.input=e.input,"number"!=typeof e){var n=this.indexOf(e);n>-1&&this.splice(n,1,t)}else this.splice(e,1,t);this.parent&&Gibberish.dirty(this.parent)},Array2.prototype.insert=function(e,t){if(e.parent=this,this.input=this.parent,Array.isArray(e))for(var n=0;n<e.length;n++)this.splice(t+n,0,e[n]);else this.splice(t,0,e);this.parent&&Gibberish.dirty(this.parent)},Array2.prototype.add=function(){for(var e=0;e<arguments.length;e++)arguments[e].parent=this,arguments[e].input=this.parent,this.push(arguments[e]);this.parent&&(console.log("DIRTYING"),Gibberish.dirty(this.parent))};var rnd=Math.random;Gibberish.rndf=function(e,t,n,i){if(i="undefined"==typeof i?!0:i,"undefined"==typeof n&&"object"!=typeof e){1==arguments.length?(t=arguments[0],e=0):2==arguments.length?(e=arguments[0],t=arguments[1]):(e=0,t=1);var r=t-e,o=Math.random(),s=r*o;return e+s}var a=[],u=[];"undefined"==typeof n&&(n=t||e.length);for(var c=0;n>c;c++){var l;if("object"==typeof arguments[0])l=arguments[0][rndi(0,arguments[0].length-1)];else if(i)l=Gibberish.rndf(e,t);else{for(l=Gibberish.rndf(e,t);u.indexOf(l)>-1;)l=Gibberish.rndf(e,t);u.push(l)}a.push(l)}return a},Gibberish.Rndf=function(){var e,t,n,i;return Math.random,0===arguments.length?(e=0,t=1):1===arguments.length?(t=arguments[0],e=0):2===arguments.length?(e=arguments[0],t=arguments[1]):3===arguments.length?(e=arguments[0],t=arguments[1],n=arguments[2]):(e=arguments[0],t=arguments[1],n=arguments[2],i=arguments[3]),function(){var r,o,s;return o="function"==typeof e?e():e,s="function"==typeof t?t():t,r="undefined"==typeof n?Gibberish.rndf(o,s):Gibberish.rndf(o,s,n,i)}},Gibberish.rndi=function(e,t,n,i){var r;if(0===arguments.length?(e=0,t=1):1===arguments.length?(t=arguments[0],e=0):2===arguments.length?(e=arguments[0],t=arguments[1]):(e=arguments[0],t=arguments[1],n=arguments[2],i=arguments[3]),r=t-e,n>r&&(i=!0),"undefined"==typeof n)return r=t-e,Math.round(e+Math.random()*r);for(var o=[],s=[],a=0;n>a;a++){var u;if(i)u=Gibberish.rndi(e,t);else{for(u=Gibberish.rndi(e,t);s.indexOf(u)>-1;)u=Gibberish.rndi(e,t);s.push(u)}o.push(u)}return o},Gibberish.Rndi=function(){var e,t,n,i,r;return Math.random,Math.round,0===arguments.length?(e=0,t=1):1===arguments.length?(t=arguments[0],e=0):2===arguments.length?(e=arguments[0],t=arguments[1]):3===arguments.length?(e=arguments[0],t=arguments[1],n=arguments[2]):(e=arguments[0],t=arguments[1],n=arguments[2],i=arguments[3]),r=t-e,"number"==typeof n&&n>r&&(i=!0),function(){var r,o,s;return o="function"==typeof e?e():e,s="function"==typeof t?t():t,r="undefined"==typeof n?Gibberish.rndi(o,s):Gibberish.rndi(o,s,n,i)}},Gibberish.extend=function(e,t){for(var n in t)n.split("."),t[n]instanceof Array&&t[n].length<100?(e[n]=t[n].slice(0),"fx"===n&&(e[n].parent=t[n].parent)):"object"!=typeof t[n]||null===t[n]||t[n]instanceof Float32Array?e[n]=t[n]:(e[n]=e[n]||{},arguments.callee(e[n],t[n]));return e},Function.prototype.clone=function(){return eval("["+this.toString()+"]")[0]},String.prototype.format=function(e,t,n){function i(){var i=this,r=arguments.length+1;for(e=0;r>e;n=arguments[e++])t=n,i=i.replace(RegExp("\\{"+(e-1)+"\\}","g"),t);return i}return i.native=String.prototype.format,i}(),Gibberish.future=function(e,t){var n=new Gibberish.Sequencer({values:[function(){},function(){e(),n.stop(),n.disconnect()}],durations:[t]}).start();return n.cancel=function(){n.stop(),n.disconnect()},n},Gibberish.Proxy=function(){var e=0;Gibberish.extend(this,{name:"proxy",type:"effect",properties:{},callback:function(){return e}}).init(),this.input=arguments[0],e=this.input.parent[this.input.name],delete this.input.parent[this.input.name],this.input.parent.properties[this.input.name].value=this,Object.defineProperty(this.input.parent,this.input.name,{get:function(){return e},set:function(t){e=t}}),Gibberish.dirty(this.input.parent)},Gibberish.Proxy.prototype=new Gibberish.ugen,Gibberish.Proxy2=function(){var e=arguments[0],t=arguments[1];Gibberish.extend(this,{name:"proxy2",type:"effect",properties:{},callback:function(){var n=e[t];return Array.isArray(n)?(n[0]+n[1]+n[2])/3:n}}).init(),this.getInput=function(){return e},this.setInput=function(t){e=t},this.getName=function(){return t},this.setName=function(e){t=e}},Gibberish.Proxy2.prototype=new Gibberish.ugen,Gibberish.Proxy3=function(){var e=arguments[0],t=arguments[1];Gibberish.extend(this,{name:"proxy3",type:"effect",properties:{},callback:function(){var n=e[t];return n||0}}),this.init(),this.codegen=function(){console.log(" CALLED "),this.variable||(this.variable=Gibberish.generateSymbol("v")),Gibberish.callbackArgs.push(this.symbol),Gibberish.callbackObjects.push(this.callback),this.codeblock="var "+this.variable+" = "+this.symbol+"("+e.properties[t].codegen()+");\n"}},Gibberish.Proxy3.prototype=new Gibberish.ugen,Gibberish.oscillator=function(){this.type="oscillator",this.oscillatorInit=function(){return this.fx=new Array2,this.fx.parent=this,this}},Gibberish.oscillator.prototype=new Gibberish.ugen,Gibberish._oscillator=new Gibberish.oscillator,Gibberish.Wavetable=function(){var e=0,t=null,n=Gibberish.context.sampleRate/1024,i=0;this.properties={frequency:440,amp:.25,sync:0},this.getTable=function(){return t},this.setTable=function(e){t=e,n=Gibberish.context.sampleRate/t.length},this.getTableFreq=function(){return n},this.setTableFreq=function(e){n=e},this.getPhase=function(){return e},this.setPhase=function(t){e=t},this.callback=function(r,o){var s,a,u,c,l,p;for(e+=r/n;e>=1024;)e-=1024;return s=0|e,a=e-s,s=1023&s,u=1023===s?0:s+1,c=t[s],l=t[u],0!==p&&(i=p),(c+a*(l-c))*o}},Gibberish.Wavetable.prototype=Gibberish._oscillator,Gibberish.Table=function(e){this.__proto__=new Gibberish.Wavetable,this.name="table";var t=2*Math.PI;if("undefined"==typeof e){e=new Float32Array(1024);for(var n=1024;n--;)e[n]=Math.sin(n/1024*t)}this.setTable(e),this.init(),this.oscillatorInit()},Gibberish.asmSine=function(e,t,n){"use asm";function i(){for(var e=1024,t=1024;e=e-1|0;)t-=1,u[e>>2]=+s(+(t/1024)*6.2848);l=44100/1024}function r(e,t,n){e=+e,t=+t,n=+n;var i=0,r=0,o=0,s=0,p=0,h=0;return a=+(a+e/l),a>=1024&&(a=+(a-1024)),i=+c(a),s=a-i,r=~~i,o=(r|0)==1024?0:r+1|0,p=+u[r>>2],h=+u[o>>2],+((p+s*(h-p))*t)}function o(e){return e|=0,+u[e>>2]}var s=e.Math.sin,a=0,u=new e.Float32Array(n),c=e.Math.floor,l=0;return{init:i,gen:r,get:o}},Gibberish.asmSine2=function(){this.properties={frequency:440,amp:.5,sr:Gibberish.context.sampleRate},this.name="sine";var e=new ArrayBuffer(4096),t=Gibberish.asmSine(window,null,e);return t.init(),this.getTable=function(){return e},this.get=t.get,this.callback=t.gen,this.init(),this.oscillatorInit(),this.processProperties(arguments),this},Gibberish.asmSine2.prototype=Gibberish._oscillator,Gibberish.Sine=function(){this.__proto__=new Gibberish.Wavetable,this.name="sine";for(var e=2*Math.PI,t=new Float32Array(1024),n=1024;n--;)t[n]=Math.sin(n/1024*e);this.setTable(t),this.init(arguments),this.oscillatorInit(),this.processProperties(arguments)},Gibberish.Sine2=function(){this.__proto__=new Gibberish.Sine,this.name="sine2";var e=this.__proto__.callback,t=Gibberish.makePanner(),n=[0,0];this.callback=function(i,r,o){var s=e(i,r);return n=t(s,o,n)},this.init(),this.oscillatorInit(),Gibberish.defineUgenProperty("pan",0,this),this.processProperties(arguments)},Gibberish.Square=function(){this.__proto__=new Gibberish.Wavetable,this.name="square";for(var e=(2*Math.PI,new Float32Array(1024)),t=1024;t--;)e[t]=t/1024>.5?1:-1;this.setTable(e),this.init(arguments),this.oscillatorInit(),this.processProperties(arguments)},Gibberish.Saw=function(){this.__proto__=new Gibberish.Wavetable,this.name="saw";for(var e=new Float32Array(1024),t=1024;t--;)e[t]=4*((t/1024/2+.25)%.5-.25);this.setTable(e),this.init(arguments),this.oscillatorInit(),this.processProperties(arguments)},Gibberish.Saw2=function(){this.__proto__=new Gibberish.Saw,this.name="saw2";var e=this.__proto__.callback,t=Gibberish.makePanner(),n=[0,0];this.callback=function(i,r,o){var s=e(i,r);return n=t(s,o,n)},this.init(),Gibberish.defineUgenProperty("pan",0,this)},Gibberish.Triangle=function(){this.__proto__=new Gibberish.Wavetable,this.name="triangle";for(var e=new Float32Array(1024),t=Math.abs,n=1024;n--;)e[n]=1-4*t((n/1024+.25)%1-.5);this.setTable(e),this.init(arguments),this.oscillatorInit(),this.processProperties(arguments)},Gibberish.Triangle2=function(){this.__proto__=new Gibberish.Triangle,this.name="triangle2";var e=this.__proto__.callback,t=Gibberish.makePanner(),n=[0,0];this.callback=function(i,r,o){var s=e(i,r);return t(s,o,n)},this.init(),this.oscillatorInit(),Gibberish.defineUgenProperty("pan",0,this),this.processProperties(arguments)},Gibberish.Saw3=function(){var e=0,t=0,n=2.5,i=-1.5,r=0,o=Math.sin,s=11;pi_2=2*Math.PI,flip=0,signHistory=0,ignore=!1,sr=Gibberish.context.sampleRate,Gibberish.extend(this,{name:"saw",properties:{frequency:440,amp:.15,sync:0,sr:Gibberish.context.sampleRate},callback:function(a){var u=a/sr,c=.5-u,l=s*c*c*c*c,p=.376-.752*u,h=1-2*u,f=0;return t+=u,t-=t>1?2:0,e=.5*(e+o(pi_2*(t+e*l))),f=n*e+i*r,r=e,f+=p,f*=h}}),Object.defineProperty(this,"scale",{get:function(){return s},set:function(e){s=e}}),this.init(),this.oscillatorInit(),this.processProperties(arguments)},Gibberish.Saw3.prototype=Gibberish._oscillator,Gibberish.PWM=function(){var e=0,t=0,n=0,i=0,r=0,o=2.5,s=-1.5,a=Math.sin,u=11;pi_2=2*Math.PI,test=0,sr=Gibberish.context.sampleRate,Gibberish.extend(this,{name:"pwm",properties:{frequency:440,amp:.15,pulsewidth:.05,sr:Gibberish.context.sampleRate},callback:function(c,l,p){var h=c/sr,f=.5-h,d=u*f*f*f*f,m=1-2*h,b=0;return r+=h,r-=r>1?2:0,e=.5*(e+a(pi_2*(r+e*d))),t=.5*(t+a(pi_2*(r+t*d+p))),b=t-e,b=o*b+s*(n-i),n=e,i=t,b*m*l}}),Object.defineProperty(this,"scale",{get:function(){return u},set:function(e){u=e}}),this.init(),this.oscillatorInit(),this.processProperties(arguments)},Gibberish.PWM.prototype=Gibberish._oscillator,Gibberish.Noise=function(){var e=Math.random;Gibberish.extend(this,{name:"noise",properties:{amp:1},callback:function(t){return(2*e()-1)*t}}),this.init(),this.oscillatorInit(),this.processProperties(arguments)},Gibberish.Noise.prototype=Gibberish._oscillator,Gibberish.KarplusStrong=function(){var e=[0],t=0,n=Math.random,i=Gibberish.makePanner(),r=Gibberish.context.sampleRate,o=[0,0];Gibberish.extend(this,{name:"karplus_strong",frequency:0,properties:{blend:1,damping:0,amp:1,channels:2,pan:0},note:function(t){var i=Math.floor(r/t);e.length=0;for(var o=0;i>o;o++)e[o]=2*n()-1;this.frequency=t},callback:function(r,s,a,u,c){var l=e.shift(),p=n()>r?-1:1;s=s>0?s:0;var h=p*(l+t)*(.5-s/100);return t=h,e.push(h),h*=a,1===u?h:i(h,c,o)}}).init().oscillatorInit().processProperties(arguments)},Gibberish.KarplusStrong.prototype=Gibberish._oscillator,Gibberish.PolyKarplusStrong=function(){this.__proto__=new Gibberish.Bus2,Gibberish.extend(this,{name:"poly_karplus_strong",maxVoices:5,voiceCount:0,_frequency:0,polyProperties:{blend:1,damping:0},note:function(e,t){var n=this.children[this.voiceCount++];this.voiceCount>=this.maxVoices&&(this.voiceCount=0),n.note(e,t),this._frequency=e},initVoices:function(){for(var e=0;e<this.maxVoices;e++){var t={blend:this.blend,damping:this.damping,channels:2,amp:1},n=new Gibberish.KarplusStrong(t).connect(this);this.children.push(n)}}}),this.amp=1/this.maxVoices,this.children=[],"object"==typeof arguments[0]&&(this.maxVoices=arguments[0].maxVoices?arguments[0].maxVoices:this.maxVoices),Gibberish.polyInit(this),this.initVoices(),this.processProperties(arguments),this.initialized=!1,Gibberish._synth.oscillatorInit.call(this),Gibberish.dirty(this)},Gibberish.bus=function(){this.type="bus",this.inputCodegen=function(){var e,t=this.value.valueOf();return e=t+", "+this.amp,this.codeblock=e,e},this.addConnection=function(){var e=arguments[2],t={value:arguments[0],amp:arguments[1],codegen:this.inputCodegen,valueOf:function(){return this.codegen()}};"undefined"!=typeof e?this.inputs.splice(e,0,t):this.inputs.push(t),Gibberish.dirty(this)},this.removeConnection=function(e){for(var t=0;t<this.inputs.length;t++)if(this.inputs[t].value===e){this.inputs.splice(t,1),Gibberish.dirty(this);break}},this.adjustSendAmount=function(e,t){for(var n=0;n<this.inputs.length;n++)if(this.inputs[n].value===e){this.inputs[n].amp=t,Gibberish.dirty(this);break}},this.callback=function(){var e=arguments[arguments.length-2],t=arguments[arguments.length-1];output[0]=output[1]=0;for(var n=0;n<arguments.length-2;n+=2){var i="object"==typeof arguments[n],r=arguments[n+1];output[0]+=i?arguments[n][0]*r:arguments[n]*r,output[1]+=i?arguments[n][1]*r:arguments[n]*r}return output[0]*=e,output[1]*=e,panner(output,t,output)}},Gibberish.bus.prototype=new Gibberish.ugen,Gibberish._bus=new Gibberish.bus,Gibberish.Bus=function(){return Gibberish.extend(this,{name:"bus",properties:{inputs:[],amp:1},callback:function(){for(var e=0,t=arguments.length-1,n=arguments[t],i=0;t>i;i++)e+=arguments[i];return e*=n}}),this.init(),this.processProperties(arguments),this},Gibberish.Bus.prototype=Gibberish._bus,Gibberish.Bus2=function(){this.name="bus2",this.type="bus",this.properties={inputs:[],amp:1,pan:0};var e=[0,0],t=Gibberish.makePanner();this.callback=function(){var n=arguments,i=n.length,r=n[i-2],o=n[i-1];e[0]=e[1]=0;for(var s=0,a=i-2;a>s;s+=2){var u="object"==typeof n[s],c=n[s+1];e[0]+=u?n[s][0]*c||0:n[s]*c||0,e[1]+=u?n[s][1]*c||0:n[s]*c||0}return e[0]*=r,e[1]*=r,t(e,o,e)},this.show=function(){console.log(e,args)},this.getOutput=function(){return e},this.getArgs=function(){return args},this.init(arguments),this.processProperties(arguments)},Gibberish.Bus2.prototype=Gibberish._bus,Gibberish.envelope=function(){this.type="envelope"},Gibberish.envelope.prototype=new Gibberish.ugen,Gibberish._envelope=new Gibberish.envelope,Gibberish.ExponentialDecay=function(){var e=Math.pow,t=0,n=0;Gibberish.extend(this,{name:"ExponentialDecay",properties:{decay:.5,length:11050},callback:function(i,r){return t=e(i,n),n+=1/r,t},trigger:function(){n="number"==typeof arguments[0]?arguments[0]:0}}).init()},Gibberish.ExponentialDecay.prototype=Gibberish._envelope,Gibberish.Line=function(e,t,n,i){var r,o={name:"line",properties:{start:e||0,end:isNaN(t)?1:t,time:n||Gibberish.context.sampleRate,loops:i||!1},retrigger:function(e,t){s=0,this.start=r,this.end=e,this.time=t,a=(e-r)/t}},s=0,a=(t-e)/n;return this.callback=function(e,t,n,i){return r=n>s?e+s++*a:t,s=r>=t&&i?0:s,r},Gibberish.extend(this,o),this.init(),this},Gibberish.Line.prototype=Gibberish._envelope,Gibberish.AD=function(e,t){var n=0,i=0;Gibberish.extend(this,{name:"AD",properties:{attack:e||1e4,decay:t||1e4},run:function(){return i=0,n=0,this},callback:function(e,t){if(e=0>e?22050:e,t=0>t?22050:t,0===i){var r=1/e;n+=r,n>=1&&i++}else if(1===i){var r=1/t;n-=r,0>=n&&(n=0,i++)}return n},getState:function(){return i}}).init().processProperties(arguments)},Gibberish.AD.prototype=Gibberish._envelope,Gibberish.ADSR=function(e,t,n,i,r,o,s){var a={name:"adsr",type:"envelope",requireReleaseTrigger:"undefined"!=typeof s?s:!1,properties:{attack:isNaN(e)?1e4:e,decay:isNaN(t)?1e4:t,sustain:isNaN(n)?22050:n,release:isNaN(i)?1e4:i,attackLevel:r||1,sustainLevel:o||.5,releaseTrigger:0},run:function(){this.setPhase(0),this.setState(0)},stop:function(){this.releaseTrigger=1}};Gibberish.extend(this,a);var u=0,c=0,l=0,p=this;return this.callback=function(e,t,n,i,r,o,s){var a=0;return l=1===l?1:s,0===c?(a=u/e*r,++u/e===1&&(c++,u=t)):1===c?(a=u/t*(r-o)+o,--u<=0&&(null!==n?(c+=1,u=n):(c+=2,u=i))):2===c?(a=o,p.requireReleaseTrigger&&l?(c++,u=i,p.releaseTrigger=0,l=0):0!==u--||p.requireReleaseTrigger||(c++,u=i)):3===c&&(u--,a=u/i*o,0>=u&&c++),a},this.call=function(){return this.callback(this.attack,this.decay,this.sustain,this.release,this.attackLevel,this.sustainLevel,this.releaseTrigger)},this.setPhase=function(e){u=e},this.setState=function(e){c=e,u=0},this.getState=function(){return c},this.init(),this},Gibberish.ADSR.prototype=Gibberish._envelope,Gibberish.ADR=function(e,t,n,i,r){var o={name:"adr",type:"envelope",properties:{attack:isNaN(e)?11025:e,decay:isNaN(t)?11025:t,release:isNaN(n)?22050:n,attackLevel:i||1,releaseLevel:r||.2},run:function(){this.setPhase(0),this.setState(0)}};Gibberish.extend(this,o);var s=0,a=0;return this.callback=function(e,t,n,i,r){var o=0;return 0===a?(o=s/e*i,++s/e===1&&(a++,s=t)):1===a?(o=s/t*(i-r)+r,--s<=0&&(a+=1,s=n)):2===a&&(s--,o=s/n*r,0>=s&&a++),o},this.setPhase=function(e){s=e},this.setState=function(e){a=e,s=0},this.getState=function(){return a},this.init(),this},Gibberish.ADR.prototype=Gibberish._envelope,Gibberish.analysis=function(){this.type="analysis",this.codegen=function(){if(Gibberish.memo[this.symbol])return Gibberish.memo[this.symbol];var e=this.variable?this.variable:Gibberish.generateSymbol("v");return Gibberish.memo[this.symbol]=e,this.variable=e,Gibberish.callbackArgs.push(this.symbol),Gibberish.callbackObjects.push(this.callback),this.codeblock="var "+this.variable+" = "+this.symbol+"();\n",-1===Gibberish.codeblock.indexOf(this.codeblock)&&Gibberish.codeblock.push(this.codeblock),this.variable},this.analysisCodegen=function(){var e=0;this.input.codegen?(e=this.input.codegen(),e.indexOf("op")>-1&&console.log("ANALYSIS BUG")):e=this.input.value?"undefined"!=typeof this.input.value.codegen?this.input.value.codegen():this.input.value:"null";var t=this.analysisSymbol+"("+e+",";for(var n in this.properties)"input"!==n&&(t+=this[n]+",");return t=t.slice(0,-1),t+=");",this.analysisCodeblock=t,-1===Gibberish.analysisCodeblock.indexOf(this.analysisCodeblock)&&Gibberish.analysisCodeblock.push(this.analysisCodeblock),-1===Gibberish.callbackObjects.indexOf(this.analysisCallback)&&Gibberish.callbackObjects.push(this.analysisCallback),t},this.remove=function(){Gibberish.analysisUgens.splice(Gibberish.analysisUgens.indexOf(this),1)},this.analysisInit=function(){this.analysisSymbol=Gibberish.generateSymbol(this.name),Gibberish.analysisUgens.push(this),Gibberish.dirty()}},Gibberish.analysis.prototype=new Gibberish.ugen,Gibberish._analysis=new Gibberish.analysis,Gibberish.Follow=function(){this.name="follow",this.properties={input:0,bufferSize:4410,mult:1,useAbsoluteValue:!0};var e=Math.abs,t=[0],n=0,i=0,r=0;this.analysisCallback=function(o,s,a,u){"object"==typeof o&&(o=o[0]+o[1]),n+=u?e(o):o,n-=t[i],t[i]=u?e(o):o,i=(i+1)%s,t[i]=t[i]?t[i]:0,r=n/s*a},this.callback=this.getValue=function(){return r},this.init(),this.analysisInit(),this.processProperties(arguments);var o=(this.__lookupSetter__("bufferSize"),this.bufferSize);Object.defineProperty(this,"bufferSize",{get:function(){return o},set:function(e){o=e,n=0,t=[0],i=0}})},Gibberish.Follow.prototype=Gibberish._analysis,Gibberish.SingleSampleDelay=function(){this.name="single_sample_delay",this.properties={input:arguments[0]||0,amp:arguments[1]||1};var e=0;this.analysisCallback=function(t){e=t},this.callback=function(){return e},this.getValue=function(){return e},this.init(),this.analysisInit(),this.processProperties(arguments)},Gibberish.SingleSampleDelay.prototype=Gibberish._analysis,Gibberish.Record=function(e,t,n){var i=new Float32Array(t),r=0,o=!1,s=this;Gibberish.extend(this,{name:"record",oncomplete:n,properties:{input:0,size:t||0},analysisCallback:function(e,t){o&&(i[r++]="object"==typeof e?e[0]+e[1]:e,r>=t&&(o=!1,s.remove()))},record:function(){return r=0,o=!0,this},getBuffer:function(){return i},getPhase:function(){return r},remove:function(){"undefined"!=typeof this.oncomplete&&this.oncomplete();for(var e=0;e<Gibberish.analysisUgens.length;e++){var t=Gibberish.analysisUgens[e];if(t===this)return Gibberish.callbackArgs.indexOf(this.analysisSymbol)>-1&&Gibberish.callbackArgs.splice(Gibberish.callbackArgs.indexOf(this.analysisSymbol),1),Gibberish.callbackObjects.indexOf(this.analysisCallback)>-1&&Gibberish.callbackObjects.splice(Gibberish.callbackObjects.indexOf(this.analysisCallback),1),void Gibberish.analysisUgens.splice(e,1)}}}),this.properties.input=e,this.init(),this.analysisInit(),Gibberish.dirty()},Gibberish.Record.prototype=Gibberish._analysis,Gibberish.effect=function(){this.type="effect"},Gibberish.effect.prototype=new Gibberish.ugen,Gibberish._effect=new Gibberish.effect,Gibberish.Distortion=function(){var e=Math.abs,t=Math.log,n=Math.LN2;Gibberish.extend(this,{name:"distortion",properties:{input:0,amount:50},callback:function(i,r){var o;return r=r>2?r:2,"number"==typeof i?(o=i*r,i=o/(1+e(o))/(t(r)/n)):(o=i[0]*r,i[0]=o/(1+e(o))/(t(r)/n),o=i[1]*r,i[1]=o/(1+e(o))/(t(r)/n)),i}}).init().processProperties(arguments)},Gibberish.Distortion.prototype=Gibberish._effect,Gibberish.Gain=function(){Gibberish.extend(this,{name:"gain",properties:{input:0,amount:1},callback:function(e,t){return"number"==typeof e?e*=t:(e[0]*=t,e[1]*=t),e}}).init().processProperties(arguments)},Gibberish.Gain.prototype=Gibberish._effect,Gibberish.Delay=function(){var e=[],t=0;e.push(new Float32Array(2*Gibberish.context.sampleRate)),e.push(new Float32Array(2*Gibberish.context.sampleRate)),Gibberish.extend(this,{name:"delay",properties:{input:0,time:22050,feedback:.5,wet:1,dry:1},callback:function(n,i,r,o,s){var a="number"==typeof n?1:2,u=t++%88200,c=(u+(0|i))%88200;return 1===a?(e[0][c]=(n+e[0][u])*r,n=n*s+e[0][u]*o):(e[0][c]=(n[0]+e[0][u])*r,n[0]=n[0]*s+e[0][u]*o,e[1][c]=(n[1]+e[1][u])*r,n[1]=n[1]*s+e[1][u]*o),n}});var n=Math.round(this.properties.time);Object.defineProperty(this,"time",{configurable:!0,get:function(){return n},set:function(e){n=Math.round(e),Gibberish.dirty(this)}}),this.init(),this.processProperties(arguments)},Gibberish.Delay.prototype=Gibberish._effect,Gibberish.Decimator=function(){var e=0,t=[],n=Math.pow,i=Math.floor;Gibberish.extend(this,{name:"decimator",properties:{input:0,bitDepth:16,sampleRate:1},callback:function(r,o,s){e+=s;var a="number"==typeof r?1:2;if(1===a){if(e>=1){var u=n(o,2);t[0]=i(r*u)/u,e-=1}r=t[0]}else{if(e>=1){var u=n(o,2);t[0]=i(r[0]*u)/u,t[1]=i(r[1]*u)/u,e-=1}r=t}return r}}).init().processProperties(arguments)},Gibberish.Decimator.prototype=Gibberish._effect,Gibberish.RingModulation=function(){var e=(new Gibberish.Sine).callback,t=[0,0];Gibberish.extend(this,{name:"ringmod",properties:{input:0,frequency:440,amp:.5,mix:.5},callback:function(n,i,r,o){var s="number"==typeof n?1:2,a=1===s?n:n[0],u=e(i,r);if(a=a*(1-o)+a*u*o,2===s){var c=n[1];return c=c*(1-o)+c*u*o,t[0]=a,t[1]=c,t}return a}}).init().processProperties(arguments)},Gibberish.RingModulation.prototype=Gibberish._effect,Gibberish.DCBlock=function(){var e=0,t=0;Gibberish.extend(this,{name:"dcblock",type:"effect",properties:{input:0},reset:function(){e=0,t=0},callback:function(n){var i=n-e+.9997*t;return e=n,t=i,i}}).init().processProperties(arguments)},Gibberish.DCBlock.prototype=Gibberish._effect,Gibberish.Tremolo=function(){var e=(new Gibberish.Sine).callback;Gibberish.extend(this,{name:"tremolo",type:"effect",properties:{input:0,frequency:2.5,amp:.5},callback:function(t,n,i){var r="number"==typeof t?1:2,o=e(n,i);return 1===r?t*=o:(t[0]*=o,t[1]*=o),t}}).init().processProperties(arguments)},Gibberish.Tremolo.prototype=Gibberish._effect,Gibberish.OnePole=function(){var e=0;Gibberish.extend(this,{name:"onepole",type:"effect",properties:{input:0,a0:.15,b1:.85},callback:function(t,n,i){var r=t*n+e*i;return e=r,r},smooth:function(t,n){this.input=n[t],e=this.input,n[t]=this,this.obj=n,this.property=t,this.oldSetter=n.__lookupSetter__(t),this.oldGetter=n.__lookupGetter__(t);var i=this;Object.defineProperty(n,t,{get:function(){return i.input},set:function(e){i.input=e}})},remove:function(){Object.defineProperty(this.obj,this.property,{get:this.oldGetter,set:this.oldSetter}),this.obj[this.property]=this.input}}).init().processProperties(arguments)},Gibberish.OnePole.prototype=Gibberish._effect,Gibberish.Filter24=function(){var e=[0,0,0,0],t=[0,0,0,0],n=[0,0],i=isNaN(arguments[0])?.1:arguments[0],r=isNaN(arguments[1])?3:arguments[1];_isLowPass="undefined"!=typeof arguments[2]?arguments[2]:!0,Gibberish.extend(this,{name:"filter24",properties:{input:0,cutoff:i,resonance:r,isLowPass:_isLowPass},callback:function(i,r,o,s){var a="number"==typeof i?1:2,u=1===a?i:i[0],c=e[3]*o;if(c=c>1?1:c,r=0>r?0:r,r=r>1?1:r,u-=c,e[0]=e[0]+(-e[0]+u)*r,e[1]=e[1]+(-e[1]+e[0])*r,e[2]=e[2]+(-e[2]+e[1])*r,e[3]=e[3]+(-e[3]+e[2])*r,u=s?e[3]:u-e[3],2===a){var l=i[1];return c=t[3]*o,c=c>1?1:c,l-=c,t[0]=t[0]+(-t[0]+l)*r,t[1]=t[1]+(-t[1]+t[0])*r,t[2]=t[2]+(-t[2]+t[1])*r,t[3]=t[3]+(-t[3]+t[2])*r,l=s?t[3]:l-t[3],n[0]=u,n[1]=l,n}return u}}).init().processProperties(arguments)},Gibberish.Filter24.prototype=Gibberish._effect,Gibberish.SVF=function(){var e=[0,0],t=[0,0],n=Math.PI,i=[0,0];Gibberish.extend(this,{name:"SVF",properties:{input:0,cutoff:440,Q:2,mode:0,sr:Gibberish.context.sampleRate},callback:function(r,o,s,a,u){var c="number"==typeof r?1:2,l=1===c?r:r[0],p=2*n*o/u;s=1/s;var h=t[0]+p*e[0],f=l-h-s*e[0],d=p*f+e[0],m=f+h;if(e[0]=d,t[0]=h,l=0===a?h:1===a?f:2===a?d:m,2===c){var b=r[1],h=t[1]+p*e[1],f=b-h-s*e[1],d=p*f+e[1],m=f+h;e[1]=d,t[1]=h,b=0===a?h:1===a?f:2===a?d:m,i[0]=l,i[1]=b}else i=l;return i}}).init().processProperties(arguments)},Gibberish.SVF.prototype=Gibberish._effect,Gibberish.Biquad=function(){var e=x2=y1=y2=0,t=[0,0],n=.001639,i=.003278,r=.001639,o=-1.955777,s=.960601,a="LP",u=2e3,c=.5,l=Gibberish.context.sampleRate;Gibberish.extend(this,{name:"biquad",properties:{input:null},calculateCoefficients:function(){switch(a){case"LP":var e=2*Math.PI*u/l,t=Math.sin(e),p=Math.cos(e),h=t/(2*c);n=(1-p)/2,i=1-p,r=n,a0=1+h,o=-2*p,s=1-h;break;case"HP":var e=2*Math.PI*u/l,t=Math.sin(e),p=Math.cos(e),h=t/(2*c);n=(1+p)/2,i=-(1+p),r=n,a0=1+h,o=-2*p,s=1-h;break;case"BP":var e=2*Math.PI*u/l,t=Math.sin(e),p=Math.cos(e),f=Math.log(2)/2*c*e/t,h=t*(Math.exp(f)-Math.exp(-f))/2;n=h,i=0,r=-h,a0=1+h,o=-2*p,s=1-h;break;default:return}n/=a0,i/=a0,r/=a0,o/=a0,s/=a0},callback:function(a){var u="number"==typeof a?1:2,c=0,l=0,p=1===u?a:a[0];return c=n*p+i*e+r*x2-o*y1-s*y2,x2=e,e=a,y2=y1,y1=c,2===u&&(inR=a[1],l=n*inR+i*e[1]+r*x2[1]-o*y1[1]-s*y2[1],x2[1]=e[1],e[1]=a[1],y2[1]=y1[1],y1[1]=l,t[0]=c,t[1]=l),1===u?c:t}}).init(),Object.defineProperties(this,{mode:{get:function(){return a},set:function(e){a=e,this.calculateCoefficients()}},cutoff:{get:function(){return u},set:function(e){u=e,this.calculateCoefficients()}},Q:{get:function(){return c},set:function(e){c=e,this.calculateCoefficients()}}}),this.processProperties(arguments),this.calculateCoefficients()},Gibberish.Biquad.prototype=Gibberish._effect,Gibberish.Flanger=function(){var e=[new Float32Array(88200),new Float32Array(88200)],t=88200,n=(new Gibberish.Sine).callback,i=Gibberish.interpolate,r=-100,o=0;Gibberish.extend(this,{name:"flanger",properties:{input:0,rate:.25,feedback:0,amount:125,offset:125},callback:function(s,a,u,c){var l="number"==typeof s?1:2,p=r+n(a,.95*c);p>t?p-=t:0>p&&(p+=t);var h=i(e[0],p);return e[0][o]=1===l?s+h*u:s[0]+h*u,2===l?(s[0]+=h,h=i(e[1],p),e[1][o]=s[1]+h*u,s[1]+=h):s+=h,++o>=t&&(o=0),++r>=t&&(r=0),s}}).init().processProperties(arguments),r=-1*this.offset},Gibberish.Flanger.prototype=Gibberish._effect,Gibberish.Vibrato=function(){var e=[new Float32Array(88200),new Float32Array(88200)],t=88200,n=(new Gibberish.Sine).callback,i=Gibberish.interpolate,r=-100,o=0;Gibberish.extend(this,{name:"vibrato",properties:{input:0,rate:5,amount:.5,offset:125},callback:function(s,a,u,c){var l="number"==typeof s?1:2,p=r+n(a,u*c-1);p>t?p-=t:0>p&&(p+=t);var h=i(e[0],p);return e[0][o]=1===l?s:s[0],2===l?(s[0]=h,h=i(e[1],p),e[1][o]=s[1],s[1]=h):s=h,++o>=t&&(o=0),++r>=t&&(r=0),s}}).init().processProperties(arguments),r=-1*this.offset},Gibberish.Vibrato.prototype=Gibberish._effect,Gibberish.BufferShuffler=function(){var e=[new Float32Array(88200),new Float32Array(88200)],t=88200,n=0,i=0,r=0,o=0,s=0,a=Math.random,u=1,c=!1,l=!1,p=!1,h=Gibberish.interpolate,f=!1,d=1,m=!1,b=Gibberish.rndf,g=[0,0];Gibberish.extend(this,{name:"buffer_shuffler",properties:{input:0,chance:.25,rate:11025,length:22050,reverseChange:.5,pitchChance:.5,pitchMin:.25,pitchMax:2,wet:1,dry:0},callback:function(y,v,x,w,G,k,_,j,C,S){var A="number"==typeof y?1:2;s?++o%(w-400)===0&&(c=!1,l=!0,u=1,o=0):(e[0][i]=1===A?y:y[0],e[1][i]=1===A?y:y[1],i++,i%=t,m=0===i?1:m,r++,r%x==0&&a()<v&&(p=a()<G,s=!0,p||(n=i-w,0>n&&(n=t+n)),f=a()<k,f&&(d=b(_,j)),u=1,c=!0,l=!1)),n+=p?-1*d:d,0>n?n+=t:n>=t&&(n-=t);var M,P,q,T,R=h(e[0],n);return c?(u-=.0025,q=R*(1-u),M=1===A?q+y*u:q+y[0]*u,2===A&&(T=h(e[1],n),q=T*(1-u),P=1===A?M:q+y[1]*u),.0025>=u&&(c=!1)):l?(u-=.0025,q=R*u,M=1===A?q+y*u:q+y[0]*(1-u),2===A&&(T=h(e[1],n),q=T*u,P=q+y[1]*(1-u)),.0025>=u&&(l=!1,s=!1,p=!1,d=1,f=0)):1===A?M=s&&m?R*C+y*S:y:(T=h(e[1],n),M=s&&m?R*C+y[0]*S:y[0],P=s&&m?T*C+y[1]*S:y[1]),g=[M,P],1===A?M:g}}).init().processProperties(arguments)},Gibberish.BufferShuffler.prototype=Gibberish._effect,Gibberish.AllPass=function(e){var t=-1,n=new Float32Array(e||500),i=n.length;Gibberish.extend(this,{name:"allpass",properties:{input:0},callback:function(e){t=++t%i;var r=n[t],o=-1*e+r;return n[t]=e+.5*r,o}})},Gibberish.Comb=function(e){var t=new Float32Array(e||1200),n=t.length,i=0,r=0;Gibberish.extend(this,{name:"comb",properties:{input:0,feedback:.84,damping:.2},callback:function(e,o,s){var a=++i%n,u=t[a];return r=u*(1-s)+r*s,t[a]=e+r*o,u}})},Gibberish.Reverb=function(){var e={combCount:8,combTuning:[1116,1188,1277,1356,1422,1491,1557,1617],allPassCount:4,allPassTuning:[556,441,341,225],allPassFeedback:.5,fixedGain:.015,scaleDamping:.4,scaleRoom:.28,offsetRoom:.7,stereoSpread:23},t=.84,n=[],i=[],r=[0,0];Gibberish.extend(this,{name:"reverb",roomSize:.5,properties:{input:0,wet:.5,dry:.55,roomSize:.84,damping:.5},callback:function(e,t,o,s,a){for(var u="object"==typeof e?2:1,c=1===u?e:e[0]+e[1],l=.015*c,p=l,h=0;8>h;h++){var f=n[h](l,.98*s,.4*a);p+=f}for(var h=0;4>h;h++)p=i[h](p);return r[0]=r[1]=c*o+p*t,r}}).init().processProperties(arguments),this.setFeedback=function(e){t=e};for(var o=0;8>o;o++)n.push(new Gibberish.Comb(e.combTuning[o]).callback);for(var o=0;4>o;o++)i.push(new Gibberish.AllPass(e.allPassTuning[o],e.allPassFeedback).callback)},Gibberish.Reverb.prototype=Gibberish._effect,Gibberish.Granulator=function(e){var t=[];buffer=null,interpolate=Gibberish.interpolate,panner=Gibberish.makePanner(),bufferLength=0,debug=0,write=0,self=this,out=[0,0],_out=[0,0],rndf=Gibberish.rndf,numberOfGrains=e.numberOfGrains||20,Gibberish.extend(this,{name:"granulator",bufferLength:88200,reverse:!0,spread:.5,properties:{speed:1,speedMin:-0,speedMax:0,grainSize:1e3,position:.5,positionMin:0,positionMax:0,amp:.2,fade:.1,pan:0,shouldWrite:!1},setBuffer:function(e){buffer=e,bufferLength=e.length},callback:function(e,n,i,r,o,s,a,u,c,l){for(var p=0;numberOfGrains>p;p++){var h=t[p];if(h._speed>0){h.pos>h.end&&(h.pos=(a+rndf(o,s))*buffer.length,h.start=h.pos,h.end=h.start+r,h._speed=e+rndf(n,i),h._speed=h._speed<.1?.1:h._speed,h._speed=h._speed<.1&&h._speed>0?.1:h._speed,h._speed=h._speed>-.1&&h._speed<0?-.1:h._speed,h.fadeAmount=h._speed*c*r,h.pan=rndf(-1*self.spread,self.spread));for(var f=h.pos;f>buffer.length;)f-=buffer.length;for(;0>f;)f+=buffer.length;var d=interpolate(buffer,f);d*=h.pos<h.fadeAmount+h.start?(h.pos-h.start)/h.fadeAmount:1,d*=h.pos>h.end-h.fadeAmount?(h.end-h.pos)/h.fadeAmount:1}else{h.pos<h.end&&(h.pos=(a+rndf(o,s))*buffer.length,h.start=h.pos,h.end=h.start-r,h._speed=e+rndf(n,i),h._speed=h._speed<.1&&h._speed>0?.1:h._speed,h._speed=h._speed>-.1&&h._speed<0?-.1:h._speed,h.fadeAmount=h._speed*c*r);for(var f=h.pos;f>buffer.length;)f-=buffer.length;for(;0>f;)f+=buffer.length;var d=interpolate(buffer,f);d*=h.pos>h.start-h.fadeAmount?(h.start-h.pos)/h.fadeAmount:1,d*=h.pos<h.end+h.fadeAmount?(h.end-h.pos)/h.fadeAmount:1}_out=panner(d*u,h.pan,_out),out[0]+=_out[0],out[1]+=_out[1],h.pos+=h._speed}return panner(out,l,out)}}).init().processProperties(arguments);for(var n=0;numberOfGrains>n;n++)t[n]={pos:self.position+Gibberish.rndf(self.positionMin,self.positionMax),_speed:self.speed+Gibberish.rndf(self.speedMin,self.speedMax)},t[n].start=t[n].pos,t[n].end=t[n].pos+self.grainSize,t[n].fadeAmount=t[n]._speed*self.fade*self.grainSize,t[n].pan=Gibberish.rndf(-1*self.spread,self.spread);
"undefined"!=typeof e.buffer&&(buffer=e.buffer,bufferLength=buffer.length)},Gibberish.Granulator.prototype=Gibberish._effect,Gibberish.synth=function(){this.type="oscillator",this.oscillatorInit=function(){this.fx=new Array2,this.fx.parent=this}},Gibberish.synth.prototype=new Gibberish.ugen,Gibberish._synth=new Gibberish.synth,Gibberish.Synth=function(e){this.name="synth",this.properties={frequency:0,pulsewidth:.5,attack:22050,decay:22050,sustain:22050,release:22050,attackLevel:1,sustainLevel:.5,releaseTrigger:0,glide:.15,amp:.25,channels:2,pan:0,sr:Gibberish.context.sampleRate},this.note=function(e,i){if(0!==i){if("object"!=typeof this.frequency){if(t&&e===l)return void(this.releaseTrigger=1);this.frequency=l=e,this.releaseTrigger=0}else this.frequency[0]=l=e,this.releaseTrigger=0,Gibberish.dirty(this);"undefined"!=typeof i&&(this.amp=i),n.run()}else this.releaseTrigger=1},e=e||{};var t="undefined"==typeof e.useADSR?!1:e.useADSR,n=t?new Gibberish.ADSR:new Gibberish.AD,i=n.getState,r=n.callback,o=new Gibberish.PWM,s=o.callback,a=(new Gibberish.OnePole).callback,u=Gibberish.makePanner(),c=this,l=0,p=[0,0];n.requireReleaseTrigger=e.requireReleaseTrigger||!1,this.callback=function(e,n,o,l,h,f,d,m,b,g,y,v,x,w){g=g>=1?.99999:g,e=a(e,1-g,g);var G,k;return t?(G=r(o,l,h,f,d,m,b),b&&(c.releaseTrigger=0),i()<4?(k=s(e,1,n,w)*G*y,1===v?k:u(k,x,p)):(k=p[0]=p[1]=0,1===v?k:p)):i()<2?(G=r(o,l),k=s(e,1,n,w)*G*y,1===v?k:u(k,x,p)):(k=p[0]=p[1]=0,1===v?k:p)},this.getEnv=function(){return n},this.getOsc=function(){return o},this.setOsc=function(e){o=e,s=o.callback};var h="PWM";Object.defineProperty(this,"waveform",{get:function(){return h},set:function(e){this.setOsc(new Gibberish[e])}}),this.init(),this.oscillatorInit(),this.processProperties(arguments)},Gibberish.Synth.prototype=Gibberish._synth,Gibberish.PolySynth=function(){this.__proto__=new Gibberish.Bus2,Gibberish.extend(this,{name:"polysynth",maxVoices:5,voiceCount:0,frequencies:[],_frequency:0,polyProperties:{frequency:0,glide:0,attack:22050,decay:22050,pulsewidth:.5,waveform:"PWM"},note:function(e,t){var n=this.frequencies.indexOf(e),i=n>-1?n:this.voiceCount++,r=this.children[i];r.note(e,t),-1===n?(this.frequencies[i]=e,this._frequency=e,this.voiceCount>=this.maxVoices&&(this.voiceCount=0)):delete this.frequencies[i]},initVoices:function(){for(var e=0;e<this.maxVoices;e++){var t={waveform:this.waveform,attack:this.attack,decay:this.decay,pulsewidth:this.pulsewidth,channels:2,amp:1,useADSR:this.useADSR||!1,requireReleaseTrigger:this.requireReleaseTrigger||!1},n=new Gibberish.Synth(t).connect(this);this.children.push(n)}}}),this.amp=1/this.maxVoices,this.children=[],"object"==typeof arguments[0]&&(this.maxVoices=arguments[0].maxVoices?arguments[0].maxVoices:this.maxVoices,this.useADSR="undefined"!=typeof arguments[0].useADSR?arguments[0].useADSR:!1,this.requireReleaseTrigger="undefined"!=typeof arguments[0].requireReleaseTrigger?arguments[0].requireReleaseTrigger:!1),Gibberish.polyInit(this),this.initVoices(),this.processProperties(arguments),Gibberish._synth.oscillatorInit.call(this)},Gibberish.Synth2=function(e){this.name="synth2",this.properties={frequency:0,pulsewidth:.5,attack:22050,decay:22050,sustain:22050,release:22050,attackLevel:1,sustainLevel:.5,releaseTrigger:0,cutoff:.25,resonance:3.5,useLowPassFilter:!0,glide:.15,amp:.25,channels:1,pan:0,sr:Gibberish.context.sampleRate},this.note=function(e,i){if(0!==i){if("object"!=typeof this.frequency){if(t&&e===p)return void(this.releaseTrigger=1);this.frequency=p=e,this.releaseTrigger=0}else this.frequency[0]=p=e,this.releaseTrigger=0,Gibberish.dirty(this);"undefined"!=typeof i&&(this.amp=i),n.run()}else this.releaseTrigger=1},e=e||{};var t="undefined"==typeof e.useADSR?!1:e.useADSR,n=t?new Gibberish.ADSR:new Gibberish.AD,i=n.getState,r=n.callback,o=new Gibberish.PWM,s=o.callback,a=new Gibberish.Filter24,u=a.callback,c=(new Gibberish.OnePole).callback,l=Gibberish.makePanner(),p=0,h=this,f=[0,0];n.requireReleaseTrigger=e.requireReleaseTrigger||!1,this.callback=function(e,n,o,a,p,d,m,b,g,y,v,x,w,G,k,_,j){w=w>=1?.99999:w,e=c(e,1-w,w);var C,S;return t?(C=r(o,a,p,d,m,b,g),g&&(h.releaseTrigger=0),i()<4?(S=u(s(e,.15,n,j),y*C,v,x)*C*G,1===k?S:l(S,_,f)):(S=f[0]=f[1]=0,1===k?S:f)):i()<2?(C=r(o,a),S=u(s(e,.15,n,j),y*C,v,x)*C*G,1===k?S:l(S,_,f)):(S=f[0]=f[1]=0,1===k?S:f)},this.getUseADSR=function(){return t},this.getEnv=function(){return n},this.getOsc=function(){return o},this.setOsc=function(e){o=e,s=o.callback};var d="PWM";Object.defineProperty(this,"waveform",{get:function(){return d},set:function(e){this.setOsc(new Gibberish[e])}}),this.init(),this.oscillatorInit(),this.processProperties(arguments)},Gibberish.Synth2.prototype=Gibberish._synth,Gibberish.PolySynth2=function(){this.__proto__=new Gibberish.Bus2,Gibberish.extend(this,{name:"polysynth2",maxVoices:5,voiceCount:0,frequencies:[],_frequency:0,polyProperties:{frequency:0,glide:0,attack:22050,decay:22050,pulsewidth:.5,resonance:3.5,cutoff:.25,useLowPassFilter:!0,waveform:"PWM"},note:function(e,t){var n=this.frequencies.indexOf(e),i=n>-1?n:this.voiceCount++,r=this.children[i];r.note(e,t),-1===n?(this.frequencies[i]=e,this._frequency=e,this.voiceCount>=this.maxVoices&&(this.voiceCount=0)):delete this.frequencies[i]},initVoices:function(){this.dirty=!0;for(var e=0;e<this.maxVoices;e++){var t={attack:this.attack,decay:this.decay,pulsewidth:this.pulsewidth,channels:2,amp:1,useADSR:this.useADSR||!1,requireReleaseTrigger:this.requireReleaseTrigger||!1},n=new Gibberish.Synth2(t).connect(this);this.children.push(n)}}}),this.amp=1/this.maxVoices,this.children=[],"object"==typeof arguments[0]&&(this.maxVoices=arguments[0].maxVoices?arguments[0].maxVoices:this.maxVoices,this.useADSR="undefined"!=typeof arguments[0].useADSR?arguments[0].useADSR:!1,this.requireReleaseTrigger="undefined"!=typeof arguments[0].requireReleaseTrigger?arguments[0].requireReleaseTrigger:!1),Gibberish.polyInit(this),this.initVoices(),this.processProperties(arguments),Gibberish._synth.oscillatorInit.call(this)},Gibberish.FMSynth=function(e){this.name="fmSynth",this.properties={frequency:0,cmRatio:2,index:5,attack:22050,decay:22050,sustain:22050,release:22050,attackLevel:1,sustainLevel:.5,releaseTrigger:0,glide:.15,amp:.25,channels:2,pan:0},this.note=function(e,i){if(0!==i){if("object"!=typeof this.frequency){if(t&&e===p)return void(this.releaseTrigger=1);this.frequency=p=e,this.releaseTrigger=0}else this.frequency[0]=p=e,this.releaseTrigger=0,Gibberish.dirty(this);"undefined"!=typeof i&&(this.amp=i),n.run()}else this.releaseTrigger=1},e=e||{};var t="undefined"==typeof e.useADSR?!1:e.useADSR,n=t?new Gibberish.ADSR:new Gibberish.AD,i=n.getState,r=n.callback,o=(new Gibberish.Sine).callback,s=(new Gibberish.Sine).callback,a=(new Gibberish.OnePole).callback,u=Gibberish.makePanner(),c=[0,0],l=this,p=0;n.requireReleaseTrigger=e.requireReleaseTrigger||!1,this.callback=function(e,n,p,h,f,d,m,b,g,y,v,x,w,G){var k,_,j;return v>=1&&(v=.9999),e=a(e,1-v,v),t?(k=r(h,f,d,m,b,g,y),y&&(l.releaseTrigger=0),i()<4?(j=s(e*n,e*p)*k,_=o(e+j,1)*k*x,1===w?_:u(_,G,c)):(_=c[0]=c[1]=0,1===w?_:c)):i()<2?(k=r(h,f),j=s(e*n,e*p)*k,_=o(e+j,1)*k*x,1===w?_:u(_,G,c)):(_=c[0]=c[1]=0,1===w?_:c)},this.init(),this.oscillatorInit(),this.processProperties(arguments)},Gibberish.FMSynth.prototype=Gibberish._synth,Gibberish.PolyFM=function(){this.__proto__=new Gibberish.Bus2,Gibberish.extend(this,{name:"polyfm",maxVoices:5,voiceCount:0,children:[],frequencies:[],_frequency:0,polyProperties:{glide:0,attack:22050,decay:22050,index:5,cmRatio:2},note:function(e,t){var n=this.frequencies.indexOf(e),i=n>-1?n:this.voiceCount++,r=this.children[i];r.note(e,t),-1===n?(this.frequencies[i]=e,this._frequency=e,this.voiceCount>=this.maxVoices&&(this.voiceCount=0)):delete this.frequencies[i]},initVoices:function(){for(var e=0;e<this.maxVoices;e++){var t={attack:this.attack,decay:this.decay,cmRatio:this.cmRatio,index:this.index,channels:2,useADSR:this.useADSR||!1,requireReleaseTrigger:this.requireReleaseTrigger||!1,amp:1},n=new Gibberish.FMSynth(t);n.connect(this),this.children.push(n)}}}),this.amp=1/this.maxVoices,this.children=[],"object"==typeof arguments[0]&&(this.maxVoices=arguments[0].maxVoices?arguments[0].maxVoices:this.maxVoices,this.useADSR="undefined"!=typeof arguments[0].useADSR?arguments[0].useADSR:!1,this.requireReleaseTrigger="undefined"!=typeof arguments[0].requireReleaseTrigger?arguments[0].requireReleaseTrigger:!1),Gibberish.polyInit(this),this.initVoices(),this.processProperties(arguments),Gibberish._synth.oscillatorInit.call(this)},Gibberish.Sampler=function(){function e(e){Gibberish.context.decodeAudioData(e,function(e){o=e.getChannelData(0),a.length=t=a.end=s=o.length,a.isPlaying=!0,a.buffers[a.file]=o,Gibberish.audioFiles[a.file]=o,a.onload&&a.onload(),0!==a.playOnLoad&&a.note(a.playOnLoad),a.isLoaded=!0},function(e){console.log("Error decoding file",e)})}var t=1,n=Gibberish.interpolate,i=Gibberish.makePanner(),r=[0,0],o=null,s=1,a=this;if(Gibberish.extend(this,{name:"sampler",file:null,isLoaded:!1,playOnLoad:0,buffers:{},properties:{pitch:1,amp:1,isRecording:!1,isPlaying:!0,input:0,length:0,start:0,end:1,loops:0,pan:0},_onload:function(e){o=e.channels[0],s=e.length,a.end=s,a.length=t=s,a.isPlaying=!0,Gibberish.audioFiles[a.file]=o,a.buffers[a.file]=o,a.onload&&a.onload(),0!==a.playOnLoad&&a.note(a.playOnLoad),a.isLoaded=!0},switchBuffer:function(e){if("string"==typeof e)"undefined"!=typeof a.buffers[e]&&(o=a.buffers[e],s=a.end=a.length=o.length);else if("number"==typeof e){var t=Object.keys(a.buffers);if(0===t.length)return;o=a.buffers[t[e]],s=a.end=a.length=o.length}},floatTo16BitPCM:function(e,t,n){for(var i=0;i<n.length-1;i++,t+=2){var r=Math.max(-1,Math.min(1,n[i]));e.setInt16(t,0>r?32768*r:32767*r,!0)}},encodeWAV:function(){function e(e,t,n){for(var i=0;i<n.length;i++)e.setUint8(t+i,n.charCodeAt(i))}var t=this.getBuffer(),n=new ArrayBuffer(44+2*t.length),i=new DataView(n),r=Gibberish.context.sampleRate;return e(i,0,"RIFF"),i.setUint32(4,32+2*t.length,!0),e(i,8,"WAVE"),e(i,12,"fmt "),i.setUint32(16,16,!0),i.setUint16(20,1,!0),i.setUint16(22,1,!0),i.setUint32(24,r,!0),i.setUint32(28,4*r,!0),i.setUint16(32,2,!0),i.setUint16(34,16,!0),e(i,36,"data"),i.setUint32(40,2*t.length,!0),this.floatTo16BitPCM(i,44,t),i},download:function(){var e=this.encodeWAV(),t=new Blob([e]),n=window.webkitURL.createObjectURL(t),i=window.document.createElement("a");i.href=n,i.download="output.wav";var r=document.createEvent("Event");r.initEvent("click",!0,!0),i.dispatchEvent(r)},note:function(e,n){switch(typeof e){case"number":this.pitch=e;break;case"function":this.pitch=e();break;case"object":Array.isArray(e)&&(this.pitch=e[0])}if("number"==typeof n&&(this.amp=n),null!==this.function){this.isPlaying=!0;var i;switch(typeof this.pitch){case"number":i=this.pitch;break;case"function":i=this.pitch();break;case"object":i=Array.isArray(this.pitch)?this.pitch[0]:this.pitch,"function"==typeof i&&(i=i())}t=i>0||"object"==typeof i?this.start:this.end}},getBuffer:function(){return o},setBuffer:function(e){o=e},getPhase:function(){return t},setPhase:function(e){t=e},getNumberOfBuffers:function(){return Object.keys(a.buffers).length-1},callback:function(e,s,a,u,c,l,p,h,f,d){var m=0;return t+=e,h>t&&t>0?(e>0?m=null!==o&&u?n(o,t):0:t>p?m=null!==o&&u?n(o,t):0:t=f?h:t,i(m*s,d,r)):(t=f&&e>0?p:t,t=f&&0>e?h:t,r[0]=r[1]=m,r)}}).init().oscillatorInit().processProperties(arguments),"undefined"!=typeof arguments[0]&&("string"==typeof arguments[0]?(this.file=arguments[0],this.pitch=0):"object"==typeof arguments[0]&&arguments[0].file&&(this.file=arguments[0].file)),"undefined"!=typeof Gibberish.audioFiles[this.file])o=Gibberish.audioFiles[this.file],this.end=this.bufferLength=o.length,this.buffers[this.file]=o,t=this.bufferLength,Gibberish.dirty(this),this.onload&&this.onload();else if(null!==this.file){var e,u=new XMLHttpRequest;u.open("GET",this.file,!0),u.responseType="arraybuffer",u.onload=function(){e(this.response)},u.send()}else"undefined"!=typeof this.buffer&&(this.isLoaded=!0,o=this.buffer,this.end=this.bufferLength=o.length||88200,t=this.bufferLength,arguments[0]&&arguments[0].loops&&(this.loops=1),Gibberish.dirty(this),this.onload&&this.onload())},Gibberish.Sampler.prototype=Gibberish._oscillator,Gibberish.Sampler.prototype.record=function(e,t){this.isRecording=!0;var n=this;return this.recorder=new Gibberish.Record(e,t,function(){n.setBuffer(this.getBuffer()),n.end=bufferLength=n.getBuffer().length,n.setPhase(n.end),n.isRecording=!1}).record(),this},Gibberish.MonoSynth=function(){Gibberish.extend(this,{name:"monosynth",properties:{attack:1e4,decay:1e4,cutoff:.2,resonance:2.5,amp1:1,amp2:1,amp3:1,filterMult:.3,isLowPass:!0,pulsewidth:.5,amp:.6,detune2:.01,detune3:-.01,octave2:1,octave3:-1,glide:0,pan:0,frequency:0,channels:2},waveform:"Saw3",note:function(e,i){"undefined"!=typeof i&&0!==i&&(this.amp=i),0!==i&&("object"!=typeof this.frequency?this.frequency=e:(this.frequency[0]=e,Gibberish.dirty(this)),n()>0&&t.run())},_note:function(e,n){if("object"!=typeof this.frequency){if(useADSR&&e===lastFrequency&&0===n)return void(this.releaseTrigger=1);0!==n&&(this.frequency=lastFrequency=e),this.releaseTrigger=0}else 0!==n&&(this.frequency[0]=lastFrequency=e),this.releaseTrigger=0,Gibberish.dirty(this);"undefined"!=typeof n&&0!==n&&(this.amp=n),0!==n&&t.run()}});var e=this.waveform;Object.defineProperty(this,"waveform",{get:function(){return e},set:function(t){e!==t&&(e=t,o=(new Gibberish[t]).callback,s=(new Gibberish[t]).callback,a=(new Gibberish[t]).callback)}});var t=new Gibberish.AD(this.attack,this.decay),n=t.getState,i=t.callback,r=(new Gibberish.Filter24).callback,o=new Gibberish[this.waveform](this.frequency,this.amp1).callback,s=new Gibberish[this.waveform](this.frequency2,this.amp2).callback,a=new Gibberish[this.waveform](this.frequency3,this.amp3).callback,u=(new Gibberish.OnePole).callback,c=Gibberish.makePanner(),l=[0,0];this.callback=function(e,t,p,h,f,d,m,b,g,y,v,x,w,G,k,_,j,C,S){if(n()<2){_>=1&&(_=.9999),C=u(C,1-_,_);var A=C;if(G>0)for(var M=0;G>M;M++)A*=2;else if(0>G)for(var M=0;M>G;M--)A/=2;var P=C;if(k>0)for(var M=0;k>M;M++)P*=2;else if(0>k)for(var M=0;M>k;M--)P/=2;A+=x>0?(2*C-C)*x:(C-C/2)*x,P+=w>0?(2*C-C)*w:(C-C/2)*w;var q=o(C,f,y)+s(A,d,y)+a(P,m,y),T=i(e,t),R=r(q,p+b*T,h,g,1)*T;return R*=v,l[0]=l[1]=R,1===S?l:c(R,j,l)}return l[0]=l[1]=0,l},this.init(),this.oscillatorInit(),this.processProperties(arguments)},Gibberish.MonoSynth.prototype=Gibberish._synth,Gibberish.Binops={"export":function(e){Gibberish.export("Binops",e||window)},operator:function(){var e=new Gibberish.ugen,t=arguments[0],n=Array.prototype.slice.call(arguments,1);e.name="op",e.properties={};for(var i=0;i<n.length;i++)e.properties[i]=n[i];return e.init.apply(e,n),e.codegen=function(){var e,n="( ";e=Object.keys(this.properties);for(var i=0;i<e.length;i++){var r="object"==typeof this[i];n+=r?this[i].codegen():this[i],i<e.length-1&&(n+=" "+t+" ")}return n+=" )",this.codeblock=n,n},e.valueOf=function(){return e.codegen()},e},Add:function(){var e=Array.prototype.slice.call(arguments,0);return e.unshift("+"),Gibberish.Binops.operator.apply(null,e)},Sub:function(){var e=Array.prototype.slice.call(arguments,0);return e.unshift("-"),Gibberish.Binops.operator.apply(null,e)},Mul:function(){var e=Array.prototype.slice.call(arguments,0);return e.unshift("*"),Gibberish.Binops.operator.apply(null,e)},Div:function(){var e=Array.prototype.slice.call(arguments,0);return e.unshift("/"),Gibberish.Binops.operator.apply(null,e)},Mod:function(){var e=Array.prototype.slice.call(arguments,0);return e.unshift("%"),Gibberish.Binops.operator.apply(null,e)},Abs:function(){var e=Array.prototype.slice.call(arguments,0),t={name:"abs",properties:{},callback:Math.abs.bind(t)};return t.__proto__=new Gibberish.ugen,t.properties[0]=e[0],t.init(),t},Sqrt:function(){var e=(Array.prototype.slice.call(arguments,0),{name:"sqrt",properties:{},callback:Math.sqrt.bind(e)});return e.__proto__=new Gibberish.ugen,e.properties[i]=arguments[0],e.init(),e},Pow:function(){var e=Array.prototype.slice.call(arguments,0),t={name:"pow",properties:{},callback:Math.pow.bind(t)};t.__proto__=new Gibberish.ugen;for(var n=0;n<e.length;n++)t.properties[n]=e[n];return t.init(),console.log(t.callback),t},Clamp:function(){var e=Array.prototype.slice.call(arguments,0),t={name:"clamp",properties:{input:0,min:0,max:1},callback:function(e,t,n){return t>e?e=t:e>n&&(e=n),e}};return t.__proto__=new Gibberish.ugen,t.init(),t.processProperties(e),t},Merge:function(){var e=Array.prototype.slice.call(arguments,0),t={name:"merge",properties:{},callback:function(e){return e[0]+e[1]}};t.__proto__=new Gibberish.ugen;for(var n=0;n<e.length;n++)t.properties[n]=e[n];return t.init(),t},Map:function(e,t,n,i,r,o,s){var a=Math.pow,u=0,c=0,l={name:"map",properties:{input:e,outputMin:t,outputMax:n,inputMin:i,inputMax:r,curve:o||u,wrap:s||!1},callback:function(e,t,n,i,r,o,s){var u,l=n-t,p=r-i,h=(e-i)/p;return h>1?h=s?h%1:1:0>h&&(h=s?1+h%1:0),u=0===o?t+h*l:t+a(h,1.5)*l,c=u,u},getValue:function(){return c},invert:function(){var e=l.outputMin;l.outputMin=l.outputMax,l.outputMax=e}};return l.__proto__=new Gibberish.ugen,l.init(),l}},Gibberish.Time={bpm:120,"export":function(e){Gibberish.export("Time",e||window)},ms:function(e){return e*Gibberish.context.sampleRate/1e3},seconds:function(e){return e*Gibberish.context.sampleRate},beats:function(e){return function(){var t=Gibberish.context.sampleRate/(Gibberish.Time.bpm/60);return t*e}}},Gibberish.Sequencer2=function(){var e=this,t=0;Gibberish.extend(this,{target:null,key:null,values:null,valuesIndex:0,durations:null,durationsIndex:0,nextTime:0,playOnce:!1,repeatCount:0,repeatTarget:null,isConnected:!0,keysAndValues:null,counts:{},properties:{rate:1,isRunning:!1,nextTime:0},offset:0,name:"seq",callback:function(n,i,r){if(i){if(t>=r){if(null!==e.values){if(e.target){var o=e.values[e.valuesIndex++];"function"==typeof o&&(o=o()),"function"==typeof e.target[e.key]?e.target[e.key](o):e.target[e.key]=o}else"function"==typeof e.values[e.valuesIndex]&&e.values[e.valuesIndex++]();e.valuesIndex>=e.values.length&&(e.valuesIndex=0)}else if(null!==e.keysAndValues)for(var s in e.keysAndValues){var a=e.counts[s]++,o=e.keysAndValues[s][a];"function"==typeof o&&(o=o()),"function"==typeof e.target[s]?e.target[s](o):e.target[s]=o,e.counts[s]>=e.keysAndValues[s].length&&(e.counts[s]=0),e.chose&&e.chose(s,a)}else"function"==typeof e.target[e.key]&&e.target[e.key]();if(t-=r,Array.isArray(e.durations)){var u=e.durations[e.durationsIndex++];e.nextTime="function"==typeof u?u():u,e.chose&&e.chose("durations",e.durationsIndex-1),e.durationsIndex>=e.durations.length&&(e.durationsIndex=0)}else{var u=e.durations;e.nextTime="function"==typeof u?u():u}return e.repeatTarget&&(e.repeatCount++,e.repeatCount===e.repeatTarget&&(e.isRunning=!1,e.repeatCount=0)),0}t+=n}return 0},start:function(e){return e||(t=0),this.isRunning=!0,this},stop:function(){return this.isRunning=!1,this},repeat:function(e){return this.repeatTarget=e,this},shuffle:function(){for(n in this.keysAndValues)this.shuffleArray(this.keysAndValues[n])},shuffleArray:function(e){for(var t,n,i=e.length;i;t=parseInt(Math.random()*i),n=e[--i],e[i]=e[t],e[t]=n);}}),this.init(arguments),this.processProperties(arguments);for(var n in this.keysAndValues)this.counts[n]=0;this.oscillatorInit(),t+=this.offset,this.connect()},Gibberish.Sequencer2.prototype=Gibberish._oscillator,Gibberish.Sequencer=function(){Gibberish.extend(this,{target:null,key:null,values:null,valuesIndex:0,durations:null,durationsIndex:0,nextTime:0,phase:0,isRunning:!1,playOnce:!1,repeatCount:0,repeatTarget:null,isConnected:!0,keysAndValues:null,counts:{},offset:0,name:"seq",tick:function(){if(this.isRunning){if(this.phase>=this.nextTime){if(null!==this.values){if(this.target){var e=this.values[this.valuesIndex++];if("function"==typeof e)try{e=e()}catch(t){console.error("ERROR: Can't execute function triggered by Sequencer:\n"+e.toString()),this.values.splice(this.valuesIndex-1,1),this.valuesIndex--}"function"==typeof this.target[this.key]?this.target[this.key](e):this.target[this.key]=e}else if("function"==typeof this.values[this.valuesIndex])try{this.values[this.valuesIndex++]()}catch(t){console.error("ERROR: Can't execute function triggered by Sequencer:\n"+this.values[this.valuesIndex-1].toString()),this.values.splice(this.valuesIndex-1,1),this.valuesIndex--}this.valuesIndex>=this.values.length&&(this.valuesIndex=0)}else if(null!==this.keysAndValues)for(var n in this.keysAndValues){var i="function"==typeof this.keysAndValues[n].pick?this.keysAndValues[n].pick():this.counts[n]++,e=this.keysAndValues[n][i];if("function"==typeof e)try{e=e()}catch(t){console.error("ERROR: Can't execute function triggered by Sequencer:\n"+e.toString()),this.keysAndValues[n].splice(i,1),"function"!=typeof this.keysAndValues[n].pick&&this.counts[n]--}"function"==typeof this.target[n]?this.target[n](e):this.target[n]=e,this.counts[n]>=this.keysAndValues[n].length&&(this.counts[n]=0)}else"function"==typeof this.target[this.key]&&this.target[this.key]();if(this.phase-=this.nextTime,Array.isArray(this.durations)){var r="function"==typeof this.durations.pick?this.durations[this.durations.pick()]:this.durations[this.durationsIndex++];this.nextTime="function"==typeof r?r():r,this.durationsIndex>=this.durations.length&&(this.durationsIndex=0)}else{var r=this.durations;this.nextTime="function"==typeof r?r():r}return void(this.repeatTarget&&(this.repeatCount++,this.repeatCount===this.repeatTarget&&(this.isRunning=!1,this.repeatCount=0)))}this.phase++}},start:function(e){return e||(this.phase=this.offset),this.isRunning=!0,this},stop:function(){return this.isRunning=!1,this},repeat:function(e){return this.repeatTarget=e,this},shuffle:function(){for(e in this.keysAndValues)this.shuffleArray(this.keysAndValues[e])},shuffleArray:function(e){for(var t,n,i=e.length;i;t=parseInt(Math.random()*i),n=e[--i],e[i]=e[t],e[t]=n);},disconnect:function(){var e=Gibberish.sequencers.indexOf(this);Gibberish.sequencers.splice(e,1),this.isConnected=!1},connect:function(){return-1===Gibberish.sequencers.indexOf(this)&&Gibberish.sequencers.push(this),this.isConnected=!0,this}});for(var e in arguments[0])this[e]=arguments[0][e];for(var e in this.keysAndValues)this.counts[e]=0;this.connect(),this.phase+=this.offset},Gibberish.Sequencer.prototype=Gibberish._oscillator,Gibberish.PolySeq=function(){var e=this,t=0,n=function(e,t){return t>e?-1:e>t?1:0};Gibberish.extend(this,{seqs:[],timeline:{},playOnce:!1,repeatCount:0,repeatTarget:null,isConnected:!1,properties:{rate:1,isRunning:!1,nextTime:0},offset:0,autofire:[],name:"polyseq",getPhase:function(){return t},timeModifier:null,add:function(n){n.valuesIndex=n.durationsIndex=0,e.seqs.push(n),null===n.durations&&e.autofire.push(n),"undefined"!=typeof e.timeline[t]?n.priority?e.timeline[t].unshift(n):e.timeline[t].push(n):e.timeline[t]=[n],!e.scale||"frequency"!==n.key&&"note"!==n.key||e.applyScale&&e.applyScale(),e.nextTime=t,n.shouldStop=!1},callback:function(i,r,o){var s;if(r){if(t>=o){var a=e.timeline[o],u=t-o;if("undefined"==typeof a)return;e.autofire.length&&(a=a.concat(e.autofire));for(var c=0;c<a.length;c++){var l=a[c];if(!l.shouldStop){var p=l.values.pick?l.values.pick():l.valuesIndex++%l.values.length,h=l.values[p];if("function"==typeof h&&(h=h()),l.target&&("function"==typeof l.target[l.key]?l.target[l.key](h):l.target[l.key]=h),e.chose&&e.chose(l.key,p),null!==l.durations){if(Array.isArray(l.durations)){var p=l.durations.pick?l.durations.pick():l.durationsIndex++,f=l.durations[p];s="function"==typeof f?f():f,l.durationsIndex>=l.durations.length&&(l.durationsIndex=0),e.chose&&e.chose("durations",p)}else{var f=l.durations;s="function"==typeof f?f():f}var d;d=null!==e.timeModifier?e.timeModifier(s)+t:s+t,d-=u,s-=u,"undefined"==typeof e.timeline[d]?e.timeline[d]=[l]:l.priority?e.timeline[d].unshift(l):e.timeline[d].push(l)}}}delete e.timeline[o];var m=Object.keys(e.timeline),b=m.length;if(b>1){for(var g=0;b>g;g++)m[g]=parseFloat(m[g]);m=m.sort(n),e.nextTime=m[0]}else e.nextTime=parseFloat(m[0])}t+=i}return 0},start:function(e,n){if(e&&this.offset){t=0,this.nextTime=this.offset;var i=""+this.offset;this.timeline={},this.timeline[i]=[];for(var r=0;r<this.seqs.length;r++){var o=this.seqs[r];o.valuesIndex=o.durationsIndex=o.shouldStop=0,this.timeline[i].push(o)}}else{t=0,this.nextTime=0,this.timeline={0:[]};for(var r=0;r<this.seqs.length;r++){var o=this.seqs[r];o.valuesIndex=o.durationsIndex=o.shouldStop=0,this.timeline[0].push(o)}}return this.isConnected||(this.connect(Gibberish.Master,n),this.isConnected=!0),this.isRunning=!0,this},stop:function(){return this.isRunning=!1,this.isConnected&&(this.disconnect(),this.isConnected=!1),this},repeat:function(e){return this.repeatTarget=e,this},shuffle:function(e){if("undefined"!=typeof e)for(var t=0;t<this.seqs.length;t++)this.seqs[t].key===e&&this.shuffleArray(this.seqs[t].values);else for(var t=0;t<this.seqs.length;t++)this.shuffleArray(this.seqs[t].values)},shuffleArray:function(e){for(var t,n,i=e.length;i;t=parseInt(Math.random()*i),n=e[--i],e[i]=e[t],e[t]=n);}}),this.init(arguments),this.processProperties(arguments),this.oscillatorInit()},Gibberish.PolySeq.prototype=Gibberish._oscillator;var _hasInput=!1;return Gibberish.Input=function(){var e=[];_hasInput||createInput(),this.type=this.name="input",this.fx=new Array2,this.fx.parent=this,this.properties={input:"input",amp:.5,channels:1},this.callback=function(t,n,i){return 1===i?e=t*n:(e[0]=t[0]*n,e[1]=t[1]*n),e},this.init(arguments),this.processProperties(arguments)},Gibberish.Input.prototype=new Gibberish.ugen,Gibberish.Kick=function(){var e=!1,t=(new Gibberish.SVF).callback,n=(new Gibberish.SVF).callback,i=.2,r=.8;Gibberish.extend(this,{name:"kick",properties:{pitch:50,__decay:20,__tone:1e3,amp:2,sr:Gibberish.context.sampleRate},callback:function(i,r,o,s,a){var u=e?60:0;return u=t(u,i,r,2,a),u=n(u,o,.5,0,a),u*=s,e=!1,u},note:function(t,n,i,r){"number"==typeof t&&(this.pitch=t),"number"==typeof n&&(this.decay=n),"number"==typeof i&&(this.tone=i),"number"==typeof r&&(this.amp=r),e=!0}}).init().oscillatorInit(),Object.defineProperties(this,{decay:{get:function(){return i},set:function(e){i=e>1?1:e,this.__decay=100*i}},tone:{get:function(){return r},set:function(e){r=e>1?1:e,this.__tone=220+1400*e}}}),this.processProperties(arguments)},Gibberish.Kick.prototype=Gibberish._oscillator,Gibberish.Conga=function(){var e=!1,t=(new Gibberish.SVF).callback;Gibberish.extend(this,{name:"conga",properties:{pitch:190,amp:2,sr:Gibberish.context.sampleRate},callback:function(n,i,r){var o=e?60:0;return o=t(o,n,50,2,r),o*=i,e=!1,o},note:function(t,n){"number"==typeof t&&(this.pitch=t),"number"==typeof n&&(this.amp=n),e=!0}}).init().oscillatorInit(),this.processProperties(arguments)},Gibberish.Conga.prototype=Gibberish._oscillator,Gibberish.Clave=function(){var e=!1,t=new Gibberish.SVF,n=t.callback;Gibberish.extend(this,{name:"clave",properties:{pitch:2500,amp:1,sr:Gibberish.context.sampleRate},callback:function(t,i,r){var o=e?2:0;return o=n(o,t,5,2,r),o*=i,e=!1,o},note:function(t,n){"number"==typeof t&&(this.pitch=t),"number"==typeof n&&(this.amp=n),e=!0}}).init().oscillatorInit(),this.bpf=t,this.processProperties(arguments)},Gibberish.Clave.prototype=Gibberish._oscillator,Gibberish.Tom=function(){var e=!1,t=(new Gibberish.SVF).callback,n=(new Gibberish.SVF).callback,i=new Gibberish.ExponentialDecay,r=i.callback,o=Math.random;Gibberish.extend(this,{name:"tom",properties:{pitch:80,amp:.5,sr:Gibberish.context.sampleRate},callback:function(i,s,a){var u,c=e?60:0;return c=t(c,i,30,2,a),u=16*o()-8,u=u>0?u:0,u*=r(.05,11025),u=n(u,120,.5,0,a),c+=u,c*=s,e=!1,c},note:function(t,n){"number"==typeof t&&(this.pitch=t),"number"==typeof n&&(this.amp=n),i.trigger(),e=!0}}).init().oscillatorInit(),i.trigger(1),this.processProperties(arguments)},Gibberish.Tom.prototype=Gibberish._oscillator,Gibberish.Cowbell=function(){var e=new Gibberish.Square,t=new Gibberish.Square,n=e.callback,i=t.callback,r=new Gibberish.SVF({mode:2}),o=r.callback,s=new Gibberish.ExponentialDecay(.0025,10500),a=s.callback;Gibberish.extend(this,{name:"cowbell",properties:{amp:1,pitch:560,bpfFreq:1e3,bpfRez:3,decay:22050,decayCoeff:1e-4,sr:Gibberish.context.sampleRate},callback:function(e,t,r,s,u,c,l){var p;return p=n(t,1,1,0),p+=i(845,1,1,0),p=o(p,r,s,2,l),p*=a(c,u),p*=e},note:function(e){s.trigger(),e&&(this.decay=e)}}).init().oscillatorInit().processProperties(arguments),this.bpf=r,this.eg=s,s.trigger(1)},Gibberish.Cowbell.prototype=Gibberish._oscillator,Gibberish.Snare=function(){var e=(new Gibberish.SVF).callback,t=(new Gibberish.SVF).callback,n=(new Gibberish.SVF).callback,i=new Gibberish.ExponentialDecay(.0025,11025),r=i.callback,o=Math.random,s=0;Gibberish.extend(this,{name:"snare",properties:{cutoff:1e3,decay:11025,tune:0,snappy:.5,amp:1,sr:Gibberish.context.sampleRate},callback:function(i,a,u,c,l,p){var h,f,d=0,m=0;return d=r(.0025,a),d>.005&&(m=(2*o()-1)*d,m=n(m,i+1e3*u,.5,1,p),m*=c,m=m>0?m:0,s=d,h=e(s,180*(u+1),15,2,p),f=t(s,330*(u+1),15,2,p),m+=h,m+=.8*f,m*=l),m},note:function(e,t,n,r){"number"==typeof e&&(this.tune=e),"number"==typeof r&&(this.cutoff=r),"number"==typeof n&&(this.snappy=n),"number"==typeof t&&(this.amp=t),i.trigger()}}).init().oscillatorInit().processProperties(arguments),i.trigger(1)},Gibberish.Snare.prototype=Gibberish._oscillator,Gibberish.Hat=function(){var e=new Gibberish.Square,t=new Gibberish.Square,n=new Gibberish.Square,i=new Gibberish.Square,r=new Gibberish.Square,o=new Gibberish.Square,s=e.callback,a=t.callback,u=n.callback,c=i.callback,l=r.callback,p=o.callback,h=new Gibberish.SVF({mode:2}),f=h.callback,d=new Gibberish.Filter24,m=d.callback,b=new Gibberish.ExponentialDecay(.0025,10500),g=b.callback,y=new Gibberish.ExponentialDecay(.1,7500);y.callback,Gibberish.extend(this,{name:"hat",properties:{amp:1,pitch:325,bpfFreq:7e3,bpfRez:2,hpfFreq:.975,hpfRez:0,decay:3500,decay2:3e3,sr:Gibberish.context.sampleRate},callback:function(e,t,n,i,r,o,h,d,b){var y;return y=s(t,1,.5,0),y+=a(1.4471*t,.75,1,0),y+=u(1.617*t,1,1,0),y+=c(1.9265*t,1,1,0),y+=l(2.5028*t,1,1,0),y+=p(2.6637*t,.75,1,0),y=f(y,n,i,2,b),y*=g(.001,h),y=m(y,r,o,0,1),y*=e},note:function(e,t){b.trigger(),y.trigger(),e&&(this.decay=e),t&&(this.decay2=t)}}).init().oscillatorInit().processProperties(arguments),this.bpf=h,this.hpf=d,b.trigger(1),y.trigger(1)},Gibberish.Hat.prototype=Gibberish._oscillator,Gibberish})},{}],2:[function(e,t){!function(){function e(e,t){return e=s[e],t=s[t],e.distance>t.distance?t.distance+12-e.distance:t.distance-e.distance}function n(e,t,n){for(;n>0;n--)e+=t;return e}function i(e,t){if("string"!=typeof e)return null;this.name=e,this.duration=t||4,this.accidental={value:0,sign:""};var n=e.match(/^([abcdefgh])(x|#|bb|b?)(-?\d*)/i);if(n&&e===n[0]&&0!==n[3].length)this.name=n[1].toLowerCase(),this.octave=parseFloat(n[3]),0!==n[2].length&&(this.accidental.sign=n[2].toLowerCase(),this.accidental.value=y[n[2]]);else{e=e.replace(/\u2032/g,"'").replace(/\u0375/g,",");var i=e.match(/^(,*)([abcdefgh])(x|#|bb|b?)([,\']*)$/i);if(!i||5!==i.length||e!==i[0])throw Error("Invalid note format");if(""===i[1]&&""===i[4])this.octave=i[2]===i[2].toLowerCase()?3:2;else if(""!==i[1]&&""===i[4]){if(i[2]===i[2].toLowerCase())throw Error("Invalid note format. Format must respect the Helmholtz notation.");this.octave=2-i[1].length}else{if(""!==i[1]||""===i[4])throw Error("Invalid note format");if(i[4].match(/^'+$/)){if(i[2]===i[2].toUpperCase())throw Error("Invalid note format. Format must respect the Helmholtz notation");this.octave=3+i[4].length}else{if(!i[4].match(/^,+$/))throw Error("Invalid characters after note name.");if(i[2]===i[2].toLowerCase())throw Error("Invalid note format. Format must respect the Helmholtz notation");this.octave=2-i[4].length}}this.name=i[2].toLowerCase(),0!==i[3].length&&(this.accidental.sign=i[3].toLowerCase(),this.accidental.value=y[i[3]])}}function r(e,t){if(!(e instanceof i))return null;t=t||"",this.name=e.name.toUpperCase()+e.accidental.sign+t,this.root=e,this.notes=[e],this.quality="major",this.type="major";var n,r,s,a,u,c=[],l=!1,h="quality",f=!1,d=!1,b=null;for(a=0,u=t.length;u>a;a++){for(n=t[a];" "===n||"("===n||")"===n;)n=t[++a];if(!n)break;if(r=n.charCodeAt(0),s=u>=a+3?t.substr(a,3):"","quality"===h)"M"===n||("maj"===s||916===r?(this.type="major",c.push("M7"),l=!0,(t[a+3]&&"7"===t[a+3]||916===r&&"7"===t[a+1])&&a++):"m"===n||"-"===n||"min"===s?this.quality=this.type="minor":111===r||176===r||"dim"===s?(this.quality="minor",this.type="diminished"):"+"===n||"aug"===s?(this.quality="major",this.type="augmented"):216===r||248===r?(this.quality="minor",this.type="diminished",c.push("m7"),l=!0):"sus"===s?(this.quality="sus",this.type=t[a+3]&&"2"===t[a+3]?"sus2":"sus4"):"5"===n?(this.quality="power",this.type="power"):a-=1),s in p&&(a+=2),h="";
else if("#"===n)f=!0;else if("b"===n)d=!0;else if("5"===n)f?(b="A5","major"===this.quality&&(this.type="augmented")):d&&(b="d5","minor"===this.quality&&(this.type="diminished")),d=f=!1;else if("6"===n)c.push("M6"),d=f=!1;else if("7"===n)c.push("diminished"===this.type?"d7":"m7"),l=!0,d=f=!1;else if("9"===n)l||c.push("m7"),c.push(d?"m9":f?"A9":"M9"),d=f=!1;else{if("1"!==n)throw Error("Unexpected character: '"+n+"' in chord name");n=t[++a],"1"===n?c.push(d?"d11":f?"A11":"P11"):"3"===n&&c.push(d?"m13":f?"A13":"M13"),d=f=!1}}for(var g=0,y=m[this.type].length;y>g;g++)this.notes.push("5"===m[this.type][g][1]&&b?o.interval(this.root,b):o.interval(this.root,m[this.type][g]));for(g=0,y=c.length;y>g;g++)this.notes.push(o.interval(this.root,c[g]))}var o={},s={c:{name:"c",distance:0,index:0},d:{name:"d",distance:2,index:1},e:{name:"e",distance:4,index:2},f:{name:"f",distance:5,index:3},g:{name:"g",distance:7,index:4},a:{name:"a",distance:9,index:5},b:{name:"b",distance:11,index:6},h:{name:"h",distance:11,index:6}},a=["c","d","e","f","g","a","b"],u={.25:"longa",.5:"breve",1:"whole",2:"half",4:"quarter",8:"eighth",16:"sixteenth",32:"thirty-second",64:"sixty-fourth",128:"hundred-twenty-eighth"},c=[{name:"unison",quality:"perfect",size:0},{name:"second",quality:"minor",size:1},{name:"third",quality:"minor",size:3},{name:"fourth",quality:"perfect",size:5},{name:"fifth",quality:"perfect",size:7},{name:"sixth",quality:"minor",size:8},{name:"seventh",quality:"minor",size:10},{name:"octave",quality:"perfect",size:12},{name:"ninth",quality:"minor",size:13},{name:"tenth",quality:"minor",size:15},{name:"eleventh",quality:"perfect",size:17},{name:"twelfth",quality:"perfect",size:19},{name:"thirteenth",quality:"minor",size:20},{name:"fourteenth",quality:"minor",size:22},{name:"fifteenth",quality:"perfect",size:24}],l={unison:0,second:1,third:2,fourth:3,fifth:4,sixth:5,seventh:6,octave:7,ninth:8,tenth:9,eleventh:10,twelfth:11,thirteenth:12,fourteenth:13,fifteenth:14},p={P:"perfect",M:"major",m:"minor",A:"augmented",d:"diminished",perf:"perfect",maj:"major",min:"minor",aug:"augmented",dim:"diminished"},h={perfect:"P",major:"M",minor:"m",augmented:"A",diminished:"d"},f={P:"P",M:"m",m:"M",A:"d",d:"A"},d={perfect:["diminished","perfect","augmented"],minor:["diminished","minor","major","augmented"]},m={major:["M3","P5"],minor:["m3","P5"],augmented:["M3","A5"],diminished:["m3","d5"],sus2:["M2","P5"],sus4:["P4","P5"],power:["P5"]},b={major:"M",minor:"m",augmented:"aug",diminished:"dim",power:"5"},g={"-2":"bb","-1":"b",0:"",1:"#",2:"x"},y={bb:-2,b:-1,"#":1,x:2};i.prototype={key:function(e){return e?7*(this.octave-1)+3+Math.ceil(s[this.name].distance/2):12*(this.octave-1)+4+s[this.name].distance+this.accidental.value},fq:function(e){return e=e||440,e*Math.pow(2,(this.key()-49)/12)},scale:function(e,t){return o.scale.list(this,e,t)},interval:function(e,t){return o.interval(this,e,t)},chord:function(e){return e=e||"major",e in b&&(e=b[e]),new r(this,e)},helmholtz:function(){var e,t=3>this.octave?this.name.toUpperCase():this.name.toLowerCase();return 2>=this.octave?(e=n("",",",2-this.octave),e+t+this.accidental.sign):(e=n("","'",this.octave-3),t+this.accidental.sign+e)},scientific:function(){return this.name.toUpperCase()+this.accidental.sign+("number"==typeof this.octave?this.octave:"")},enharmonics:function(){var e=[],t=this.key(),n=this.interval("m2","up"),i=this.interval("m2","down"),r=n.key()-n.accidental.value,o=i.key()-i.accidental.value,s=t-r;return 3>s&&s>-3&&(n.accidental={value:s,sign:g[s]},e.push(n)),s=t-o,3>s&&s>-3&&(i.accidental={value:s,sign:g[s]},e.push(i)),e},valueName:function(){return u[this.duration]},toString:function(e){return e="boolean"==typeof e?e:"number"==typeof this.octave?!1:!0,this.name.toLowerCase()+this.accidental.sign+(e?"":this.octave)}},r.prototype.dominant=function(e){return e=e||"",new r(this.root.interval("P5"),e)},r.prototype.subdominant=function(e){return e=e||"",new r(this.root.interval("P4"),e)},r.prototype.parallel=function(e){if(e=e||"","triad"!==this.chordType()||"diminished"===this.quality||"augmented"===this.quality)throw Error("Only major/minor triads have parallel chords");return"major"===this.quality?new r(this.root.interval("m3","down"),"m"):new r(this.root.interval("m3","up"))},r.prototype.chordType=function(){var e,t,n;if(2===this.notes.length)return"dyad";if(3===this.notes.length){t={unison:!1,third:!1,fifth:!1};for(var i=0,r=this.notes.length;r>i;i++)e=this.root.interval(this.notes[i]),n=c[parseFloat(o.interval.invert(e.simple)[1])-1],e.name in t?t[e.name]=!0:n.name in t&&(t[n.name]=!0);return t.unison&&t.third&&t.fifth?"triad":"trichord"}if(4===this.notes.length){t={unison:!1,third:!1,fifth:!1,seventh:!1};for(var i=0,r=this.notes.length;r>i;i++)e=this.root.interval(this.notes[i]),n=c[parseFloat(o.interval.invert(e.simple)[1])-1],e.name in t?t[e.name]=!0:n.name in t&&(t[n.name]=!0);if(t.unison&&t.third&&t.fifth&&t.seventh)return"tetrad"}return"unknown"},r.prototype.toString=function(){return this.name},o.note=function(e,t){return new i(e,t)},o.note.fromKey=function(e){var t=440*Math.pow(2,(e-49)/12);return o.frequency.note(t).note},o.chord=function(e){var t;if(t=e.match(/^([abcdefgh])(x|#|bb|b?)/i),t&&t[0])return new r(new i(t[0].toLowerCase()),e.substr(t[0].length));throw Error("Invalid Chord. Couldn't find note name")},o.frequency={note:function(e,t){t=t||440;var n,r,o,u,c,l,p;return n=Math.round(49+12*((Math.log(e)-Math.log(t))/Math.log(2))),p=t*Math.pow(2,(n-49)/12),l=1200*(Math.log(e/p)/Math.log(2)),r=Math.floor((n-4)/12),o=n-12*r-4,u=s[a[Math.round(o/2)]],c=u.name,o>u.distance?c+="#":u.distance>o&&(c+="b"),{note:new i(c+(r+1)),cents:l}}},o.interval=function(e,t,n){if("string"==typeof t){"down"===n&&(t=o.interval.invert(t));var r=p[t[0]],s=parseFloat(t.substr(1));if(!r||isNaN(s)||1>s)throw Error("Invalid string-interval format");return o.interval.from(e,{quality:r,interval:c[s-1].name},n)}if(t instanceof i&&e instanceof i)return o.interval.between(e,t);throw Error("Invalid parameters")},o.interval.from=function(t,n,r){n.direction=r||n.direction||"up";var o,u,p,h,f,m;if(f=l[n.interval],m=c[f],f>7&&(f-=7),f=s[t.name].index+f,f>a.length-1&&(f-=a.length),o=a[f],-1===d[m.quality].indexOf(n.quality)||-1===d[m.quality].indexOf(m.quality))throw Error("Invalid interval quality");return u=d[m.quality].indexOf(n.quality)-d[m.quality].indexOf(m.quality),p=m.size+u-e(t.name,o),t.octave&&(h=Math.floor((t.key()-t.accidental.value+e(t.name,o)-4)/12)+1+Math.floor(l[n.interval]/7)),p+=t.accidental.value,p>=11&&(p-=12),p>-3&&3>p&&(o+=g[p]),"down"===r&&h--,new i(o+(h||""))},o.interval.between=function(e,t){var n,i,r,o,a,u,l=e.key(),p=t.key();if(n=p-l,n>24||-25>n)throw Error("Too big interval. Highest interval is a augmented fifteenth (25 semitones)");return 0>n&&(o=e,e=t,t=o),r=s[t.name].index-s[e.name].index+7*(t.octave-e.octave),i=c[r],u=d[i.quality][Math.abs(n)-i.size+1],a=h[u]+(""+Number(r+1)),{name:i.name,quality:u,direction:n>0?"up":"down",simple:a}},o.interval.invert=function(e){if(2!==e.length&&3!==e.length)return!1;var t=f[e[0]],n=parseFloat(2===e.length?e[1]:e.substr(1));return n>8&&(n-=7),8!==n&&1!==n&&(n=9-n),t+(""+n)},o.scale={list:function(e,t,n){var r,s,a=[],u=[];if(!(e instanceof i))return!1;if("string"==typeof t&&(t=o.scale.scales[t],!t))return!1;for(a.push(e),n&&u.push(e.name+(e.accidental.sign||"")),r=0,s=t.length;s>r;r++)a.push(o.interval(e,t[r])),n&&u.push(a[r+1].name+(a[r+1].accidental.sign||""));return n?u:a},scales:{major:["M2","M3","P4","P5","M6","M7"],ionian:["M2","M3","P4","P5","M6","M7"],dorian:["M2","m3","P4","P5","M6","m7"],phrygian:["m2","m3","P4","P5","m6","m7"],lydian:["M2","M3","A4","P5","M6","M7"],mixolydian:["M2","M3","P4","P5","M6","m7"],minor:["M2","m3","P4","P5","m6","m7"],aeolian:["M2","m3","P4","P5","m6","m7"],locrian:["m2","m3","P4","d5","m6","m7"],majorpentatonic:["M2","M3","P5","M6"],minorpentatonic:["m3","P4","P5","m7"],chromatic:["m2","M2","m3","M3","P4","A4","P5","m6","M6","m7","M7"],harmonicchromatic:["m2","M2","m3","M3","P4","A4","P5","m6","M6","m7","M7"]}},t.exports=o}()},{}],3:[function(e,t){!function(){"use strict";var n,i,r={value:{min:0,max:255,output:u,wrap:!1,timescale:"graphics"}},o=e("gibberish-dsp"),s=e("../dollar"),a=e("../mappings").outputCurves,u=(a.LINEAR,a.LOGARITHMIC),c={FFT:function(e,t){if("undefined"==typeof n){n=o.context.createAnalyser(),o.node.connect(n),n.fftSize=e||32,n.updateRate=t||40,n.values=new Uint8Array(n.frequencyBinCount),n.children=[];for(var a=0;a<n.frequencyBinCount;a++)!function(){var e=a,t={},o=0;Object.defineProperties(t,{value:{configurable:!0,get:function(){return o},set:function(e){o=e}}}),i.createProxyProperties(t,s.extend({},r),!1),n[e]=t,n.children.push(t),t.type="mapping",t.index=e,t.min=0,t.max=255,t.valueOf=function(){return this.value()}}();setInterval(function(){n.getByteFrequencyData(n.values);for(var e=0;e<n.values.length;e++)n[e].value=n.values[e]},n.updateRate)}else e&&(n.fftSize=e),t&&(n.updateRate=t);return n},Follow:function(e,t){var n=new o.Follow(e,t),r={value:{min:0,max:1,output:u,timescale:"audio"}};return i.createProxyProperties(n,r),n}};t.exports=function(e){return"undefined"==typeof i&&(i=e),c}}()},{"../dollar":16,"../mappings":18,"gibberish-dsp":1}],4:[function(e,t){!function(){var n,i,r=e("../../external/teoria.min"),o=e("../dollar"),s=e("../seq");i=function(e,t,i,a,u){var c=s();o.extend(c,{name:"Arp",notes:[],pattern:i||"up",notation:e||"C4m7",mult:a||1,init:!1,speed:isNaN(t)?_4:t,scale:u||null,chord:function(e){var t=[];if(this.notation=e,"undefined"==typeof this.scale||null===this.scale&&"string"==typeof e){console.log("redoing notes...");for(var n=0;n<this.mult;n++){var i,o,s=[],a=this.notation.slice(0,1);isNaN(this.notation.charAt(1))?(a+=this.notation.charAt(1),i=parseInt(this.notation.slice(2,3)),o=this.notation.slice(3)):(i=parseInt(this.notation.slice(1,2)),o=this.notation.slice(2)),i+=n;for(var e=r.note(a+i).chord(o),u=0;u<e.notes.length;u++){var c=e.notes[u].fq();s[u]=c}t=t.concat(s)}}else for(var n=0;n<this.mult;n++){for(var s=[],u=0;u<this.notation.length;u++)s[u]=this.notation[u]+7*n;t=t.concat(s)}this.notes=this.patterns[this.pattern](t),this.seqs[0]&&(this.seqs[0].values=this.notes)},set:function(e,t,n,i,r){this.speed=t||this.speed,this.pattern=n||this.pattern,this.mult=i||this.mult,this.chord(e,r)},patterns:{up:function(e){return e},down:function(e){return e.reverse()},updown:function(e){var t=e.slice(0);return t.reverse(),e.concat(t)},updown2:function(e){var t=e.slice(0);return t.pop(),t.reverse(),t.pop(),e.concat(t)}}}),c.seq=c,c.__shuffle=c.shuffle,c.shuffle=function(){c.__shuffle()},n.createProxyMethods(c,["shuffle","reset","chord"]),c.chord(c.notation);var l=null;Object.defineProperty(c,"target",{get:function(){return l},set:function(e){l=e;var i={key:"note",target:l,values:c.notes,durations:n.Clock.time(t)};c.add(i),c.start()}});var p=t;return Object.defineProperty(c,"speed",{get:function(){return p},set:function(e){p=e;for(var t=0;t<c.seqs.length;t++)c.seqs[0].durations=n.Clock.time(p)}}),c},t.exports=function(e){return"undefined"==typeof n&&(n=e),i}}()},{"../../external/teoria.min":2,"../dollar":16,"../seq":19}],5:[function(e,t){!function(){"use strict";var n,i={},r=e("gibberish-dsp"),o=e("../mappings").outputCurves,s=o.LINEAR,a=o.LOGARITHMIC,u={amp:{min:0,max:1,hardMax:2,output:a,timescale:"audio",dimensions:1},out:{min:0,max:1,output:s,timescale:"audio",dimensions:1}},c="Input";i=function(){var e=(new r.Input).connect(n.Master),t=Array.prototype.slice.call(arguments,0);return e.type="Gen",$.extend(!0,e,n.ugen),e.fx.ugen=e,Object.defineProperty(e,"_",{get:function(){return e.kill(),e},set:function(){}}),n.createProxyProperties(e,u),n.processArguments2(e,t,c),e.toString=function(){return"> "+c},e},t.exports=function(e){return"undefined"==typeof n&&(n=e),i}}()},{"../mappings":18,"gibberish-dsp":1}],6:[function(e,t){!function(){"use strict";for(var n,i=e("../dollar"),r=e("gibberish-dsp"),o=e("../mappings").outputCurves,s=o.LINEAR,a=(o.LOGARITHMIC,[["Bus2","Bus"]]),u={amp:{min:0,max:1,output:s,timescale:"audio"},pan:{min:-.75,max:.75,output:s,timescale:"audio"},out:{min:0,max:1,output:s,timescale:"audio",dimensions:1}},c=!1,l={mappingProperties:u,Presets:{}},p=0;p<a.length;p++)!function(){var e=Array.isArray(a[p])?a[p][0]:a[p],t=Array.isArray(a[p])?a[p][1]:a[p];l[t]=function(){var o=n.processArguments(arguments,t);return Array.isArray(o)?(o.unshift(0),o=n.construct(r[e],o)):o=new r[e](o),c?o.connect(Master):c=!0,o.type="Gen",Object.defineProperty(o,"_",{get:function(){return o.kill(),o},set:function(){}}),i.extend(!0,o,n.ugen),o.fx.ugen=o,n.createProxyProperties(o,u),o}}();l.Group=function(){var e=n.processArguments(arguments,"Bus2");e=new r.Bus2,c?e.connect(Master):c=!0,e.type="FX",i.extend(!0,e,n.ugen),e.fx.ugen=e,n.createProxyProperties(e,u),i.extend(e,{add:function(){for(var t=0;t<arguments.length;t++)arguments[t].disconnect(),arguments[t].connect(e)},remove:function(){for(var t=0;t<arguments.length;t++)arguments[t].disconnect(e)},free:function(){for(var t=0;t<arguments.length;t++)arguments[t].disconnect(e),arguments[t].connect()}});for(var t=0;t<arguments.length;t++)e.add(arguments[t]);return e},t.exports=function(e){return"undefined"==typeof n&&(n=e),l}}()},{"../dollar":16,"../mappings":18,"gibberish-dsp":1}],7:[function(_dereq_,module,exports){!function(){"use strict";for(var Percussion={Presets:{}},Gibberish=_dereq_("gibberish-dsp"),Gibber,$=_dereq_("../dollar"),Clock=_dereq_("../clock"),curves=_dereq_("../mappings").outputCurves,LINEAR=curves.LINEAR,LOGARITHMIC=curves.LOGARITHMIC,types=["Kick","Snare","Hat","Conga","Cowbell","Clave","Tom"],_mappingProperties={Drums:{pitch:{min:.25,max:4,output:LINEAR,timescale:"audio"},amp:{min:0,max:1,output:LOGARITHMIC,timescale:"audio"},pan:{min:0,max:1,output:LINEAR,timescale:"audio"},out:{min:0,max:1,output:LINEAR,timescale:"audio",dimensions:1}},XOX:{amp:{min:0,max:1,output:LOGARITHMIC,timescale:"audio"},pan:{min:0,max:1,output:LINEAR,timescale:"audio"},out:{min:0,max:1,output:LINEAR,timescale:"audio",dimensions:1}},Kick:{amp:{min:0,max:1,output:LOGARITHMIC,timescale:"audio"},out:{min:0,max:1,output:LINEAR,timescale:"audio",dimensions:1}},Snare:{amp:{min:0,max:1,output:LOGARITHMIC,timescale:"audio"},snappy:{min:.25,max:1.5,output:LOGARITHMIC,timescale:"audio"},tune:{min:0,max:2,output:LOGARITHMIC,timescale:"audio"},out:{min:0,max:1,output:LINEAR,timescale:"audio",dimensions:1}},Hat:{amp:{min:0,max:1,output:LOGARITHMIC,timescale:"audio"},out:{min:0,max:1,output:LINEAR,timescale:"audio",dimensions:1}},Conga:{amp:{min:0,max:1,output:LOGARITHMIC,timescale:"audio"},out:{min:0,max:1,output:LINEAR,timescale:"audio",dimensions:1}},Cowbell:{out:{min:0,max:1,output:LINEAR,timescale:"audio",dimensions:1},amp:{min:0,max:1,output:LOGARITHMIC,timescale:"audio"}},Clave:{out:{min:0,max:1,output:LINEAR,timescale:"audio",dimensions:1},amp:{min:0,max:1,output:LOGARITHMIC,timescale:"audio"}},Tom:{out:{min:0,max:1,output:LINEAR,timescale:"audio",dimensions:1},amp:{min:0,max:1,output:LOGARITHMIC,timescale:"audio"}}},i=0;i<types.length;i++)!function(){var e=Array.isArray(types[i])?types[i][0]:types[i],t=Array.isArray(types[i])?types[i][1]:types[i];Percussion[t]=function(){var n,i=Array.prototype.slice.call(arguments);return"object"==typeof i[0]&&"undefined"==typeof i[0].maxVoices?i[0].maxVoices=1:"undefined"==typeof i[0]&&(i[0]={maxVoices:1}),n=Gibber.processArguments(i,t),n=Array.isArray(n)?Gibber.construct(Gibberish[e],n).connect(Gibber.Master):new Gibberish[e](n).connect(Gibber.Master),n.type="Gen",$.extend(!0,n,Gibber.ugen),n.fx.ugen=n,n._note=n.note.bind(n),n.note=function(){var e=Array.prototype.splice.call(arguments,0);"string"==typeof e[0]&&(e[0]=Gibber.Theory.Teoria.note(e[0]).fq()),this._note.apply(this,e)},Gibber.createProxyProperties(n,_mappingProperties[t]),Gibber.createProxyMethods(n,["note","send"]),n.toString=function(){return"> "+t},Object.defineProperty(n,"_",{get:function(){return n.kill(),n},set:function(){}}),n}}();Percussion.Drums=function(_sequence,_timeValue,_amp,_freq){var args=Array.prototype.slice.call(arguments),obj={},props=Gibber.processArguments(args,"Drums");$.extend(!0,obj,props),obj=Array.isArray(obj)?Gibber.construct(Gibberish.Bus2,obj).connect(Gibber.Master):new Gibberish.Bus2(obj).connect(Gibber.Master),obj.name="Drums",obj.type="Gen",obj.children=[],$.extend(!0,obj,Gibber.ugen),obj.fx.ugen=obj,Object.defineProperty(obj,"_",{get:function(){return obj.kill(),obj},set:function(){}}),obj.kit=Percussion.Drums.kits["default"],"object"==typeof arguments[0]&&arguments[0].kit&&(obj.kit=Percussion.Drums.kits[arguments[0].kit],arguments[0].kit=obj.kit);for(var key in obj.kit){var drum=obj.kit[key];obj[key]={sampler:new Gibberish.Sampler({file:drum.file,pitch:1,amp:drum.amp}),pitch:drum.pitch,amp:drum.amp},obj[key].sampler.pan=drum.pan,obj[key].sampler.connect(obj),obj[key].fx=obj[key].sampler.fx,obj.children.push(obj[key].sampler)}if(obj.mod=obj.polyMod,obj.removeMod=obj.removePolyMod,obj.connect(),Gibber.createProxyProperties(obj,_mappingProperties.Drums),obj.pitch(1),"undefined"!=typeof props)switch($.type(props[0])){case"string":for(var notes=props[0],_seqs=[],_durations=[],__durations=[],seqs=notes.split("|"),timeline={},i=0;i<seqs.length;i++){var seq=seqs[i],duration,hasTime=!1,idx=seq.indexOf(",");if(idx>-1){var _value=seq.substr(0,idx),duration=seq.substr(idx+1);duration=eval(duration),hasTime=!0,seq=_value.trim().split("")}else seq=seq.trim().split(""),duration=1/seq.length;seq.indexOf(".rnd(")>-1&&(seq=seq.split(".rnd")[0],seq=seq.split("").rnd()),"undefined"!=typeof props[1]&&(duration=props[1]),obj.seq.add({key:"note",values:seq,durations:duration,target:obj})}break;case"object":"string"==typeof props[0].note&&(props[0].note=props[0].note.split("")),props[0].target=obj,props[0].durations=Gibber.Clock.Time(props[0].durations?props[0].durations:1/props[0].note.length),props[0].offset=props[0].offset?Gibber.Clock.time(props[0].offset):0;break;case"function":case"array":var length=props[0].length||props[0].values.length,durations="undefined"!=typeof arguments[1]?arguments[1]:Gibber.Clock.Time(1/length);"function"!=typeof durations&&(durations=Gibber.Clock.Time(durations)),obj.seq.add({key:"note",values:[props[0]],durations:durations,target:obj}),obj.pattern=obj.seq.seqs[obj.seq.seqs.length-1].values[0]}return"undefined"==typeof props&&(props={}),props.pitch&&(obj.pitch=props.pitch),"undefined"!=typeof props.snare&&($.extend(obj.snare.sampler,props.snare),$.extend(obj.snare,props.snare)),"undefined"!=typeof props.kick&&($.extend(obj.kick.sampler,props.kick),$.extend(obj.kick,props.kick)),"undefined"!=typeof props.hat&&($.extend(obj.hat.sampler,props.hat),$.extend(obj.hat,props.hat)),"undefined"!=typeof props.openHat&&($.extend(obj.openHat.sampler,props.openHat),$.extend(obj.openHat,props.openHat)),obj.amp=isNaN(_amp)?1:_amp,obj.seq&&obj.seq.tick&&Gibberish.future(obj.seq.tick,1),obj.note=function(e){var t="function"==typeof obj.pitch?obj.pitch():obj.pitch;if($.isArray(e))for(var n=0;n<e.length;n++){var i=e[n];if("string"==typeof i){for(var r in this.kit)if(i===this.kit[r].symbol){this[r].sampler.note(1,this[r].amp);var t=this.pitch();this[r].sampler.pitch!==t&&(this[r].sampler.pitch=t);break}}else{var o=obj[Object.keys(obj.kit)[i]];o.sampler.note(1,o.sampler.amp),o.sampler.pitch!==t&&(o.sampler.pitch=t)}}else if("string"==typeof e){for(var r in this.kit)if(e===this.kit[r].symbol){this[r].sampler.note(1,this[r].amp);var t=this.pitch();this[r].sampler.pitch!==t&&(this[r].sampler.pitch=t);break}}else{var s=Object.keys(obj.kit),a=Math.abs(e),r=s[a%s.length],o=obj[r];o.sampler.note(1,o.sampler.amp),o.sampler.pitch!==t&&(o.sampler.pitch=t)}},obj.start=function(){obj.seq.start(!0)},obj.stop=function(){obj.seq.stop()},obj.shuffle=function(){obj.seq.shuffle()},obj.reset=function(){obj.seq.reset()},Gibber.createProxyMethods(obj,["play","stop","shuffle","reset","start","send","note"]),obj.seq.start(!0),Object.defineProperties(obj,{offset:{get:function(){return obj.seq.offset},set:function(e){obj.seq.offset=Gibber.Clock.time(e)}}}),obj.toString=function(){return"Drums : "+obj.seq.seqs[0].values.join("")},obj},Percussion.EDrums=function(_sequence,_timeValue,_amp,_freq){var args=Array.prototype.slice.call(arguments),obj={},props=Gibber.processArguments(args,"Drums");if($.extend(!0,obj,props),obj=Array.isArray(obj)?Gibber.construct(Gibberish.Bus2,obj).connect(Gibber.Master):new Gibberish.Bus2(obj).connect(Gibber.Master),obj.name="XOX",obj.type="Gen",obj.children=[],$.extend(!0,obj,Gibber.ugen),obj.fx.ugen=obj,Object.defineProperty(obj,"_",{get:function(){return obj.kill(),obj},set:function(){}}),obj.pitch=1,obj.kick=Gibber.Percussion.Kick().disconnect(),obj.snare=Gibber.Percussion.Snare().disconnect(),obj.hat=Gibber.Percussion.Hat().disconnect(),obj.kick.connect(obj),obj.snare.connect(obj),obj.hat.connect(obj),obj.children.push(obj.kick,obj.snare,obj.hat),obj.mod=obj.polyMod,obj.removeMod=obj.removePolyMod,obj.set=function(e){obj.seq.note=e.split("")},Gibber.createProxyProperties(obj,_mappingProperties.XOX),obj.start=function(){obj.seq.start(!0)},obj.stop=function(){obj.seq.stop()},obj.shuffle=function(){obj.seq.shuffle()},obj.reset=function(){obj.seq.reset()},Gibber.createProxyMethods(obj,["play","stop","shuffle","reset","start","send"]),"undefined"!=typeof props)switch($.type(props[0])){case"string":for(var notes=props[0],_seqs=[],_durations=[],__durations=[],seqs=notes.split("|"),timeline={},i=0;i<seqs.length;i++){var seq=seqs[i],duration,hasTime=!1,idx=seq.indexOf(",");if(idx>-1){var _value=seq.substr(0,idx),duration=seq.substr(idx+1);duration=eval(duration),hasTime=!0,seq=_value.trim().split("")}else seq=seq.trim().split(""),duration=1/seq.length;seq.indexOf(".rnd(")>-1?(seq=seq.split(".rnd")[0],seq=seq.split("").rnd()):seq.indexOf(".random(")>-1&&(seq=seq.split(".random")[0],seq=seq.split("").rnd()),"undefined"!=typeof props[1]&&(duration=props[1]),obj.seq.add({key:"note",values:seq,durations:duration,target:obj})}break;case"object":"string"==typeof props[0].note&&(props[0].note=props[0].note.split("")),props[0].target=obj,props[0].durations=Gibber.Clock.Time(props[0].durations?props[0].durations:1/props[0].note.length),props[0].offset=props[0].offset?Gibber.Clock.time(props[0].offset):0,obj.seq=Seq(props[0])}"undefined"==typeof props&&(props={}),props.pitch&&(obj.pitch=props.pitch),"undefined"!=typeof props.snare&&($.extend(obj.snare.sampler,props.snare),$.extend(obj.snare,props.snare)),"undefined"!=typeof props.kick&&($.extend(obj.kick.sampler,props.kick),$.extend(obj.kick,props.kick)),"undefined"!=typeof props.hat&&($.extend(obj.hat.sampler,props.hat),$.extend(obj.hat,props.hat)),"undefined"!=typeof props.openHat&&($.extend(obj.openHat.sampler,props.openHat),$.extend(obj.openHat,props.openHat)),obj.amp=isNaN(_amp)?1:_amp,obj.seq.tick&&Gibberish.future(obj.seq.tick,1);var kcd=1,scd=1,hcd=1,kf=null,sf=null,hf=null;return obj.note=function(e){switch(e){case"x":1===kcd&&(kcd=0),obj.kick.note(),null!==kf&&(kf(),kf=null),kf=Gibber.Utilities.future(function(){kcd=1,kf=null},11e4*obj.kick.decay);break;case"o":1===scd&&(scd=0),obj.snare.note(),null!==sf&&(sf(),sf=null),sf=Gibber.Utilities.future(function(){scd=1,sf=null},obj.snare.decay);break;case"*":1===hcd&&(hcd=0),obj.hat.note(5e3),null!==hf&&(hf(),hf=null),hf=Gibber.Utilities.future(function(){hcd=1,hf=null},5500);break;case"-":1===hcd&&(hcd=0),obj.hat.note(3e4),null!==hf&&(hf(),hf=null),hf=Gibber.Utilities.future(function(){hcd=1,hf=null},30500)}},obj.seq.start(!0),obj.toString=function(){return"EDrums : "+obj.seq.seqs[0].values.join("")},obj},Percussion.Drums.kits={original:{kick:{file:"resources/audiofiles/kick.wav",symbol:"x",amp:1,pitch:1,pan:0},snare:{file:"resources/audiofiles/snare.wav",symbol:"o",amp:1,pitch:1,pan:.15},hat:{file:"resources/audiofiles/hat.wav",symbol:"*",amp:1,pitch:1,pan:-.1},openHat:{file:"resources/audiofiles/openHat.wav",symbol:"-",amp:1,pitch:1,pan:-.2}},electronic:{kick:{file:"resources/audiofiles/electronic/kick.wav",symbol:"x",amp:1.5,pitch:1,pan:0},snare:{file:"resources/audiofiles/electronic/snare.wav",symbol:"o",amp:1.5,pitch:1,pan:.15},hat:{file:"resources/audiofiles/electronic/hat.wav",symbol:"*",amp:1.5,pitch:1,pan:-.1},openHat:{file:"resources/audiofiles/electronic/openhat.wav",symbol:"-",amp:1.5,pitch:1,pan:-.2}},beatbox:{in_tss:{file:"resources/audiofiles/beatbox/^tss.wav",symbol:"T",amp:1,pitch:1,pan:.1},f:{file:"resources/audiofiles/beatbox/f.wav",symbol:"f",amp:1,pitch:1,pan:-.1},h:{file:"resources/audiofiles/beatbox/h.wav",symbol:"h",amp:1,pitch:1,pan:.1},s:{file:"resources/audiofiles/beatbox/s.wav",symbol:"s",amp:1,pitch:1,pan:-.1},d:{file:"resources/audiofiles/beatbox/d.wav",symbol:"d",amp:1,pitch:1,pan:.8},t:{file:"resources/audiofiles/beatbox/t.wav",symbol:"t",amp:1,pitch:1,pan:.4},k:{file:"resources/audiofiles/beatbox/k.wav",symbol:"k",amp:1,pitch:1,pan:-.1},in_k:{file:"resources/audiofiles/beatbox/^k.wav",symbol:"K",amp:1,pitch:1,pan:-.4},eight:{file:"resources/audiofiles/beatbox/8.wav",symbol:"8",amp:1,pitch:1,pan:-.8},psh:{file:"resources/audiofiles/beatbox/psh.wav",symbol:"p",amp:1,pitch:1,pan:.1},in_p:{file:"resources/audiofiles/beatbox/^p.wav",symbol:"P",amp:1,pitch:1,pan:-.1},pf:{file:"resources/audiofiles/beatbox/pf.wav",symbol:"F",amp:1,pitch:1,pan:.2},phs:{file:"resources/audiofiles/beatbox/phs.wav",symbol:"H",amp:1,pitch:1,pan:-.2},b:{file:"resources/audiofiles/beatbox/b.wav",symbol:"b",amp:1,pitch:1,pan:.3},dot:{file:"resources/audiofiles/beatbox/dot.wav",symbol:".",amp:1,pitch:1,pan:0},duf:{file:"resources/audiofiles/beatbox/duf.wav",symbol:"D",amp:1,pitch:1,pan:-.3},o:{file:"resources/audiofiles/beatbox/o.wav",symbol:"o",amp:1,pitch:1,pan:.6},a:{file:"resources/audiofiles/beatbox/a.wav",symbol:"a",amp:1,pitch:1,pan:.8},u:{file:"resources/audiofiles/beatbox/u.wav",symbol:"u",amp:1,pitch:1,pan:-.8},m:{file:"resources/audiofiles/beatbox/m.wav",symbol:"m",amp:1,pitch:1,pan:-.6},n:{file:"resources/audiofiles/beatbox/n.wav",symbol:"n",amp:1,pitch:1,pan:0}}},Percussion.Drums.kits.default=Percussion.Drums.kits.electronic,module.exports=function(e){return"undefined"==typeof Gibber&&(Gibber=e),Percussion}}()},{"../clock":15,"../dollar":16,"../mappings":18,"gibberish-dsp":1}],8:[function(e,t){!function(){"use strict";for(var n,i={},r=e("gibberish-dsp"),o=e("../dollar"),s=e("../clock"),a=e("../mappings").outputCurves,u=a.LINEAR,c=(a.LOGARITHMIC,["Line"]),l={Line:{start:{min:0,max:1,output:u,timescale:"audio"},end:{min:0,max:1,output:u,timescale:"audio"},time:{min:0,max:8,output:u,timescale:"audio"}}},p=0;p<c.length;p++)!function(){var e=Array.isArray(c[p])?c[p][0]:c[p],t=Array.isArray(c[p])?c[p][1]:c[p];i[t]=function(){var i,a=Array.prototype.slice.call(arguments,0);return i=new r[e](a[0],a[1],s.time(a[2]),a[3]),i.name=t,o.extend(!0,i,n.ugen),n.createProxyProperties(i,l[t]),n.processArguments2(i,a,i.name),console.log(t+" is created."),i}}();t.exports=function(e){return"undefined"==typeof n&&(n=e),i}}()},{"../clock":15,"../dollar":16,"../mappings":18,"gibberish-dsp":1}],9:[function(e,t){!function(){"use strict";var n,i={Presets:{}},r=e("gibberish-dsp"),o=e("../dollar"),s=e("../mappings").outputCurves,a=s.LINEAR,u=s.LOGARITHMIC;r.Gain=function(){r.extend(this,{name:"gain",type:"effect",properties:{input:0,amount:1},callback:function(e,t){return isNaN(e)?(e[0]*=t,e[1]*=t):e*=t,e}}).init().processProperties(arguments)},r.Gain.prototype=r._effect;for(var c=["Reverb","Delay","Flanger","Vibrato","Distortion","Biquad","Gain","Filter24",["RingModulation","RingMod"],["BufferShuffler","Schizo"],["Decimator","Crush"],"Tremolo"],l={Reverb:{roomSize:{min:.5,max:.995,output:a,timescale:"audio"},damping:{min:0,max:1,output:a,timescale:"audio"},out:{min:0,max:1,output:a,timescale:"audio",dimensions:1}},Delay:{feedback:{min:0,max:1,output:a,timescale:"audio"},time:{min:50,max:88200,output:a,timescale:"audio"},out:{min:0,max:1,output:a,timescale:"audio",dimensions:1}},RingMod:{frequency:{min:20,max:3e3,output:a,timescale:"audio"},amp:{min:0,max:1,output:a,timescale:"audio"},mix:{min:0,max:1,output:a,timescale:"audio"},out:{min:0,max:1,output:a,timescale:"audio",dimensions:1}},Flanger:{rate:{min:.01,max:20,output:u,timescale:"audio"},feedback:{min:0,max:.99,output:a,timescale:"audio"},amount:{min:25,max:300,output:a,timescale:"audio"},out:{min:0,max:1,output:a,timescale:"audio",dimensions:1}},Gain:{amount:{min:0,max:1,output:a,timescale:"audio"}},Vibrato:{rate:{min:.2,max:8,output:u,timescale:"audio"},amount:{min:25,max:300,output:a,timescale:"audio"},feedback:{min:.45,max:.55,output:a,timescale:"audio"},out:{min:0,max:1,output:a,timescale:"audio",dimensions:1}},Filter24:{cutoff:{min:0,max:.7,output:a,timescale:"audio"},resonance:{min:0,max:5.5,output:a,timescale:"audio"},out:{min:0,max:1,output:a,timescale:"audio",dimensions:1}},LPF:{cutoff:{min:.05,max:.7,output:a,timescale:"audio"},resonance:{min:0,max:5.5,output:a,timescale:"audio"},out:{min:0,max:1,output:a,timescale:"audio",dimensions:1}},HPF:{cutoff:{min:0,max:.7,output:a,timescale:"audio"},resonance:{min:0,max:5.5,output:a,timescale:"audio"},out:{min:0,max:1,output:a,timescale:"audio",dimensions:1}},Crush:{bitDepth:{min:1,max:16,output:a,timescale:"audio"},sampleRate:{min:0,max:1,output:a,timescale:"audio"},amp:{min:0,max:1,output:u,timescale:"audio"},out:{min:0,max:1,output:a,timescale:"audio",dimensions:1}},Schizo:{amp:{min:0,max:1,output:u,timescale:"audio"},out:{min:0,max:1,output:a,timescale:"audio",dimensions:1}},Tremolo:{amp:{min:0,max:1,output:u,timescale:"audio"},frequency:{min:.05,max:20,output:u,timescale:"audio"},out:{min:0,max:1,output:a,timescale:"audio",dimensions:1}}},p=0;p<c.length;p++)!function(){var e=Array.isArray(c[p])?c[p][0]:c[p],t=Array.isArray(c[p])?c[p][1]:c[p];i[t]=function(){var i,s=Array.prototype.slice.call(arguments,0);return i=new r[e],i.type="FX",i.name=t,o.extend(!0,i,n.ugen),n.createProxyProperties(i,l[t]),n.createProxyMethods(i,["send"]),n.processArguments2(i,s,i.name),s.input=0,i.toString=function(){return"> "+t},i}}();i.Chorus=function(e,t,n){var i=e||1,r=n||ms(1),o=t||0,s=Flanger(i,o,r,30*ms(1));return s.name="Chorus",s.type="FX",s},i.LPF=function(e,t){var n=isNaN(e)?.2:e,i=isNaN(t)?3.5:t,r=Filter24(n,i,!0);return r.name="LPF",r.type="FX",r},i.HPF=function(e,t){var n=isNaN(e)?.25:e,i=isNaN(t)?3.5:t,r=Filter24(n,i,!0);return r.isLowPass=!1,r.name="HPF",r.type="FX",r},i.Presets.Schizo={sane:{chance:.1,reverseChance:0,pitchChance:.5,mix:.5},borderline:{chance:.1,pitchChance:.25,reverseChance:.5,mix:1},paranoid:{chance:.2,reverseChance:.5,pitchChance:.5,mix:1}},i.Presets.Reverb={space:{roomSize:.99,damping:.23,wet:.75,dry:.25},small:{roomSize:.6,damping:.75,wet:.15,dry:.85},medium:{roomSize:.8,damping:.5,wet:.35,dry:.65},large:{roomSize:.85,damping:.3,wet:.55,dry:.45}},t.exports=function(e){return"undefined"==typeof n&&(n=e),i}}()},{"../dollar":16,"../mappings":18,"gibberish-dsp":1}],10:[function(e,t){!function(){"use strict";for(var n,i=e("../dollar"),r={Presets:{}},o=e("gibberish-dsp"),s=e("../mappings").outputCurves,a=s.LINEAR,u=s.LOGARITHMIC,c=["Sine","Triangle","Saw","Square","Noise","PWM"],l={frequency:{min:50,max:3200,hardMin:.01,hardMax:22050,output:u,timescale:"audio",dimensions:1},amp:{min:0,max:1,hardMax:2,output:u,timescale:"audio",dimensions:1},pulsewidth:{min:.01,max:.99,output:a,timescale:"audio",dimensions:1},out:{min:0,max:1,output:a,timescale:"audio",dimensions:1},pan:{min:-1,max:1,output:u,timescale:"audio"},note:{min:50,max:3200,hardMin:.01,hardMax:22050,output:u,timescale:"audio",doNotProxy:!0}},p=0;p<c.length;p++)!function(){var e=Array.isArray(c[p])?c[p][0]:c[p],t=Array.isArray(c[p])?c[p][1]:c[p];r[t]=function(){var r=(new o[e]).connect(n.Master),s=Array.prototype.slice.call(arguments,0);r.type="Gen",i.extend(!0,r,n.ugen),r.fx.ugen=r,Object.defineProperty(r,"_",{get:function(){return r.kill(),r},set:function(){}}),"undefined"==typeof r.note&&(r.note=function(e){var t=this.frequency();"number"==typeof t||"function"==typeof t?this.frequency="function"==typeof e?e():e:t[0]=e}),r.name=t,n.createProxyProperties(r,l);var a=["note","send"];return"Sampler"===t&&a.push("pickBuffer"),n.createProxyMethods(r,a),n.processArguments2(r,s,t),r.toString=function(){return"> "+t},r}}();r.Wavetable=function(e){var t=(new o.Table).connect(n.Master);return e&&t.setTable(e),t.type="Gen",i.extend(!0,t,n.ugen),t.fx.ugen=t,Object.defineProperty(t,"_",{get:function(){return t.kill(),t},set:function(){}}),"undefined"==typeof t.note&&(t.note=function(e){var t=this.frequency();"number"==typeof t||"function"==typeof t?this.frequency="function"==typeof e?e():e:t[0]=e}),n.createProxyProperties(t,{frequency:{min:50,max:3200,output:u,timescale:"audio",dimensions:1},amp:{min:0,max:1,output:u,timescale:"audio",dimensions:1},out:{min:0,max:1,output:a,timescale:"audio",dimensions:1}}),n.createProxyMethods(t,["note"]),obj.toString=function(){return"> Wavetable"
},t},r.Grains=function(){var e,t="object"==typeof arguments[0]?arguments[0]:arguments[1],r=t.bufferLength||88200,s=Sampler().record(t.input,r);if("string"==typeof arguments[0]){var a=n.Presets.Grains[arguments[0]];"undefined"!=typeof t&&i.extend(a,t),e=new o.Granulator(a)}else e=new o.Granulator(t);return e.loop=function(e,t,i,r){var s=this.position;e=isNaN(e)?.25:e,t=isNaN(t)?.75:t,i=n.Clock.time(isNaN(i)?1:i),r="undefined"==typeof r?!0:r,this.position=new o.Line(e,t,i,r);var a=this;r===!1&&future(function(){a.position=s},n.Clock.time(i))},future(function(){e.setBuffer(s.getBuffer()),e.connect(),e.loop(0,1,r),s.disconnect()},r+1),e.type="Gen",i.extend(!0,e,n.ugen),e.fx.ugen=e,Object.defineProperty(e,"_",{get:function(){return e.disconnect(),e},set:function(){}}),e.toString=function(){return"Grains"},e},r.Presets.Grains={tight:{numberOfGrains:10,grainSize:1100,positionMin:-.05,positionMax:.05,speedMin:-.1,speedMax:.1,shouldReverse:!1},cloudy:{numberOfGrains:20,positionMin:-.25,positionMax:.25,speedMin:-.1,speedMax:4,grainSize:4400,shouldReverse:!0},flurry:{speed:2,speedMin:-2,speedMax:2,position:0,positionMin:0,positionMax:0,numberOfGrains:20,grainSize:1100}},t.exports=function(e){return"undefined"==typeof n&&(n=e),r}}()},{"../dollar":16,"../mappings":18,"gibberish-dsp":1}],11:[function(e,t){!function(){"use strict";var n,i,r=e("gibberish-dsp"),o=null,s=null,a=null,u=n={Compressor:function(e){if(null===o){o=r.context.createDynamicsCompressor();var t=o.threshold,n=o.ratio,i=o.attack,s=o.release;Object.defineProperties(o,{threshold:{get:function(){return t.value},set:function(e){t.value=e}},ratio:{get:function(){return n.value},set:function(e){n.value=e}},attack:{get:function(){return i.value},set:function(e){i.value=e}},release:{get:function(){return s.value},set:function(e){s.value=e}}}),u.insert(o,e)}return o},LowShelf:function(e){if(null===a){a=r.context.createBiquadFilter(),a.type=3,a.frequency.value=220,a.Q.value=0,a.gain.value=6;var t=a.gain,n=a.frequency,i=a.Q;Object.defineProperties(a,{frequency:{get:function(){return n.value},set:function(e){n.value=e}},gain:{get:function(){return t.value},set:function(e){t.value=e}},Q:{get:function(){return i.value},set:function(e){i.value=e}}}),u.insert(a,e)}return a},HiShelf:function(e){if(null===s){s=r.context.createBiquadFilter(),s.type=4,s.frequency.value=880,s.Q.value=0,s.gain.value=6;var t=s.gain,n=s.frequency,i=s.Q;Object.defineProperties(s,{frequency:{get:function(){return n.value},set:function(e){n.value=e}},gain:{get:function(){return t.value},set:function(e){t.value=e}},Q:{get:function(){return i.value},set:function(e){i.value=e}}}),u.insert(s,e)}return s}};t.exports=function(e){return"undefined"==typeof i&&(i=e),n}}()},{"gibberish-dsp":1}],12:[function(e,t){!function(){"use strict";var n,i={Presets:{}},r=e("gibberish-dsp"),o=e("../dollar"),s=e("../clock"),a=e("../mappings").outputCurves,u=a.LINEAR,c=a.LOGARITHMIC,l={amp:{min:0,max:1,hardMax:2,output:c,timescale:"audio",dimensions:1},pitch:{min:1,max:4,hardMin:.01,hardMax:20,output:c,timescale:"audio"},out:{min:0,max:1,output:u,timescale:"audio",dimensions:1},pan:{min:-1,max:1,output:c,timescale:"audio"},note:{min:50,max:3200,hardMin:.01,hardMax:22050,output:c,timescale:"audio",doNotProxy:!0}};i.Sampler=function(){var e=(new r.Sampler).connect(n.Master),t=Array.prototype.slice.call(arguments,0),i="Sampler";e.type="Gen",o.extend(!0,e,n.ugen),e.fx.ugen=e,Object.defineProperty(e,"_",{get:function(){return e.kill(),e},set:function(){}}),"undefined"==typeof e.note&&(e.note=function(e){var t=this.frequency();"number"==typeof t||"function"==typeof t?this.frequency="function"==typeof e?e():e:t[0]=e}),n.createProxyProperties(e,l);var s=["note","pickBuffer"];return n.createProxyMethods(e,s),n.processArguments2(e,t,i),e.toString=function(){return i},e},r.Sampler.prototype.readFile=function(e){var t=this;if(e.isFile)return void e.file(function(e){t.readFile(e)});var n=new FileReader;n.readAsArrayBuffer(e),n.onload=function(){r.context.decodeAudioData(n.result,function(n){var i=n.getChannelData(0);t.setBuffer(i),t.length=t.end=i.length,t.buffers[e.name]=i,t.isPlaying=!0,console.log("LOADED",e.name,i.length),r.audioFiles[e.name]=i,t.onload&&t.onload(),0!==t.playOnLoad&&t.note(t.playOnLoad),t.isLoaded=!0})}},r.Sampler.prototype.ondrop=function(e){for(var t=0;t<e.length;t++)!function(n){var i,r=e[t];if(new FileReader,i=r.webkitGetAsEntry(),i.isDirectory){var o=i.createReader();o.readEntries(function(e){for(var t=e.length;t--;)n.readFile(e[t])})}else n.readFile(i)}(this)},r.Sampler.prototype.pickBuffer=function(){this.switchBuffer(rndi(0,this.getNumberOfBuffers()))},r.Sampler.prototype.record=function(e,t){this.isRecording=!0,console.log("starting recording");var i=this;return this.recorder=new r.Record(e,n.Clock.time(t),function(){console.log("recording finished"),i.setBuffer(this.getBuffer()),i.length=i.end=i.getBuffer().length,i.setPhase(i.length),i.isRecording=!1}).record(),this},i.Looper=function(e,t,i){var r=Bus();o.extend(r,{children:[],input:e,length:s.time(t),numberOfLoops:i,pitch:1,currentLoop:0,loop:function(){r.children[r.currentLoop].record(r.input,r.length);var e={target:r.children[r.currentLoop],durations:r.length,key:"note",values:[null]};return r.seq.add(e),r.seq.start(),future(r.nextLoop,t),r},nextLoop:function(){r.children[++r.currentLoop].record(r.input,r.length),r.currentLoop<r.numberOfLoops-1&&future(r.nextLoop,t);var e={target:r.children[r.currentLoop],durations:r.length,key:"note",values:[null]};r.seq.add(e)}});var a=1;Object.defineProperty(r,"pitch",{configurable:!0,get:function(){return a},set:function(e){a=e;for(var t=0;t<r.children.length;t++)r.children[t].pitch=a}});for(var u=0;i>u;u++)r.children.push(Sampler({pitch:r.pitch})._),r.children[u].send(r,1);return n.createProxyProperties(r,{pitch:l.pitch}),r.stop=function(){r.seq.stop()},r.play=function(){r.seq.play()},r},t.exports=function(e){return"undefined"==typeof n&&(n=e),i}}()},{"../clock":15,"../dollar":16,"../mappings":18,"gibberish-dsp":1}],13:[function(e,t){!function(){"use strict";for(var n,i={Presets:{}},r=e("gibberish-dsp"),o=e("../dollar"),s=e("../clock")(n),a=e("../mappings").outputCurves,u=a.LINEAR,c=a.LOGARITHMIC,l=[["PolySynth","Synth"],["PolyFM","FM"],["PolySynth2","Synth2"],["MonoSynth","Mono"],["PolyKarplusStrong","Pluck"]],p={Synth:{note:{min:50,max:3200,output:c,timescale:"audio",doNotProxy:!0},frequency:{min:50,max:3200,output:c,timescale:"audio"},amp:{min:0,max:1,output:c,timescale:"audio"},pulsewidth:{min:.01,max:.99,output:u,timescale:"audio"},attack:{min:s.maxMeasures+1,max:176400,output:u,timescale:"audio"},decay:{min:s.maxMeasures+1,max:176400,output:u,timescale:"audio"},sustain:{min:s.maxMeasures+1,max:176400,output:u,timescale:"audio"},release:{min:s.maxMeasures+1,max:176400,output:u,timescale:"audio"},pan:{min:-1,max:1,output:c,timescale:"audio"},out:{min:0,max:1,output:u,timescale:"audio",dimensions:1}},Synth2:{note:{min:50,max:3200,output:c,timescale:"audio",doNotProxy:!0},frequency:{min:50,max:3200,output:u,timescale:"audio"},amp:{min:0,max:1,output:c,timescale:"audio"},pulsewidth:{min:.01,max:.99,output:u,timescale:"audio"},attack:{min:s.maxMeasures+1,max:176400,output:u,timescale:"audio"},decay:{min:s.maxMeasures+1,max:176400,output:u,timescale:"audio"},sustain:{min:s.maxMeasures+1,max:176400,output:u,timescale:"audio"},release:{min:s.maxMeasures+1,max:176400,output:u,timescale:"audio"},cutoff:{min:0,max:.7,output:u,timescale:"audio"},resonance:{min:0,max:5.5,output:u,timescale:"audio"},pan:{min:-1,max:1,output:c,timescale:"audio"},out:{min:0,max:1,output:u,timescale:"audio",dimensions:1}},Mono:{note:{min:50,max:3200,output:c,timescale:"audio",doNotProxy:!0},frequency:{min:50,max:3200,output:u,timescale:"audio"},amp:{min:0,max:1,output:c,timescale:"audio"},pulsewidth:{min:.01,max:.99,output:u,timescale:"audio"},attack:{min:s.maxMeasures+1,max:176400,output:c,timescale:"audio"},decay:{min:s.maxMeasures+1,max:176400,output:c,timescale:"audio"},cutoff:{min:0,max:.7,output:u,timescale:"audio"},detune2:{min:0,max:.15,output:u,timescale:"audio"},detune3:{min:0,max:.15,output:u,timescale:"audio"},glide:{min:.99,max:.999995,output:u,timescale:"audio"},resonance:{min:0,max:5.5,output:u,timescale:"audio"},pan:{min:-1,max:1,output:c,timescale:"audio"},out:{min:0,max:1,output:u,timescale:"audio",dimensions:1}},FM:{note:{min:50,max:3200,output:c,timescale:"audio",doNotProxy:!0},frequency:{min:50,max:3200,output:u,timescale:"audio"},amp:{min:0,max:1,output:c,timescale:"audio"},attack:{min:s.maxMeasures+1,max:176400,output:u,timescale:"audio"},decay:{min:s.maxMeasures+1,max:176400,output:u,timescale:"audio"},sustain:{min:s.maxMeasures+1,max:176400,output:u,timescale:"audio"},release:{min:s.maxMeasures+1,max:176400,output:u,timescale:"audio"},cmRatio:{min:.1,max:50,output:u,timescale:"audio"},index:{min:.1,max:50,output:u,timescale:"audio"},pan:{min:-1,max:1,output:c,timescale:"audio"},out:{min:0,max:1,output:u,timescale:"audio",dimensions:1}},Pluck:{note:{min:50,max:3200,output:c,timescale:"audio",doNotProxy:!0},frequency:{min:50,max:3200,output:u,timescale:"audio"},amp:{min:0,max:1,output:c,timescale:"audio"},blend:{min:0,max:1,output:u,timescale:"audio"},damping:{min:0,max:1,output:u,timescale:"audio"},pan:{min:-1,max:1,output:c,timescale:"audio"},out:{min:0,max:1,output:u,timescale:"audio",dimensions:1}}},h=0;h<l.length;h++)!function(){var e=Array.isArray(l[h])?l[h][0]:l[h],t=Array.isArray(l[h])?l[h][1]:l[h];i[t]=function(){var i,s,a=Array.prototype.slice.call(arguments),u=1,c=!1,l=!0;if("object"==typeof a[0]&&("undefined"!=typeof a[0].maxVoices&&a[0].maxVoices&&(u=a[0].maxVoices),"undefined"!=typeof a[0].useADSR?(c=a[0].useADSR,"undefined"!=typeof a[0].requireReleaseTrigger&&(l=a[0].requireReleaseTrigger)):l=!1,"undefined"!=typeof a[0].useADSR&&(c=a[0].useADSR),"undefined"!=typeof a[0].scale&&(s=a[0].scale)),i=new r[e]({maxVoices:u,useADSR:c,requireReleaseTrigger:l,scale:s}).connect(n.Master),i.type="Gen",o.extend(!0,i,n.ugen),i.fx.ugen=i,i._note=i.note.bind(i),i.note=function(){var e=Array.prototype.splice.call(arguments,0);if("string"==typeof e[0])e[0]=n.Theory.Teoria.note(e[0]).fq();else if("object"==typeof e[0]&&(e[0]=e[0].valueOf()),e[0]<n.minNoteFrequency){var t=i.scale||n.scale,r=t.notes[e[0]];if(i.octave&&0!==i.octave)for(var o=i.octave>0?1:0,s=Math.abs(i.octave),a=0;s>a;a++)r*=o?2:.5;e[0]=r}return this._note.apply(this,e),this},i.chord=n.Theory.chord,Object.defineProperty(i,"_",{get:function(){return i.kill(),i},set:function(){}}),n.createProxyProperties(i,p[t]),n.createProxyMethods(i,["note","chord","send"]),i.name=t,n.processArguments2(i,a,i.name),i.toString=function(){return"> "+t},"Mono"!==t){var h=i._frequency;Object.defineProperty(i,"frequency",{configurable:!0,get:function(){return this._frequency},set:function(e){if(h=e,this.children)for(var t=0;t<this.children.length;t++)"number"==typeof this.children[t].frequency?this.children[t].frequency=h:this.children[t].frequency[0]=h}})}var f;return Object.defineProperty(i,"scale",{get:function(){return f},set:function(e){f=e,i.seq.scale=f}}),i}}();i.Presets.Synth={"short":{attack:44,decay:1/16},bleep:{waveform:"Sine",attack:44,decay:1/16},rhodes:{waveform:"Sine",maxVoices:4,presetInit:function(){this.fx.add(n.FX.Tremolo(2,.2))},attack:44,decay:1},calvin:{waveform:"PWM",maxVoices:4,amp:.075,presetInit:function(){this.fx.add(n.FX.Delay(1/6,.5),n.FX.Vibrato())},attack:44,decay:.25}},i.Presets.Synth2={pad2:{waveform:"Saw",maxVoices:4,attack:1.5,decay:.5,cutoff:.3,filterMult:.35,resonance:4.5,amp:1.25},pad4:{waveform:"Saw",maxVoices:4,attack:2,decay:2,cutoff:.3,filterMult:.35,resonance:4.5,amp:1.25}},i.Presets.Mono={"short":{attack:44,decay:1/16},lead:{presetInit:function(){this.fx.add(n.FX.Delay(.25,.35),n.FX.Reverb())},attack:1/8,decay:.5,octave3:0,cutoff:.2,filterMult:.5,resonance:5,isLowPass:!1},winsome:{presetInit:function(){this.lfo=n.Oscillators.Sine(.234375)._,this.lfo.amp=.075,this.lfo.frequency=2,this.cutoff=this.lfo,this.detune2=this.lfo},attack:s.maxMeasures,decay:1,cutoff:.2},bass:{attack:s.maxMeasures,decay:1/8-s.maxMeasures,octave:-2,octave2:-1,cutoff:.5,filterMult:.2,resonance:1},bass2:{attack:s.maxMeasures,decay:1/6,octave:-2,octave2:0,octave3:0,cutoff:.5,filterMult:.2,resonance:1,amp:.65},easy:{attack:s.maxMeasures,decay:2,octave2:0,octave3:0,cutoff:.3,glide:.9995},easyfx:{attack:s.maxMeasures,decay:2,presetInit:function(){this.fx.add(n.FX.Delay(1/6,.3))},amp:.3,octave2:0,octave3:0,cutoff:.3,glide:.9995},dark:{resonance:0,attack:44,cutoff:.075,amp:.35,filterMult:0},dark2:{filterMult:.1,attack:s.maxMeasures,octave2:0,octave3:0,decay:.25,amp:.45},noise:{resonance:20,decay:.5,cutoff:.3,glide:.99995,detune3:0,detune2:0,filterMult:0,presetInit:function(){this.fx.add(n.FX.Gain(.1),n.FX.Delay(1/6,.35))}}},i.Presets.FM={stabs:{maxVoices:4,cmRatio:1/1.0007,index:5,attack:s.maxMeasures,decay:1/8,amp:.1,presetInit:function(){this.bus=n.Busses.Bus().fx.add(n.FX.Delay(1/8,.75),n.FX.LPF({resonance:4})),this.bus.fx[1].cutoff=n.Binops.Add(.25,n.Oscilators.Sine(.1,.2)._),this.send(this.bus,.65)}},bass:{cmRatio:1,index:3,presetInit:function(){this.attack=ms(1)},decay:1/16,octave:-2},glockenspiel:{cmRatio:3.5307,index:1,attack:44,decay:44100},radio:{cmRatio:1,index:40,attack:13230,decay:22050},noise:{cmRatio:.04,index:1e3,attack:44.1,decay:4410},frog:{cmRatio:.1,index:2,attack:13230,decay:220.5},gong:{cmRatio:1.4,index:.95,attack:44.1,decay:220500},drum:{cmRatio:1.40007,index:2,attack:44,decay:44100},drum2:{cmRatio:1+Math.sqrt(2),index:.2,attack:44,decay:882},brass:{maxVoices:4,cmRatio:1/1.0007,index:5,attack:4100,decay:1},clarinet:{cmRatio:1.5,index:1.5,attack:2205,decay:8820}},t.exports=function(e){return"undefined"==typeof n&&(n=e),i}}()},{"../clock":15,"../dollar":16,"../mappings":18,"gibberish-dsp":1}],14:[function(e,t){!function(){"use strict";var n,i=e("../../external/teoria.min"),r=e("../dollar"),o={Teoria:i,Scale:function(e,t){var o={root:"string"==typeof e?i.note(e):e,notes:[],degree:1,chord:function(e,t){var n=[];t=t||0;for(var i=0;i<e.length;i++)n.push(this.notes[e[i]+t]);return n},create:function(){var e="object"==typeof o.root()?o.root():i.note(o.root()),t=o.mode()||s;if(this.notes.length=0,n.Theory.Scales[t]){var r=n.Theory.Scales[t](e);r.create(this.degree),this.notes=r.notes}},set:function(e,t){Array.isArray(arguments[0])?(this.root=arguments[0][0],this.mode=arguments[0][1]):(this.root=e,this.mode=t)}},s=t||"aeolian";Object.defineProperty(o,"mode",{configurable:!0,get:function(){return s},set:function(e){s=e,o.create()}});var a=o.root;Object.defineProperty(o,"root",{configurable:!0,get:function(){return a},set:function(e){a="string"==typeof e?i.note(e):e,o.create()}});var u=o.degree;return Object.defineProperty(o,"degree",{configurable:!0,get:function(){return u},set:function(e){u=e,o.create(u)}}),n.createProxyProperty(o,"root",!0,!1,null,!1,1),n.createProxyProperty(o,"mode",!0,!1,null,!1,1),n.createProxyProperty(o,"degree",!0,!1,null,!1,1),r.subscribe("/gibber/clear",function(){o.seq.isConnected=!1,o.seq.isRunning=!1,o.seq.destinations.length=0}),o.create(),o.toString=function(){return"Scale: "+o.root()+", "+o.mode()},o},CustomScale:function(e){var t={notes:[],degree:e||1,ratios:arguments[1]||[1,1.1,1.25,1.3333,1.5,1.666,1.75],create:function(e){this.notes=[];for(var t=this.root,n=0;8>n;n++){for(var i=0;i<this.ratios.length;i++){var r=i+e-1,o=t*(1+Math.floor(r/this.ratios.length));this.notes.push(o*this.ratios[r%this.ratios.length])}t*=2}t=this.root;for(var n=-1;n>=-8;n--){t/=2;for(var i=0;i<this.ratios.length;i++){var s=n*this.ratios.length+i,r=i+e-1,o=t*(1+Math.floor(r/this.ratios.length));this.notes[s]=o*this.ratios[r%this.ratios.length]}}},chord:function(e,t){var n=[];t=t||0;for(var i=0;i<e.length;i++)n.push(this.notes[e[i]+t]);return n}},n=arguments[0]||440;return Object.defineProperty(t,"root",{get:function(){return n},set:function(e){"number"==typeof e?n=e:"string"==typeof e?n=o.Teoria.note(e).fq():"object"==typeof e&&(n=e.fq()),this.create(n)}}),t.root=n,t},Scales:{Major:function(e){return o.CustomScale(e,[1,9/8,5/4,4/3,1.5,5/3,15/8])},Ionian:function(e){return o.CustomScale(e,[1,9/8,5/4,4/3,1.5,5/3,15/8])},Dorian:function(e){return o.CustomScale(e,[1,9/8,1.2,4/3,1.5,5/3,1.8])},Phrygian:function(e){return o.CustomScale(e,[1,16/15,1.2,4/3,1.5,1.6,1.8])},Lydian:function(e){return o.CustomScale(e,[1,9/8,5/4,45/32,1.5,5/3,15/8])},Mixolydian:function(e){return o.CustomScale(e,[1,9/8,5/4,4/3,1.5,1.6,1.8])},Minor:function(e){return o.CustomScale(e,[1,9/8,1.2,4/3,1.5,1.6,1.8])},Aeolian:function(e){return o.CustomScale(e,[1,9/8,1.2,4/3,1.5,1.6,1.8])},Locrian:function(e){return o.CustomScale(e,[1,16/15,1.2,4/3,62/45,1.6,15/8])},MajorPentatonic:function(e){return o.CustomScale(e,[1,9/8,5/4,1.5,5/3])},MinorPentatonic:function(e){return o.CustomScale(e,[1,1.2,4/3,1.5,15/8])},Chromatic:function(e){return o.CustomScale(e,[1,16/15,9/8,1.2,5/4,4/3,45/32,1.5,1.6,5/3,15/8,1.8])},HalfWhole:function(e){return o.CustomScale(e,[1,1.059463,1.189207,1.259921,1.414214,1.498307,1.681793,1.781797])},WholeHalf:function(e){return o.CustomScale(e,[1,1.122462,1.189207,1.33484,1.414214,1.587401,1.681793,1.887749])},Pythagorean:function(e){return o.CustomScale(e,[1,256/243,9/8,32/27,81/64,4/3,729/512,1.5,128/81,27/16,16/9,243/128])},PythagoreanMajor:function(e){return o.CustomScale(e,[1,9/8,81/64,4/3,1.5,27/16,243/128])},PythagoreanMinor:function(e){return o.CustomScale(e,[1,9/8,32/27,4/3,1.5,128/81,16/9])},Limit5:function(e){return o.CustomScale(e,[1,16/15,9/8,1.2,5/4,4/3,45/32,1.5,1.6,5/3,1.8,15/8])},Limit5Major:function(e){return o.CustomScale(e,[1,9/8,5/4,4/3,1.5,5/3,15/8])},Limit5Minor:function(e){return o.CustomScale(e,[1,9/8,1.2,4/3,1.5,1.6,1.8])},Mess3:function(e){return o.CustomScale(e,[1,1.122462,1.189207,1.259921,1.414214,1.498307,1.587401,1.781797,1.887749])},Mess4:function(e){return o.CustomScale(e,[1,1.059463,1.122462,1.33484,1.414214,1.498307,1.587401,1.887749])},Mess5:function(e){return o.CustomScale(e,[1,1.059463,1.33484,1.414214,1.498307,1.887749])},Mess6:function(e){return o.CustomScale(e,[1,1.122462,1.259921,1.33484,1.414214,1.587401,1.781797,1.887749])},Mess7:function(e){return o.CustomScale(e,[1,1.059463,1.122462,1.189207,1.33484,1.414214,1.498307,1.587401,1.681793,1.887749])},Adams:function(e){return o.CustomScale(e,[1,1.122462,1.259921,1.414214,1.498307,1.681793,1.781797])},Equal5Tone:function(e){return o.CustomScale(e,[1,1.15,1.32,1.35,1.52,1.74])},Equal7Tone:function(e){return o.CustomScale(e,[1,1.1,1.22,1.35,1.49,1.64,1.81])},Just:function(e){return o.CustomScale(e,[1,1.0417,1.125,1.2,1.25,1.3333,1.4063,1.5,1.6,1.6667,1.8,1.875])},Shruti:function(e){return o.CustomScale(e,[1,256/243,16/15,10/9,9/8,32/27,1.2,5/4,81/64,4/3,1.35,45/32,729/512,1.5,128/81,1.6,5/3,27/16,16/9,1.8,15/8,243/128,2])}},chord:function(e){if(this.notation=e,"string"==typeof this.notation){var t,n,r=this.notation.slice(0,1);isNaN(this.notation.charAt(1))?(r+=this.notation.charAt(1),t=parseInt(this.notation.slice(2,3)),n=this.notation.slice(3)):(t=parseInt(this.notation.slice(1,2)),n=this.notation.slice(2));for(var s=i.note(r+t).chord(n),a=0;a<s.notes.length;a++){var u=s.notes[a];this.note("number"==typeof l?l:u.fq())}}else for(var c=0;c<this.notation.length;c++){var l,p=this.scale?this.scale.notes[this.notation[c]]:this.notation[c];switch(typeof p){case"number":l=p;break;case"object":l=p.fq();break;case"string":l=o.Teoria.note(p).fq()}this.note(l)}return"undefined"!=typeof arguments[1]&&(this.amp=arguments[1]),this}};t.exports=function(e){return"undefined"==typeof n&&(n=e),o}}()},{"../../external/teoria.min":2,"../dollar":16}],15:[function(e,t){!function(){"use strict";var n,i=[],r=e("./dollar"),o=e("./mappings").outputCurves,s=o.LINEAR,a=(o.LOGARITHMIC,e("gibberish-dsp")),u={seq:null,bpm:null,maxMeasures:44,baseBPM:120,metronome:null,currentBeat:0,beatsPerMeasure:4,codeToExecute:[],signature:{lower:4,upper:4},sequencers:[],timeProperties:["attack","decay","sustain","release","offset","time"],phase:0,processBeat:function(){if(u.currentBeat=u.currentBeat>=u.signature.upper?1:u.currentBeat+1,1===u.currentBeat&&u.codeToExecute.length>0){for(var e=0;e<u.codeToExecute.length;e++)try{"function"==typeof u.codeToExecute[e].function?u.codeToExecute[e].function():n.run(u.codeToExecute[e].code,u.codeToExecute[e].pos,u.codeToExecute[e].cm)}catch(t){console.error("FAILED TO EXECUTE CODE:",u.codeToExecute[e].code,t)}u.codeToExecute.length=0}null!==u.metronome&&u.metronome.draw(u.currentBeat,u.signature.upper),u.phase+=u.beats(1)},getTimeSinceStart:function(){return u.phase+u.seq.phase},reset:function(){this.phase=0,this.currentBeat=0,this.rate=1,this.start()},tap:function(){var e=n.Clock.getTimeSinceStart();for(i[2]&&e-i[2]>88200&&(i.length=0),i.unshift(e);i.length>3;)i.pop();if(3===i.length){var t=(i[0]+i[1]-2*i[2])/3,r=44100/t,o=60*r;n.Clock.bpm=o}},start:function(e){if(e){r.extend(this,{properties:{rate:1},name:"master_clock",callback:function(e){return e}}),this.__proto__=new a.ugen,this.__proto__.init.call(this);var t=this.baseBPM;Object.defineProperty(u,"bpm",{get:function(){return t},set:function(e){t=e,u.rate=t/u.baseBPM}}),Object.defineProperty(this,"timeSignature",{get:function(){return u.signature.upper+"/"+u.signature.lower},set:function(e){var t=e.split("/");2!==t.length||t[0]===u.signature.upper&&t[1]===u.signature.lower||(u.signature.upper=parseInt(t[0]),u.signature.lower=parseInt(t[1]),u.currentBeat=1!=u.currentBeat?0:1)}}),n.createProxyProperties(this,{rate:{min:.1,max:2,output:s,timescale:"audio"},bpm:{min:20,max:200,output:s,timescale:"audio"}})}u.seq=new a.PolySeq({seqs:[{target:u,values:[u.processBeat.bind(u)],durations:[.25]}],rate:u}),u.seq.connect().start(),u.seq.timeModifier=u.time.bind(u)},addMetronome:function(e){this.metronome=e,this.metronome.init()},time:function(e){var t;return t=e<this.maxMeasures?u.beats(e*u.signature.lower):e},Time:function(e){var t;return t=u.Beats(e<this.maxMeasures?e*u.signature.lower:e)},beats:function(e){var t="undefined"!=typeof a.context?a.context.sampleRate:44100,n=t/(u.baseBPM/60);return n*e*(4/u.signature.lower)},Beats:function(e){return function(){return n.Clock.beats(e)}}};t.exports=function(e){return"undefined"==typeof n&&(n=e),u}}()},{"./dollar":16,"./mappings":18,"gibberish-dsp":1}],16:[function(e,t){(function(e){!function(){"use strict";function n(e,t,i){for(var r in t)i&&(l(t[r])||u(t[r]))?(l(t[r])&&!l(e[r])&&(e[r]={}),u(t[r])&&!u(e[r])&&(e[r]=[]),n(e[r],t[r],i)):void 0!==t[r]&&(e[r]=t[r])}var i="function"==typeof Zepto,r="function"==typeof jQuery,o="object"==typeof e.$||"function"==typeof e.$,s=null,a=i||r||o,u=Array.isArray,c=function(e){return"object"==typeof e},l=function(e){return c(e)&&Object.getPrototypeOf(e)==Object.prototype};s=a?r?jQuery:i?Zepto:o?e.$:{}:{},a||(s.extend=function(e){var t,i=Array.prototype.slice.call(arguments,1);return"boolean"==typeof e&&(t=e,e=i.shift()),i.forEach(function(i){n(e,i,t)}),e},s.isArray=Array.isArray,s.isPlainObject=l,s.type=function(e){return typeof e});var p={};s.subscribe=function(e,t){"undefined"==typeof p[e]&&(p[e]=[]),p[e].push(t)},s.unsubscribe=function(e,t){if("undefined"!=typeof p[e]){var n=p[e];n.splice(n.indexOf(t),1)}},s.publish=function(e,t){if("undefined"!=typeof p[e])for(var n=p[e],i=0;i<n.length;i++)n[i](t)},t.exports=s}()}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],17:[function(_dereq_,module,exports){!function(){var $=_dereq_("./dollar"),Gibber={Presets:{},GraphicsLib:{},Binops:{},scale:null,minNoteFrequency:50,started:!1,"export":function(e){$.extend(e,Gibber.Busses),$.extend(e,Gibber.Oscillators),$.extend(e,Gibber.Synths),$.extend(e,Gibber.Percussion),$.extend(e,Gibber.Envelopes),$.extend(e,Gibber.FX),$.extend(e,Gibber.Seqs),$.extend(e,Gibber.Samplers),$.extend(e,Gibber.PostProcessing),$.extend(e,Gibber.Theory),$.extend(e,Gibber.Analysis),e.future=Gibber.Utilities.future,e.solo=Gibber.Utilities.solo,e.Clock=Gibber.Clock,e.Seq=Gibber.Seq,e.Arp=Gibber.Arp,e.ScaleSeq=Gibber.ScaleSeq,e.Rndi=Gibber.Utilities.Rndi,e.Rndf=Gibber.Utilities.Rndf,e.rndi=Gibber.Utilities.rndi,e.rndf=Gibber.Utilities.rndf,e.module=Gibber.import,Gibber.Audio.Time.export(e),e.sec=e.seconds,Gibber.Audio.Binops.export(e)},init:function(e){"undefined"==typeof window?(window=GLOBAL,document=GLOBAL.document=!1):"undefined"!=typeof GLOBAL&&(GLOBAL.document||(document=GLOBAL.document=!1));var t={globalize:!0,canvas:null,target:window};Gibber.Utilities.Rndi=Gibber.Audio.Rndi,Gibber.Utilities.Rndf=Gibber.Audio.Rndf,Gibber.Utilities.rndi=Gibber.Audio.rndi,Gibber.Utilities.rndf=Gibber.Audio.rndf,"object"==typeof e&&$.extend(t,e),$.extend(Gibber.Presets,Gibber.Synths.Presets),$.extend(Gibber.Presets,Gibber.Percussion.Presets),$.extend(Gibber.Presets,Gibber.FX.Presets),$.extend(Gibber.Presets,Gibber.FX.Presets),$.extend(Gibber.Binops,Gibber.Audio.Binops),t.globalize&&Gibber.export(t.target),t.target.$=$,Gibber.Utilities.init();var n=null;Gibber.Audio.onstart&&(n=Gibber.Audio.onstart),Gibber.Audio.context||(Gibber.Audio.context={sampleRate:44100}),Gibber.Audio.onstart=function(){Gibber.Clock.start(!0),null!==n&&n()},Gibber.Audio.init(),Gibber.Master=Gibber.Busses.Bus().connect(Gibber.Audio.out),t.globalize&&(t.target.Master=Gibber.Master),Gibber.Master.type="Bus",Gibber.Master.name="Master",$.extend(!0,Gibber.Master,Gibber.ugen),Gibber.Master.fx.ugen=Gibber.Master,Gibber.isInstrument=!0,Gibber.Audio.ugen.connect=Gibber.Audio._oscillator.connect=Gibber.Audio._synth.connect=Gibber.Audio._effect.connect=Gibber.Audio._bus.connect=Gibber.connect,Gibber.Audio.defineUgenProperty=Gibber.defineUgenProperty,Gibber.scale=Gibber.Theory.Scale("c4","Minor")},interfaceIsReady:function(){Gibber.started||"undefined"!=typeof Gibber.Audio.context.currentTime&&(Gibber.started=!0,Gibber.isInstrument&&eval(loadFile.text))},Modules:{},"import":function(path,exportTo){var _done=null;return console.log("Loading module "+path+"..."),-1===path.indexOf("http:")?(console.log("loading via post",path),$.post(Gibber.Environment.SERVER_URL+"/gibber/"+path,{},function(d){return d=JSON.parse(d),eval(d.text),exportTo&&Gibber.Modules[path]&&($.extend(exportTo,Gibber.Modules[path]),Gibber.Modules[path]=exportTo),Gibber.Modules[path]?(Gibber.Modules[path].init&&Gibber.Modules[path].init(),console.log("Module "+path+" is now loaded.")):console.log("Publication "+path+" is loaded. It may not be a valid module."),null!==_done&&_done(Gibber.Modules[path]),!1})):$script.get(path,function(){console.log("Module "+path+" is now loaded."),null!==_done&&_done()}),{done:function(e){_done=e}}},defineUgenProperty:function(e,t,n){var i=Gibber.Clock.timeProperties.indexOf(e)>-1,r=n.properties[e]={value:i?Gibber.Clock.time(t):t,binops:[],parent:n,name:e},o=e.charAt(0).toUpperCase()+e.slice(1);Object.defineProperty(n,e,{configurable:!0,get:function(){return r.value},set:function(e){n[o]&&n[o].mapping&&n[o].mapping.remove&&n[o].mapping.remove(!0),r.value=i?Gibber.Clock.time(e):e,Gibber.Audio.dirty(n)}}),n[e]=r.value},polyInit:function(e){e.mod=e.polyMod,e.removeMod=e.removePolyMod;for(var t in e.polyProperties)!function(t){var n=e.polyProperties[t],i=Gibber.Clock.timeProperties.indexOf(t)>-1;Object.defineProperty(e,t,{get:function(){return n},set:function(n){for(var r=0;r<e.children.length;r++)e.children[r][t]=i?Gibber.Clock.time(n):n}})}(t)},connect:function(e,t){return"undefined"==typeof e&&(e=Gibber.Master),-1===this.destinations.indexOf(e)&&(e.addConnection(this,1,t),0!==t&&this.destinations.push(e)),this},log:function(e){"undefined"!=typeof e&&console.log("function"!=typeof e?e:"Function")},scriptCallbacks:[],run:function(script,pos,cm){var _start=pos.start?pos.start.line:pos.line,tree;try{tree=Gibber.Esprima.parse(script,{loc:!0,range:!0})}catch(e){return void console.error("Parse error on line "+(_start+e.lineNumber)+" : "+e.message.split(":")[1])}for(var __i__=0;__i__<tree.body.length;__i__++){var obj=tree.body[__i__],start={line:_start+obj.loc.start.line-1,ch:obj.loc.start.column},end={line:_start+obj.loc.end.line-1,ch:obj.loc.end.column},src=cm.getRange(start,end),result=null;try{result=eval(src),log("function"!=typeof result?result:"Function")}catch(e){console.error("Error evaluating expression beginning on line "+(start.line+1)+"\n"+e.message)}if(this.scriptCallbacks.length>0)for(var ___i___=0;___i___<this.scriptCallbacks.length;___i___++)this.scriptCallbacks[___i___](obj,cm,pos,start,end,src,_start)}},processArguments:function(e,t){var n;return e.length?"string"==typeof e[0]&&"Drums"!==t&&"XOX"!==t?(n=Gibber.getPreset(e[0],t),"object"==typeof e[1]&&$.extend(n,e[1]),n):Array.prototype.slice.call(e,0):n},processArguments2:function(e,t,n){if(t.length){var i=t[0];if("string"==typeof i&&"Drums"!==n&&"XOX"!==n&&"Shader"!==n)preset=Gibber.getPreset(t[0],n),"object"==typeof t[1]&&$.extend(preset,t[1]),$.extend(e,preset),e.presetInit&&e.presetInit();else if($.isPlainObject(i)&&"undefined"==typeof i.type)$.extend(e,i);else{var r=Object.keys(e.properties);if("FX"===e.type)for(var o=0;o<t.length;o++)e[r[o+1]]=t[o];else for(var o=0;o<t.length;o++)e[r[o]]=t[o]}}},getPreset:function(e,t){var n={};return Gibber.Presets[t]&&Gibber.Presets[t][e]?n=Gibber.Presets[t][e]:Gibber.log(t+" does not have a preset named "+e+"."),n},stopAudio:function(){Gibber.Audio.analysisUgens.length=0,Gibber.Audio.sequencers.length=0;for(var e=0;e<Gibber.Master.inputs.length;e++)Gibber.Master.inputs[e].value.disconnect();Gibber.Master.inputs.length=0,Gibber.Clock.reset(),Gibber.Master.fx.remove(),Gibber.Master.amp=1,console.log("Audio stopped.")},clear:function(){this.stopAudio(),Gibber.Graphics&&Gibber.Graphics.clear(),Gibber.proxy(window),$.publish("/gibber/clear",{}),console.log("Gibber has been cleared.")},proxy:function(e){for(var t="abcdefghijklmnopqrstuvwxyz",n=0;n<t.length;n++){var i=t.charAt(n);"undefined"!=typeof window[i]&&(delete window[i],delete window["___"+i]),function(){var t=i;Object.defineProperty(e,t,{configurable:!0,get:function(){return e["___"+t]},set:function(n){if(n)e["___"+t]&&"function"==typeof e["___"+t].replaceWith&&(e["___"+t].replaceWith(n),console.log(e["___"+t].name+" was replaced with "+n.name)),e["___"+t]=n;else if(e["___"+t]){var i=e["___"+t];i&&"function"==typeof i.kill&&i.kill()}}})}()}},construct:function(e,t){function n(){return e.apply(this,t)}return n.prototype=e.prototype,new n},createMappingObject:function(e,t){var n="function"==typeof e.min?e.min():e.min,i="function"==typeof e.max?e.max():e.max,r="function"==typeof t.min?t.min():t.min,o="function"==typeof t.max?t.max():t.max;if("undefined"==typeof t.object&&t.Value&&(t=t.Value),"undefined"!=typeof e.object[e.Name].mapping)return void e.object[e.Name].mapping.replace(t.object,t.name,t.Name);"undefined"!=typeof t.targets&&-1===t.targets.indexOf(e)&&t.targets.push([e,e.Name]);var s="Out"!==t.Name?t.timescale:"audioOut";mapping=Gibber.mappings[e.timescale][s](e,t),e.object[e.name].toString=function(){return"> continuous mapping: "+t.name+" -> "+e.name},Object.defineProperties(e.object[e.Name],{min:{configurable:!0,get:function(){return n},set:function(t){n=t,e.object[e.Name].mapping.outputMin=n}},max:{configurable:!0,get:function(){return i},set:function(t){i=t,e.object[e.Name].mapping.outputMax=i}}}),e.object[e.Name].mappingObjects=[],Gibber.createProxyProperty(e.object[e.Name],"min",1,0,{min:n,max:i,output:e.output,timescale:e.timescale,dimensions:1}),Gibber.createProxyProperty(e.object[e.Name],"max",1,0,{min:n,max:i,output:e.output,timescale:e.timescale,dimensions:1}),Object.defineProperties(t.object[t.Name],{min:{configurable:!0,get:function(){return r},set:function(t){r=t,e.object[e.Name].mapping.inputMin=r}},max:{configurable:!0,get:function(){return o},set:function(t){o=t,e.object[e.Name].mapping.inputMax=o}}}),e.object[e.Name].invert=function(){e.object[e.Name].mapping.invert()},"undefined"==typeof e.object.mappings&&(e.object.mappings=[]),e.object.mappings.push(mapping),Gibber.defineSequencedProperty(e.object[e.Name],"invert")},defineSequencedProperty:function(e,t,n){var i,r,o=e[t];e.seq||(e.seq=Gibber.Seqs.Seq({doNotStart:!0,scale:e.scale,priority:n})),o.seq=function(s,a){var u={key:t,values:$.isArray(s)||null!==s&&"function"!=typeof s&&"number"==typeof s.length?s:[s],durations:$.isArray(a)?a:"undefined"!=typeof a?[a]:null,target:e,priority:n};return"undefined"!=typeof i&&(i.shouldStop=!0,e.seq.seqs.splice(r,1)),e.seq.add(u),r=e.seq.seqs.length-1,i=e.seq.seqs[r],null===u.durations&&e.seq.autofire.push(i),Object.defineProperties(o.seq,{values:{configurable:!0,get:function(){return e.seq.seqs[r].values},set:function(n){Array.isArray(n)||(n=[n]),"note"===t&&e.seq.scale&&(n=makeNoteFunction(n,e.seq)),e.seq.seqs[r].values=n}},durations:{configurable:!0,get:function(){return e.seq.seqs[r].durations
},set:function(t){Array.isArray(t)||(t=[t]),e.seq.seqs[r].durations=t}}}),e.seq.isRunning||(e.seq.offset=Gibber.Clock.time(e.offset),e.seq.start(!0,n)),e},o.seq.stop=function(){i.shouldStop=!0},o.seq.start=function(){i.shouldStop=!1,e.seq.timeline[0]=[i],e.seq.nextTime=0,e.seq.isRunning||e.seq.start(!1,n)}},defineRampedProperty:function(e,t){var n,i=e[t],r=t.slice(1);i.ramp=function(t,i,o){return arguments.length<2?void console.err("ramp requires at least two arguments: target and time."):("undefined"==typeof o&&(o=i,i=t,t=e[r]()),n&&n(),"object"!=typeof t?e[r]=Line(t,i,o):t.retrigger(i,Gibber.Clock.time(o)),n=future(function(){e[r]=i},o),e)}},createProxyMethods:function(e,t){for(var n=0;n<t.length;n++)Gibber.defineSequencedProperty(e,t[n])},createProxyProperty:function(e,t,n,i,r,o,s){var a,u,c=t,l=o===!1?!1:!0,p=l?r||e.mappingProperties[c]:null,h=c.charAt(0).toUpperCase()+c.slice(1);a=$.extend({},p,{Name:h,name:c,type:"mapping",value:e[c],object:e,targets:[],oldSetter:e.__lookupSetter__(c),oldGetter:e.__lookupGetter__(c),oldMappingGetter:e.__lookupGetter__(h),oldMappingSetter:e.__lookupSetter__(h)}),e.mappingObjects||(e.mappingObjects=[]),e.mappingObjects.push(a);var f=l?"_"+c:c;u=e["_"+c]=function(){var t=function(t){return"undefined"!=typeof t?(a.value=t,a.oldSetter&&a.oldSetter(a.value),e):a.value};return t}(),u.valueOf=function(){return a.value},a.toString=function(){return"> continuous mapping: "+a.name},l?Object.defineProperty(e,c,{configurable:!0,get:function(){return e["_"+c]},set:function(t){return"object"==typeof t&&"mapping"===t.type?Gibber.createMappingObject(a,t):("undefined"!=typeof e[a.Name].mapping&&e[a.Name].mapping.remove&&e[a.Name].mapping.remove(!0),e["_"+c](t)),e}}):!function(){Object.defineProperty(e,c,{configurable:!0,get:function(){return e["_"+c]},set:function(t){return e["_"+c](t),e}})}(),n&&Gibber.defineSequencedProperty(e,f,s),i&&Gibber.defineRampedProperty(e,f),l&&Object.defineProperty(e,a.Name,{configurable:!0,get:function(){return"function"==typeof a.oldMappingGetter&&a.oldMappingGetter(),a},set:function(t){e[a.Name]=t,"function"==typeof a.oldMappingSetter&&a.oldMappingSetter(t)}})},createProxyProperties:function(e,t,n,i){var r="undefined"==typeof n?!0:n,o="undefined"==typeof i?!0:i;e.gibber=!0,!e.seq&&r&&(e.seq=Gibber.Seqs.Seq({doNotStart:!0,scale:e.scale})),e.mappingProperties=t,e.mappingObjects=[];for(var s in t)t[s].doNotProxy||Gibber.createProxyProperty(e,s,r,o)},object:{"class":null,text:null,init:function(e){this.class=e,this.text=$("."+e)}},ugen:{sequencers:[],mappings:[],fx:$.extend([],{add:function(){var e=0===this.length?this.ugen:this[this.length-1];e.disconnect();for(var t=0;t<arguments.length;t++){var n=arguments[t];n.input=e,e=n,this.push(n)}return this.ugen!==Gibber.Master?e.connect():e.connect(Gibber.Audio.out),this.ugen},remove:function(){if(arguments.length>0)for(var e=0;e<arguments.length;e++){var t=arguments[e];if("string"!=typeof t){if("number"==typeof t){var n=this[t];if(n.disconnect(),this.splice(t,1),"undefined"!=typeof this[t]){var i=t-1;this[t].input=-1!==i?this[i]:this.ugen,"undefined"!=typeof this[t+1]?this[t+1].input=0===t?this.ugen:this[t]:this.ugen.connect(this.ugen!==Gibber.Master?Gibber.Master:Gibber.Audio.out)}else this.length>0?this[t-1].connect(Gibber.Master):this.ugen.connect(this.ugen!==Gibber.Master?Gibber.Master:Gibber.Audio.out)}}else for(var r=0;r<this.length;r++)this[r].name===t&&this.remove(r)}else this.length>0?(this[this.length-1].disconnect(),this.ugen.connect(this.ugen!==Gibber.Master?Gibber.Master:Gibber.Audio.out),this.ugen.codegen(),this.length=0):Gibber.log(this.ugen.name+" does not have any fx to remove. ")}}),replaceWith:function(e){for(var t=0;t<this.destinations.length;t++)e.connect(this.destinations[t]);for(var t=0;t<this.sequencers.length;t++)this.sequencers[t].target=e,e.sequencers.push(this.sequencers[t]);for(var t=0;t<this.mappingObjects.length;t++){var n=this.mappingObjects[t];if(n.targets.length>0)for(var i=0;i<n.targets.length;i++){var r=n.targets[i];e.mappingProperties[n.name]?r[0].mapping.replace(e,n.name,n.Name):r[0].mapping.remove()}}this.kill()},kill:function(){var e=0!==this.fx.length?this.fx[this.fx.length-1]:this;this.seq.isRunning&&this.seq.disconnect(),e.disconnect();for(var t=0;t<this.fx.length;t++){var n=this.fx[t];n.seq.isRunning&&n.seq.disconnect()}this.disconnect();for(var t=0;t<this.mappings.length;t++)this.mappings[t].remove();this.clearMarks&&this.clearMarks(),console.log(this.name+" has been terminated.")},play:function(e,t){return this.note?this.note.seq(e,t):this.frequency&&this.frequency.seq(e,t),this},fadeIn:function(e,t){isNaN(t)&&(t=1);var n=Gibber.Clock.time(e),i=(new Gibber.Audio.ExponentialDecay({decayCoefficient:.05,length:n}),new Gibber.Audio.Line(0,t,n));return this.amp=i,future(function(){this.amp=t}.bind(this),n),this},fadeOut:function(e){var t=Gibber.Clock.time(e),n=(new Gibber.Audio.ExponentialDecay({decayCoefficient:5e-5,length:t}),new Gibber.Audio.Line(this.amp(),0,Gibber.Clock.time(t)));return this.amp=n,future(function(){this.amp=0}.bind(this),t),this}}};Gibber.Audio=_dereq_("gibberish-dsp"),Gibber.Clock=_dereq_("./clock")(Gibber),Gibber.Seqs=_dereq_("./seq")(Gibber),Gibber.Theory=_dereq_("./audio/theory")(Gibber),Gibber.FX=_dereq_("./audio/fx")(Gibber),Gibber.Oscillators=_dereq_("./audio/oscillators")(Gibber),Gibber.Synths=_dereq_("./audio/synths")(Gibber),Gibber.Busses=_dereq_("./audio/bus")(Gibber),Gibber.Analysis=_dereq_("./audio/analysis")(Gibber),Gibber.Envelopes=_dereq_("./audio/envelopes")(Gibber),Gibber.Percussion=_dereq_("./audio/drums")(Gibber),Gibber.Input=_dereq_("./audio/audio_input")(Gibber),Gibber.Samplers=_dereq_("./audio/sampler")(Gibber),Gibber.PostProcessing=_dereq_("./audio/postprocessing")(Gibber),Gibber.Utilities=_dereq_("./utilities")(Gibber),Gibber.Arp=_dereq_("./audio/arp")(Gibber),module.exports=Gibber}()},{"./audio/analysis":3,"./audio/arp":4,"./audio/audio_input":5,"./audio/bus":6,"./audio/drums":7,"./audio/envelopes":8,"./audio/fx":9,"./audio/oscillators":10,"./audio/postprocessing":11,"./audio/sampler":12,"./audio/synths":13,"./audio/theory":14,"./clock":15,"./dollar":16,"./seq":19,"./utilities":20,"gibberish-dsp":1}],18:[function(e,t){!function(){var e={outputCurves:{LINEAR:0,LOGARITHMIC:1},audio:{graphics:function(e,t){"undefined"==typeof t.object.track&&(t.object.track={});var n,i="undefined"!=typeof t.object.track[t.name]?t.object.track[t.name]:new Gibberish.Proxy2(t.object,t.name),r=new Gibberish.OnePole({a0:.005,b1:.995});return t.object.track=i,n=e.object[e.Name].mapping=Map(i,e.min,e.max,t.min,t.max,e.output,t.wrap),r.input=n,e.object[e.name]=r,n.proxy=i,n.op=r,n.remove=function(t){t||(e.object[e.name]=e.object[e.Name].mapping.getValue()),delete e.object[e.Name].mapping},n},"interface":function(e,t){var n,i="undefined"!=typeof t.track?t.track:new Gibberish.Proxy2(t.object,t.name),r=new Gibberish.OnePole({a0:.005,b1:.995}),o=e.max-e.min,s=(e.object[e.name]-e.min)/o,a=t.min+(t.max-t.min)*s;if(t.object.setValue&&t.object.setValue(a),t.track=i,n=e.object[e.Name].mapping=Map(i,e.min,e.max,t.min,t.max,e.output,t.wrap),r.input=n,e.object[e.name]=r,n.proxy=i,n.op=r,n.remove=function(t){t||(e.object[e.name]=n.getValue()),delete n},"undefined"!=typeof t.object.label){for(var u="",c=0;c<t.targets.length;c++){var l=t.targets[c];u+=l[0].object.name+"."+l[1],c!==t.targets.length-1&&(u+=" & ")}t.object.label=u}return n.replace=function(t,n,r){i.setInput(t),-1===t[r].targets.indexOf(e)&&t[r].targets.push([e,e.Name])},n},audio:function(e,t){var n,i;return"undefined"!=typeof t.object.track?(n=t.object.track,n.count++):(n=new Gibberish.Proxy2(t.object,t.name),n.count=1),t.object.track=n,e.object[e.name]=Map(n,e.min,e.max,t.min,t.max),i=e.object[e.Name].mapping=e.object[e.name](),i.remove=function(t){t||(e.object[e.name]=i.getValue()),i.op&&i.op.remove(),delete e.object[e.Name].mapping},i.replace=function(t,n,r){var o=new Gibberish.Proxy2(t,n);i.input=o,t[r].targets&&-1===t[r].targets.indexOf(e)&&t[r].targets.push([e,e.Name])},i},audioOut:function(e,t){var n;e.object[e.name]=Map(null,e.min,e.max,0,1,0),n=e.object[e.Name].mapping=e.object[e.name](),"undefined"!=typeof t.object.track?(n.follow=t.object.track,n.follow.count++):(n.follow=new Gibberish.Follow({input:t.object,useAbsoluteValue:!0}),n.follow.count=1),t.object.track=n.follow,n.input=e.object[e.Name].mapping.follow,n.remove=function(i){i||(e.object[e.name]=e.object[e.Name].mapping.getValue()),n.bus&&n.bus.disconnect(),n.follow&&(n.follow.count--,0===n.follow.count&&(delete t.object.track,n.follow.remove())),delete e.object[e.Name].mapping},n.replace=function(t,i,r){n.follow.input=t,-1===t[r].targets.indexOf(e)&&t[r].targets.push([e,e.Name])};var i=n.follow.bufferSize;return Object.defineProperty(e.object[e.Name],"env",{configurable:!0,get:function(){return i},set:function(e){i=Gibber.Clock.time(e),n.follow.bufferSize=i}}),n}},graphics:{graphics:function(e,t){var n,i=Map(t.object[t.name],e.min,e.max,t.min,t.max,e.output,t.wrap),r=i.getValue.bind(i);return i.getValue=function(){return i.callback(t.object[t.name],e.min,e.max,t.min,t.max,e.output,t.wrap),r()},n=e.object[e.Name].mapping=i,e.object.mod?e.object.mod(e.name,n,"="):e.modObject.mod(e.modName,n,"="),n.remove=function(){e.object.mod?e.object.removeMod(e.name):e.modObject.removeMod(e.modName),e.object[e.name]=e.object[e.Name].mapping.getValue(),delete e.object[e.Name].mapping},n.replace=function(e){n.input=e},n},"interface":function(e,t){var n,i=Map(t.object[t.name],e.min,e.max,t.min,t.max,e.output,t.wrap);"undefined"==typeof t.object.functions&&(t.object.functions={},t.object.onvaluechange=function(){for(var e in t.object.functions)t.object.functions[e]()}),n=e.object[e.Name].mapping=i,e.mapping.from=t;var r=e.name+" <- "+t.object.name+"."+t.Name;if(t.object.functions[r]=function(){var i=n.callback(t.object[t.name],e.min,e.max,t.min,t.max,e.output,t.wrap);e.object[e.Name].oldSetter.call(e.object[e.Name],i)},n.replace=function(){},n.remove=function(){console.log("mapping removed"),delete t.object.functions[r]},t.object.setValue&&t.object.setValue(e.object[e.name]),"undefined"!=typeof t.object.label){for(var o="",s=0;s<t.targets.length;s++){var a=t.targets[s];o+=a[0].object.name+"."+a[1],s!==t.targets.length-1&&(o+=" & ")}t.object.label=o}return n},audio:function(e,t){var n;n=e.object[e.Name].mapping=Map(null,e.min,e.max,t.min,t.max,e.output,t.wrap),n.follow="undefined"!=typeof t.object.track?t.object.track:new Gibberish.Follow({input:t.object.properties[t.name],useAbsoluteValue:!1}),t.object.track=e.object[e.Name].mapping.follow,n.input=n.follow,n.bus=new Gibberish.Bus2({amp:0}).connect(),n.connect(n.bus),n.replace=function(t,i,r){n.follow.input=t,-1===t[r].targets.indexOf(e)&&t[r].targets.push([e,e.Name])};var i=n.follow.bufferSize;return Object.defineProperty(e.object[e.Name],"env",{get:function(){return i},set:function(e){i=Gibber.Clock.time(e),n.follow.bufferSize=i}}),e.object.mod?e.object.mod(e.name,n,"="):e.modObject.mod(e.modName,n,"="),n.remove=function(){this.bus.disconnect(),this.follow&&(this.follow.count--,0===this.follow.count&&(delete t.object.track,this.follow.remove())),e.object.mod?e.object.removeMod(e.name):e.modObject.removeMod(e.modName),delete e.object[e.Name].mapping},n},audioOut:function(e,t){if(console.log(e.Name,e.object),"undefined"!=typeof e.object[e.Name].mapping)return console.log("REPLACING MAPPING"),n.replace(t.object,t.name,t.Name),n;console.log("MAKING A MAPPING");var n=e.object[e.Name].mapping=Map(null,e.min,e.max,0,1,0);"undefined"!=typeof t.object.track?(n.follow=t.object.track,n.follow.count++):(n.follow=new Gibberish.Follow({input:t.object}),n.follow.count=1),t.object.track=n.follow;var i=n.follow.bufferSize;return Object.defineProperty(e.object[e.Name],"env",{configurable:!0,get:function(){return i},set:function(e){i=Gibber.Clock.time(e),n.follow.bufferSize=i}}),n.input=n.follow,n.bus=new Gibberish.Bus2({amp:0}).connect(),n.connect(n.bus),n.replace=function(i,r,o){if(i[o].timescale===t.timescale){var s=n.follow.input[t.Name].targets.indexOf(e);s>=-1&&n.follow.input[t.Name].targets.splice(s,1),n.follow.input=i,-1===i[o].targets.indexOf(e)&&i[o].targets.push([e,e.Name])}else n.bus.disconnect(),n.follow.remove(),Gibber.createMappingObject(e,i)},e.object.mod?e.object.mod(e.name,n,"="):e.modObject?e.modObject.mod(e.modName,n,"="):!function(){var t=n;e.object.update=function(){e.object[e.name](t.getValue())}}(),n.remove=function(){this.bus.disconnect(),this.follow&&(this.follow.count--,0===this.follow.count&&(delete t.object.track,this.follow.remove())),e.object.mod?e.object.removeMod(e.name):e.modObject?e.modObject.removeMod(e.modName):console.log("removing update "),delete e.object[e.Name].mapping},n}},notation:{graphics:function(e,t){var n,i=Map(t.object[t.name],e.min,e.max,t.min,t.max,e.output,t.wrap),r=i.getValue.bind(i);return i.getValue=function(){return i.callback(t.object[t.name],e.min,e.max,t.min,t.max,e.output,t.wrap),r()},n=e.object[e.Name].mapping=i,e.object.mod?e.object.mod(e.name,n,"="):e.modObject.mod(e.modName,n,"="),n.remove=function(){e.object.mod?e.object.removeMod(e.name):e.modObject.removeMod(e.modName),e.object[e.name]=e.object[e.Name].mapping.getValue(),delete e.object[e.Name].mapping},n.replace=function(e){n.input=e},n},"interface":function(e,t){var n,i=Map(t.object[t.name],e.min,e.max,t.min,t.max,e.output,t.wrap);"undefined"==typeof t.object.functions&&(t.object.functions={},t.object.onvaluechange=function(){for(var e in t.object.functions)t.object.functions[e]()}),n=e.object[e.Name].mapping=i,e.mapping.from=t;var r=e.name+" <- "+t.object.name+"."+t.Name;if(t.object.functions[r]=function(){var i=n.callback(t.object[t.name],e.min,e.max,t.min,t.max,e.output,t.wrap);e.object[e.Name].oldSetter.call(e.object[e.Name],i)},n.replace=function(){},n.remove=function(){console.log("mapping removed"),delete t.object.functions[r]},t.object.setValue&&t.object.setValue(e.object[e.name]),"undefined"!=typeof t.object.label){for(var o="",s=0;s<t.targets.length;s++){var a=t.targets[s];o+=a[0].object.name+"."+a[1],s!==t.targets.length-1&&(o+=" & ")}t.object.label=o}return n},audio:function(e,t){var n;n=e.object[e.Name].mapping=Map(null,e.min,e.max,t.min,t.max,e.output,t.wrap),"undefined"!=typeof t.object.track&&t.object.track.input===t.object.properties[t.name]?(n.follow=t.object.track,n.follow.count++):(n.follow=new Gibberish.Follow({input:t.object.properties[t.name],useAbsoluteValue:!1}),n.follow.count=1),t.object.track=e.object[e.Name].mapping.follow,n.input=n.follow,n.bus=new Gibberish.Bus2({amp:0}).connect(),n.connect(n.bus),n.replace=function(t,i,r){n.follow.input=t,-1===t[r].targets.indexOf(e)&&t[r].targets.push([e,e.Name])};var i=n.follow.bufferSize;return Object.defineProperty(e.object[e.Name],"env",{get:function(){return i},set:function(e){i=Gibber.Clock.time(e),n.follow.bufferSize=i}}),n.update=function(){e.object[e.name](n.getValue())},n.text=e.object,Gibber.Environment.Notation.add(n),n.remove=function(){this.bus.disconnect(),this.follow&&(this.follow.count--,0===this.follow.count&&(delete t.object.track,this.follow.remove())),Gibber.Environment.Notation.remove(n),delete e.object[e.Name].mapping},n},audioOut:function(e,t){if("undefined"!=typeof e.object[e.Name].mapping)return n.replace(t.object,t.name,t.Name),n;var n=e.object[e.Name].mapping=Map(null,e.min,e.max,0,1,0);console.log("MAPPING",t),"undefined"!=typeof t.object.track&&t.object.track.input===t.object.properties[t.name]?(n.follow=t.object.track,n.follow.count++):(n.follow=new Gibberish.Follow({input:t.object,useAbsoluteValue:!0}),n.follow.count=1),t.object.track=n.follow;var i=n.follow.bufferSize;return Object.defineProperty(e.object[e.Name],"env",{configurable:!0,get:function(){return i},set:function(e){i=Gibber.Clock.time(e),n.follow.bufferSize=i}}),n.input=n.follow,n.bus=new Gibberish.Bus2({amp:0}).connect(),n.connect(n.bus),n.replace=function(i,r,o){if(i[o].timescale===t.timescale){var s=n.follow.input[t.Name].targets.indexOf(e);s>=-1&&n.follow.input[t.Name].targets.splice(s,1),n.follow.input=i,-1===i[o].targets.indexOf(e)&&i[o].targets.push([e,e.Name])}else n.bus.disconnect(),n.follow.remove(),Gibber.createMappingObject(e,i)},n.update=function(){e.object[e.name](n.getValue())},n.text=e.object,Gibber.Environment.Notation.add(n),n.remove=function(){this.bus.disconnect(),this.follow&&(this.follow.count--,0===this.follow.count&&(delete t.object.track,this.follow.remove())),Gibber.Environment.Notation.remove(n),delete e.object[e.Name].mapping},n}}};t.exports=e}()},{}],19:[function(e,t){!function(){var n,i=e("gibberish-dsp"),r=e("./dollar"),o=["durations","target","scale","offset","doNotStart","priority"],s=function(e,t){var n=r.extend([],e),i=0;return[function(){var e,r;if(e="function"==typeof n.pick?n[n.pick()]:"function"==typeof n[i]?n[i]():n[i++],"number"==typeof t.scale.notes[e])r=t.scale.notes[e];else try{r=t.scale.notes[e].fq()}catch(o){console.error("The frequency could not be obtained from the current scale. Did you specify an invalid mode or root note?"),t.stop()}return i>=n.length&&(i=0),r}]},a=function(){var e,t={},a=[];if("object"==typeof arguments[0]){var u=arguments[0],c=typeof u.durations;typeof u.target,u.priority,t.target=u.target,"object"==typeof u.scale&&(t.scale=u.scale),"number"==typeof u.offset&&(t.offset=n.Clock.time(u.offset)),"array"===c?t.durations=u.durations:"undefined"!==c&&(t.durations=[u.durations]),t.keysAndValues={},t.seqs=[],t.autofire=[];for(var l in u)if(-1===o.indexOf(l)){var p=r.type(u[l]),h={key:l,target:t.target,durations:t.durations};"array"===p||"number"==typeof u.length?h.values=u[l]:"undefined"!==p&&(h.values=[u[l]]),t.seqs.push(h),a.push(l)}if("scale"in t){var f=a.indexOf("note"),d=a.indexOf("chord");if(f>-1&&(t.seqs[f].values=s(t.seqs[f].values,t)),d>-1){var m=r.extend([],t.seqs[d]),b=0;t.seqs[d]=[function(){var e,n=[];return e="function"==typeof m.pick?m[m.pick()]:"function"==typeof m[b]?m[b]():m[b++],n=t.scale.chord(e),b>=m.length&&(b=0),n}]}}}else"function"==typeof arguments[0]&&(t.seqs=[{key:"functions",values:[arguments[0]],durations:n.Clock.time(arguments[1])}],a.push("functions"));e=new i.PolySeq(t),e.timeModifier=n.Clock.time.bind(n.Clock),e.name="Seq",e.save={},e.oldShuffle=e.shuffle,delete e.shuffle,e.rate=n.Clock;var g=e.__lookupSetter__("rate"),y=e.rate;Object.defineProperty(e,"rate",{get:function(){return y},set:function(t){y=Mul(n.Clock,t),g.call(e,y)}});var v=e.nextTime,x=e.__lookupSetter__("nextTime");Object.defineProperty(e,"nextTime",{get:function(){return v},set:function(e){v=n.Clock.time(e),x(v)}});var w=e.offset;Object.defineProperty(e,"offset",{get:function(){return w},set:function(t){w=t,e.nextTime+=w}}),e.nextTime+=e.offset;for(var G=0;G<a.length;G++)!function(e){var t=a[G],n=G;Object.defineProperty(e,t,{get:function(){return e.seqs[n].values},set:function(i){"note"===t&&e.scale&&(i=s(i,e)),e.seqs[n].values=i}})}(e);var k=null;return Object.defineProperty(e,"durations",{get:function(){return k},set:function(t){k=t;for(var n=0;n<e.seqs.length;n++){var i=e.seqs[n];i.durations=k}}}),arguments[0]&&!arguments[0].doNotStart&&e.start(!0),e.toString=function(){return"> Seq"},e.gibber=!0,e};r.extend(i.PolySeq.prototype,{constructor:a,replaceWith:function(){this.kill()},kill:function(){this.target&&this.target.sequencers&&this.target.sequencers.splice(this.target.sequencers.indexOf(this),1),this.stop().disconnect()},applyScale:function(){for(var e=0;e<this.seqs.length;e++){var t=this.seqs[e];("note"===t.key||"frequency"===t.key)&&(t.values=s(t.values,this))}},once:function(){return this.repeat(1),this},reset:function(){if(0!==Object.keys(this.save).length)for(var e in this.save)for(var t=this.save[e],n=0;n<this.seqs.length;n++)if(this.seqs[n].key===e){this.seqs[n].values=Array.isArray(t)?this.save[e].slice(0):this.save[e];break}},shuffle:function(){if(0===Object.keys(this.save).length)for(var e=0;e<this.seqs.length;e++){var t=this.seqs[e].values;this.save[this.seqs[e].key]=Array.isArray(t)?t.slice(0):t}var n=Array.prototype.slice.call(arguments,0);this.oldShuffle.apply(this,n)}});var u=function(){var e,t=arguments[0];return t.root=t.root||"c4",t.mode=t.mode||"aeolian",console.log(t),e=n.Theory.Scale(t.root,t.mode),delete t.root,delete t.mode,t.scale=e,a(t)},c={Seq:a,ScaleSeq:u};t.exports=function(e){return"undefined"==typeof n&&(n=e),c}}()},{"./dollar":16,"gibberish-dsp":1}],20:[function(e,t){!function(){"use strict";var n,i=[],r=!1,o=(e("./dollar"),e("gibberish-dsp")),s=(e("./clock")(n),{seq:function(){var e=arguments[0],t=typeof e,n=null;return"object"===t&&Array.isArray(e)&&(t="array"),n},random:function(){for(var e={},t=null,n=0;n<arguments.length;n+=2)e[""+arguments[n]]={repeat:arguments[n+1],count:0};return this.pick=function(){var n,i,r=0;return this[t]&&(i=this[t]),null!==t&&e[i].count++<=e[i].repeat?(n=t,e[i].count>=e[i].repeat&&(e[i].count=0,t=null)):(n=s.rndi(0,this.length-1),r=this[n],"undefined"!=typeof e[""+r]?(e[""+r].count=1,t=n):t=null),n},this},random2:function(){for(var e={},t=null,n=this,i=0;i<arguments.length;i+=2)e[""+arguments[i]]={repeat:arguments[i+1],count:0};return this.pick=function(){var i,r,o=0;return n[t]&&(r=n[t]),null!==t&&e[r].count++<=e[r].repeat?(i=t,e[r].count>=e[r].repeat&&(e[r].count=0,t=null)):(i=s.rndi(0,n.length-1),o=n[i],"undefined"!=typeof e[""+o]?(e[""+o].count=1,t=i):t=null),n[i]},this.pick},choose:function(e){var t=null;if(isNaN(e)&&(e=1),1!==e){for(var n=[],i=0;e>i;i++)n[i]=this[s.rndi(0,this.length-1)];t=n}else t=this[s.rndi(0,this.length-1)];return t},future:function(e,t){var i=new o.Sequencer({values:[function(){},function(){e(),i.stop(),i.disconnect()}],durations:[n.Clock.time(t)]}).start();return function(){i.stop(),i.disconnect()}},shuffle:function(e){for(var t,n,i=e.length;i;t=parseInt(Math.random()*i),n=e[--i],e[i]=e[t],e[t]=n);},solo:function(e){var t=Array.prototype.slice.call(arguments,0);if(e){r&&s.solo();for(var n=0;n<t.length;n++){var o=t[n];o.fx.length>0&&(t[n]=o.fx[o.fx.length-1])}for(var a=0;a<Master.inputs.length;a++){var u=t.indexOf(Master.inputs[a].value),c=Master.inputs[a].value,l=c.name;-1===u&&"polyseq"!==l&&"Seq"!==l&&(Master.inputs[a].value=Mul(Master.inputs[a].value,0),i.push(Master.inputs[a]))}r=!0}else{for(var a=0;a<i.length;a++)i[a].value=i[a].value[0];i.length=0,r=!1}},fill:function(e,t){isNaN(e)&&(e=16),"function"!=typeof t&&(t=Rndf()),t=t.bind(this);for(var n=0;e>n;n++)this[n]=t();return this},merge:function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];if(Array.isArray(n))for(var i=0;i<n.length;i++)e.push(n[i]);else e.push(n)}return e},weight:function(){var e=Array.prototype.slice.call(arguments,0);return this.pick=function(){for(var t=this[0],n=0,i=s.rndf(),r=0;r<e.length;r++)if(n+=e[r],n>i){t=r;break}return t},this},gibberArray:function(){},init:function(){Array.prototype.random=Array.prototype.rnd=s.random,Array.prototype.weight=s.weight,Array.prototype.fill=s.fill,Array.prototype.choose=s.choose,Array.prototype.merge=s.merge}});t.exports=function(e){return"undefined"==typeof n&&(n=e),s}}()},{"./clock":15,"./dollar":16,"gibberish-dsp":1}]},{},[17])(17)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1]),!function t(e,n,i){function r(s,a){if(!n[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}};e[s][0].call(l.exports,function(t){var n=e[s][1][t];return r(n?n:t)},l,l.exports,t,e,n,i)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(e){p5.prototype.Gibber=e("gibber.lib"),p5.prototype.Gibber.export(p5.prototype),p5.prototype.Gibber.init({globalize:!1,target:p5.prototype}),p5.prototype.Rndi=p5.prototype.Gibber.Audio.Rndi,p5.prototype.Rndf=p5.prototype.Gibber.Audio.Rndf,p5.prototype.rndi=p5.prototype.Gibber.Audio.rndi,p5.prototype.rndf=p5.prototype.Gibber.Audio.rndf},{"gibber.lib":2}],2:[function(require,module,exports){(function(global){!function(e){if("object"==typeof exports)module.exports=e();else if("function"==typeof define&&define.amd)define(e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.Gibber=e()}}(function(){var define,module,exports;return function e(t,n,i){function r(s,a){if(!n[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);throw new Error("Cannot find module '"+s+"'")}var c=n[s]={exports:{}};t[s][0].call(c.exports,function(e){var n=t[s][1][e];return r(n?n:e)},c,c.exports,e,t,n,i)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(_dereq_,module,exports){!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.Gibberish=t()}(this,function(){function createInput(){console.log("connecting audio input..."),navigator.webkitGetUserMedia({audio:!0},function(e){console.log("audio input connected"),Gibberish.mediaStreamSource=Gibberish.context.createMediaStreamSource(e),Gibberish.mediaStreamSource.connect(Gibberish.node),_hasInput=!0},function(){console.log("error opening audio input")})}var Gibberish={memo:{},codeblock:[],analysisCodeblock:[],analysisUgens:[],dirtied:[],id:0,isDirty:!1,out:null,debug:!1,callback:"",audioFiles:{},sequencers:[],callbackArgs:["input"],callbackObjects:[],analysisCallbackArgs:[],analysisCallbackObjects:[],createCallback:function(){this.memo={},this.codeblock.length=0,this.callbackArgs.length=0,this.callbackObjects.length=0,this.analysisCallbackArgs.length=0,this.dirtied.length=0,this.codestring="",this.args=["input"],this.memo={},this.out.codegen();var e=this.codeblock.slice(0);if(this.analysisUgens.length>0){this.analysisCodeblock.length=0;for(var t=0;t<this.analysisUgens.length;t++)this.analysisCallbackArgs.push(this.analysisUgens[t].analysisSymbol)}if(this.args=this.args.concat(this.callbackArgs),this.args=this.args.concat(this.analysisCallbackArgs),this.codestring+=e.join("	"),this.codestring+="\n	",this.analysisUgens.length>0){this.analysisCodeblock.length=0;for(var t=0;t<this.analysisUgens.length;t++)this.codeblock.length=0,this.analysisUgens[t].analysisCodegen();this.codestring+=this.analysisCodeblock.join("\n	"),this.codestring+="\n	"}return this.codestring+="return "+this.out.variable+";\n",this.callbackString=this.codestring,this.debug&&console.log(this.callbackString),[this.args,this.codestring]},audioProcess:function(e){var t,n,i=e.outputBuffer.getChannelData(0),r=e.outputBuffer.getChannelData(1),o=e.inputBuffer.getChannelData(0),s=Gibberish,a=s.callback,u=s.sequencers,c=(Gibberish.out.callback,s.callbackObjects.slice(0));c.unshift(0);for(var l=0,p=e.outputBuffer.length;p>l;l++){for(var h=0;h<u.length;h++)u[h].tick();if(s.isDirty){t=s.createCallback();try{a=s.callback=new Function(t[0],t[1])}catch(e){console.error("ERROR WITH CALLBACK : \n\n",t)}s.isDirty=!1,c=s.callbackObjects.slice(0),c.unshift(0)}c[0]=o[l],n=a.apply(null,c),i[l]=n[0],r[l]=n[1]}},audioProcessFirefox:function(e){var t,n=Gibberish,i=n.callback,r=n.sequencers,o=n.callbackObjects.slice(0);o.unshift(0);for(var s=0,a=e.length;a>s;s+=2){for(var u=0;u<r.length;u++)r[u].tick();if(n.isDirty){t=n.createCallback();try{i=n.callback=new Function(t[0],t[1])}catch(c){console.error("ERROR WITH CALLBACK : \n\n",i)}n.isDirty=!1,o=n.callbackObjects.slice(0),o.unshift(0)}var l=i.apply(null,o);e[s]=l[0],e[s+1]=l[1]}},clear:function(){this.out.inputs.length=0,this.analysisUgens.length=0,this.sequencers.length=0,this.callbackArgs.length=2,this.callbackObjects.length=1,Gibberish.dirty(this.out)},dirty:function(e){if("undefined"!=typeof e){for(var t=!1,n=0;n<this.dirtied.length;n++)this.dirtied[n].variable===e.variable&&(t=!0);t||(this.isDirty=!0,this.dirtied.push(e))}else this.isDirty=!0},generateSymbol:function(e){return e+"_"+this.id++},AudioDataDestination:function(e,t){var n=new Audio;n.mozSetup(2,e);var i,r=0,o=e/2,s=null;setInterval(function(){var e;if(s){if(e=n.mozWriteAudio(s.subarray(i)),r+=e,i+=e,i<s.length)return;s=null}var a=n.mozCurrentSampleOffset(),u=a+o-r;if(u>0){var c=new Float32Array(u);t(c),e=n.mozWriteAudio(c),a=n.mozCurrentSampleOffset(),e<c.length&&(s=c,i=e),r+=e}},100)},init:function(){var e,t,n="undefined"==typeof arguments[0]?1024:arguments[0];return"undefined"!=typeof webkitAudioContext?e=webkitAudioContext:"undefined"!=typeof AudioContext&&(e=AudioContext),t=function(){if("undefined"!=typeof e){if(document&&document.documentElement&&"ontouchstart"in document.documentElement&&(window.removeEventListener("touchstart",t),"ontouchstart"in document.documentElement)){var n=Gibberish.context.createBufferSource();n.connect(Gibberish.context.destination),n.noteOn(0)}}else alert("Your browser does not support javascript audio synthesis. Please download a modern web browser that is not Internet Explorer.");Gibberish.onstart&&Gibberish.onstart()},Gibberish.context=new e,Gibberish.node=Gibberish.context.createScriptProcessor(n,2,2,Gibberish.context.sampleRate),Gibberish.node.onaudioprocess=Gibberish.audioProcess,Gibberish.node.connect(Gibberish.context.destination),Gibberish.out=new Gibberish.Bus2,Gibberish.out.codegen(),Gibberish.dirty(Gibberish.out),document&&document.documentElement&&"ontouchstart"in document.documentElement?window.addEventListener("touchstart",t):t(),this},makePanner:function(){for(var e=[],t=[],n=Math.sqrt(2)/2,i=0;1024>i;i++){var r=-1+i/1024*2;e[i]=n*(Math.cos(r)-Math.sin(r)),t[i]=n*(Math.cos(r)+Math.sin(r))}return function(n,i,r){var o,s,a,u,c,l,p="object"==typeof n,h=p?n[0]:n,f=p?n[1]:n;return o=1023*(i+1)/2,s=0|o,a=o-s,s=1023&s,u=1023===s?0:s+1,c=e[s],l=e[u],r[0]=(c+a*(l-c))*h,c=t[s],l=t[u],r[1]=(c+a*(l-c))*f,r}},defineUgenProperty:function(e,t,n){var i=n.properties[e]={value:t,binops:[],parent:n,name:e};Object.defineProperty(n,e,{configurable:!0,get:function(){return i.value},set:function(e){i.value=e,Gibberish.dirty(n)}})},polyInit:function(e){e.mod=e.polyMod,e.removeMod=e.removePolyMod,e.voicesClear=function(){if(e.children.length>0){for(var t=0;t<e.children.length;t++)e.children[t].disconnect();e.children.length=0,e.voiceCount=0}};for(var t in e.polyProperties)!function(t){var n=e.polyProperties[t];Object.defineProperty(e,t,{configurable:!0,get:function(){return n},set:function(i){n=i;for(var r=0;r<e.children.length;r++)e.children[r][t]=n}})}(t);var n=e.maxVoices;Object.defineProperty(e,"maxVoices",{get:function(){return n},set:function(e){n=e,this.voicesClear(),this.initVoices()}})},interpolate:function(e,t){var n=0|t,i=n+1>e.length-1?0:n+1;return frac=t-n,e[n]+frac*(e[i]-e[n])},pushUnique:function(e,t){for(var n=e,i=!0,r=0;r<t.length;r++)if(n===t[r]){i=!1;break}i&&t.push(n)},"export":function(e,t){for(var n in Gibberish[e])t[n]=Gibberish[e][n]},ugen:function(){Gibberish.extend(this,{processProperties:function(){if("object"!=typeof arguments[0][0]||"undefined"!=typeof arguments[0][0].type||Array.isArray(arguments[0][0])||"op"===arguments[0][0].name){var e=0;for(var t in this.properties)"object"==typeof this.properties[t]&&"undefined"!=typeof this.properties[t].binops?"undefined"!=typeof arguments[0][e]&&(this.properties[t].value=arguments[0][e++]):"undefined"!=typeof arguments[0][e]&&(this.properties[t]=arguments[0][e++])}else{var n=arguments[0][0];for(var t in n)"undefined"!=typeof n[t]&&("object"==typeof this.properties[t]&&"undefined"!=typeof this.properties[t].binops?this.properties[t].value=n[t]:this[t]=n[t])}return this},valueOf:function(){return this.codegen(),this.variable},codegen:function(){var e="",t=null;if(Gibberish.memo[this.symbol])return Gibberish.memo[this.symbol];t=this.variable?this.variable:Gibberish.generateSymbol("v"),Gibberish.memo[this.symbol]=t,this.variable=t,e+="var "+t+" = "+this.symbol+"(";for(var n in this.properties){var i=this.properties[n],r="";if(Array.isArray(i.value)){0===i.value.length&&(r=0);for(var o=0;o<i.value.length;o++){var s=i.value[o];r+="object"==typeof s?null!==s?s.valueOf():"null":"function"==typeof i.value?i.value():i.value,r+=o<i.value.length-1?", ":""}}else"object"==typeof i.value?null!==i.value&&(r=i.value.codegen?i.value.valueOf():i.value):"undefined"!==i.name&&(r="function"==typeof i.value?i.value():i.value);if(0!=i.binops.length){for(var a=0;a<i.binops.length;a++)e+="(";for(var u=0;u<i.binops.length;u++){var c,l=i.binops[u];c="number"==typeof l.ugen?l.ugen:null!==l.ugen?l.ugen.valueOf():"null","="===l.binop?(e=e.replace(r,""),e+=c):"++"===l.binop?e+=" + Math.abs("+c+")":(0===u&&(e+=r),e+=" "+l.binop+" "+c+")")}}else e+=r;e+=", "}return" "===e.charAt(e.length-1)&&(e=e.slice(0,-2)),e+=");\n",this.codeblock=e,-1===Gibberish.codeblock.indexOf(this.codeblock)&&Gibberish.codeblock.push(this.codeblock),-1===Gibberish.callbackArgs.indexOf(this.symbol)&&"op"!==this.name&&Gibberish.callbackArgs.push(this.symbol),-1===Gibberish.callbackObjects.indexOf(this.callback)&&"op"!==this.name&&Gibberish.callbackObjects.push(this.callback),this.dirty=!1,t
},init:function(){if(this.initalized||(this.symbol=Gibberish.generateSymbol(this.name),this.codeblock=null,this.variable=null),"undefined"==typeof this.properties&&(this.properties={}),!this.initialized){this.destinations=[];for(var e in this.properties)Gibberish.defineUgenProperty(e,this.properties[e],this)}if(arguments.length>0&&"object"==typeof arguments[0][0]&&"undefined"===arguments[0][0].type){var t=arguments[0][0];for(var e in t)this[e]=t[e]}return this.initialized=!0,this},mod:function(e,t,n){var i=this.properties[e],r={ugen:t,binop:n};i.binops.push(r),Gibberish.dirty(this)},removeMod:function(e,t){if("undefined"==typeof t)this.properties[e].binops.length=0;else if("number"==typeof t)this.properties[e].binops.splice(t,1);else if("object"==typeof t)for(var n=0,i=this.properties[e].binops.length;i>n;n++)this.properties[e].binops[n].ugen===t&&this.properties[e].binops.splice(n,1);Gibberish.dirty(this)},polyMod:function(e,t,n){for(var i=0;i<this.children.length;i++)this.children[i].mod(e,t,n);Gibberish.dirty(this)},removePolyMod:function(){var e=Array.prototype.slice.call(arguments,0);if("amp"!==arguments[0]&&"pan"!==arguments[0])for(var t=0;t<this.children.length;t++)this.children[t].removeMod.apply(this.children[t],e);else this.removeMod.apply(this,e);Gibberish.dirty(this)},smooth:function(e){var t=new Gibberish.OnePole;this.mod(e,t,"=")},connect:function(e,t){return"undefined"==typeof e&&(e=Gibberish.out),-1===this.destinations.indexOf(e)&&(e.addConnection(this,1,t),this.destinations.push(e)),this},send:function(e,t){return-1===this.destinations.indexOf(e)?(e.addConnection(this,t),this.destinations.push(e)):e.adjustSendAmount(this,t),this},disconnect:function(e){var t;if(e)t=this.destinations.indexOf(e),t>-1&&this.destinations.splice(t,1),e.removeConnection(this);else{for(var n=0;n<this.destinations.length;n++)this.destinations[n].removeConnection(this);this.destinations=[]}return Gibberish.dirty(this),this}})}};Array2=function(){this.length=0},Array2.prototype=[],Array2.prototype.remove=function(e,t){if(t="undefined"==typeof t?!0:t,"undefined"==typeof e){for(var n=0;n<this.length;n++)delete this[n];this.length=0}else if("number"==typeof e)this.splice(e,1);else if("string"==typeof e){for(var i=[],n=0;n<this.length;n++){var r=this[n];if(r.type===e||r.name===e){if(!t)return void this.splice(n,1);i.push(n)}}for(var n=0;n<i.length;n++)this.splice(i[n],1)}else if("object"==typeof e)for(var o=this.indexOf(e);o>-1;)this.splice(o,1),o=this.indexOf(e);this.parent&&Gibberish.dirty(this.parent)},Array2.prototype.get=function(e){if("number"==typeof e)return this[e];if("string"==typeof e)for(var t=0;t<this.length;t++){var n=this[t];if(n.name===e)return n}else if("object"==typeof e){var i=this.indexOf(e);if(i>-1)return this[i]}return null},Array2.prototype.replace=function(e,t){if(t.parent=this,t.input=e.input,"number"!=typeof e){var n=this.indexOf(e);n>-1&&this.splice(n,1,t)}else this.splice(e,1,t);this.parent&&Gibberish.dirty(this.parent)},Array2.prototype.insert=function(e,t){if(e.parent=this,this.input=this.parent,Array.isArray(e))for(var n=0;n<e.length;n++)this.splice(t+n,0,e[n]);else this.splice(t,0,e);this.parent&&Gibberish.dirty(this.parent)},Array2.prototype.add=function(){for(var e=0;e<arguments.length;e++)arguments[e].parent=this,arguments[e].input=this.parent,this.push(arguments[e]);this.parent&&(console.log("DIRTYING"),Gibberish.dirty(this.parent))};var rnd=Math.random;Gibberish.rndf=function(e,t,n,i){if(i="undefined"==typeof i?!0:i,"undefined"==typeof n&&"object"!=typeof e){1==arguments.length?(t=arguments[0],e=0):2==arguments.length?(e=arguments[0],t=arguments[1]):(e=0,t=1);var r=t-e,o=Math.random(),s=r*o;return e+s}var a=[],u=[];"undefined"==typeof n&&(n=t||e.length);for(var c=0;n>c;c++){var l;if("object"==typeof arguments[0])l=arguments[0][rndi(0,arguments[0].length-1)];else if(i)l=Gibberish.rndf(e,t);else{for(l=Gibberish.rndf(e,t);u.indexOf(l)>-1;)l=Gibberish.rndf(e,t);u.push(l)}a.push(l)}return a},Gibberish.Rndf=function(){var e,t,n,i;return Math.random,0===arguments.length?(e=0,t=1):1===arguments.length?(t=arguments[0],e=0):2===arguments.length?(e=arguments[0],t=arguments[1]):3===arguments.length?(e=arguments[0],t=arguments[1],n=arguments[2]):(e=arguments[0],t=arguments[1],n=arguments[2],i=arguments[3]),function(){var r,o,s;return o="function"==typeof e?e():e,s="function"==typeof t?t():t,r="undefined"==typeof n?Gibberish.rndf(o,s):Gibberish.rndf(o,s,n,i)}},Gibberish.rndi=function(e,t,n,i){var r;if(0===arguments.length?(e=0,t=1):1===arguments.length?(t=arguments[0],e=0):2===arguments.length?(e=arguments[0],t=arguments[1]):(e=arguments[0],t=arguments[1],n=arguments[2],i=arguments[3]),r=t-e,n>r&&(i=!0),"undefined"==typeof n)return r=t-e,Math.round(e+Math.random()*r);for(var o=[],s=[],a=0;n>a;a++){var u;if(i)u=Gibberish.rndi(e,t);else{for(u=Gibberish.rndi(e,t);s.indexOf(u)>-1;)u=Gibberish.rndi(e,t);s.push(u)}o.push(u)}return o},Gibberish.Rndi=function(){var e,t,n,i,r;return Math.random,Math.round,0===arguments.length?(e=0,t=1):1===arguments.length?(t=arguments[0],e=0):2===arguments.length?(e=arguments[0],t=arguments[1]):3===arguments.length?(e=arguments[0],t=arguments[1],n=arguments[2]):(e=arguments[0],t=arguments[1],n=arguments[2],i=arguments[3]),r=t-e,"number"==typeof n&&n>r&&(i=!0),function(){var r,o,s;return o="function"==typeof e?e():e,s="function"==typeof t?t():t,r="undefined"==typeof n?Gibberish.rndi(o,s):Gibberish.rndi(o,s,n,i)}},Gibberish.extend=function(e,t){for(var n in t)n.split("."),t[n]instanceof Array&&t[n].length<100?(e[n]=t[n].slice(0),"fx"===n&&(e[n].parent=t[n].parent)):"object"!=typeof t[n]||null===t[n]||t[n]instanceof Float32Array?e[n]=t[n]:(e[n]=e[n]||{},arguments.callee(e[n],t[n]));return e},Function.prototype.clone=function(){return eval("["+this.toString()+"]")[0]},String.prototype.format=function(e,t,n){function i(){var i=this,r=arguments.length+1;for(e=0;r>e;n=arguments[e++])t=n,i=i.replace(RegExp("\\{"+(e-1)+"\\}","g"),t);return i}return i.native=String.prototype.format,i}(),Gibberish.future=function(e,t){var n=new Gibberish.Sequencer({values:[function(){},function(){e(),n.stop(),n.disconnect()}],durations:[t]}).start();return n.cancel=function(){n.stop(),n.disconnect()},n},Gibberish.Proxy=function(){var e=0;Gibberish.extend(this,{name:"proxy",type:"effect",properties:{},callback:function(){return e}}).init(),this.input=arguments[0],e=this.input.parent[this.input.name],delete this.input.parent[this.input.name],this.input.parent.properties[this.input.name].value=this,Object.defineProperty(this.input.parent,this.input.name,{get:function(){return e},set:function(t){e=t}}),Gibberish.dirty(this.input.parent)},Gibberish.Proxy.prototype=new Gibberish.ugen,Gibberish.Proxy2=function(){var e=arguments[0],t=arguments[1];Gibberish.extend(this,{name:"proxy2",type:"effect",properties:{},callback:function(){var n=e[t];return Array.isArray(n)?(n[0]+n[1]+n[2])/3:n}}).init(),this.getInput=function(){return e},this.setInput=function(t){e=t},this.getName=function(){return t},this.setName=function(e){t=e}},Gibberish.Proxy2.prototype=new Gibberish.ugen,Gibberish.Proxy3=function(){var e=arguments[0],t=arguments[1];Gibberish.extend(this,{name:"proxy3",type:"effect",properties:{},callback:function(){var n=e[t];return n||0}}),this.init(),this.codegen=function(){console.log(" CALLED "),this.variable||(this.variable=Gibberish.generateSymbol("v")),Gibberish.callbackArgs.push(this.symbol),Gibberish.callbackObjects.push(this.callback),this.codeblock="var "+this.variable+" = "+this.symbol+"("+e.properties[t].codegen()+");\n"}},Gibberish.Proxy3.prototype=new Gibberish.ugen,Gibberish.oscillator=function(){this.type="oscillator",this.oscillatorInit=function(){return this.fx=new Array2,this.fx.parent=this,this}},Gibberish.oscillator.prototype=new Gibberish.ugen,Gibberish._oscillator=new Gibberish.oscillator,Gibberish.Wavetable=function(){var e=0,t=null,n=Gibberish.context.sampleRate/1024,i=0;this.properties={frequency:440,amp:.25,sync:0},this.getTable=function(){return t},this.setTable=function(e){t=e,n=Gibberish.context.sampleRate/t.length},this.getTableFreq=function(){return n},this.setTableFreq=function(e){n=e},this.getPhase=function(){return e},this.setPhase=function(t){e=t},this.callback=function(r,o){var s,a,u,c,l,p;for(e+=r/n;e>=1024;)e-=1024;return s=0|e,a=e-s,s=1023&s,u=1023===s?0:s+1,c=t[s],l=t[u],0!==p&&(i=p),(c+a*(l-c))*o}},Gibberish.Wavetable.prototype=Gibberish._oscillator,Gibberish.Table=function(e){this.__proto__=new Gibberish.Wavetable,this.name="table";var t=2*Math.PI;if("undefined"==typeof e){e=new Float32Array(1024);for(var n=1024;n--;)e[n]=Math.sin(n/1024*t)}this.setTable(e),this.init(),this.oscillatorInit()},Gibberish.asmSine=function(e,t,n){"use asm";function i(){for(var e=1024,t=1024;e=e-1|0;)t-=1,u[e>>2]=+s(+(t/1024)*6.2848);l=44100/1024}function r(e,t,n){e=+e,t=+t,n=+n;var i=0,r=0,o=0,s=0,p=0,h=0;return a=+(a+e/l),a>=1024&&(a=+(a-1024)),i=+c(a),s=a-i,r=~~i,o=(r|0)==1024?0:r+1|0,p=+u[r>>2],h=+u[o>>2],+((p+s*(h-p))*t)}function o(e){return e|=0,+u[e>>2]}var s=e.Math.sin,a=0,u=new e.Float32Array(n),c=e.Math.floor,l=0;return{init:i,gen:r,get:o}},Gibberish.asmSine2=function(){this.properties={frequency:440,amp:.5,sr:Gibberish.context.sampleRate},this.name="sine";var e=new ArrayBuffer(4096),t=Gibberish.asmSine(window,null,e);return t.init(),this.getTable=function(){return e},this.get=t.get,this.callback=t.gen,this.init(),this.oscillatorInit(),this.processProperties(arguments),this},Gibberish.asmSine2.prototype=Gibberish._oscillator,Gibberish.Sine=function(){this.__proto__=new Gibberish.Wavetable,this.name="sine";for(var e=2*Math.PI,t=new Float32Array(1024),n=1024;n--;)t[n]=Math.sin(n/1024*e);this.setTable(t),this.init(arguments),this.oscillatorInit(),this.processProperties(arguments)},Gibberish.Sine2=function(){this.__proto__=new Gibberish.Sine,this.name="sine2";var e=this.__proto__.callback,t=Gibberish.makePanner(),n=[0,0];this.callback=function(i,r,o){var s=e(i,r);return n=t(s,o,n)},this.init(),this.oscillatorInit(),Gibberish.defineUgenProperty("pan",0,this),this.processProperties(arguments)},Gibberish.Square=function(){this.__proto__=new Gibberish.Wavetable,this.name="square";for(var e=(2*Math.PI,new Float32Array(1024)),t=1024;t--;)e[t]=t/1024>.5?1:-1;this.setTable(e),this.init(arguments),this.oscillatorInit(),this.processProperties(arguments)},Gibberish.Saw=function(){this.__proto__=new Gibberish.Wavetable,this.name="saw";for(var e=new Float32Array(1024),t=1024;t--;)e[t]=4*((t/1024/2+.25)%.5-.25);this.setTable(e),this.init(arguments),this.oscillatorInit(),this.processProperties(arguments)},Gibberish.Saw2=function(){this.__proto__=new Gibberish.Saw,this.name="saw2";var e=this.__proto__.callback,t=Gibberish.makePanner(),n=[0,0];this.callback=function(i,r,o){var s=e(i,r);return n=t(s,o,n)},this.init(),Gibberish.defineUgenProperty("pan",0,this)},Gibberish.Triangle=function(){this.__proto__=new Gibberish.Wavetable,this.name="triangle";for(var e=new Float32Array(1024),t=Math.abs,n=1024;n--;)e[n]=1-4*t((n/1024+.25)%1-.5);this.setTable(e),this.init(arguments),this.oscillatorInit(),this.processProperties(arguments)},Gibberish.Triangle2=function(){this.__proto__=new Gibberish.Triangle,this.name="triangle2";var e=this.__proto__.callback,t=Gibberish.makePanner(),n=[0,0];this.callback=function(i,r,o){var s=e(i,r);return t(s,o,n)},this.init(),this.oscillatorInit(),Gibberish.defineUgenProperty("pan",0,this),this.processProperties(arguments)},Gibberish.Saw3=function(){var e=0,t=0,n=2.5,i=-1.5,r=0,o=Math.sin,s=11;pi_2=2*Math.PI,flip=0,signHistory=0,ignore=!1,sr=Gibberish.context.sampleRate,Gibberish.extend(this,{name:"saw",properties:{frequency:440,amp:.15,sync:0,sr:Gibberish.context.sampleRate},callback:function(a){var u=a/sr,c=.5-u,l=s*c*c*c*c,p=.376-.752*u,h=1-2*u,f=0;return t+=u,t-=t>1?2:0,e=.5*(e+o(pi_2*(t+e*l))),f=n*e+i*r,r=e,f+=p,f*=h}}),Object.defineProperty(this,"scale",{get:function(){return s},set:function(e){s=e}}),this.init(),this.oscillatorInit(),this.processProperties(arguments)},Gibberish.Saw3.prototype=Gibberish._oscillator,Gibberish.PWM=function(){var e=0,t=0,n=0,i=0,r=0,o=2.5,s=-1.5,a=Math.sin,u=11;pi_2=2*Math.PI,test=0,sr=Gibberish.context.sampleRate,Gibberish.extend(this,{name:"pwm",properties:{frequency:440,amp:.15,pulsewidth:.05,sr:Gibberish.context.sampleRate},callback:function(c,l,p){var h=c/sr,f=.5-h,d=u*f*f*f*f,m=1-2*h,b=0;return r+=h,r-=r>1?2:0,e=.5*(e+a(pi_2*(r+e*d))),t=.5*(t+a(pi_2*(r+t*d+p))),b=t-e,b=o*b+s*(n-i),n=e,i=t,b*m*l}}),Object.defineProperty(this,"scale",{get:function(){return u},set:function(e){u=e}}),this.init(),this.oscillatorInit(),this.processProperties(arguments)},Gibberish.PWM.prototype=Gibberish._oscillator,Gibberish.Noise=function(){var e=Math.random;Gibberish.extend(this,{name:"noise",properties:{amp:1},callback:function(t){return(2*e()-1)*t}}),this.init(),this.oscillatorInit(),this.processProperties(arguments)},Gibberish.Noise.prototype=Gibberish._oscillator,Gibberish.KarplusStrong=function(){var e=[0],t=0,n=Math.random,i=Gibberish.makePanner(),r=Gibberish.context.sampleRate,o=[0,0];Gibberish.extend(this,{name:"karplus_strong",frequency:0,properties:{blend:1,damping:0,amp:1,channels:2,pan:0},note:function(t){var i=Math.floor(r/t);e.length=0;for(var o=0;i>o;o++)e[o]=2*n()-1;this.frequency=t},callback:function(r,s,a,u,c){var l=e.shift(),p=n()>r?-1:1;s=s>0?s:0;var h=p*(l+t)*(.5-s/100);return t=h,e.push(h),h*=a,1===u?h:i(h,c,o)}}).init().oscillatorInit().processProperties(arguments)},Gibberish.KarplusStrong.prototype=Gibberish._oscillator,Gibberish.PolyKarplusStrong=function(){this.__proto__=new Gibberish.Bus2,Gibberish.extend(this,{name:"poly_karplus_strong",maxVoices:5,voiceCount:0,_frequency:0,polyProperties:{blend:1,damping:0},note:function(e,t){var n=this.children[this.voiceCount++];this.voiceCount>=this.maxVoices&&(this.voiceCount=0),n.note(e,t),this._frequency=e},initVoices:function(){for(var e=0;e<this.maxVoices;e++){var t={blend:this.blend,damping:this.damping,channels:2,amp:1},n=new Gibberish.KarplusStrong(t).connect(this);this.children.push(n)}}}),this.amp=1/this.maxVoices,this.children=[],"object"==typeof arguments[0]&&(this.maxVoices=arguments[0].maxVoices?arguments[0].maxVoices:this.maxVoices),Gibberish.polyInit(this),this.initVoices(),this.processProperties(arguments),this.initialized=!1,Gibberish._synth.oscillatorInit.call(this),Gibberish.dirty(this)},Gibberish.bus=function(){this.type="bus",this.inputCodegen=function(){var e,t=this.value.valueOf();return e=t+", "+this.amp,this.codeblock=e,e},this.addConnection=function(){var e=arguments[2],t={value:arguments[0],amp:arguments[1],codegen:this.inputCodegen,valueOf:function(){return this.codegen()}};"undefined"!=typeof e?this.inputs.splice(e,0,t):this.inputs.push(t),Gibberish.dirty(this)},this.removeConnection=function(e){for(var t=0;t<this.inputs.length;t++)if(this.inputs[t].value===e){this.inputs.splice(t,1),Gibberish.dirty(this);break}},this.adjustSendAmount=function(e,t){for(var n=0;n<this.inputs.length;n++)if(this.inputs[n].value===e){this.inputs[n].amp=t,Gibberish.dirty(this);break}},this.callback=function(){var e=arguments[arguments.length-2],t=arguments[arguments.length-1];output[0]=output[1]=0;for(var n=0;n<arguments.length-2;n+=2){var i="object"==typeof arguments[n],r=arguments[n+1];output[0]+=i?arguments[n][0]*r:arguments[n]*r,output[1]+=i?arguments[n][1]*r:arguments[n]*r}return output[0]*=e,output[1]*=e,panner(output,t,output)}},Gibberish.bus.prototype=new Gibberish.ugen,Gibberish._bus=new Gibberish.bus,Gibberish.Bus=function(){return Gibberish.extend(this,{name:"bus",properties:{inputs:[],amp:1},callback:function(){for(var e=0,t=arguments.length-1,n=arguments[t],i=0;t>i;i++)e+=arguments[i];return e*=n}}),this.init(),this.processProperties(arguments),this},Gibberish.Bus.prototype=Gibberish._bus,Gibberish.Bus2=function(){this.name="bus2",this.type="bus",this.properties={inputs:[],amp:1,pan:0};var e=[0,0],t=Gibberish.makePanner();this.callback=function(){var n=arguments,i=n.length,r=n[i-2],o=n[i-1];e[0]=e[1]=0;for(var s=0,a=i-2;a>s;s+=2){var u="object"==typeof n[s],c=n[s+1];e[0]+=u?n[s][0]*c||0:n[s]*c||0,e[1]+=u?n[s][1]*c||0:n[s]*c||0}return e[0]*=r,e[1]*=r,t(e,o,e)},this.show=function(){console.log(e,args)},this.getOutput=function(){return e},this.getArgs=function(){return args},this.init(arguments),this.processProperties(arguments)},Gibberish.Bus2.prototype=Gibberish._bus,Gibberish.envelope=function(){this.type="envelope"},Gibberish.envelope.prototype=new Gibberish.ugen,Gibberish._envelope=new Gibberish.envelope,Gibberish.ExponentialDecay=function(){var e=Math.pow,t=0,n=0;Gibberish.extend(this,{name:"ExponentialDecay",properties:{decay:.5,length:11050},callback:function(i,r){return t=e(i,n),n+=1/r,t},trigger:function(){n="number"==typeof arguments[0]?arguments[0]:0}}).init()},Gibberish.ExponentialDecay.prototype=Gibberish._envelope,Gibberish.Line=function(e,t,n,i){var r,o={name:"line",properties:{start:e||0,end:isNaN(t)?1:t,time:n||Gibberish.context.sampleRate,loops:i||!1},retrigger:function(e,t){s=0,this.start=r,this.end=e,this.time=t,a=(e-r)/t}},s=0,a=(t-e)/n;return this.callback=function(e,t,n,i){return r=n>s?e+s++*a:t,s=r>=t&&i?0:s,r},Gibberish.extend(this,o),this.init(),this},Gibberish.Line.prototype=Gibberish._envelope,Gibberish.AD=function(e,t){var n=0,i=0;Gibberish.extend(this,{name:"AD",properties:{attack:e||1e4,decay:t||1e4},run:function(){return i=0,n=0,this},callback:function(e,t){if(e=0>e?22050:e,t=0>t?22050:t,0===i){var r=1/e;n+=r,n>=1&&i++}else if(1===i){var r=1/t;n-=r,0>=n&&(n=0,i++)}return n},getState:function(){return i}}).init().processProperties(arguments)},Gibberish.AD.prototype=Gibberish._envelope,Gibberish.ADSR=function(e,t,n,i,r,o,s){var a={name:"adsr",type:"envelope",requireReleaseTrigger:"undefined"!=typeof s?s:!1,properties:{attack:isNaN(e)?1e4:e,decay:isNaN(t)?1e4:t,sustain:isNaN(n)?22050:n,release:isNaN(i)?1e4:i,attackLevel:r||1,sustainLevel:o||.5,releaseTrigger:0},run:function(){this.setPhase(0),this.setState(0)},stop:function(){this.releaseTrigger=1}};Gibberish.extend(this,a);var u=0,c=0,l=0,p=this;return this.callback=function(e,t,n,i,r,o,s){var a=0;return l=1===l?1:s,0===c?(a=u/e*r,++u/e===1&&(c++,u=t)):1===c?(a=u/t*(r-o)+o,--u<=0&&(null!==n?(c+=1,u=n):(c+=2,u=i))):2===c?(a=o,p.requireReleaseTrigger&&l?(c++,u=i,p.releaseTrigger=0,l=0):0!==u--||p.requireReleaseTrigger||(c++,u=i)):3===c&&(u--,a=u/i*o,0>=u&&c++),a},this.call=function(){return this.callback(this.attack,this.decay,this.sustain,this.release,this.attackLevel,this.sustainLevel,this.releaseTrigger)},this.setPhase=function(e){u=e},this.setState=function(e){c=e,u=0},this.getState=function(){return c},this.init(),this},Gibberish.ADSR.prototype=Gibberish._envelope,Gibberish.ADR=function(e,t,n,i,r){var o={name:"adr",type:"envelope",properties:{attack:isNaN(e)?11025:e,decay:isNaN(t)?11025:t,release:isNaN(n)?22050:n,attackLevel:i||1,releaseLevel:r||.2},run:function(){this.setPhase(0),this.setState(0)}};Gibberish.extend(this,o);var s=0,a=0;return this.callback=function(e,t,n,i,r){var o=0;return 0===a?(o=s/e*i,++s/e===1&&(a++,s=t)):1===a?(o=s/t*(i-r)+r,--s<=0&&(a+=1,s=n)):2===a&&(s--,o=s/n*r,0>=s&&a++),o},this.setPhase=function(e){s=e},this.setState=function(e){a=e,s=0},this.getState=function(){return a},this.init(),this},Gibberish.ADR.prototype=Gibberish._envelope,Gibberish.analysis=function(){this.type="analysis",this.codegen=function(){if(Gibberish.memo[this.symbol])return Gibberish.memo[this.symbol];var e=this.variable?this.variable:Gibberish.generateSymbol("v");return Gibberish.memo[this.symbol]=e,this.variable=e,Gibberish.callbackArgs.push(this.symbol),Gibberish.callbackObjects.push(this.callback),this.codeblock="var "+this.variable+" = "+this.symbol+"();\n",-1===Gibberish.codeblock.indexOf(this.codeblock)&&Gibberish.codeblock.push(this.codeblock),this.variable},this.analysisCodegen=function(){var e=0;this.input.codegen?(e=this.input.codegen(),e.indexOf("op")>-1&&console.log("ANALYSIS BUG")):e=this.input.value?"undefined"!=typeof this.input.value.codegen?this.input.value.codegen():this.input.value:"null";var t=this.analysisSymbol+"("+e+",";for(var n in this.properties)"input"!==n&&(t+=this[n]+",");return t=t.slice(0,-1),t+=");",this.analysisCodeblock=t,-1===Gibberish.analysisCodeblock.indexOf(this.analysisCodeblock)&&Gibberish.analysisCodeblock.push(this.analysisCodeblock),-1===Gibberish.callbackObjects.indexOf(this.analysisCallback)&&Gibberish.callbackObjects.push(this.analysisCallback),t},this.remove=function(){Gibberish.analysisUgens.splice(Gibberish.analysisUgens.indexOf(this),1)},this.analysisInit=function(){this.analysisSymbol=Gibberish.generateSymbol(this.name),Gibberish.analysisUgens.push(this),Gibberish.dirty()}},Gibberish.analysis.prototype=new Gibberish.ugen,Gibberish._analysis=new Gibberish.analysis,Gibberish.Follow=function(){this.name="follow",this.properties={input:0,bufferSize:4410,mult:1,useAbsoluteValue:!0};var e=Math.abs,t=[0],n=0,i=0,r=0;this.analysisCallback=function(o,s,a,u){"object"==typeof o&&(o=o[0]+o[1]),n+=u?e(o):o,n-=t[i],t[i]=u?e(o):o,i=(i+1)%s,t[i]=t[i]?t[i]:0,r=n/s*a},this.callback=this.getValue=function(){return r},this.init(),this.analysisInit(),this.processProperties(arguments);var o=(this.__lookupSetter__("bufferSize"),this.bufferSize);Object.defineProperty(this,"bufferSize",{get:function(){return o},set:function(e){o=e,n=0,t=[0],i=0}})},Gibberish.Follow.prototype=Gibberish._analysis,Gibberish.SingleSampleDelay=function(){this.name="single_sample_delay",this.properties={input:arguments[0]||0,amp:arguments[1]||1};var e=0;this.analysisCallback=function(t){e=t},this.callback=function(){return e},this.getValue=function(){return e},this.init(),this.analysisInit(),this.processProperties(arguments)},Gibberish.SingleSampleDelay.prototype=Gibberish._analysis,Gibberish.Record=function(e,t,n){var i=new Float32Array(t),r=0,o=!1,s=this;Gibberish.extend(this,{name:"record",oncomplete:n,properties:{input:0,size:t||0},analysisCallback:function(e,t){o&&(i[r++]="object"==typeof e?e[0]+e[1]:e,r>=t&&(o=!1,s.remove()))},record:function(){return r=0,o=!0,this},getBuffer:function(){return i},getPhase:function(){return r},remove:function(){"undefined"!=typeof this.oncomplete&&this.oncomplete();for(var e=0;e<Gibberish.analysisUgens.length;e++){var t=Gibberish.analysisUgens[e];if(t===this)return Gibberish.callbackArgs.indexOf(this.analysisSymbol)>-1&&Gibberish.callbackArgs.splice(Gibberish.callbackArgs.indexOf(this.analysisSymbol),1),Gibberish.callbackObjects.indexOf(this.analysisCallback)>-1&&Gibberish.callbackObjects.splice(Gibberish.callbackObjects.indexOf(this.analysisCallback),1),void Gibberish.analysisUgens.splice(e,1)}}}),this.properties.input=e,this.init(),this.analysisInit(),Gibberish.dirty()},Gibberish.Record.prototype=Gibberish._analysis,Gibberish.effect=function(){this.type="effect"},Gibberish.effect.prototype=new Gibberish.ugen,Gibberish._effect=new Gibberish.effect,Gibberish.Distortion=function(){var e=Math.abs,t=Math.log,n=Math.LN2;Gibberish.extend(this,{name:"distortion",properties:{input:0,amount:50},callback:function(i,r){var o;return r=r>2?r:2,"number"==typeof i?(o=i*r,i=o/(1+e(o))/(t(r)/n)):(o=i[0]*r,i[0]=o/(1+e(o))/(t(r)/n),o=i[1]*r,i[1]=o/(1+e(o))/(t(r)/n)),i}}).init().processProperties(arguments)},Gibberish.Distortion.prototype=Gibberish._effect,Gibberish.Gain=function(){Gibberish.extend(this,{name:"gain",properties:{input:0,amount:1},callback:function(e,t){return"number"==typeof e?e*=t:(e[0]*=t,e[1]*=t),e}}).init().processProperties(arguments)},Gibberish.Gain.prototype=Gibberish._effect,Gibberish.Delay=function(){var e=[],t=0;e.push(new Float32Array(2*Gibberish.context.sampleRate)),e.push(new Float32Array(2*Gibberish.context.sampleRate)),Gibberish.extend(this,{name:"delay",properties:{input:0,time:22050,feedback:.5,wet:1,dry:1},callback:function(n,i,r,o,s){var a="number"==typeof n?1:2,u=t++%88200,c=(u+(0|i))%88200;return 1===a?(e[0][c]=(n+e[0][u])*r,n=n*s+e[0][u]*o):(e[0][c]=(n[0]+e[0][u])*r,n[0]=n[0]*s+e[0][u]*o,e[1][c]=(n[1]+e[1][u])*r,n[1]=n[1]*s+e[1][u]*o),n}});var n=Math.round(this.properties.time);Object.defineProperty(this,"time",{configurable:!0,get:function(){return n},set:function(e){n=Math.round(e),Gibberish.dirty(this)}}),this.init(),this.processProperties(arguments)},Gibberish.Delay.prototype=Gibberish._effect,Gibberish.Decimator=function(){var e=0,t=[],n=Math.pow,i=Math.floor;Gibberish.extend(this,{name:"decimator",properties:{input:0,bitDepth:16,sampleRate:1},callback:function(r,o,s){e+=s;var a="number"==typeof r?1:2;if(1===a){if(e>=1){var u=n(o,2);t[0]=i(r*u)/u,e-=1}r=t[0]}else{if(e>=1){var u=n(o,2);t[0]=i(r[0]*u)/u,t[1]=i(r[1]*u)/u,e-=1}r=t}return r}}).init().processProperties(arguments)},Gibberish.Decimator.prototype=Gibberish._effect,Gibberish.RingModulation=function(){var e=(new Gibberish.Sine).callback,t=[0,0];Gibberish.extend(this,{name:"ringmod",properties:{input:0,frequency:440,amp:.5,mix:.5},callback:function(n,i,r,o){var s="number"==typeof n?1:2,a=1===s?n:n[0],u=e(i,r);if(a=a*(1-o)+a*u*o,2===s){var c=n[1];return c=c*(1-o)+c*u*o,t[0]=a,t[1]=c,t}return a}}).init().processProperties(arguments)},Gibberish.RingModulation.prototype=Gibberish._effect,Gibberish.DCBlock=function(){var e=0,t=0;Gibberish.extend(this,{name:"dcblock",type:"effect",properties:{input:0},reset:function(){e=0,t=0},callback:function(n){var i=n-e+.9997*t;return e=n,t=i,i}}).init().processProperties(arguments)},Gibberish.DCBlock.prototype=Gibberish._effect,Gibberish.Tremolo=function(){var e=(new Gibberish.Sine).callback;Gibberish.extend(this,{name:"tremolo",type:"effect",properties:{input:0,frequency:2.5,amp:.5},callback:function(t,n,i){var r="number"==typeof t?1:2,o=e(n,i);return 1===r?t*=o:(t[0]*=o,t[1]*=o),t}}).init().processProperties(arguments)},Gibberish.Tremolo.prototype=Gibberish._effect,Gibberish.OnePole=function(){var e=0;Gibberish.extend(this,{name:"onepole",type:"effect",properties:{input:0,a0:.15,b1:.85},callback:function(t,n,i){var r=t*n+e*i;return e=r,r},smooth:function(t,n){this.input=n[t],e=this.input,n[t]=this,this.obj=n,this.property=t,this.oldSetter=n.__lookupSetter__(t),this.oldGetter=n.__lookupGetter__(t);var i=this;Object.defineProperty(n,t,{get:function(){return i.input},set:function(e){i.input=e}})},remove:function(){Object.defineProperty(this.obj,this.property,{get:this.oldGetter,set:this.oldSetter}),this.obj[this.property]=this.input}}).init().processProperties(arguments)},Gibberish.OnePole.prototype=Gibberish._effect,Gibberish.Filter24=function(){var e=[0,0,0,0],t=[0,0,0,0],n=[0,0],i=isNaN(arguments[0])?.1:arguments[0],r=isNaN(arguments[1])?3:arguments[1];_isLowPass="undefined"!=typeof arguments[2]?arguments[2]:!0,Gibberish.extend(this,{name:"filter24",properties:{input:0,cutoff:i,resonance:r,isLowPass:_isLowPass},callback:function(i,r,o,s){var a="number"==typeof i?1:2,u=1===a?i:i[0],c=e[3]*o;if(c=c>1?1:c,r=0>r?0:r,r=r>1?1:r,u-=c,e[0]=e[0]+(-e[0]+u)*r,e[1]=e[1]+(-e[1]+e[0])*r,e[2]=e[2]+(-e[2]+e[1])*r,e[3]=e[3]+(-e[3]+e[2])*r,u=s?e[3]:u-e[3],2===a){var l=i[1];return c=t[3]*o,c=c>1?1:c,l-=c,t[0]=t[0]+(-t[0]+l)*r,t[1]=t[1]+(-t[1]+t[0])*r,t[2]=t[2]+(-t[2]+t[1])*r,t[3]=t[3]+(-t[3]+t[2])*r,l=s?t[3]:l-t[3],n[0]=u,n[1]=l,n}return u}}).init().processProperties(arguments)},Gibberish.Filter24.prototype=Gibberish._effect,Gibberish.SVF=function(){var e=[0,0],t=[0,0],n=Math.PI,i=[0,0];Gibberish.extend(this,{name:"SVF",properties:{input:0,cutoff:440,Q:2,mode:0,sr:Gibberish.context.sampleRate},callback:function(r,o,s,a,u){var c="number"==typeof r?1:2,l=1===c?r:r[0],p=2*n*o/u;s=1/s;var h=t[0]+p*e[0],f=l-h-s*e[0],d=p*f+e[0],m=f+h;if(e[0]=d,t[0]=h,l=0===a?h:1===a?f:2===a?d:m,2===c){var b=r[1],h=t[1]+p*e[1],f=b-h-s*e[1],d=p*f+e[1],m=f+h;e[1]=d,t[1]=h,b=0===a?h:1===a?f:2===a?d:m,i[0]=l,i[1]=b}else i=l;return i}}).init().processProperties(arguments)},Gibberish.SVF.prototype=Gibberish._effect,Gibberish.Biquad=function(){var e=x2=y1=y2=0,t=[0,0],n=.001639,i=.003278,r=.001639,o=-1.955777,s=.960601,a="LP",u=2e3,c=.5,l=Gibberish.context.sampleRate;Gibberish.extend(this,{name:"biquad",properties:{input:null},calculateCoefficients:function(){switch(a){case"LP":var e=2*Math.PI*u/l,t=Math.sin(e),p=Math.cos(e),h=t/(2*c);n=(1-p)/2,i=1-p,r=n,a0=1+h,o=-2*p,s=1-h;break;case"HP":var e=2*Math.PI*u/l,t=Math.sin(e),p=Math.cos(e),h=t/(2*c);n=(1+p)/2,i=-(1+p),r=n,a0=1+h,o=-2*p,s=1-h;break;case"BP":var e=2*Math.PI*u/l,t=Math.sin(e),p=Math.cos(e),f=Math.log(2)/2*c*e/t,h=t*(Math.exp(f)-Math.exp(-f))/2;n=h,i=0,r=-h,a0=1+h,o=-2*p,s=1-h;break;default:return}n/=a0,i/=a0,r/=a0,o/=a0,s/=a0},callback:function(a){var u="number"==typeof a?1:2,c=0,l=0,p=1===u?a:a[0];return c=n*p+i*e+r*x2-o*y1-s*y2,x2=e,e=a,y2=y1,y1=c,2===u&&(inR=a[1],l=n*inR+i*e[1]+r*x2[1]-o*y1[1]-s*y2[1],x2[1]=e[1],e[1]=a[1],y2[1]=y1[1],y1[1]=l,t[0]=c,t[1]=l),1===u?c:t}}).init(),Object.defineProperties(this,{mode:{get:function(){return a},set:function(e){a=e,this.calculateCoefficients()}},cutoff:{get:function(){return u},set:function(e){u=e,this.calculateCoefficients()}},Q:{get:function(){return c},set:function(e){c=e,this.calculateCoefficients()}}}),this.processProperties(arguments),this.calculateCoefficients()},Gibberish.Biquad.prototype=Gibberish._effect,Gibberish.Flanger=function(){var e=[new Float32Array(88200),new Float32Array(88200)],t=88200,n=(new Gibberish.Sine).callback,i=Gibberish.interpolate,r=-100,o=0;Gibberish.extend(this,{name:"flanger",properties:{input:0,rate:.25,feedback:0,amount:125,offset:125},callback:function(s,a,u,c){var l="number"==typeof s?1:2,p=r+n(a,.95*c);p>t?p-=t:0>p&&(p+=t);var h=i(e[0],p);return e[0][o]=1===l?s+h*u:s[0]+h*u,2===l?(s[0]+=h,h=i(e[1],p),e[1][o]=s[1]+h*u,s[1]+=h):s+=h,++o>=t&&(o=0),++r>=t&&(r=0),s}}).init().processProperties(arguments),r=-1*this.offset},Gibberish.Flanger.prototype=Gibberish._effect,Gibberish.Vibrato=function(){var e=[new Float32Array(88200),new Float32Array(88200)],t=88200,n=(new Gibberish.Sine).callback,i=Gibberish.interpolate,r=-100,o=0;Gibberish.extend(this,{name:"vibrato",properties:{input:0,rate:5,amount:.5,offset:125},callback:function(s,a,u,c){var l="number"==typeof s?1:2,p=r+n(a,u*c-1);p>t?p-=t:0>p&&(p+=t);var h=i(e[0],p);return e[0][o]=1===l?s:s[0],2===l?(s[0]=h,h=i(e[1],p),e[1][o]=s[1],s[1]=h):s=h,++o>=t&&(o=0),++r>=t&&(r=0),s}}).init().processProperties(arguments),r=-1*this.offset},Gibberish.Vibrato.prototype=Gibberish._effect,Gibberish.BufferShuffler=function(){var e=[new Float32Array(88200),new Float32Array(88200)],t=88200,n=0,i=0,r=0,o=0,s=0,a=Math.random,u=1,c=!1,l=!1,p=!1,h=Gibberish.interpolate,f=!1,d=1,m=!1,b=Gibberish.rndf,g=[0,0];Gibberish.extend(this,{name:"buffer_shuffler",properties:{input:0,chance:.25,rate:11025,length:22050,reverseChange:.5,pitchChance:.5,pitchMin:.25,pitchMax:2,wet:1,dry:0},callback:function(y,v,x,w,G,k,_,j,C,S){var A="number"==typeof y?1:2;s?++o%(w-400)===0&&(c=!1,l=!0,u=1,o=0):(e[0][i]=1===A?y:y[0],e[1][i]=1===A?y:y[1],i++,i%=t,m=0===i?1:m,r++,r%x==0&&a()<v&&(p=a()<G,s=!0,p||(n=i-w,0>n&&(n=t+n)),f=a()<k,f&&(d=b(_,j)),u=1,c=!0,l=!1)),n+=p?-1*d:d,0>n?n+=t:n>=t&&(n-=t);var M,P,q,T,R=h(e[0],n);return c?(u-=.0025,q=R*(1-u),M=1===A?q+y*u:q+y[0]*u,2===A&&(T=h(e[1],n),q=T*(1-u),P=1===A?M:q+y[1]*u),.0025>=u&&(c=!1)):l?(u-=.0025,q=R*u,M=1===A?q+y*u:q+y[0]*(1-u),2===A&&(T=h(e[1],n),q=T*u,P=q+y[1]*(1-u)),.0025>=u&&(l=!1,s=!1,p=!1,d=1,f=0)):1===A?M=s&&m?R*C+y*S:y:(T=h(e[1],n),M=s&&m?R*C+y[0]*S:y[0],P=s&&m?T*C+y[1]*S:y[1]),g=[M,P],1===A?M:g}}).init().processProperties(arguments)},Gibberish.BufferShuffler.prototype=Gibberish._effect,Gibberish.AllPass=function(e){var t=-1,n=new Float32Array(e||500),i=n.length;Gibberish.extend(this,{name:"allpass",properties:{input:0},callback:function(e){t=++t%i;var r=n[t],o=-1*e+r;return n[t]=e+.5*r,o}})},Gibberish.Comb=function(e){var t=new Float32Array(e||1200),n=t.length,i=0,r=0;Gibberish.extend(this,{name:"comb",properties:{input:0,feedback:.84,damping:.2},callback:function(e,o,s){var a=++i%n,u=t[a];return r=u*(1-s)+r*s,t[a]=e+r*o,u}})},Gibberish.Reverb=function(){var e={combCount:8,combTuning:[1116,1188,1277,1356,1422,1491,1557,1617],allPassCount:4,allPassTuning:[556,441,341,225],allPassFeedback:.5,fixedGain:.015,scaleDamping:.4,scaleRoom:.28,offsetRoom:.7,stereoSpread:23},t=.84,n=[],i=[],r=[0,0];Gibberish.extend(this,{name:"reverb",roomSize:.5,properties:{input:0,wet:.5,dry:.55,roomSize:.84,damping:.5},callback:function(e,t,o,s,a){for(var u="object"==typeof e?2:1,c=1===u?e:e[0]+e[1],l=.015*c,p=l,h=0;8>h;h++){var f=n[h](l,.98*s,.4*a);p+=f}for(var h=0;4>h;h++)p=i[h](p);return r[0]=r[1]=c*o+p*t,r}}).init().processProperties(arguments),this.setFeedback=function(e){t=e};for(var o=0;8>o;o++)n.push(new Gibberish.Comb(e.combTuning[o]).callback);for(var o=0;4>o;o++)i.push(new Gibberish.AllPass(e.allPassTuning[o],e.allPassFeedback).callback)
},Gibberish.Reverb.prototype=Gibberish._effect,Gibberish.Granulator=function(e){var t=[];buffer=null,interpolate=Gibberish.interpolate,panner=Gibberish.makePanner(),bufferLength=0,debug=0,write=0,self=this,out=[0,0],_out=[0,0],rndf=Gibberish.rndf,numberOfGrains=e.numberOfGrains||20,Gibberish.extend(this,{name:"granulator",bufferLength:88200,reverse:!0,spread:.5,properties:{speed:1,speedMin:-0,speedMax:0,grainSize:1e3,position:.5,positionMin:0,positionMax:0,amp:.2,fade:.1,pan:0,shouldWrite:!1},setBuffer:function(e){buffer=e,bufferLength=e.length},callback:function(e,n,i,r,o,s,a,u,c,l){for(var p=0;numberOfGrains>p;p++){var h=t[p];if(h._speed>0){h.pos>h.end&&(h.pos=(a+rndf(o,s))*buffer.length,h.start=h.pos,h.end=h.start+r,h._speed=e+rndf(n,i),h._speed=h._speed<.1?.1:h._speed,h._speed=h._speed<.1&&h._speed>0?.1:h._speed,h._speed=h._speed>-.1&&h._speed<0?-.1:h._speed,h.fadeAmount=h._speed*c*r,h.pan=rndf(-1*self.spread,self.spread));for(var f=h.pos;f>buffer.length;)f-=buffer.length;for(;0>f;)f+=buffer.length;var d=interpolate(buffer,f);d*=h.pos<h.fadeAmount+h.start?(h.pos-h.start)/h.fadeAmount:1,d*=h.pos>h.end-h.fadeAmount?(h.end-h.pos)/h.fadeAmount:1}else{h.pos<h.end&&(h.pos=(a+rndf(o,s))*buffer.length,h.start=h.pos,h.end=h.start-r,h._speed=e+rndf(n,i),h._speed=h._speed<.1&&h._speed>0?.1:h._speed,h._speed=h._speed>-.1&&h._speed<0?-.1:h._speed,h.fadeAmount=h._speed*c*r);for(var f=h.pos;f>buffer.length;)f-=buffer.length;for(;0>f;)f+=buffer.length;var d=interpolate(buffer,f);d*=h.pos>h.start-h.fadeAmount?(h.start-h.pos)/h.fadeAmount:1,d*=h.pos<h.end+h.fadeAmount?(h.end-h.pos)/h.fadeAmount:1}_out=panner(d*u,h.pan,_out),out[0]+=_out[0],out[1]+=_out[1],h.pos+=h._speed}return panner(out,l,out)}}).init().processProperties(arguments);for(var n=0;numberOfGrains>n;n++)t[n]={pos:self.position+Gibberish.rndf(self.positionMin,self.positionMax),_speed:self.speed+Gibberish.rndf(self.speedMin,self.speedMax)},t[n].start=t[n].pos,t[n].end=t[n].pos+self.grainSize,t[n].fadeAmount=t[n]._speed*self.fade*self.grainSize,t[n].pan=Gibberish.rndf(-1*self.spread,self.spread);"undefined"!=typeof e.buffer&&(buffer=e.buffer,bufferLength=buffer.length)},Gibberish.Granulator.prototype=Gibberish._effect,Gibberish.synth=function(){this.type="oscillator",this.oscillatorInit=function(){this.fx=new Array2,this.fx.parent=this}},Gibberish.synth.prototype=new Gibberish.ugen,Gibberish._synth=new Gibberish.synth,Gibberish.Synth=function(e){this.name="synth",this.properties={frequency:0,pulsewidth:.5,attack:22050,decay:22050,sustain:22050,release:22050,attackLevel:1,sustainLevel:.5,releaseTrigger:0,glide:.15,amp:.25,channels:2,pan:0,sr:Gibberish.context.sampleRate},this.note=function(e,i){if(0!==i){if("object"!=typeof this.frequency){if(t&&e===l)return void(this.releaseTrigger=1);this.frequency=l=e,this.releaseTrigger=0}else this.frequency[0]=l=e,this.releaseTrigger=0,Gibberish.dirty(this);"undefined"!=typeof i&&(this.amp=i),n.run()}else this.releaseTrigger=1},e=e||{};var t="undefined"==typeof e.useADSR?!1:e.useADSR,n=t?new Gibberish.ADSR:new Gibberish.AD,i=n.getState,r=n.callback,o=new Gibberish.PWM,s=o.callback,a=(new Gibberish.OnePole).callback,u=Gibberish.makePanner(),c=this,l=0,p=[0,0];n.requireReleaseTrigger=e.requireReleaseTrigger||!1,this.callback=function(e,n,o,l,h,f,d,m,b,g,y,v,x,w){g=g>=1?.99999:g,e=a(e,1-g,g);var G,k;return t?(G=r(o,l,h,f,d,m,b),b&&(c.releaseTrigger=0),i()<4?(k=s(e,1,n,w)*G*y,1===v?k:u(k,x,p)):(k=p[0]=p[1]=0,1===v?k:p)):i()<2?(G=r(o,l),k=s(e,1,n,w)*G*y,1===v?k:u(k,x,p)):(k=p[0]=p[1]=0,1===v?k:p)},this.getEnv=function(){return n},this.getOsc=function(){return o},this.setOsc=function(e){o=e,s=o.callback};var h="PWM";Object.defineProperty(this,"waveform",{get:function(){return h},set:function(e){this.setOsc(new Gibberish[e])}}),this.init(),this.oscillatorInit(),this.processProperties(arguments)},Gibberish.Synth.prototype=Gibberish._synth,Gibberish.PolySynth=function(){this.__proto__=new Gibberish.Bus2,Gibberish.extend(this,{name:"polysynth",maxVoices:5,voiceCount:0,frequencies:[],_frequency:0,polyProperties:{frequency:0,glide:0,attack:22050,decay:22050,pulsewidth:.5,waveform:"PWM"},note:function(e,t){var n=this.frequencies.indexOf(e),i=n>-1?n:this.voiceCount++,r=this.children[i];r.note(e,t),-1===n?(this.frequencies[i]=e,this._frequency=e,this.voiceCount>=this.maxVoices&&(this.voiceCount=0)):delete this.frequencies[i]},initVoices:function(){for(var e=0;e<this.maxVoices;e++){var t={waveform:this.waveform,attack:this.attack,decay:this.decay,pulsewidth:this.pulsewidth,channels:2,amp:1,useADSR:this.useADSR||!1,requireReleaseTrigger:this.requireReleaseTrigger||!1},n=new Gibberish.Synth(t).connect(this);this.children.push(n)}}}),this.amp=1/this.maxVoices,this.children=[],"object"==typeof arguments[0]&&(this.maxVoices=arguments[0].maxVoices?arguments[0].maxVoices:this.maxVoices,this.useADSR="undefined"!=typeof arguments[0].useADSR?arguments[0].useADSR:!1,this.requireReleaseTrigger="undefined"!=typeof arguments[0].requireReleaseTrigger?arguments[0].requireReleaseTrigger:!1),Gibberish.polyInit(this),this.initVoices(),this.processProperties(arguments),Gibberish._synth.oscillatorInit.call(this)},Gibberish.Synth2=function(e){this.name="synth2",this.properties={frequency:0,pulsewidth:.5,attack:22050,decay:22050,sustain:22050,release:22050,attackLevel:1,sustainLevel:.5,releaseTrigger:0,cutoff:.25,resonance:3.5,useLowPassFilter:!0,glide:.15,amp:.25,channels:1,pan:0,sr:Gibberish.context.sampleRate},this.note=function(e,i){if(0!==i){if("object"!=typeof this.frequency){if(t&&e===p)return void(this.releaseTrigger=1);this.frequency=p=e,this.releaseTrigger=0}else this.frequency[0]=p=e,this.releaseTrigger=0,Gibberish.dirty(this);"undefined"!=typeof i&&(this.amp=i),n.run()}else this.releaseTrigger=1},e=e||{};var t="undefined"==typeof e.useADSR?!1:e.useADSR,n=t?new Gibberish.ADSR:new Gibberish.AD,i=n.getState,r=n.callback,o=new Gibberish.PWM,s=o.callback,a=new Gibberish.Filter24,u=a.callback,c=(new Gibberish.OnePole).callback,l=Gibberish.makePanner(),p=0,h=this,f=[0,0];n.requireReleaseTrigger=e.requireReleaseTrigger||!1,this.callback=function(e,n,o,a,p,d,m,b,g,y,v,x,w,G,k,_,j){w=w>=1?.99999:w,e=c(e,1-w,w);var C,S;return t?(C=r(o,a,p,d,m,b,g),g&&(h.releaseTrigger=0),i()<4?(S=u(s(e,.15,n,j),y*C,v,x)*C*G,1===k?S:l(S,_,f)):(S=f[0]=f[1]=0,1===k?S:f)):i()<2?(C=r(o,a),S=u(s(e,.15,n,j),y*C,v,x)*C*G,1===k?S:l(S,_,f)):(S=f[0]=f[1]=0,1===k?S:f)},this.getUseADSR=function(){return t},this.getEnv=function(){return n},this.getOsc=function(){return o},this.setOsc=function(e){o=e,s=o.callback};var d="PWM";Object.defineProperty(this,"waveform",{get:function(){return d},set:function(e){this.setOsc(new Gibberish[e])}}),this.init(),this.oscillatorInit(),this.processProperties(arguments)},Gibberish.Synth2.prototype=Gibberish._synth,Gibberish.PolySynth2=function(){this.__proto__=new Gibberish.Bus2,Gibberish.extend(this,{name:"polysynth2",maxVoices:5,voiceCount:0,frequencies:[],_frequency:0,polyProperties:{frequency:0,glide:0,attack:22050,decay:22050,pulsewidth:.5,resonance:3.5,cutoff:.25,useLowPassFilter:!0,waveform:"PWM"},note:function(e,t){var n=this.frequencies.indexOf(e),i=n>-1?n:this.voiceCount++,r=this.children[i];r.note(e,t),-1===n?(this.frequencies[i]=e,this._frequency=e,this.voiceCount>=this.maxVoices&&(this.voiceCount=0)):delete this.frequencies[i]},initVoices:function(){this.dirty=!0;for(var e=0;e<this.maxVoices;e++){var t={attack:this.attack,decay:this.decay,pulsewidth:this.pulsewidth,channels:2,amp:1,useADSR:this.useADSR||!1,requireReleaseTrigger:this.requireReleaseTrigger||!1},n=new Gibberish.Synth2(t).connect(this);this.children.push(n)}}}),this.amp=1/this.maxVoices,this.children=[],"object"==typeof arguments[0]&&(this.maxVoices=arguments[0].maxVoices?arguments[0].maxVoices:this.maxVoices,this.useADSR="undefined"!=typeof arguments[0].useADSR?arguments[0].useADSR:!1,this.requireReleaseTrigger="undefined"!=typeof arguments[0].requireReleaseTrigger?arguments[0].requireReleaseTrigger:!1),Gibberish.polyInit(this),this.initVoices(),this.processProperties(arguments),Gibberish._synth.oscillatorInit.call(this)},Gibberish.FMSynth=function(e){this.name="fmSynth",this.properties={frequency:0,cmRatio:2,index:5,attack:22050,decay:22050,sustain:22050,release:22050,attackLevel:1,sustainLevel:.5,releaseTrigger:0,glide:.15,amp:.25,channels:2,pan:0},this.note=function(e,i){if(0!==i){if("object"!=typeof this.frequency){if(t&&e===p)return void(this.releaseTrigger=1);this.frequency=p=e,this.releaseTrigger=0}else this.frequency[0]=p=e,this.releaseTrigger=0,Gibberish.dirty(this);"undefined"!=typeof i&&(this.amp=i),n.run()}else this.releaseTrigger=1},e=e||{};var t="undefined"==typeof e.useADSR?!1:e.useADSR,n=t?new Gibberish.ADSR:new Gibberish.AD,i=n.getState,r=n.callback,o=(new Gibberish.Sine).callback,s=(new Gibberish.Sine).callback,a=(new Gibberish.OnePole).callback,u=Gibberish.makePanner(),c=[0,0],l=this,p=0;n.requireReleaseTrigger=e.requireReleaseTrigger||!1,this.callback=function(e,n,p,h,f,d,m,b,g,y,v,x,w,G){var k,_,j;return v>=1&&(v=.9999),e=a(e,1-v,v),t?(k=r(h,f,d,m,b,g,y),y&&(l.releaseTrigger=0),i()<4?(j=s(e*n,e*p)*k,_=o(e+j,1)*k*x,1===w?_:u(_,G,c)):(_=c[0]=c[1]=0,1===w?_:c)):i()<2?(k=r(h,f),j=s(e*n,e*p)*k,_=o(e+j,1)*k*x,1===w?_:u(_,G,c)):(_=c[0]=c[1]=0,1===w?_:c)},this.init(),this.oscillatorInit(),this.processProperties(arguments)},Gibberish.FMSynth.prototype=Gibberish._synth,Gibberish.PolyFM=function(){this.__proto__=new Gibberish.Bus2,Gibberish.extend(this,{name:"polyfm",maxVoices:5,voiceCount:0,children:[],frequencies:[],_frequency:0,polyProperties:{glide:0,attack:22050,decay:22050,index:5,cmRatio:2},note:function(e,t){var n=this.frequencies.indexOf(e),i=n>-1?n:this.voiceCount++,r=this.children[i];r.note(e,t),-1===n?(this.frequencies[i]=e,this._frequency=e,this.voiceCount>=this.maxVoices&&(this.voiceCount=0)):delete this.frequencies[i]},initVoices:function(){for(var e=0;e<this.maxVoices;e++){var t={attack:this.attack,decay:this.decay,cmRatio:this.cmRatio,index:this.index,channels:2,useADSR:this.useADSR||!1,requireReleaseTrigger:this.requireReleaseTrigger||!1,amp:1},n=new Gibberish.FMSynth(t);n.connect(this),this.children.push(n)}}}),this.amp=1/this.maxVoices,this.children=[],"object"==typeof arguments[0]&&(this.maxVoices=arguments[0].maxVoices?arguments[0].maxVoices:this.maxVoices,this.useADSR="undefined"!=typeof arguments[0].useADSR?arguments[0].useADSR:!1,this.requireReleaseTrigger="undefined"!=typeof arguments[0].requireReleaseTrigger?arguments[0].requireReleaseTrigger:!1),Gibberish.polyInit(this),this.initVoices(),this.processProperties(arguments),Gibberish._synth.oscillatorInit.call(this)},Gibberish.Sampler=function(){function e(e){Gibberish.context.decodeAudioData(e,function(e){o=e.getChannelData(0),a.length=t=a.end=s=o.length,a.isPlaying=!0,a.buffers[a.file]=o,Gibberish.audioFiles[a.file]=o,a.onload&&a.onload(),0!==a.playOnLoad&&a.note(a.playOnLoad),a.isLoaded=!0},function(e){console.log("Error decoding file",e)})}var t=1,n=Gibberish.interpolate,i=Gibberish.makePanner(),r=[0,0],o=null,s=1,a=this;if(Gibberish.extend(this,{name:"sampler",file:null,isLoaded:!1,playOnLoad:0,buffers:{},properties:{pitch:1,amp:1,isRecording:!1,isPlaying:!0,input:0,length:0,start:0,end:1,loops:0,pan:0},_onload:function(e){o=e.channels[0],s=e.length,a.end=s,a.length=t=s,a.isPlaying=!0,Gibberish.audioFiles[a.file]=o,a.buffers[a.file]=o,a.onload&&a.onload(),0!==a.playOnLoad&&a.note(a.playOnLoad),a.isLoaded=!0},switchBuffer:function(e){if("string"==typeof e)"undefined"!=typeof a.buffers[e]&&(o=a.buffers[e],s=a.end=a.length=o.length);else if("number"==typeof e){var t=Object.keys(a.buffers);if(0===t.length)return;o=a.buffers[t[e]],s=a.end=a.length=o.length}},floatTo16BitPCM:function(e,t,n){for(var i=0;i<n.length-1;i++,t+=2){var r=Math.max(-1,Math.min(1,n[i]));e.setInt16(t,0>r?32768*r:32767*r,!0)}},encodeWAV:function(){function e(e,t,n){for(var i=0;i<n.length;i++)e.setUint8(t+i,n.charCodeAt(i))}var t=this.getBuffer(),n=new ArrayBuffer(44+2*t.length),i=new DataView(n),r=Gibberish.context.sampleRate;return e(i,0,"RIFF"),i.setUint32(4,32+2*t.length,!0),e(i,8,"WAVE"),e(i,12,"fmt "),i.setUint32(16,16,!0),i.setUint16(20,1,!0),i.setUint16(22,1,!0),i.setUint32(24,r,!0),i.setUint32(28,4*r,!0),i.setUint16(32,2,!0),i.setUint16(34,16,!0),e(i,36,"data"),i.setUint32(40,2*t.length,!0),this.floatTo16BitPCM(i,44,t),i},download:function(){var e=this.encodeWAV(),t=new Blob([e]),n=window.webkitURL.createObjectURL(t),i=window.document.createElement("a");i.href=n,i.download="output.wav";var r=document.createEvent("Event");r.initEvent("click",!0,!0),i.dispatchEvent(r)},note:function(e,n){switch(typeof e){case"number":this.pitch=e;break;case"function":this.pitch=e();break;case"object":Array.isArray(e)&&(this.pitch=e[0])}if("number"==typeof n&&(this.amp=n),null!==this.function){this.isPlaying=!0;var i;switch(typeof this.pitch){case"number":i=this.pitch;break;case"function":i=this.pitch();break;case"object":i=Array.isArray(this.pitch)?this.pitch[0]:this.pitch,"function"==typeof i&&(i=i())}t=i>0||"object"==typeof i?this.start:this.end}},getBuffer:function(){return o},setBuffer:function(e){o=e},getPhase:function(){return t},setPhase:function(e){t=e},getNumberOfBuffers:function(){return Object.keys(a.buffers).length-1},callback:function(e,s,a,u,c,l,p,h,f,d){var m=0;return t+=e,h>t&&t>0?(e>0?m=null!==o&&u?n(o,t):0:t>p?m=null!==o&&u?n(o,t):0:t=f?h:t,i(m*s,d,r)):(t=f&&e>0?p:t,t=f&&0>e?h:t,r[0]=r[1]=m,r)}}).init().oscillatorInit().processProperties(arguments),"undefined"!=typeof arguments[0]&&("string"==typeof arguments[0]?(this.file=arguments[0],this.pitch=0):"object"==typeof arguments[0]&&arguments[0].file&&(this.file=arguments[0].file)),"undefined"!=typeof Gibberish.audioFiles[this.file])o=Gibberish.audioFiles[this.file],this.end=this.bufferLength=o.length,this.buffers[this.file]=o,t=this.bufferLength,Gibberish.dirty(this),this.onload&&this.onload();else if(null!==this.file){var e,u=new XMLHttpRequest;u.open("GET",this.file,!0),u.responseType="arraybuffer",u.onload=function(){e(this.response)},u.send()}else"undefined"!=typeof this.buffer&&(this.isLoaded=!0,o=this.buffer,this.end=this.bufferLength=o.length||88200,t=this.bufferLength,arguments[0]&&arguments[0].loops&&(this.loops=1),Gibberish.dirty(this),this.onload&&this.onload())},Gibberish.Sampler.prototype=Gibberish._oscillator,Gibberish.Sampler.prototype.record=function(e,t){this.isRecording=!0;var n=this;return this.recorder=new Gibberish.Record(e,t,function(){n.setBuffer(this.getBuffer()),n.end=bufferLength=n.getBuffer().length,n.setPhase(n.end),n.isRecording=!1}).record(),this},Gibberish.MonoSynth=function(){Gibberish.extend(this,{name:"monosynth",properties:{attack:1e4,decay:1e4,cutoff:.2,resonance:2.5,amp1:1,amp2:1,amp3:1,filterMult:.3,isLowPass:!0,pulsewidth:.5,amp:.6,detune2:.01,detune3:-.01,octave2:1,octave3:-1,glide:0,pan:0,frequency:0,channels:2},waveform:"Saw3",note:function(e,i){"undefined"!=typeof i&&0!==i&&(this.amp=i),0!==i&&("object"!=typeof this.frequency?this.frequency=e:(this.frequency[0]=e,Gibberish.dirty(this)),n()>0&&t.run())},_note:function(e,n){if("object"!=typeof this.frequency){if(useADSR&&e===lastFrequency&&0===n)return void(this.releaseTrigger=1);0!==n&&(this.frequency=lastFrequency=e),this.releaseTrigger=0}else 0!==n&&(this.frequency[0]=lastFrequency=e),this.releaseTrigger=0,Gibberish.dirty(this);"undefined"!=typeof n&&0!==n&&(this.amp=n),0!==n&&t.run()}});var e=this.waveform;Object.defineProperty(this,"waveform",{get:function(){return e},set:function(t){e!==t&&(e=t,o=(new Gibberish[t]).callback,s=(new Gibberish[t]).callback,a=(new Gibberish[t]).callback)}});var t=new Gibberish.AD(this.attack,this.decay),n=t.getState,i=t.callback,r=(new Gibberish.Filter24).callback,o=new Gibberish[this.waveform](this.frequency,this.amp1).callback,s=new Gibberish[this.waveform](this.frequency2,this.amp2).callback,a=new Gibberish[this.waveform](this.frequency3,this.amp3).callback,u=(new Gibberish.OnePole).callback,c=Gibberish.makePanner(),l=[0,0];this.callback=function(e,t,p,h,f,d,m,b,g,y,v,x,w,G,k,_,j,C,S){if(n()<2){_>=1&&(_=.9999),C=u(C,1-_,_);var A=C;if(G>0)for(var M=0;G>M;M++)A*=2;else if(0>G)for(var M=0;M>G;M--)A/=2;var P=C;if(k>0)for(var M=0;k>M;M++)P*=2;else if(0>k)for(var M=0;M>k;M--)P/=2;A+=x>0?(2*C-C)*x:(C-C/2)*x,P+=w>0?(2*C-C)*w:(C-C/2)*w;var q=o(C,f,y)+s(A,d,y)+a(P,m,y),T=i(e,t),R=r(q,p+b*T,h,g,1)*T;return R*=v,l[0]=l[1]=R,1===S?l:c(R,j,l)}return l[0]=l[1]=0,l},this.init(),this.oscillatorInit(),this.processProperties(arguments)},Gibberish.MonoSynth.prototype=Gibberish._synth,Gibberish.Binops={"export":function(e){Gibberish.export("Binops",e||window)},operator:function(){var e=new Gibberish.ugen,t=arguments[0],n=Array.prototype.slice.call(arguments,1);e.name="op",e.properties={};for(var i=0;i<n.length;i++)e.properties[i]=n[i];return e.init.apply(e,n),e.codegen=function(){var e,n="( ";e=Object.keys(this.properties);for(var i=0;i<e.length;i++){var r="object"==typeof this[i];n+=r?this[i].codegen():this[i],i<e.length-1&&(n+=" "+t+" ")}return n+=" )",this.codeblock=n,n},e.valueOf=function(){return e.codegen()},e},Add:function(){var e=Array.prototype.slice.call(arguments,0);return e.unshift("+"),Gibberish.Binops.operator.apply(null,e)},Sub:function(){var e=Array.prototype.slice.call(arguments,0);return e.unshift("-"),Gibberish.Binops.operator.apply(null,e)},Mul:function(){var e=Array.prototype.slice.call(arguments,0);return e.unshift("*"),Gibberish.Binops.operator.apply(null,e)},Div:function(){var e=Array.prototype.slice.call(arguments,0);return e.unshift("/"),Gibberish.Binops.operator.apply(null,e)},Mod:function(){var e=Array.prototype.slice.call(arguments,0);return e.unshift("%"),Gibberish.Binops.operator.apply(null,e)},Abs:function(){var e=Array.prototype.slice.call(arguments,0),t={name:"abs",properties:{},callback:Math.abs.bind(t)};return t.__proto__=new Gibberish.ugen,t.properties[0]=e[0],t.init(),t},Sqrt:function(){var e=(Array.prototype.slice.call(arguments,0),{name:"sqrt",properties:{},callback:Math.sqrt.bind(e)});return e.__proto__=new Gibberish.ugen,e.properties[i]=arguments[0],e.init(),e},Pow:function(){var e=Array.prototype.slice.call(arguments,0),t={name:"pow",properties:{},callback:Math.pow.bind(t)};t.__proto__=new Gibberish.ugen;for(var n=0;n<e.length;n++)t.properties[n]=e[n];return t.init(),console.log(t.callback),t},Clamp:function(){var e=Array.prototype.slice.call(arguments,0),t={name:"clamp",properties:{input:0,min:0,max:1},callback:function(e,t,n){return t>e?e=t:e>n&&(e=n),e}};return t.__proto__=new Gibberish.ugen,t.init(),t.processProperties(e),t},Merge:function(){var e=Array.prototype.slice.call(arguments,0),t={name:"merge",properties:{},callback:function(e){return e[0]+e[1]}};t.__proto__=new Gibberish.ugen;for(var n=0;n<e.length;n++)t.properties[n]=e[n];return t.init(),t},Map:function(e,t,n,i,r,o,s){var a=Math.pow,u=0,c=0,l={name:"map",properties:{input:e,outputMin:t,outputMax:n,inputMin:i,inputMax:r,curve:o||u,wrap:s||!1},callback:function(e,t,n,i,r,o,s){var u,l=n-t,p=r-i,h=(e-i)/p;return h>1?h=s?h%1:1:0>h&&(h=s?1+h%1:0),u=0===o?t+h*l:t+a(h,1.5)*l,c=u,u},getValue:function(){return c},invert:function(){var e=l.outputMin;l.outputMin=l.outputMax,l.outputMax=e}};return l.__proto__=new Gibberish.ugen,l.init(),l}},Gibberish.Time={bpm:120,"export":function(e){Gibberish.export("Time",e||window)},ms:function(e){return e*Gibberish.context.sampleRate/1e3},seconds:function(e){return e*Gibberish.context.sampleRate},beats:function(e){return function(){var t=Gibberish.context.sampleRate/(Gibberish.Time.bpm/60);return t*e}}},Gibberish.Sequencer2=function(){var e=this,t=0;Gibberish.extend(this,{target:null,key:null,values:null,valuesIndex:0,durations:null,durationsIndex:0,nextTime:0,playOnce:!1,repeatCount:0,repeatTarget:null,isConnected:!0,keysAndValues:null,counts:{},properties:{rate:1,isRunning:!1,nextTime:0},offset:0,name:"seq",callback:function(n,i,r){if(i){if(t>=r){if(null!==e.values){if(e.target){var o=e.values[e.valuesIndex++];"function"==typeof o&&(o=o()),"function"==typeof e.target[e.key]?e.target[e.key](o):e.target[e.key]=o}else"function"==typeof e.values[e.valuesIndex]&&e.values[e.valuesIndex++]();e.valuesIndex>=e.values.length&&(e.valuesIndex=0)}else if(null!==e.keysAndValues)for(var s in e.keysAndValues){var a=e.counts[s]++,o=e.keysAndValues[s][a];"function"==typeof o&&(o=o()),"function"==typeof e.target[s]?e.target[s](o):e.target[s]=o,e.counts[s]>=e.keysAndValues[s].length&&(e.counts[s]=0),e.chose&&e.chose(s,a)}else"function"==typeof e.target[e.key]&&e.target[e.key]();if(t-=r,Array.isArray(e.durations)){var u=e.durations[e.durationsIndex++];e.nextTime="function"==typeof u?u():u,e.chose&&e.chose("durations",e.durationsIndex-1),e.durationsIndex>=e.durations.length&&(e.durationsIndex=0)}else{var u=e.durations;e.nextTime="function"==typeof u?u():u}return e.repeatTarget&&(e.repeatCount++,e.repeatCount===e.repeatTarget&&(e.isRunning=!1,e.repeatCount=0)),0}t+=n}return 0},start:function(e){return e||(t=0),this.isRunning=!0,this},stop:function(){return this.isRunning=!1,this},repeat:function(e){return this.repeatTarget=e,this},shuffle:function(){for(n in this.keysAndValues)this.shuffleArray(this.keysAndValues[n])},shuffleArray:function(e){for(var t,n,i=e.length;i;t=parseInt(Math.random()*i),n=e[--i],e[i]=e[t],e[t]=n);}}),this.init(arguments),this.processProperties(arguments);for(var n in this.keysAndValues)this.counts[n]=0;this.oscillatorInit(),t+=this.offset,this.connect()},Gibberish.Sequencer2.prototype=Gibberish._oscillator,Gibberish.Sequencer=function(){Gibberish.extend(this,{target:null,key:null,values:null,valuesIndex:0,durations:null,durationsIndex:0,nextTime:0,phase:0,isRunning:!1,playOnce:!1,repeatCount:0,repeatTarget:null,isConnected:!0,keysAndValues:null,counts:{},offset:0,name:"seq",tick:function(){if(this.isRunning){if(this.phase>=this.nextTime){if(null!==this.values){if(this.target){var e=this.values[this.valuesIndex++];if("function"==typeof e)try{e=e()}catch(t){console.error("ERROR: Can't execute function triggered by Sequencer:\n"+e.toString()),this.values.splice(this.valuesIndex-1,1),this.valuesIndex--}"function"==typeof this.target[this.key]?this.target[this.key](e):this.target[this.key]=e}else if("function"==typeof this.values[this.valuesIndex])try{this.values[this.valuesIndex++]()}catch(t){console.error("ERROR: Can't execute function triggered by Sequencer:\n"+this.values[this.valuesIndex-1].toString()),this.values.splice(this.valuesIndex-1,1),this.valuesIndex--}this.valuesIndex>=this.values.length&&(this.valuesIndex=0)}else if(null!==this.keysAndValues)for(var n in this.keysAndValues){var i="function"==typeof this.keysAndValues[n].pick?this.keysAndValues[n].pick():this.counts[n]++,e=this.keysAndValues[n][i];if("function"==typeof e)try{e=e()}catch(t){console.error("ERROR: Can't execute function triggered by Sequencer:\n"+e.toString()),this.keysAndValues[n].splice(i,1),"function"!=typeof this.keysAndValues[n].pick&&this.counts[n]--}"function"==typeof this.target[n]?this.target[n](e):this.target[n]=e,this.counts[n]>=this.keysAndValues[n].length&&(this.counts[n]=0)}else"function"==typeof this.target[this.key]&&this.target[this.key]();if(this.phase-=this.nextTime,Array.isArray(this.durations)){var r="function"==typeof this.durations.pick?this.durations[this.durations.pick()]:this.durations[this.durationsIndex++];this.nextTime="function"==typeof r?r():r,this.durationsIndex>=this.durations.length&&(this.durationsIndex=0)}else{var r=this.durations;this.nextTime="function"==typeof r?r():r}return void(this.repeatTarget&&(this.repeatCount++,this.repeatCount===this.repeatTarget&&(this.isRunning=!1,this.repeatCount=0)))}this.phase++}},start:function(e){return e||(this.phase=this.offset),this.isRunning=!0,this},stop:function(){return this.isRunning=!1,this},repeat:function(e){return this.repeatTarget=e,this},shuffle:function(){for(e in this.keysAndValues)this.shuffleArray(this.keysAndValues[e])},shuffleArray:function(e){for(var t,n,i=e.length;i;t=parseInt(Math.random()*i),n=e[--i],e[i]=e[t],e[t]=n);},disconnect:function(){var e=Gibberish.sequencers.indexOf(this);Gibberish.sequencers.splice(e,1),this.isConnected=!1},connect:function(){return-1===Gibberish.sequencers.indexOf(this)&&Gibberish.sequencers.push(this),this.isConnected=!0,this}});for(var e in arguments[0])this[e]=arguments[0][e];for(var e in this.keysAndValues)this.counts[e]=0;this.connect(),this.phase+=this.offset},Gibberish.Sequencer.prototype=Gibberish._oscillator,Gibberish.PolySeq=function(){var e=this,t=0,n=function(e,t){return t>e?-1:e>t?1:0};Gibberish.extend(this,{seqs:[],timeline:{},playOnce:!1,repeatCount:0,repeatTarget:null,isConnected:!1,properties:{rate:1,isRunning:!1,nextTime:0},offset:0,autofire:[],name:"polyseq",getPhase:function(){return t},timeModifier:null,add:function(n){n.valuesIndex=n.durationsIndex=0,e.seqs.push(n),null===n.durations&&e.autofire.push(n),"undefined"!=typeof e.timeline[t]?n.priority?e.timeline[t].unshift(n):e.timeline[t].push(n):e.timeline[t]=[n],!e.scale||"frequency"!==n.key&&"note"!==n.key||e.applyScale&&e.applyScale(),e.nextTime=t,n.shouldStop=!1},callback:function(i,r,o){var s;if(r){if(t>=o){var a=e.timeline[o],u=t-o;if("undefined"==typeof a)return;e.autofire.length&&(a=a.concat(e.autofire));for(var c=0;c<a.length;c++){var l=a[c];if(!l.shouldStop){var p=l.values.pick?l.values.pick():l.valuesIndex++%l.values.length,h=l.values[p];if("function"==typeof h&&(h=h()),l.target&&("function"==typeof l.target[l.key]?l.target[l.key](h):l.target[l.key]=h),e.chose&&e.chose(l.key,p),null!==l.durations){if(Array.isArray(l.durations)){var p=l.durations.pick?l.durations.pick():l.durationsIndex++,f=l.durations[p];s="function"==typeof f?f():f,l.durationsIndex>=l.durations.length&&(l.durationsIndex=0),e.chose&&e.chose("durations",p)}else{var f=l.durations;s="function"==typeof f?f():f}var d;d=null!==e.timeModifier?e.timeModifier(s)+t:s+t,d-=u,s-=u,"undefined"==typeof e.timeline[d]?e.timeline[d]=[l]:l.priority?e.timeline[d].unshift(l):e.timeline[d].push(l)}}}delete e.timeline[o];var m=Object.keys(e.timeline),b=m.length;if(b>1){for(var g=0;b>g;g++)m[g]=parseFloat(m[g]);m=m.sort(n),e.nextTime=m[0]}else e.nextTime=parseFloat(m[0])}t+=i}return 0},start:function(e,n){if(e&&this.offset){t=0,this.nextTime=this.offset;var i=""+this.offset;this.timeline={},this.timeline[i]=[];for(var r=0;r<this.seqs.length;r++){var o=this.seqs[r];o.valuesIndex=o.durationsIndex=o.shouldStop=0,this.timeline[i].push(o)}}else{t=0,this.nextTime=0,this.timeline={0:[]};for(var r=0;r<this.seqs.length;r++){var o=this.seqs[r];o.valuesIndex=o.durationsIndex=o.shouldStop=0,this.timeline[0].push(o)}}return this.isConnected||(this.connect(Gibberish.Master,n),this.isConnected=!0),this.isRunning=!0,this},stop:function(){return this.isRunning=!1,this.isConnected&&(this.disconnect(),this.isConnected=!1),this},repeat:function(e){return this.repeatTarget=e,this},shuffle:function(e){if("undefined"!=typeof e)for(var t=0;t<this.seqs.length;t++)this.seqs[t].key===e&&this.shuffleArray(this.seqs[t].values);else for(var t=0;t<this.seqs.length;t++)this.shuffleArray(this.seqs[t].values)},shuffleArray:function(e){for(var t,n,i=e.length;i;t=parseInt(Math.random()*i),n=e[--i],e[i]=e[t],e[t]=n);}}),this.init(arguments),this.processProperties(arguments),this.oscillatorInit()},Gibberish.PolySeq.prototype=Gibberish._oscillator;var _hasInput=!1;return Gibberish.Input=function(){var e=[];_hasInput||createInput(),this.type=this.name="input",this.fx=new Array2,this.fx.parent=this,this.properties={input:"input",amp:.5,channels:1},this.callback=function(t,n,i){return 1===i?e=t*n:(e[0]=t[0]*n,e[1]=t[1]*n),e},this.init(arguments),this.processProperties(arguments)},Gibberish.Input.prototype=new Gibberish.ugen,Gibberish.Kick=function(){var e=!1,t=(new Gibberish.SVF).callback,n=(new Gibberish.SVF).callback,i=.2,r=.8;Gibberish.extend(this,{name:"kick",properties:{pitch:50,__decay:20,__tone:1e3,amp:2,sr:Gibberish.context.sampleRate},callback:function(i,r,o,s,a){var u=e?60:0;return u=t(u,i,r,2,a),u=n(u,o,.5,0,a),u*=s,e=!1,u},note:function(t,n,i,r){"number"==typeof t&&(this.pitch=t),"number"==typeof n&&(this.decay=n),"number"==typeof i&&(this.tone=i),"number"==typeof r&&(this.amp=r),e=!0}}).init().oscillatorInit(),Object.defineProperties(this,{decay:{get:function(){return i},set:function(e){i=e>1?1:e,this.__decay=100*i}},tone:{get:function(){return r},set:function(e){r=e>1?1:e,this.__tone=220+1400*e}}}),this.processProperties(arguments)},Gibberish.Kick.prototype=Gibberish._oscillator,Gibberish.Conga=function(){var e=!1,t=(new Gibberish.SVF).callback;Gibberish.extend(this,{name:"conga",properties:{pitch:190,amp:2,sr:Gibberish.context.sampleRate},callback:function(n,i,r){var o=e?60:0;return o=t(o,n,50,2,r),o*=i,e=!1,o},note:function(t,n){"number"==typeof t&&(this.pitch=t),"number"==typeof n&&(this.amp=n),e=!0}}).init().oscillatorInit(),this.processProperties(arguments)},Gibberish.Conga.prototype=Gibberish._oscillator,Gibberish.Clave=function(){var e=!1,t=new Gibberish.SVF,n=t.callback;Gibberish.extend(this,{name:"clave",properties:{pitch:2500,amp:1,sr:Gibberish.context.sampleRate},callback:function(t,i,r){var o=e?2:0;return o=n(o,t,5,2,r),o*=i,e=!1,o},note:function(t,n){"number"==typeof t&&(this.pitch=t),"number"==typeof n&&(this.amp=n),e=!0}}).init().oscillatorInit(),this.bpf=t,this.processProperties(arguments)},Gibberish.Clave.prototype=Gibberish._oscillator,Gibberish.Tom=function(){var e=!1,t=(new Gibberish.SVF).callback,n=(new Gibberish.SVF).callback,i=new Gibberish.ExponentialDecay,r=i.callback,o=Math.random;Gibberish.extend(this,{name:"tom",properties:{pitch:80,amp:.5,sr:Gibberish.context.sampleRate},callback:function(i,s,a){var u,c=e?60:0;return c=t(c,i,30,2,a),u=16*o()-8,u=u>0?u:0,u*=r(.05,11025),u=n(u,120,.5,0,a),c+=u,c*=s,e=!1,c},note:function(t,n){"number"==typeof t&&(this.pitch=t),"number"==typeof n&&(this.amp=n),i.trigger(),e=!0}}).init().oscillatorInit(),i.trigger(1),this.processProperties(arguments)},Gibberish.Tom.prototype=Gibberish._oscillator,Gibberish.Cowbell=function(){var e=new Gibberish.Square,t=new Gibberish.Square,n=e.callback,i=t.callback,r=new Gibberish.SVF({mode:2}),o=r.callback,s=new Gibberish.ExponentialDecay(.0025,10500),a=s.callback;Gibberish.extend(this,{name:"cowbell",properties:{amp:1,pitch:560,bpfFreq:1e3,bpfRez:3,decay:22050,decayCoeff:1e-4,sr:Gibberish.context.sampleRate},callback:function(e,t,r,s,u,c,l){var p;return p=n(t,1,1,0),p+=i(845,1,1,0),p=o(p,r,s,2,l),p*=a(c,u),p*=e},note:function(e){s.trigger(),e&&(this.decay=e)}}).init().oscillatorInit().processProperties(arguments),this.bpf=r,this.eg=s,s.trigger(1)},Gibberish.Cowbell.prototype=Gibberish._oscillator,Gibberish.Snare=function(){var e=(new Gibberish.SVF).callback,t=(new Gibberish.SVF).callback,n=(new Gibberish.SVF).callback,i=new Gibberish.ExponentialDecay(.0025,11025),r=i.callback,o=Math.random,s=0;Gibberish.extend(this,{name:"snare",properties:{cutoff:1e3,decay:11025,tune:0,snappy:.5,amp:1,sr:Gibberish.context.sampleRate},callback:function(i,a,u,c,l,p){var h,f,d=0,m=0;return d=r(.0025,a),d>.005&&(m=(2*o()-1)*d,m=n(m,i+1e3*u,.5,1,p),m*=c,m=m>0?m:0,s=d,h=e(s,180*(u+1),15,2,p),f=t(s,330*(u+1),15,2,p),m+=h,m+=.8*f,m*=l),m},note:function(e,t,n,r){"number"==typeof e&&(this.tune=e),"number"==typeof r&&(this.cutoff=r),"number"==typeof n&&(this.snappy=n),"number"==typeof t&&(this.amp=t),i.trigger()}}).init().oscillatorInit().processProperties(arguments),i.trigger(1)},Gibberish.Snare.prototype=Gibberish._oscillator,Gibberish.Hat=function(){var e=new Gibberish.Square,t=new Gibberish.Square,n=new Gibberish.Square,i=new Gibberish.Square,r=new Gibberish.Square,o=new Gibberish.Square,s=e.callback,a=t.callback,u=n.callback,c=i.callback,l=r.callback,p=o.callback,h=new Gibberish.SVF({mode:2}),f=h.callback,d=new Gibberish.Filter24,m=d.callback,b=new Gibberish.ExponentialDecay(.0025,10500),g=b.callback,y=new Gibberish.ExponentialDecay(.1,7500);y.callback,Gibberish.extend(this,{name:"hat",properties:{amp:1,pitch:325,bpfFreq:7e3,bpfRez:2,hpfFreq:.975,hpfRez:0,decay:3500,decay2:3e3,sr:Gibberish.context.sampleRate},callback:function(e,t,n,i,r,o,h,d,b){var y;return y=s(t,1,.5,0),y+=a(1.4471*t,.75,1,0),y+=u(1.617*t,1,1,0),y+=c(1.9265*t,1,1,0),y+=l(2.5028*t,1,1,0),y+=p(2.6637*t,.75,1,0),y=f(y,n,i,2,b),y*=g(.001,h),y=m(y,r,o,0,1),y*=e},note:function(e,t){b.trigger(),y.trigger(),e&&(this.decay=e),t&&(this.decay2=t)}}).init().oscillatorInit().processProperties(arguments),this.bpf=h,this.hpf=d,b.trigger(1),y.trigger(1)},Gibberish.Hat.prototype=Gibberish._oscillator,Gibberish})},{}],2:[function(e,t){!function(){function e(e,t){return e=s[e],t=s[t],e.distance>t.distance?t.distance+12-e.distance:t.distance-e.distance}function n(e,t,n){for(;n>0;n--)e+=t;return e}function i(e,t){if("string"!=typeof e)return null;
this.name=e,this.duration=t||4,this.accidental={value:0,sign:""};var n=e.match(/^([abcdefgh])(x|#|bb|b?)(-?\d*)/i);if(n&&e===n[0]&&0!==n[3].length)this.name=n[1].toLowerCase(),this.octave=parseFloat(n[3]),0!==n[2].length&&(this.accidental.sign=n[2].toLowerCase(),this.accidental.value=y[n[2]]);else{e=e.replace(/\u2032/g,"'").replace(/\u0375/g,",");var i=e.match(/^(,*)([abcdefgh])(x|#|bb|b?)([,\']*)$/i);if(!i||5!==i.length||e!==i[0])throw Error("Invalid note format");if(""===i[1]&&""===i[4])this.octave=i[2]===i[2].toLowerCase()?3:2;else if(""!==i[1]&&""===i[4]){if(i[2]===i[2].toLowerCase())throw Error("Invalid note format. Format must respect the Helmholtz notation.");this.octave=2-i[1].length}else{if(""!==i[1]||""===i[4])throw Error("Invalid note format");if(i[4].match(/^'+$/)){if(i[2]===i[2].toUpperCase())throw Error("Invalid note format. Format must respect the Helmholtz notation");this.octave=3+i[4].length}else{if(!i[4].match(/^,+$/))throw Error("Invalid characters after note name.");if(i[2]===i[2].toLowerCase())throw Error("Invalid note format. Format must respect the Helmholtz notation");this.octave=2-i[4].length}}this.name=i[2].toLowerCase(),0!==i[3].length&&(this.accidental.sign=i[3].toLowerCase(),this.accidental.value=y[i[3]])}}function r(e,t){if(!(e instanceof i))return null;t=t||"",this.name=e.name.toUpperCase()+e.accidental.sign+t,this.root=e,this.notes=[e],this.quality="major",this.type="major";var n,r,s,a,u,c=[],l=!1,h="quality",f=!1,d=!1,b=null;for(a=0,u=t.length;u>a;a++){for(n=t[a];" "===n||"("===n||")"===n;)n=t[++a];if(!n)break;if(r=n.charCodeAt(0),s=u>=a+3?t.substr(a,3):"","quality"===h)"M"===n||("maj"===s||916===r?(this.type="major",c.push("M7"),l=!0,(t[a+3]&&"7"===t[a+3]||916===r&&"7"===t[a+1])&&a++):"m"===n||"-"===n||"min"===s?this.quality=this.type="minor":111===r||176===r||"dim"===s?(this.quality="minor",this.type="diminished"):"+"===n||"aug"===s?(this.quality="major",this.type="augmented"):216===r||248===r?(this.quality="minor",this.type="diminished",c.push("m7"),l=!0):"sus"===s?(this.quality="sus",this.type=t[a+3]&&"2"===t[a+3]?"sus2":"sus4"):"5"===n?(this.quality="power",this.type="power"):a-=1),s in p&&(a+=2),h="";else if("#"===n)f=!0;else if("b"===n)d=!0;else if("5"===n)f?(b="A5","major"===this.quality&&(this.type="augmented")):d&&(b="d5","minor"===this.quality&&(this.type="diminished")),d=f=!1;else if("6"===n)c.push("M6"),d=f=!1;else if("7"===n)c.push("diminished"===this.type?"d7":"m7"),l=!0,d=f=!1;else if("9"===n)l||c.push("m7"),c.push(d?"m9":f?"A9":"M9"),d=f=!1;else{if("1"!==n)throw Error("Unexpected character: '"+n+"' in chord name");n=t[++a],"1"===n?c.push(d?"d11":f?"A11":"P11"):"3"===n&&c.push(d?"m13":f?"A13":"M13"),d=f=!1}}for(var g=0,y=m[this.type].length;y>g;g++)this.notes.push("5"===m[this.type][g][1]&&b?o.interval(this.root,b):o.interval(this.root,m[this.type][g]));for(g=0,y=c.length;y>g;g++)this.notes.push(o.interval(this.root,c[g]))}var o={},s={c:{name:"c",distance:0,index:0},d:{name:"d",distance:2,index:1},e:{name:"e",distance:4,index:2},f:{name:"f",distance:5,index:3},g:{name:"g",distance:7,index:4},a:{name:"a",distance:9,index:5},b:{name:"b",distance:11,index:6},h:{name:"h",distance:11,index:6}},a=["c","d","e","f","g","a","b"],u={.25:"longa",.5:"breve",1:"whole",2:"half",4:"quarter",8:"eighth",16:"sixteenth",32:"thirty-second",64:"sixty-fourth",128:"hundred-twenty-eighth"},c=[{name:"unison",quality:"perfect",size:0},{name:"second",quality:"minor",size:1},{name:"third",quality:"minor",size:3},{name:"fourth",quality:"perfect",size:5},{name:"fifth",quality:"perfect",size:7},{name:"sixth",quality:"minor",size:8},{name:"seventh",quality:"minor",size:10},{name:"octave",quality:"perfect",size:12},{name:"ninth",quality:"minor",size:13},{name:"tenth",quality:"minor",size:15},{name:"eleventh",quality:"perfect",size:17},{name:"twelfth",quality:"perfect",size:19},{name:"thirteenth",quality:"minor",size:20},{name:"fourteenth",quality:"minor",size:22},{name:"fifteenth",quality:"perfect",size:24}],l={unison:0,second:1,third:2,fourth:3,fifth:4,sixth:5,seventh:6,octave:7,ninth:8,tenth:9,eleventh:10,twelfth:11,thirteenth:12,fourteenth:13,fifteenth:14},p={P:"perfect",M:"major",m:"minor",A:"augmented",d:"diminished",perf:"perfect",maj:"major",min:"minor",aug:"augmented",dim:"diminished"},h={perfect:"P",major:"M",minor:"m",augmented:"A",diminished:"d"},f={P:"P",M:"m",m:"M",A:"d",d:"A"},d={perfect:["diminished","perfect","augmented"],minor:["diminished","minor","major","augmented"]},m={major:["M3","P5"],minor:["m3","P5"],augmented:["M3","A5"],diminished:["m3","d5"],sus2:["M2","P5"],sus4:["P4","P5"],power:["P5"]},b={major:"M",minor:"m",augmented:"aug",diminished:"dim",power:"5"},g={"-2":"bb","-1":"b",0:"",1:"#",2:"x"},y={bb:-2,b:-1,"#":1,x:2};i.prototype={key:function(e){return e?7*(this.octave-1)+3+Math.ceil(s[this.name].distance/2):12*(this.octave-1)+4+s[this.name].distance+this.accidental.value},fq:function(e){return e=e||440,e*Math.pow(2,(this.key()-49)/12)},scale:function(e,t){return o.scale.list(this,e,t)},interval:function(e,t){return o.interval(this,e,t)},chord:function(e){return e=e||"major",e in b&&(e=b[e]),new r(this,e)},helmholtz:function(){var e,t=3>this.octave?this.name.toUpperCase():this.name.toLowerCase();return 2>=this.octave?(e=n("",",",2-this.octave),e+t+this.accidental.sign):(e=n("","'",this.octave-3),t+this.accidental.sign+e)},scientific:function(){return this.name.toUpperCase()+this.accidental.sign+("number"==typeof this.octave?this.octave:"")},enharmonics:function(){var e=[],t=this.key(),n=this.interval("m2","up"),i=this.interval("m2","down"),r=n.key()-n.accidental.value,o=i.key()-i.accidental.value,s=t-r;return 3>s&&s>-3&&(n.accidental={value:s,sign:g[s]},e.push(n)),s=t-o,3>s&&s>-3&&(i.accidental={value:s,sign:g[s]},e.push(i)),e},valueName:function(){return u[this.duration]},toString:function(e){return e="boolean"==typeof e?e:"number"==typeof this.octave?!1:!0,this.name.toLowerCase()+this.accidental.sign+(e?"":this.octave)}},r.prototype.dominant=function(e){return e=e||"",new r(this.root.interval("P5"),e)},r.prototype.subdominant=function(e){return e=e||"",new r(this.root.interval("P4"),e)},r.prototype.parallel=function(e){if(e=e||"","triad"!==this.chordType()||"diminished"===this.quality||"augmented"===this.quality)throw Error("Only major/minor triads have parallel chords");return"major"===this.quality?new r(this.root.interval("m3","down"),"m"):new r(this.root.interval("m3","up"))},r.prototype.chordType=function(){var e,t,n;if(2===this.notes.length)return"dyad";if(3===this.notes.length){t={unison:!1,third:!1,fifth:!1};for(var i=0,r=this.notes.length;r>i;i++)e=this.root.interval(this.notes[i]),n=c[parseFloat(o.interval.invert(e.simple)[1])-1],e.name in t?t[e.name]=!0:n.name in t&&(t[n.name]=!0);return t.unison&&t.third&&t.fifth?"triad":"trichord"}if(4===this.notes.length){t={unison:!1,third:!1,fifth:!1,seventh:!1};for(var i=0,r=this.notes.length;r>i;i++)e=this.root.interval(this.notes[i]),n=c[parseFloat(o.interval.invert(e.simple)[1])-1],e.name in t?t[e.name]=!0:n.name in t&&(t[n.name]=!0);if(t.unison&&t.third&&t.fifth&&t.seventh)return"tetrad"}return"unknown"},r.prototype.toString=function(){return this.name},o.note=function(e,t){return new i(e,t)},o.note.fromKey=function(e){var t=440*Math.pow(2,(e-49)/12);return o.frequency.note(t).note},o.chord=function(e){var t;if(t=e.match(/^([abcdefgh])(x|#|bb|b?)/i),t&&t[0])return new r(new i(t[0].toLowerCase()),e.substr(t[0].length));throw Error("Invalid Chord. Couldn't find note name")},o.frequency={note:function(e,t){t=t||440;var n,r,o,u,c,l,p;return n=Math.round(49+12*((Math.log(e)-Math.log(t))/Math.log(2))),p=t*Math.pow(2,(n-49)/12),l=1200*(Math.log(e/p)/Math.log(2)),r=Math.floor((n-4)/12),o=n-12*r-4,u=s[a[Math.round(o/2)]],c=u.name,o>u.distance?c+="#":u.distance>o&&(c+="b"),{note:new i(c+(r+1)),cents:l}}},o.interval=function(e,t,n){if("string"==typeof t){"down"===n&&(t=o.interval.invert(t));var r=p[t[0]],s=parseFloat(t.substr(1));if(!r||isNaN(s)||1>s)throw Error("Invalid string-interval format");return o.interval.from(e,{quality:r,interval:c[s-1].name},n)}if(t instanceof i&&e instanceof i)return o.interval.between(e,t);throw Error("Invalid parameters")},o.interval.from=function(t,n,r){n.direction=r||n.direction||"up";var o,u,p,h,f,m;if(f=l[n.interval],m=c[f],f>7&&(f-=7),f=s[t.name].index+f,f>a.length-1&&(f-=a.length),o=a[f],-1===d[m.quality].indexOf(n.quality)||-1===d[m.quality].indexOf(m.quality))throw Error("Invalid interval quality");return u=d[m.quality].indexOf(n.quality)-d[m.quality].indexOf(m.quality),p=m.size+u-e(t.name,o),t.octave&&(h=Math.floor((t.key()-t.accidental.value+e(t.name,o)-4)/12)+1+Math.floor(l[n.interval]/7)),p+=t.accidental.value,p>=11&&(p-=12),p>-3&&3>p&&(o+=g[p]),"down"===r&&h--,new i(o+(h||""))},o.interval.between=function(e,t){var n,i,r,o,a,u,l=e.key(),p=t.key();if(n=p-l,n>24||-25>n)throw Error("Too big interval. Highest interval is a augmented fifteenth (25 semitones)");return 0>n&&(o=e,e=t,t=o),r=s[t.name].index-s[e.name].index+7*(t.octave-e.octave),i=c[r],u=d[i.quality][Math.abs(n)-i.size+1],a=h[u]+(""+Number(r+1)),{name:i.name,quality:u,direction:n>0?"up":"down",simple:a}},o.interval.invert=function(e){if(2!==e.length&&3!==e.length)return!1;var t=f[e[0]],n=parseFloat(2===e.length?e[1]:e.substr(1));return n>8&&(n-=7),8!==n&&1!==n&&(n=9-n),t+(""+n)},o.scale={list:function(e,t,n){var r,s,a=[],u=[];if(!(e instanceof i))return!1;if("string"==typeof t&&(t=o.scale.scales[t],!t))return!1;for(a.push(e),n&&u.push(e.name+(e.accidental.sign||"")),r=0,s=t.length;s>r;r++)a.push(o.interval(e,t[r])),n&&u.push(a[r+1].name+(a[r+1].accidental.sign||""));return n?u:a},scales:{major:["M2","M3","P4","P5","M6","M7"],ionian:["M2","M3","P4","P5","M6","M7"],dorian:["M2","m3","P4","P5","M6","m7"],phrygian:["m2","m3","P4","P5","m6","m7"],lydian:["M2","M3","A4","P5","M6","M7"],mixolydian:["M2","M3","P4","P5","M6","m7"],minor:["M2","m3","P4","P5","m6","m7"],aeolian:["M2","m3","P4","P5","m6","m7"],locrian:["m2","m3","P4","d5","m6","m7"],majorpentatonic:["M2","M3","P5","M6"],minorpentatonic:["m3","P4","P5","m7"],chromatic:["m2","M2","m3","M3","P4","A4","P5","m6","M6","m7","M7"],harmonicchromatic:["m2","M2","m3","M3","P4","A4","P5","m6","M6","m7","M7"]}},t.exports=o}()},{}],3:[function(e,t){!function(){"use strict";var n,i,r={value:{min:0,max:255,output:u,wrap:!1,timescale:"graphics"}},o=e("gibberish-dsp"),s=e("../dollar"),a=e("../mappings").outputCurves,u=(a.LINEAR,a.LOGARITHMIC),c={FFT:function(e,t){if("undefined"==typeof n){n=o.context.createAnalyser(),o.node.connect(n),n.fftSize=e||32,n.updateRate=t||40,n.values=new Uint8Array(n.frequencyBinCount),n.children=[];for(var a=0;a<n.frequencyBinCount;a++)!function(){var e=a,t={},o=0;Object.defineProperties(t,{value:{configurable:!0,get:function(){return o},set:function(e){o=e}}}),i.createProxyProperties(t,s.extend({},r),!1),n[e]=t,n.children.push(t),t.type="mapping",t.index=e,t.min=0,t.max=255,t.valueOf=function(){return this.value()}}();setInterval(function(){n.getByteFrequencyData(n.values);for(var e=0;e<n.values.length;e++)n[e].value=n.values[e]},n.updateRate)}else e&&(n.fftSize=e),t&&(n.updateRate=t);return n},Follow:function(e,t){var n=new o.Follow(e,t),r={value:{min:0,max:1,output:u,timescale:"audio"}};return i.createProxyProperties(n,r),n}};t.exports=function(e){return"undefined"==typeof i&&(i=e),c}}()},{"../dollar":16,"../mappings":18,"gibberish-dsp":1}],4:[function(e,t){!function(){var n,i,r=e("../../external/teoria.min"),o=e("../dollar"),s=e("../seq");i=function(e,t,i,a,u){var c=s();o.extend(c,{name:"Arp",notes:[],pattern:i||"up",notation:e||"C4m7",mult:a||1,init:!1,speed:isNaN(t)?_4:t,scale:u||null,chord:function(e){var t=[];if(this.notation=e,"undefined"==typeof this.scale||null===this.scale&&"string"==typeof e){console.log("redoing notes...");for(var n=0;n<this.mult;n++){var i,o,s=[],a=this.notation.slice(0,1);isNaN(this.notation.charAt(1))?(a+=this.notation.charAt(1),i=parseInt(this.notation.slice(2,3)),o=this.notation.slice(3)):(i=parseInt(this.notation.slice(1,2)),o=this.notation.slice(2)),i+=n;for(var e=r.note(a+i).chord(o),u=0;u<e.notes.length;u++){var c=e.notes[u].fq();s[u]=c}t=t.concat(s)}}else for(var n=0;n<this.mult;n++){for(var s=[],u=0;u<this.notation.length;u++)s[u]=this.notation[u]+7*n;t=t.concat(s)}this.notes=this.patterns[this.pattern](t),this.seqs[0]&&(this.seqs[0].values=this.notes)},set:function(e,t,n,i,r){this.speed=t||this.speed,this.pattern=n||this.pattern,this.mult=i||this.mult,this.chord(e,r)},patterns:{up:function(e){return e},down:function(e){return e.reverse()},updown:function(e){var t=e.slice(0);return t.reverse(),e.concat(t)},updown2:function(e){var t=e.slice(0);return t.pop(),t.reverse(),t.pop(),e.concat(t)}}}),c.seq=c,c.__shuffle=c.shuffle,c.shuffle=function(){c.__shuffle()},n.createProxyMethods(c,["shuffle","reset","chord"]),c.chord(c.notation);var l=null;Object.defineProperty(c,"target",{get:function(){return l},set:function(e){l=e;var i={key:"note",target:l,values:c.notes,durations:n.Clock.time(t)};c.add(i),c.start()}});var p=t;return Object.defineProperty(c,"speed",{get:function(){return p},set:function(e){p=e;for(var t=0;t<c.seqs.length;t++)c.seqs[0].durations=n.Clock.time(p)}}),c},t.exports=function(e){return"undefined"==typeof n&&(n=e),i}}()},{"../../external/teoria.min":2,"../dollar":16,"../seq":19}],5:[function(e,t){!function(){"use strict";var n,i={},r=e("gibberish-dsp"),o=e("../mappings").outputCurves,s=o.LINEAR,a=o.LOGARITHMIC,u={amp:{min:0,max:1,hardMax:2,output:a,timescale:"audio",dimensions:1},out:{min:0,max:1,output:s,timescale:"audio",dimensions:1}},c="Input";i=function(){var e=(new r.Input).connect(n.Master),t=Array.prototype.slice.call(arguments,0);return e.type="Gen",$.extend(!0,e,n.ugen),e.fx.ugen=e,Object.defineProperty(e,"_",{get:function(){return e.kill(),e},set:function(){}}),n.createProxyProperties(e,u),n.processArguments2(e,t,c),e.toString=function(){return"> "+c},e},t.exports=function(e){return"undefined"==typeof n&&(n=e),i}}()},{"../mappings":18,"gibberish-dsp":1}],6:[function(e,t){!function(){"use strict";for(var n,i=e("../dollar"),r=e("gibberish-dsp"),o=e("../mappings").outputCurves,s=o.LINEAR,a=(o.LOGARITHMIC,[["Bus2","Bus"]]),u={amp:{min:0,max:1,output:s,timescale:"audio"},pan:{min:-.75,max:.75,output:s,timescale:"audio"},out:{min:0,max:1,output:s,timescale:"audio",dimensions:1}},c=!1,l={mappingProperties:u,Presets:{}},p=0;p<a.length;p++)!function(){var e=Array.isArray(a[p])?a[p][0]:a[p],t=Array.isArray(a[p])?a[p][1]:a[p];l[t]=function(){var o=n.processArguments(arguments,t);return Array.isArray(o)?(o.unshift(0),o=n.construct(r[e],o)):o=new r[e](o),c?o.connect(Master):c=!0,o.type="Gen",Object.defineProperty(o,"_",{get:function(){return o.kill(),o},set:function(){}}),i.extend(!0,o,n.ugen),o.fx.ugen=o,n.createProxyProperties(o,u),o}}();l.Group=function(){var e=n.processArguments(arguments,"Bus2");e=new r.Bus2,c?e.connect(Master):c=!0,e.type="FX",i.extend(!0,e,n.ugen),e.fx.ugen=e,n.createProxyProperties(e,u),i.extend(e,{add:function(){for(var t=0;t<arguments.length;t++)arguments[t].disconnect(),arguments[t].connect(e)},remove:function(){for(var t=0;t<arguments.length;t++)arguments[t].disconnect(e)},free:function(){for(var t=0;t<arguments.length;t++)arguments[t].disconnect(e),arguments[t].connect()}});for(var t=0;t<arguments.length;t++)e.add(arguments[t]);return e},t.exports=function(e){return"undefined"==typeof n&&(n=e),l}}()},{"../dollar":16,"../mappings":18,"gibberish-dsp":1}],7:[function(_dereq_,module,exports){!function(){"use strict";for(var Percussion={Presets:{}},Gibberish=_dereq_("gibberish-dsp"),Gibber,$=_dereq_("../dollar"),Clock=_dereq_("../clock"),curves=_dereq_("../mappings").outputCurves,LINEAR=curves.LINEAR,LOGARITHMIC=curves.LOGARITHMIC,types=["Kick","Snare","Hat","Conga","Cowbell","Clave","Tom"],_mappingProperties={Drums:{pitch:{min:.25,max:4,output:LINEAR,timescale:"audio"},amp:{min:0,max:1,output:LOGARITHMIC,timescale:"audio"},pan:{min:0,max:1,output:LINEAR,timescale:"audio"},out:{min:0,max:1,output:LINEAR,timescale:"audio",dimensions:1}},XOX:{amp:{min:0,max:1,output:LOGARITHMIC,timescale:"audio"},pan:{min:0,max:1,output:LINEAR,timescale:"audio"},out:{min:0,max:1,output:LINEAR,timescale:"audio",dimensions:1}},Kick:{amp:{min:0,max:1,output:LOGARITHMIC,timescale:"audio"},out:{min:0,max:1,output:LINEAR,timescale:"audio",dimensions:1}},Snare:{amp:{min:0,max:1,output:LOGARITHMIC,timescale:"audio"},snappy:{min:.25,max:1.5,output:LOGARITHMIC,timescale:"audio"},tune:{min:0,max:2,output:LOGARITHMIC,timescale:"audio"},out:{min:0,max:1,output:LINEAR,timescale:"audio",dimensions:1}},Hat:{amp:{min:0,max:1,output:LOGARITHMIC,timescale:"audio"},out:{min:0,max:1,output:LINEAR,timescale:"audio",dimensions:1}},Conga:{amp:{min:0,max:1,output:LOGARITHMIC,timescale:"audio"},out:{min:0,max:1,output:LINEAR,timescale:"audio",dimensions:1}},Cowbell:{out:{min:0,max:1,output:LINEAR,timescale:"audio",dimensions:1},amp:{min:0,max:1,output:LOGARITHMIC,timescale:"audio"}},Clave:{out:{min:0,max:1,output:LINEAR,timescale:"audio",dimensions:1},amp:{min:0,max:1,output:LOGARITHMIC,timescale:"audio"}},Tom:{out:{min:0,max:1,output:LINEAR,timescale:"audio",dimensions:1},amp:{min:0,max:1,output:LOGARITHMIC,timescale:"audio"}}},i=0;i<types.length;i++)!function(){var e=Array.isArray(types[i])?types[i][0]:types[i],t=Array.isArray(types[i])?types[i][1]:types[i];Percussion[t]=function(){var n,i=Array.prototype.slice.call(arguments);return"object"==typeof i[0]&&"undefined"==typeof i[0].maxVoices?i[0].maxVoices=1:"undefined"==typeof i[0]&&(i[0]={maxVoices:1}),n=Gibber.processArguments(i,t),n=Array.isArray(n)?Gibber.construct(Gibberish[e],n).connect(Gibber.Master):new Gibberish[e](n).connect(Gibber.Master),n.type="Gen",$.extend(!0,n,Gibber.ugen),n.fx.ugen=n,n._note=n.note.bind(n),n.note=function(){var e=Array.prototype.splice.call(arguments,0);"string"==typeof e[0]&&(e[0]=Gibber.Theory.Teoria.note(e[0]).fq()),this._note.apply(this,e)},Gibber.createProxyProperties(n,_mappingProperties[t]),Gibber.createProxyMethods(n,["note","send"]),n.toString=function(){return"> "+t},Object.defineProperty(n,"_",{get:function(){return n.kill(),n},set:function(){}}),n}}();Percussion.Drums=function(_sequence,_timeValue,_amp,_freq){var args=Array.prototype.slice.call(arguments),obj={},props=Gibber.processArguments(args,"Drums");$.extend(!0,obj,props),obj=Array.isArray(obj)?Gibber.construct(Gibberish.Bus2,obj).connect(Gibber.Master):new Gibberish.Bus2(obj).connect(Gibber.Master),obj.name="Drums",obj.type="Gen",obj.children=[],$.extend(!0,obj,Gibber.ugen),obj.fx.ugen=obj,Object.defineProperty(obj,"_",{get:function(){return obj.kill(),obj},set:function(){}}),obj.kit=Percussion.Drums.kits["default"],"object"==typeof arguments[0]&&arguments[0].kit&&(obj.kit=Percussion.Drums.kits[arguments[0].kit],arguments[0].kit=obj.kit);for(var key in obj.kit){var drum=obj.kit[key];obj[key]={sampler:new Gibberish.Sampler({file:drum.file,pitch:1,amp:drum.amp}),pitch:drum.pitch,amp:drum.amp},obj[key].sampler.pan=drum.pan,obj[key].sampler.connect(obj),obj[key].fx=obj[key].sampler.fx,obj.children.push(obj[key].sampler)}if(obj.mod=obj.polyMod,obj.removeMod=obj.removePolyMod,obj.connect(),Gibber.createProxyProperties(obj,_mappingProperties.Drums),obj.pitch(1),"undefined"!=typeof props)switch($.type(props[0])){case"string":for(var notes=props[0],_seqs=[],_durations=[],__durations=[],seqs=notes.split("|"),timeline={},i=0;i<seqs.length;i++){var seq=seqs[i],duration,hasTime=!1,idx=seq.indexOf(",");if(idx>-1){var _value=seq.substr(0,idx),duration=seq.substr(idx+1);duration=eval(duration),hasTime=!0,seq=_value.trim().split("")}else seq=seq.trim().split(""),duration=1/seq.length;seq.indexOf(".rnd(")>-1&&(seq=seq.split(".rnd")[0],seq=seq.split("").rnd()),"undefined"!=typeof props[1]&&(duration=props[1]),obj.seq.add({key:"note",values:seq,durations:duration,target:obj})}break;case"object":"string"==typeof props[0].note&&(props[0].note=props[0].note.split("")),props[0].target=obj,props[0].durations=Gibber.Clock.Time(props[0].durations?props[0].durations:1/props[0].note.length),props[0].offset=props[0].offset?Gibber.Clock.time(props[0].offset):0;break;case"function":case"array":var length=props[0].length||props[0].values.length,durations="undefined"!=typeof arguments[1]?arguments[1]:Gibber.Clock.Time(1/length);"function"!=typeof durations&&(durations=Gibber.Clock.Time(durations)),obj.seq.add({key:"note",values:[props[0]],durations:durations,target:obj}),obj.pattern=obj.seq.seqs[obj.seq.seqs.length-1].values[0]}return"undefined"==typeof props&&(props={}),props.pitch&&(obj.pitch=props.pitch),"undefined"!=typeof props.snare&&($.extend(obj.snare.sampler,props.snare),$.extend(obj.snare,props.snare)),"undefined"!=typeof props.kick&&($.extend(obj.kick.sampler,props.kick),$.extend(obj.kick,props.kick)),"undefined"!=typeof props.hat&&($.extend(obj.hat.sampler,props.hat),$.extend(obj.hat,props.hat)),"undefined"!=typeof props.openHat&&($.extend(obj.openHat.sampler,props.openHat),$.extend(obj.openHat,props.openHat)),obj.amp=isNaN(_amp)?1:_amp,obj.seq&&obj.seq.tick&&Gibberish.future(obj.seq.tick,1),obj.note=function(e){var t="function"==typeof obj.pitch?obj.pitch():obj.pitch;if($.isArray(e))for(var n=0;n<e.length;n++){var i=e[n];if("string"==typeof i){for(var r in this.kit)if(i===this.kit[r].symbol){this[r].sampler.note(1,this[r].amp);var t=this.pitch();this[r].sampler.pitch!==t&&(this[r].sampler.pitch=t);break}}else{var o=obj[Object.keys(obj.kit)[i]];o.sampler.note(1,o.sampler.amp),o.sampler.pitch!==t&&(o.sampler.pitch=t)}}else if("string"==typeof e){for(var r in this.kit)if(e===this.kit[r].symbol){this[r].sampler.note(1,this[r].amp);var t=this.pitch();this[r].sampler.pitch!==t&&(this[r].sampler.pitch=t);break}}else{var s=Object.keys(obj.kit),a=Math.abs(e),r=s[a%s.length],o=obj[r];o.sampler.note(1,o.sampler.amp),o.sampler.pitch!==t&&(o.sampler.pitch=t)}},obj.start=function(){obj.seq.start(!0)},obj.stop=function(){obj.seq.stop()},obj.shuffle=function(){obj.seq.shuffle()},obj.reset=function(){obj.seq.reset()},Gibber.createProxyMethods(obj,["play","stop","shuffle","reset","start","send","note"]),obj.seq.start(!0),Object.defineProperties(obj,{offset:{get:function(){return obj.seq.offset},set:function(e){obj.seq.offset=Gibber.Clock.time(e)}}}),obj.toString=function(){return"Drums : "+obj.seq.seqs[0].values.join("")},obj},Percussion.EDrums=function(_sequence,_timeValue,_amp,_freq){var args=Array.prototype.slice.call(arguments),obj={},props=Gibber.processArguments(args,"Drums");if($.extend(!0,obj,props),obj=Array.isArray(obj)?Gibber.construct(Gibberish.Bus2,obj).connect(Gibber.Master):new Gibberish.Bus2(obj).connect(Gibber.Master),obj.name="XOX",obj.type="Gen",obj.children=[],$.extend(!0,obj,Gibber.ugen),obj.fx.ugen=obj,Object.defineProperty(obj,"_",{get:function(){return obj.kill(),obj},set:function(){}}),obj.pitch=1,obj.kick=Gibber.Percussion.Kick().disconnect(),obj.snare=Gibber.Percussion.Snare().disconnect(),obj.hat=Gibber.Percussion.Hat().disconnect(),obj.kick.connect(obj),obj.snare.connect(obj),obj.hat.connect(obj),obj.children.push(obj.kick,obj.snare,obj.hat),obj.mod=obj.polyMod,obj.removeMod=obj.removePolyMod,obj.set=function(e){obj.seq.note=e.split("")},Gibber.createProxyProperties(obj,_mappingProperties.XOX),obj.start=function(){obj.seq.start(!0)},obj.stop=function(){obj.seq.stop()},obj.shuffle=function(){obj.seq.shuffle()},obj.reset=function(){obj.seq.reset()},Gibber.createProxyMethods(obj,["play","stop","shuffle","reset","start","send"]),"undefined"!=typeof props)switch($.type(props[0])){case"string":for(var notes=props[0],_seqs=[],_durations=[],__durations=[],seqs=notes.split("|"),timeline={},i=0;i<seqs.length;i++){var seq=seqs[i],duration,hasTime=!1,idx=seq.indexOf(",");if(idx>-1){var _value=seq.substr(0,idx),duration=seq.substr(idx+1);duration=eval(duration),hasTime=!0,seq=_value.trim().split("")}else seq=seq.trim().split(""),duration=1/seq.length;seq.indexOf(".rnd(")>-1?(seq=seq.split(".rnd")[0],seq=seq.split("").rnd()):seq.indexOf(".random(")>-1&&(seq=seq.split(".random")[0],seq=seq.split("").rnd()),"undefined"!=typeof props[1]&&(duration=props[1]),obj.seq.add({key:"note",values:seq,durations:duration,target:obj})}break;case"object":"string"==typeof props[0].note&&(props[0].note=props[0].note.split("")),props[0].target=obj,props[0].durations=Gibber.Clock.Time(props[0].durations?props[0].durations:1/props[0].note.length),props[0].offset=props[0].offset?Gibber.Clock.time(props[0].offset):0,obj.seq=Seq(props[0])}"undefined"==typeof props&&(props={}),props.pitch&&(obj.pitch=props.pitch),"undefined"!=typeof props.snare&&($.extend(obj.snare.sampler,props.snare),$.extend(obj.snare,props.snare)),"undefined"!=typeof props.kick&&($.extend(obj.kick.sampler,props.kick),$.extend(obj.kick,props.kick)),"undefined"!=typeof props.hat&&($.extend(obj.hat.sampler,props.hat),$.extend(obj.hat,props.hat)),"undefined"!=typeof props.openHat&&($.extend(obj.openHat.sampler,props.openHat),$.extend(obj.openHat,props.openHat)),obj.amp=isNaN(_amp)?1:_amp,obj.seq.tick&&Gibberish.future(obj.seq.tick,1);var kcd=1,scd=1,hcd=1,kf=null,sf=null,hf=null;return obj.note=function(e){switch(e){case"x":1===kcd&&(kcd=0),obj.kick.note(),null!==kf&&(kf(),kf=null),kf=Gibber.Utilities.future(function(){kcd=1,kf=null},11e4*obj.kick.decay);break;case"o":1===scd&&(scd=0),obj.snare.note(),null!==sf&&(sf(),sf=null),sf=Gibber.Utilities.future(function(){scd=1,sf=null},obj.snare.decay);break;case"*":1===hcd&&(hcd=0),obj.hat.note(5e3),null!==hf&&(hf(),hf=null),hf=Gibber.Utilities.future(function(){hcd=1,hf=null},5500);break;case"-":1===hcd&&(hcd=0),obj.hat.note(3e4),null!==hf&&(hf(),hf=null),hf=Gibber.Utilities.future(function(){hcd=1,hf=null},30500)}},obj.seq.start(!0),obj.toString=function(){return"EDrums : "+obj.seq.seqs[0].values.join("")},obj},Percussion.Drums.kits={original:{kick:{file:"resources/audiofiles/kick.wav",symbol:"x",amp:1,pitch:1,pan:0},snare:{file:"resources/audiofiles/snare.wav",symbol:"o",amp:1,pitch:1,pan:.15},hat:{file:"resources/audiofiles/hat.wav",symbol:"*",amp:1,pitch:1,pan:-.1},openHat:{file:"resources/audiofiles/openHat.wav",symbol:"-",amp:1,pitch:1,pan:-.2}},electronic:{kick:{file:"resources/audiofiles/electronic/kick.wav",symbol:"x",amp:1.5,pitch:1,pan:0},snare:{file:"resources/audiofiles/electronic/snare.wav",symbol:"o",amp:1.5,pitch:1,pan:.15},hat:{file:"resources/audiofiles/electronic/hat.wav",symbol:"*",amp:1.5,pitch:1,pan:-.1},openHat:{file:"resources/audiofiles/electronic/openhat.wav",symbol:"-",amp:1.5,pitch:1,pan:-.2}},beatbox:{in_tss:{file:"resources/audiofiles/beatbox/^tss.wav",symbol:"T",amp:1,pitch:1,pan:.1},f:{file:"resources/audiofiles/beatbox/f.wav",symbol:"f",amp:1,pitch:1,pan:-.1},h:{file:"resources/audiofiles/beatbox/h.wav",symbol:"h",amp:1,pitch:1,pan:.1},s:{file:"resources/audiofiles/beatbox/s.wav",symbol:"s",amp:1,pitch:1,pan:-.1},d:{file:"resources/audiofiles/beatbox/d.wav",symbol:"d",amp:1,pitch:1,pan:.8},t:{file:"resources/audiofiles/beatbox/t.wav",symbol:"t",amp:1,pitch:1,pan:.4},k:{file:"resources/audiofiles/beatbox/k.wav",symbol:"k",amp:1,pitch:1,pan:-.1},in_k:{file:"resources/audiofiles/beatbox/^k.wav",symbol:"K",amp:1,pitch:1,pan:-.4},eight:{file:"resources/audiofiles/beatbox/8.wav",symbol:"8",amp:1,pitch:1,pan:-.8},psh:{file:"resources/audiofiles/beatbox/psh.wav",symbol:"p",amp:1,pitch:1,pan:.1},in_p:{file:"resources/audiofiles/beatbox/^p.wav",symbol:"P",amp:1,pitch:1,pan:-.1},pf:{file:"resources/audiofiles/beatbox/pf.wav",symbol:"F",amp:1,pitch:1,pan:.2},phs:{file:"resources/audiofiles/beatbox/phs.wav",symbol:"H",amp:1,pitch:1,pan:-.2},b:{file:"resources/audiofiles/beatbox/b.wav",symbol:"b",amp:1,pitch:1,pan:.3},dot:{file:"resources/audiofiles/beatbox/dot.wav",symbol:".",amp:1,pitch:1,pan:0},duf:{file:"resources/audiofiles/beatbox/duf.wav",symbol:"D",amp:1,pitch:1,pan:-.3},o:{file:"resources/audiofiles/beatbox/o.wav",symbol:"o",amp:1,pitch:1,pan:.6},a:{file:"resources/audiofiles/beatbox/a.wav",symbol:"a",amp:1,pitch:1,pan:.8},u:{file:"resources/audiofiles/beatbox/u.wav",symbol:"u",amp:1,pitch:1,pan:-.8},m:{file:"resources/audiofiles/beatbox/m.wav",symbol:"m",amp:1,pitch:1,pan:-.6},n:{file:"resources/audiofiles/beatbox/n.wav",symbol:"n",amp:1,pitch:1,pan:0}}},Percussion.Drums.kits.default=Percussion.Drums.kits.electronic,module.exports=function(e){return"undefined"==typeof Gibber&&(Gibber=e),Percussion}}()},{"../clock":15,"../dollar":16,"../mappings":18,"gibberish-dsp":1}],8:[function(e,t){!function(){"use strict";for(var n,i={},r=e("gibberish-dsp"),o=e("../dollar"),s=e("../clock"),a=e("../mappings").outputCurves,u=a.LINEAR,c=(a.LOGARITHMIC,["Line"]),l={Line:{start:{min:0,max:1,output:u,timescale:"audio"},end:{min:0,max:1,output:u,timescale:"audio"},time:{min:0,max:8,output:u,timescale:"audio"}}},p=0;p<c.length;p++)!function(){var e=Array.isArray(c[p])?c[p][0]:c[p],t=Array.isArray(c[p])?c[p][1]:c[p];i[t]=function(){var i,a=Array.prototype.slice.call(arguments,0);return i=new r[e](a[0],a[1],s.time(a[2]),a[3]),i.name=t,o.extend(!0,i,n.ugen),n.createProxyProperties(i,l[t]),n.processArguments2(i,a,i.name),console.log(t+" is created."),i}}();t.exports=function(e){return"undefined"==typeof n&&(n=e),i}}()},{"../clock":15,"../dollar":16,"../mappings":18,"gibberish-dsp":1}],9:[function(e,t){!function(){"use strict";var n,i={Presets:{}},r=e("gibberish-dsp"),o=e("../dollar"),s=e("../mappings").outputCurves,a=s.LINEAR,u=s.LOGARITHMIC;r.Gain=function(){r.extend(this,{name:"gain",type:"effect",properties:{input:0,amount:1},callback:function(e,t){return isNaN(e)?(e[0]*=t,e[1]*=t):e*=t,e}}).init().processProperties(arguments)},r.Gain.prototype=r._effect;for(var c=["Reverb","Delay","Flanger","Vibrato","Distortion","Biquad","Gain","Filter24",["RingModulation","RingMod"],["BufferShuffler","Schizo"],["Decimator","Crush"],"Tremolo"],l={Reverb:{roomSize:{min:.5,max:.995,output:a,timescale:"audio"},damping:{min:0,max:1,output:a,timescale:"audio"},out:{min:0,max:1,output:a,timescale:"audio",dimensions:1}},Delay:{feedback:{min:0,max:1,output:a,timescale:"audio"},time:{min:50,max:88200,output:a,timescale:"audio"},out:{min:0,max:1,output:a,timescale:"audio",dimensions:1}},RingMod:{frequency:{min:20,max:3e3,output:a,timescale:"audio"},amp:{min:0,max:1,output:a,timescale:"audio"},mix:{min:0,max:1,output:a,timescale:"audio"},out:{min:0,max:1,output:a,timescale:"audio",dimensions:1}},Flanger:{rate:{min:.01,max:20,output:u,timescale:"audio"},feedback:{min:0,max:.99,output:a,timescale:"audio"},amount:{min:25,max:300,output:a,timescale:"audio"},out:{min:0,max:1,output:a,timescale:"audio",dimensions:1}},Gain:{amount:{min:0,max:1,output:a,timescale:"audio"}},Vibrato:{rate:{min:.2,max:8,output:u,timescale:"audio"},amount:{min:25,max:300,output:a,timescale:"audio"},feedback:{min:.45,max:.55,output:a,timescale:"audio"},out:{min:0,max:1,output:a,timescale:"audio",dimensions:1}},Filter24:{cutoff:{min:0,max:.7,output:a,timescale:"audio"},resonance:{min:0,max:5.5,output:a,timescale:"audio"},out:{min:0,max:1,output:a,timescale:"audio",dimensions:1}},LPF:{cutoff:{min:.05,max:.7,output:a,timescale:"audio"},resonance:{min:0,max:5.5,output:a,timescale:"audio"},out:{min:0,max:1,output:a,timescale:"audio",dimensions:1}},HPF:{cutoff:{min:0,max:.7,output:a,timescale:"audio"},resonance:{min:0,max:5.5,output:a,timescale:"audio"},out:{min:0,max:1,output:a,timescale:"audio",dimensions:1}},Crush:{bitDepth:{min:1,max:16,output:a,timescale:"audio"},sampleRate:{min:0,max:1,output:a,timescale:"audio"},amp:{min:0,max:1,output:u,timescale:"audio"},out:{min:0,max:1,output:a,timescale:"audio",dimensions:1}},Schizo:{amp:{min:0,max:1,output:u,timescale:"audio"},out:{min:0,max:1,output:a,timescale:"audio",dimensions:1}},Tremolo:{amp:{min:0,max:1,output:u,timescale:"audio"},frequency:{min:.05,max:20,output:u,timescale:"audio"},out:{min:0,max:1,output:a,timescale:"audio",dimensions:1}}},p=0;p<c.length;p++)!function(){var e=Array.isArray(c[p])?c[p][0]:c[p],t=Array.isArray(c[p])?c[p][1]:c[p];i[t]=function(){var i,s=Array.prototype.slice.call(arguments,0);return i=new r[e],i.type="FX",i.name=t,o.extend(!0,i,n.ugen),n.createProxyProperties(i,l[t]),n.createProxyMethods(i,["send"]),n.processArguments2(i,s,i.name),s.input=0,i.toString=function(){return"> "+t},i}}();i.Chorus=function(e,t,n){var i=e||1,r=n||ms(1),o=t||0,s=Flanger(i,o,r,30*ms(1));return s.name="Chorus",s.type="FX",s},i.LPF=function(e,t){var n=isNaN(e)?.2:e,i=isNaN(t)?3.5:t,r=Filter24(n,i,!0);return r.name="LPF",r.type="FX",r},i.HPF=function(e,t){var n=isNaN(e)?.25:e,i=isNaN(t)?3.5:t,r=Filter24(n,i,!0);return r.isLowPass=!1,r.name="HPF",r.type="FX",r},i.Presets.Schizo={sane:{chance:.1,reverseChance:0,pitchChance:.5,mix:.5},borderline:{chance:.1,pitchChance:.25,reverseChance:.5,mix:1},paranoid:{chance:.2,reverseChance:.5,pitchChance:.5,mix:1}},i.Presets.Reverb={space:{roomSize:.99,damping:.23,wet:.75,dry:.25},small:{roomSize:.6,damping:.75,wet:.15,dry:.85},medium:{roomSize:.8,damping:.5,wet:.35,dry:.65},large:{roomSize:.85,damping:.3,wet:.55,dry:.45}},t.exports=function(e){return"undefined"==typeof n&&(n=e),i
}}()},{"../dollar":16,"../mappings":18,"gibberish-dsp":1}],10:[function(e,t){!function(){"use strict";for(var n,i=e("../dollar"),r={Presets:{}},o=e("gibberish-dsp"),s=e("../mappings").outputCurves,a=s.LINEAR,u=s.LOGARITHMIC,c=["Sine","Triangle","Saw","Square","Noise","PWM"],l={frequency:{min:50,max:3200,hardMin:.01,hardMax:22050,output:u,timescale:"audio",dimensions:1},amp:{min:0,max:1,hardMax:2,output:u,timescale:"audio",dimensions:1},pulsewidth:{min:.01,max:.99,output:a,timescale:"audio",dimensions:1},out:{min:0,max:1,output:a,timescale:"audio",dimensions:1},pan:{min:-1,max:1,output:u,timescale:"audio"},note:{min:50,max:3200,hardMin:.01,hardMax:22050,output:u,timescale:"audio",doNotProxy:!0}},p=0;p<c.length;p++)!function(){var e=Array.isArray(c[p])?c[p][0]:c[p],t=Array.isArray(c[p])?c[p][1]:c[p];r[t]=function(){var r=(new o[e]).connect(n.Master),s=Array.prototype.slice.call(arguments,0);r.type="Gen",i.extend(!0,r,n.ugen),r.fx.ugen=r,Object.defineProperty(r,"_",{get:function(){return r.kill(),r},set:function(){}}),"undefined"==typeof r.note&&(r.note=function(e){var t=this.frequency();"number"==typeof t||"function"==typeof t?this.frequency="function"==typeof e?e():e:t[0]=e}),r.name=t,n.createProxyProperties(r,l);var a=["note","send"];return"Sampler"===t&&a.push("pickBuffer"),n.createProxyMethods(r,a),n.processArguments2(r,s,t),r.toString=function(){return"> "+t},r}}();r.Wavetable=function(e){var t=(new o.Table).connect(n.Master);return e&&t.setTable(e),t.type="Gen",i.extend(!0,t,n.ugen),t.fx.ugen=t,Object.defineProperty(t,"_",{get:function(){return t.kill(),t},set:function(){}}),"undefined"==typeof t.note&&(t.note=function(e){var t=this.frequency();"number"==typeof t||"function"==typeof t?this.frequency="function"==typeof e?e():e:t[0]=e}),n.createProxyProperties(t,{frequency:{min:50,max:3200,output:u,timescale:"audio",dimensions:1},amp:{min:0,max:1,output:u,timescale:"audio",dimensions:1},out:{min:0,max:1,output:a,timescale:"audio",dimensions:1}}),n.createProxyMethods(t,["note"]),obj.toString=function(){return"> Wavetable"},t},r.Grains=function(){var e,t="object"==typeof arguments[0]?arguments[0]:arguments[1],r=t.bufferLength||88200,s=Sampler().record(t.input,r);if("string"==typeof arguments[0]){var a=n.Presets.Grains[arguments[0]];"undefined"!=typeof t&&i.extend(a,t),e=new o.Granulator(a)}else e=new o.Granulator(t);return e.loop=function(e,t,i,r){var s=this.position;e=isNaN(e)?.25:e,t=isNaN(t)?.75:t,i=n.Clock.time(isNaN(i)?1:i),r="undefined"==typeof r?!0:r,this.position=new o.Line(e,t,i,r);var a=this;r===!1&&future(function(){a.position=s},n.Clock.time(i))},future(function(){e.setBuffer(s.getBuffer()),e.connect(),e.loop(0,1,r),s.disconnect()},r+1),e.type="Gen",i.extend(!0,e,n.ugen),e.fx.ugen=e,Object.defineProperty(e,"_",{get:function(){return e.disconnect(),e},set:function(){}}),e.toString=function(){return"Grains"},e},r.Presets.Grains={tight:{numberOfGrains:10,grainSize:1100,positionMin:-.05,positionMax:.05,speedMin:-.1,speedMax:.1,shouldReverse:!1},cloudy:{numberOfGrains:20,positionMin:-.25,positionMax:.25,speedMin:-.1,speedMax:4,grainSize:4400,shouldReverse:!0},flurry:{speed:2,speedMin:-2,speedMax:2,position:0,positionMin:0,positionMax:0,numberOfGrains:20,grainSize:1100}},t.exports=function(e){return"undefined"==typeof n&&(n=e),r}}()},{"../dollar":16,"../mappings":18,"gibberish-dsp":1}],11:[function(e,t){!function(){"use strict";var n,i,r=e("gibberish-dsp"),o=null,s=null,a=null,u=n={Compressor:function(e){if(null===o){o=r.context.createDynamicsCompressor();var t=o.threshold,n=o.ratio,i=o.attack,s=o.release;Object.defineProperties(o,{threshold:{get:function(){return t.value},set:function(e){t.value=e}},ratio:{get:function(){return n.value},set:function(e){n.value=e}},attack:{get:function(){return i.value},set:function(e){i.value=e}},release:{get:function(){return s.value},set:function(e){s.value=e}}}),u.insert(o,e)}return o},LowShelf:function(e){if(null===a){a=r.context.createBiquadFilter(),a.type=3,a.frequency.value=220,a.Q.value=0,a.gain.value=6;var t=a.gain,n=a.frequency,i=a.Q;Object.defineProperties(a,{frequency:{get:function(){return n.value},set:function(e){n.value=e}},gain:{get:function(){return t.value},set:function(e){t.value=e}},Q:{get:function(){return i.value},set:function(e){i.value=e}}}),u.insert(a,e)}return a},HiShelf:function(e){if(null===s){s=r.context.createBiquadFilter(),s.type=4,s.frequency.value=880,s.Q.value=0,s.gain.value=6;var t=s.gain,n=s.frequency,i=s.Q;Object.defineProperties(s,{frequency:{get:function(){return n.value},set:function(e){n.value=e}},gain:{get:function(){return t.value},set:function(e){t.value=e}},Q:{get:function(){return i.value},set:function(e){i.value=e}}}),u.insert(s,e)}return s}};t.exports=function(e){return"undefined"==typeof i&&(i=e),n}}()},{"gibberish-dsp":1}],12:[function(e,t){!function(){"use strict";var n,i={Presets:{}},r=e("gibberish-dsp"),o=e("../dollar"),s=e("../clock"),a=e("../mappings").outputCurves,u=a.LINEAR,c=a.LOGARITHMIC,l={amp:{min:0,max:1,hardMax:2,output:c,timescale:"audio",dimensions:1},pitch:{min:1,max:4,hardMin:.01,hardMax:20,output:c,timescale:"audio"},out:{min:0,max:1,output:u,timescale:"audio",dimensions:1},pan:{min:-1,max:1,output:c,timescale:"audio"},note:{min:50,max:3200,hardMin:.01,hardMax:22050,output:c,timescale:"audio",doNotProxy:!0}};i.Sampler=function(){var e=(new r.Sampler).connect(n.Master),t=Array.prototype.slice.call(arguments,0),i="Sampler";e.type="Gen",o.extend(!0,e,n.ugen),e.fx.ugen=e,Object.defineProperty(e,"_",{get:function(){return e.kill(),e},set:function(){}}),"undefined"==typeof e.note&&(e.note=function(e){var t=this.frequency();"number"==typeof t||"function"==typeof t?this.frequency="function"==typeof e?e():e:t[0]=e}),n.createProxyProperties(e,l);var s=["note","pickBuffer"];return n.createProxyMethods(e,s),n.processArguments2(e,t,i),e.toString=function(){return i},e},r.Sampler.prototype.readFile=function(e){var t=this;if(e.isFile)return void e.file(function(e){t.readFile(e)});var n=new FileReader;n.readAsArrayBuffer(e),n.onload=function(){r.context.decodeAudioData(n.result,function(n){var i=n.getChannelData(0);t.setBuffer(i),t.length=t.end=i.length,t.buffers[e.name]=i,t.isPlaying=!0,console.log("LOADED",e.name,i.length),r.audioFiles[e.name]=i,t.onload&&t.onload(),0!==t.playOnLoad&&t.note(t.playOnLoad),t.isLoaded=!0})}},r.Sampler.prototype.ondrop=function(e){for(var t=0;t<e.length;t++)!function(n){var i,r=e[t];if(new FileReader,i=r.webkitGetAsEntry(),i.isDirectory){var o=i.createReader();o.readEntries(function(e){for(var t=e.length;t--;)n.readFile(e[t])})}else n.readFile(i)}(this)},r.Sampler.prototype.pickBuffer=function(){this.switchBuffer(rndi(0,this.getNumberOfBuffers()))},r.Sampler.prototype.record=function(e,t){this.isRecording=!0,console.log("starting recording");var i=this;return this.recorder=new r.Record(e,n.Clock.time(t),function(){console.log("recording finished"),i.setBuffer(this.getBuffer()),i.length=i.end=i.getBuffer().length,i.setPhase(i.length),i.isRecording=!1}).record(),this},i.Looper=function(e,t,i){var r=Bus();o.extend(r,{children:[],input:e,length:s.time(t),numberOfLoops:i,pitch:1,currentLoop:0,loop:function(){r.children[r.currentLoop].record(r.input,r.length);var e={target:r.children[r.currentLoop],durations:r.length,key:"note",values:[null]};return r.seq.add(e),r.seq.start(),future(r.nextLoop,t),r},nextLoop:function(){r.children[++r.currentLoop].record(r.input,r.length),r.currentLoop<r.numberOfLoops-1&&future(r.nextLoop,t);var e={target:r.children[r.currentLoop],durations:r.length,key:"note",values:[null]};r.seq.add(e)}});var a=1;Object.defineProperty(r,"pitch",{configurable:!0,get:function(){return a},set:function(e){a=e;for(var t=0;t<r.children.length;t++)r.children[t].pitch=a}});for(var u=0;i>u;u++)r.children.push(Sampler({pitch:r.pitch})._),r.children[u].send(r,1);return n.createProxyProperties(r,{pitch:l.pitch}),r.stop=function(){r.seq.stop()},r.play=function(){r.seq.play()},r},t.exports=function(e){return"undefined"==typeof n&&(n=e),i}}()},{"../clock":15,"../dollar":16,"../mappings":18,"gibberish-dsp":1}],13:[function(e,t){!function(){"use strict";for(var n,i={Presets:{}},r=e("gibberish-dsp"),o=e("../dollar"),s=e("../clock")(n),a=e("../mappings").outputCurves,u=a.LINEAR,c=a.LOGARITHMIC,l=[["PolySynth","Synth"],["PolyFM","FM"],["PolySynth2","Synth2"],["MonoSynth","Mono"],["PolyKarplusStrong","Pluck"]],p={Synth:{note:{min:50,max:3200,output:c,timescale:"audio",doNotProxy:!0},frequency:{min:50,max:3200,output:c,timescale:"audio"},amp:{min:0,max:1,output:c,timescale:"audio"},pulsewidth:{min:.01,max:.99,output:u,timescale:"audio"},attack:{min:s.maxMeasures+1,max:176400,output:u,timescale:"audio"},decay:{min:s.maxMeasures+1,max:176400,output:u,timescale:"audio"},sustain:{min:s.maxMeasures+1,max:176400,output:u,timescale:"audio"},release:{min:s.maxMeasures+1,max:176400,output:u,timescale:"audio"},pan:{min:-1,max:1,output:c,timescale:"audio"},out:{min:0,max:1,output:u,timescale:"audio",dimensions:1}},Synth2:{note:{min:50,max:3200,output:c,timescale:"audio",doNotProxy:!0},frequency:{min:50,max:3200,output:u,timescale:"audio"},amp:{min:0,max:1,output:c,timescale:"audio"},pulsewidth:{min:.01,max:.99,output:u,timescale:"audio"},attack:{min:s.maxMeasures+1,max:176400,output:u,timescale:"audio"},decay:{min:s.maxMeasures+1,max:176400,output:u,timescale:"audio"},sustain:{min:s.maxMeasures+1,max:176400,output:u,timescale:"audio"},release:{min:s.maxMeasures+1,max:176400,output:u,timescale:"audio"},cutoff:{min:0,max:.7,output:u,timescale:"audio"},resonance:{min:0,max:5.5,output:u,timescale:"audio"},pan:{min:-1,max:1,output:c,timescale:"audio"},out:{min:0,max:1,output:u,timescale:"audio",dimensions:1}},Mono:{note:{min:50,max:3200,output:c,timescale:"audio",doNotProxy:!0},frequency:{min:50,max:3200,output:u,timescale:"audio"},amp:{min:0,max:1,output:c,timescale:"audio"},pulsewidth:{min:.01,max:.99,output:u,timescale:"audio"},attack:{min:s.maxMeasures+1,max:176400,output:c,timescale:"audio"},decay:{min:s.maxMeasures+1,max:176400,output:c,timescale:"audio"},cutoff:{min:0,max:.7,output:u,timescale:"audio"},detune2:{min:0,max:.15,output:u,timescale:"audio"},detune3:{min:0,max:.15,output:u,timescale:"audio"},glide:{min:.99,max:.999995,output:u,timescale:"audio"},resonance:{min:0,max:5.5,output:u,timescale:"audio"},pan:{min:-1,max:1,output:c,timescale:"audio"},out:{min:0,max:1,output:u,timescale:"audio",dimensions:1}},FM:{note:{min:50,max:3200,output:c,timescale:"audio",doNotProxy:!0},frequency:{min:50,max:3200,output:u,timescale:"audio"},amp:{min:0,max:1,output:c,timescale:"audio"},attack:{min:s.maxMeasures+1,max:176400,output:u,timescale:"audio"},decay:{min:s.maxMeasures+1,max:176400,output:u,timescale:"audio"},sustain:{min:s.maxMeasures+1,max:176400,output:u,timescale:"audio"},release:{min:s.maxMeasures+1,max:176400,output:u,timescale:"audio"},cmRatio:{min:.1,max:50,output:u,timescale:"audio"},index:{min:.1,max:50,output:u,timescale:"audio"},pan:{min:-1,max:1,output:c,timescale:"audio"},out:{min:0,max:1,output:u,timescale:"audio",dimensions:1}},Pluck:{note:{min:50,max:3200,output:c,timescale:"audio",doNotProxy:!0},frequency:{min:50,max:3200,output:u,timescale:"audio"},amp:{min:0,max:1,output:c,timescale:"audio"},blend:{min:0,max:1,output:u,timescale:"audio"},damping:{min:0,max:1,output:u,timescale:"audio"},pan:{min:-1,max:1,output:c,timescale:"audio"},out:{min:0,max:1,output:u,timescale:"audio",dimensions:1}}},h=0;h<l.length;h++)!function(){var e=Array.isArray(l[h])?l[h][0]:l[h],t=Array.isArray(l[h])?l[h][1]:l[h];i[t]=function(){var i,s,a=Array.prototype.slice.call(arguments),u=1,c=!1,l=!0;if("object"==typeof a[0]&&("undefined"!=typeof a[0].maxVoices&&a[0].maxVoices&&(u=a[0].maxVoices),"undefined"!=typeof a[0].useADSR?(c=a[0].useADSR,"undefined"!=typeof a[0].requireReleaseTrigger&&(l=a[0].requireReleaseTrigger)):l=!1,"undefined"!=typeof a[0].useADSR&&(c=a[0].useADSR),"undefined"!=typeof a[0].scale&&(s=a[0].scale)),i=new r[e]({maxVoices:u,useADSR:c,requireReleaseTrigger:l,scale:s}).connect(n.Master),i.type="Gen",o.extend(!0,i,n.ugen),i.fx.ugen=i,i._note=i.note.bind(i),i.note=function(){var e=Array.prototype.splice.call(arguments,0);if("string"==typeof e[0])e[0]=n.Theory.Teoria.note(e[0]).fq();else if("object"==typeof e[0]&&(e[0]=e[0].valueOf()),e[0]<n.minNoteFrequency){var t=i.scale||n.scale,r=t.notes[e[0]];if(i.octave&&0!==i.octave)for(var o=i.octave>0?1:0,s=Math.abs(i.octave),a=0;s>a;a++)r*=o?2:.5;e[0]=r}return this._note.apply(this,e),this},i.chord=n.Theory.chord,Object.defineProperty(i,"_",{get:function(){return i.kill(),i},set:function(){}}),n.createProxyProperties(i,p[t]),n.createProxyMethods(i,["note","chord","send"]),i.name=t,n.processArguments2(i,a,i.name),i.toString=function(){return"> "+t},"Mono"!==t){var h=i._frequency;Object.defineProperty(i,"frequency",{configurable:!0,get:function(){return this._frequency},set:function(e){if(h=e,this.children)for(var t=0;t<this.children.length;t++)"number"==typeof this.children[t].frequency?this.children[t].frequency=h:this.children[t].frequency[0]=h}})}var f;return Object.defineProperty(i,"scale",{get:function(){return f},set:function(e){f=e,i.seq.scale=f}}),i}}();i.Presets.Synth={"short":{attack:44,decay:1/16},bleep:{waveform:"Sine",attack:44,decay:1/16},rhodes:{waveform:"Sine",maxVoices:4,presetInit:function(){this.fx.add(n.FX.Tremolo(2,.2))},attack:44,decay:1},calvin:{waveform:"PWM",maxVoices:4,amp:.075,presetInit:function(){this.fx.add(n.FX.Delay(1/6,.5),n.FX.Vibrato())},attack:44,decay:.25}},i.Presets.Synth2={pad2:{waveform:"Saw",maxVoices:4,attack:1.5,decay:.5,cutoff:.3,filterMult:.35,resonance:4.5,amp:1.25},pad4:{waveform:"Saw",maxVoices:4,attack:2,decay:2,cutoff:.3,filterMult:.35,resonance:4.5,amp:1.25}},i.Presets.Mono={"short":{attack:44,decay:1/16},lead:{presetInit:function(){this.fx.add(n.FX.Delay(.25,.35),n.FX.Reverb())},attack:1/8,decay:.5,octave3:0,cutoff:.2,filterMult:.5,resonance:5,isLowPass:!1},winsome:{presetInit:function(){this.lfo=n.Oscillators.Sine(.234375)._,this.lfo.amp=.075,this.lfo.frequency=2,this.cutoff=this.lfo,this.detune2=this.lfo},attack:s.maxMeasures,decay:1,cutoff:.2},bass:{attack:s.maxMeasures,decay:1/8-s.maxMeasures,octave:-2,octave2:-1,cutoff:.5,filterMult:.2,resonance:1},bass2:{attack:s.maxMeasures,decay:1/6,octave:-2,octave2:0,octave3:0,cutoff:.5,filterMult:.2,resonance:1,amp:.65},easy:{attack:s.maxMeasures,decay:2,octave2:0,octave3:0,cutoff:.3,glide:.9995},easyfx:{attack:s.maxMeasures,decay:2,presetInit:function(){this.fx.add(n.FX.Delay(1/6,.3))},amp:.3,octave2:0,octave3:0,cutoff:.3,glide:.9995},dark:{resonance:0,attack:44,cutoff:.075,amp:.35,filterMult:0},dark2:{filterMult:.1,attack:s.maxMeasures,octave2:0,octave3:0,decay:.25,amp:.45},noise:{resonance:20,decay:.5,cutoff:.3,glide:.99995,detune3:0,detune2:0,filterMult:0,presetInit:function(){this.fx.add(n.FX.Gain(.1),n.FX.Delay(1/6,.35))}}},i.Presets.FM={stabs:{maxVoices:4,cmRatio:1/1.0007,index:5,attack:s.maxMeasures,decay:1/8,amp:.1,presetInit:function(){this.bus=n.Busses.Bus().fx.add(n.FX.Delay(1/8,.75),n.FX.LPF({resonance:4})),this.bus.fx[1].cutoff=n.Binops.Add(.25,n.Oscilators.Sine(.1,.2)._),this.send(this.bus,.65)}},bass:{cmRatio:1,index:3,presetInit:function(){this.attack=ms(1)},decay:1/16,octave:-2},glockenspiel:{cmRatio:3.5307,index:1,attack:44,decay:44100},radio:{cmRatio:1,index:40,attack:13230,decay:22050},noise:{cmRatio:.04,index:1e3,attack:44.1,decay:4410},frog:{cmRatio:.1,index:2,attack:13230,decay:220.5},gong:{cmRatio:1.4,index:.95,attack:44.1,decay:220500},drum:{cmRatio:1.40007,index:2,attack:44,decay:44100},drum2:{cmRatio:1+Math.sqrt(2),index:.2,attack:44,decay:882},brass:{maxVoices:4,cmRatio:1/1.0007,index:5,attack:4100,decay:1},clarinet:{cmRatio:1.5,index:1.5,attack:2205,decay:8820}},t.exports=function(e){return"undefined"==typeof n&&(n=e),i}}()},{"../clock":15,"../dollar":16,"../mappings":18,"gibberish-dsp":1}],14:[function(e,t){!function(){"use strict";var n,i=e("../../external/teoria.min"),r=e("../dollar"),o={Teoria:i,Scale:function(e,t){var o={root:"string"==typeof e?i.note(e):e,notes:[],degree:1,chord:function(e,t){var n=[];t=t||0;for(var i=0;i<e.length;i++)n.push(this.notes[e[i]+t]);return n},create:function(){var e="object"==typeof o.root()?o.root():i.note(o.root()),t=o.mode()||s;if(this.notes.length=0,n.Theory.Scales[t]){var r=n.Theory.Scales[t](e);r.create(this.degree),this.notes=r.notes}},set:function(e,t){Array.isArray(arguments[0])?(this.root=arguments[0][0],this.mode=arguments[0][1]):(this.root=e,this.mode=t)}},s=t||"aeolian";Object.defineProperty(o,"mode",{configurable:!0,get:function(){return s},set:function(e){s=e,o.create()}});var a=o.root;Object.defineProperty(o,"root",{configurable:!0,get:function(){return a},set:function(e){a="string"==typeof e?i.note(e):e,o.create()}});var u=o.degree;return Object.defineProperty(o,"degree",{configurable:!0,get:function(){return u},set:function(e){u=e,o.create(u)}}),n.createProxyProperty(o,"root",!0,!1,null,!1,1),n.createProxyProperty(o,"mode",!0,!1,null,!1,1),n.createProxyProperty(o,"degree",!0,!1,null,!1,1),r.subscribe("/gibber/clear",function(){o.seq.isConnected=!1,o.seq.isRunning=!1,o.seq.destinations.length=0}),o.create(),o.toString=function(){return"Scale: "+o.root()+", "+o.mode()},o},CustomScale:function(e){var t={notes:[],degree:e||1,ratios:arguments[1]||[1,1.1,1.25,1.3333,1.5,1.666,1.75],create:function(e){this.notes=[];for(var t=this.root,n=0;8>n;n++){for(var i=0;i<this.ratios.length;i++){var r=i+e-1,o=t*(1+Math.floor(r/this.ratios.length));this.notes.push(o*this.ratios[r%this.ratios.length])}t*=2}t=this.root;for(var n=-1;n>=-8;n--){t/=2;for(var i=0;i<this.ratios.length;i++){var s=n*this.ratios.length+i,r=i+e-1,o=t*(1+Math.floor(r/this.ratios.length));this.notes[s]=o*this.ratios[r%this.ratios.length]}}},chord:function(e,t){var n=[];t=t||0;for(var i=0;i<e.length;i++)n.push(this.notes[e[i]+t]);return n}},n=arguments[0]||440;return Object.defineProperty(t,"root",{get:function(){return n},set:function(e){"number"==typeof e?n=e:"string"==typeof e?n=o.Teoria.note(e).fq():"object"==typeof e&&(n=e.fq()),this.create(n)}}),t.root=n,t},Scales:{Major:function(e){return o.CustomScale(e,[1,9/8,5/4,4/3,1.5,5/3,15/8])},Ionian:function(e){return o.CustomScale(e,[1,9/8,5/4,4/3,1.5,5/3,15/8])},Dorian:function(e){return o.CustomScale(e,[1,9/8,1.2,4/3,1.5,5/3,1.8])},Phrygian:function(e){return o.CustomScale(e,[1,16/15,1.2,4/3,1.5,1.6,1.8])},Lydian:function(e){return o.CustomScale(e,[1,9/8,5/4,45/32,1.5,5/3,15/8])},Mixolydian:function(e){return o.CustomScale(e,[1,9/8,5/4,4/3,1.5,1.6,1.8])},Minor:function(e){return o.CustomScale(e,[1,9/8,1.2,4/3,1.5,1.6,1.8])},Aeolian:function(e){return o.CustomScale(e,[1,9/8,1.2,4/3,1.5,1.6,1.8])},Locrian:function(e){return o.CustomScale(e,[1,16/15,1.2,4/3,62/45,1.6,15/8])},MajorPentatonic:function(e){return o.CustomScale(e,[1,9/8,5/4,1.5,5/3])},MinorPentatonic:function(e){return o.CustomScale(e,[1,1.2,4/3,1.5,15/8])},Chromatic:function(e){return o.CustomScale(e,[1,16/15,9/8,1.2,5/4,4/3,45/32,1.5,1.6,5/3,15/8,1.8])},HalfWhole:function(e){return o.CustomScale(e,[1,1.059463,1.189207,1.259921,1.414214,1.498307,1.681793,1.781797])},WholeHalf:function(e){return o.CustomScale(e,[1,1.122462,1.189207,1.33484,1.414214,1.587401,1.681793,1.887749])},Pythagorean:function(e){return o.CustomScale(e,[1,256/243,9/8,32/27,81/64,4/3,729/512,1.5,128/81,27/16,16/9,243/128])},PythagoreanMajor:function(e){return o.CustomScale(e,[1,9/8,81/64,4/3,1.5,27/16,243/128])},PythagoreanMinor:function(e){return o.CustomScale(e,[1,9/8,32/27,4/3,1.5,128/81,16/9])},Limit5:function(e){return o.CustomScale(e,[1,16/15,9/8,1.2,5/4,4/3,45/32,1.5,1.6,5/3,1.8,15/8])},Limit5Major:function(e){return o.CustomScale(e,[1,9/8,5/4,4/3,1.5,5/3,15/8])},Limit5Minor:function(e){return o.CustomScale(e,[1,9/8,1.2,4/3,1.5,1.6,1.8])},Mess3:function(e){return o.CustomScale(e,[1,1.122462,1.189207,1.259921,1.414214,1.498307,1.587401,1.781797,1.887749])},Mess4:function(e){return o.CustomScale(e,[1,1.059463,1.122462,1.33484,1.414214,1.498307,1.587401,1.887749])},Mess5:function(e){return o.CustomScale(e,[1,1.059463,1.33484,1.414214,1.498307,1.887749])},Mess6:function(e){return o.CustomScale(e,[1,1.122462,1.259921,1.33484,1.414214,1.587401,1.781797,1.887749])},Mess7:function(e){return o.CustomScale(e,[1,1.059463,1.122462,1.189207,1.33484,1.414214,1.498307,1.587401,1.681793,1.887749])},Adams:function(e){return o.CustomScale(e,[1,1.122462,1.259921,1.414214,1.498307,1.681793,1.781797])},Equal5Tone:function(e){return o.CustomScale(e,[1,1.15,1.32,1.35,1.52,1.74])},Equal7Tone:function(e){return o.CustomScale(e,[1,1.1,1.22,1.35,1.49,1.64,1.81])},Just:function(e){return o.CustomScale(e,[1,1.0417,1.125,1.2,1.25,1.3333,1.4063,1.5,1.6,1.6667,1.8,1.875])},Shruti:function(e){return o.CustomScale(e,[1,256/243,16/15,10/9,9/8,32/27,1.2,5/4,81/64,4/3,1.35,45/32,729/512,1.5,128/81,1.6,5/3,27/16,16/9,1.8,15/8,243/128,2])}},chord:function(e){if(this.notation=e,"string"==typeof this.notation){var t,n,r=this.notation.slice(0,1);isNaN(this.notation.charAt(1))?(r+=this.notation.charAt(1),t=parseInt(this.notation.slice(2,3)),n=this.notation.slice(3)):(t=parseInt(this.notation.slice(1,2)),n=this.notation.slice(2));for(var s=i.note(r+t).chord(n),a=0;a<s.notes.length;a++){var u=s.notes[a];this.note("number"==typeof l?l:u.fq())}}else for(var c=0;c<this.notation.length;c++){var l,p=this.scale?this.scale.notes[this.notation[c]]:this.notation[c];switch(typeof p){case"number":l=p;break;case"object":l=p.fq();break;case"string":l=o.Teoria.note(p).fq()}this.note(l)}return"undefined"!=typeof arguments[1]&&(this.amp=arguments[1]),this}};t.exports=function(e){return"undefined"==typeof n&&(n=e),o}}()},{"../../external/teoria.min":2,"../dollar":16}],15:[function(e,t){!function(){"use strict";var n,i=[],r=e("./dollar"),o=e("./mappings").outputCurves,s=o.LINEAR,a=(o.LOGARITHMIC,e("gibberish-dsp")),u={seq:null,bpm:null,maxMeasures:44,baseBPM:120,metronome:null,currentBeat:0,beatsPerMeasure:4,codeToExecute:[],signature:{lower:4,upper:4},sequencers:[],timeProperties:["attack","decay","sustain","release","offset","time"],phase:0,processBeat:function(){if(u.currentBeat=u.currentBeat>=u.signature.upper?1:u.currentBeat+1,1===u.currentBeat&&u.codeToExecute.length>0){for(var e=0;e<u.codeToExecute.length;e++)try{"function"==typeof u.codeToExecute[e].function?u.codeToExecute[e].function():n.run(u.codeToExecute[e].code,u.codeToExecute[e].pos,u.codeToExecute[e].cm)}catch(t){console.error("FAILED TO EXECUTE CODE:",u.codeToExecute[e].code,t)}u.codeToExecute.length=0}null!==u.metronome&&u.metronome.draw(u.currentBeat,u.signature.upper),u.phase+=u.beats(1)},getTimeSinceStart:function(){return u.phase+u.seq.phase},reset:function(){this.phase=0,this.currentBeat=0,this.rate=1,this.start()},tap:function(){var e=n.Clock.getTimeSinceStart();for(i[2]&&e-i[2]>88200&&(i.length=0),i.unshift(e);i.length>3;)i.pop();if(3===i.length){var t=(i[0]+i[1]-2*i[2])/3,r=44100/t,o=60*r;n.Clock.bpm=o}},start:function(e){if(e){r.extend(this,{properties:{rate:1},name:"master_clock",callback:function(e){return e}}),this.__proto__=new a.ugen,this.__proto__.init.call(this);var t=this.baseBPM;Object.defineProperty(u,"bpm",{get:function(){return t},set:function(e){t=e,u.rate=t/u.baseBPM}}),Object.defineProperty(this,"timeSignature",{get:function(){return u.signature.upper+"/"+u.signature.lower},set:function(e){var t=e.split("/");2!==t.length||t[0]===u.signature.upper&&t[1]===u.signature.lower||(u.signature.upper=parseInt(t[0]),u.signature.lower=parseInt(t[1]),u.currentBeat=1!=u.currentBeat?0:1)}}),n.createProxyProperties(this,{rate:{min:.1,max:2,output:s,timescale:"audio"},bpm:{min:20,max:200,output:s,timescale:"audio"}})}u.seq=new a.PolySeq({seqs:[{target:u,values:[u.processBeat.bind(u)],durations:[.25]}],rate:u}),u.seq.connect().start(),u.seq.timeModifier=u.time.bind(u)},addMetronome:function(e){this.metronome=e,this.metronome.init()},time:function(e){var t;return t=e<this.maxMeasures?u.beats(e*u.signature.lower):e},Time:function(e){var t;return t=u.Beats(e<this.maxMeasures?e*u.signature.lower:e)},beats:function(e){var t="undefined"!=typeof a.context?a.context.sampleRate:44100,n=t/(u.baseBPM/60);return n*e*(4/u.signature.lower)},Beats:function(e){return function(){return n.Clock.beats(e)}}};t.exports=function(e){return"undefined"==typeof n&&(n=e),u}}()},{"./dollar":16,"./mappings":18,"gibberish-dsp":1}],16:[function(e,t){(function(e){!function(){"use strict";function n(e,t,i){for(var r in t)i&&(l(t[r])||u(t[r]))?(l(t[r])&&!l(e[r])&&(e[r]={}),u(t[r])&&!u(e[r])&&(e[r]=[]),n(e[r],t[r],i)):void 0!==t[r]&&(e[r]=t[r])}var i="function"==typeof Zepto,r="function"==typeof jQuery,o="object"==typeof e.$||"function"==typeof e.$,s=null,a=i||r||o,u=Array.isArray,c=function(e){return"object"==typeof e},l=function(e){return c(e)&&Object.getPrototypeOf(e)==Object.prototype};s=a?r?jQuery:i?Zepto:o?e.$:{}:{},a||(s.extend=function(e){var t,i=Array.prototype.slice.call(arguments,1);return"boolean"==typeof e&&(t=e,e=i.shift()),i.forEach(function(i){n(e,i,t)}),e},s.isArray=Array.isArray,s.isPlainObject=l,s.type=function(e){return typeof e});var p={};s.subscribe=function(e,t){"undefined"==typeof p[e]&&(p[e]=[]),p[e].push(t)},s.unsubscribe=function(e,t){if("undefined"!=typeof p[e]){var n=p[e];n.splice(n.indexOf(t),1)}},s.publish=function(e,t){if("undefined"!=typeof p[e])for(var n=p[e],i=0;i<n.length;i++)n[i](t)},t.exports=s}()}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],17:[function(_dereq_,module,exports){!function(){var $=_dereq_("./dollar"),Gibber={Presets:{},GraphicsLib:{},Binops:{},scale:null,minNoteFrequency:50,started:!1,"export":function(e){$.extend(e,Gibber.Busses),$.extend(e,Gibber.Oscillators),$.extend(e,Gibber.Synths),$.extend(e,Gibber.Percussion),$.extend(e,Gibber.Envelopes),$.extend(e,Gibber.FX),$.extend(e,Gibber.Seqs),$.extend(e,Gibber.Samplers),$.extend(e,Gibber.PostProcessing),$.extend(e,Gibber.Theory),$.extend(e,Gibber.Analysis),e.future=Gibber.Utilities.future,e.solo=Gibber.Utilities.solo,e.Clock=Gibber.Clock,e.Seq=Gibber.Seq,e.Arp=Gibber.Arp,e.ScaleSeq=Gibber.ScaleSeq,e.Rndi=Gibber.Utilities.Rndi,e.Rndf=Gibber.Utilities.Rndf,e.rndi=Gibber.Utilities.rndi,e.rndf=Gibber.Utilities.rndf,e.module=Gibber.import,Gibber.Audio.Time.export(e),e.sec=e.seconds,Gibber.Audio.Binops.export(e)},init:function(e){"undefined"==typeof window?(window=GLOBAL,document=GLOBAL.document=!1):"undefined"!=typeof GLOBAL&&(GLOBAL.document||(document=GLOBAL.document=!1));var t={globalize:!0,canvas:null,target:window};Gibber.Utilities.Rndi=Gibber.Audio.Rndi,Gibber.Utilities.Rndf=Gibber.Audio.Rndf,Gibber.Utilities.rndi=Gibber.Audio.rndi,Gibber.Utilities.rndf=Gibber.Audio.rndf,"object"==typeof e&&$.extend(t,e),$.extend(Gibber.Presets,Gibber.Synths.Presets),$.extend(Gibber.Presets,Gibber.Percussion.Presets),$.extend(Gibber.Presets,Gibber.FX.Presets),$.extend(Gibber.Presets,Gibber.FX.Presets),$.extend(Gibber.Binops,Gibber.Audio.Binops),t.globalize&&Gibber.export(t.target),t.target.$=$,Gibber.Utilities.init();var n=null;Gibber.Audio.onstart&&(n=Gibber.Audio.onstart),Gibber.Audio.context||(Gibber.Audio.context={sampleRate:44100}),Gibber.Audio.onstart=function(){Gibber.Clock.start(!0),null!==n&&n()},Gibber.Audio.init(),Gibber.Master=Gibber.Busses.Bus().connect(Gibber.Audio.out),t.globalize&&(t.target.Master=Gibber.Master),Gibber.Master.type="Bus",Gibber.Master.name="Master",$.extend(!0,Gibber.Master,Gibber.ugen),Gibber.Master.fx.ugen=Gibber.Master,Gibber.isInstrument=!0,Gibber.Audio.ugen.connect=Gibber.Audio._oscillator.connect=Gibber.Audio._synth.connect=Gibber.Audio._effect.connect=Gibber.Audio._bus.connect=Gibber.connect,Gibber.Audio.defineUgenProperty=Gibber.defineUgenProperty,Gibber.scale=Gibber.Theory.Scale("c4","Minor")},interfaceIsReady:function(){Gibber.started||"undefined"!=typeof Gibber.Audio.context.currentTime&&(Gibber.started=!0,Gibber.isInstrument&&eval(loadFile.text))},Modules:{},"import":function(path,exportTo){var _done=null;return console.log("Loading module "+path+"..."),-1===path.indexOf("http:")?(console.log("loading via post",path),$.post(Gibber.Environment.SERVER_URL+"/gibber/"+path,{},function(d){return d=JSON.parse(d),eval(d.text),exportTo&&Gibber.Modules[path]&&($.extend(exportTo,Gibber.Modules[path]),Gibber.Modules[path]=exportTo),Gibber.Modules[path]?(Gibber.Modules[path].init&&Gibber.Modules[path].init(),console.log("Module "+path+" is now loaded.")):console.log("Publication "+path+" is loaded. It may not be a valid module."),null!==_done&&_done(Gibber.Modules[path]),!1})):$script.get(path,function(){console.log("Module "+path+" is now loaded."),null!==_done&&_done()}),{done:function(e){_done=e}}},defineUgenProperty:function(e,t,n){var i=Gibber.Clock.timeProperties.indexOf(e)>-1,r=n.properties[e]={value:i?Gibber.Clock.time(t):t,binops:[],parent:n,name:e},o=e.charAt(0).toUpperCase()+e.slice(1);Object.defineProperty(n,e,{configurable:!0,get:function(){return r.value},set:function(e){n[o]&&n[o].mapping&&n[o].mapping.remove&&n[o].mapping.remove(!0),r.value=i?Gibber.Clock.time(e):e,Gibber.Audio.dirty(n)}}),n[e]=r.value},polyInit:function(e){e.mod=e.polyMod,e.removeMod=e.removePolyMod;for(var t in e.polyProperties)!function(t){var n=e.polyProperties[t],i=Gibber.Clock.timeProperties.indexOf(t)>-1;Object.defineProperty(e,t,{get:function(){return n},set:function(n){for(var r=0;r<e.children.length;r++)e.children[r][t]=i?Gibber.Clock.time(n):n}})}(t)},connect:function(e,t){return"undefined"==typeof e&&(e=Gibber.Master),-1===this.destinations.indexOf(e)&&(e.addConnection(this,1,t),0!==t&&this.destinations.push(e)),this},log:function(e){"undefined"!=typeof e&&console.log("function"!=typeof e?e:"Function")},scriptCallbacks:[],run:function(script,pos,cm){var _start=pos.start?pos.start.line:pos.line,tree;try{tree=Gibber.Esprima.parse(script,{loc:!0,range:!0})}catch(e){return void console.error("Parse error on line "+(_start+e.lineNumber)+" : "+e.message.split(":")[1])}for(var __i__=0;__i__<tree.body.length;__i__++){var obj=tree.body[__i__],start={line:_start+obj.loc.start.line-1,ch:obj.loc.start.column},end={line:_start+obj.loc.end.line-1,ch:obj.loc.end.column},src=cm.getRange(start,end),result=null;try{result=eval(src),log("function"!=typeof result?result:"Function")}catch(e){console.error("Error evaluating expression beginning on line "+(start.line+1)+"\n"+e.message)}if(this.scriptCallbacks.length>0)for(var ___i___=0;___i___<this.scriptCallbacks.length;___i___++)this.scriptCallbacks[___i___](obj,cm,pos,start,end,src,_start)}},processArguments:function(e,t){var n;return e.length?"string"==typeof e[0]&&"Drums"!==t&&"XOX"!==t?(n=Gibber.getPreset(e[0],t),"object"==typeof e[1]&&$.extend(n,e[1]),n):Array.prototype.slice.call(e,0):n},processArguments2:function(e,t,n){if(t.length){var i=t[0];if("string"==typeof i&&"Drums"!==n&&"XOX"!==n&&"Shader"!==n)preset=Gibber.getPreset(t[0],n),"object"==typeof t[1]&&$.extend(preset,t[1]),$.extend(e,preset),e.presetInit&&e.presetInit();else if($.isPlainObject(i)&&"undefined"==typeof i.type)$.extend(e,i);else{var r=Object.keys(e.properties);if("FX"===e.type)for(var o=0;o<t.length;o++)e[r[o+1]]=t[o];else for(var o=0;o<t.length;o++)e[r[o]]=t[o]}}},getPreset:function(e,t){var n={};return Gibber.Presets[t]&&Gibber.Presets[t][e]?n=Gibber.Presets[t][e]:Gibber.log(t+" does not have a preset named "+e+"."),n},stopAudio:function(){Gibber.Audio.analysisUgens.length=0,Gibber.Audio.sequencers.length=0;for(var e=0;e<Gibber.Master.inputs.length;e++)Gibber.Master.inputs[e].value.disconnect();Gibber.Master.inputs.length=0,Gibber.Clock.reset(),Gibber.Master.fx.remove(),Gibber.Master.amp=1,console.log("Audio stopped.")},clear:function(){this.stopAudio(),Gibber.Graphics&&Gibber.Graphics.clear(),Gibber.proxy(window),$.publish("/gibber/clear",{}),console.log("Gibber has been cleared.")},proxy:function(e){for(var t="abcdefghijklmnopqrstuvwxyz",n=0;n<t.length;n++){var i=t.charAt(n);"undefined"!=typeof window[i]&&(delete window[i],delete window["___"+i]),function(){var t=i;Object.defineProperty(e,t,{configurable:!0,get:function(){return e["___"+t]},set:function(n){if(n)e["___"+t]&&"function"==typeof e["___"+t].replaceWith&&(e["___"+t].replaceWith(n),console.log(e["___"+t].name+" was replaced with "+n.name)),e["___"+t]=n;else if(e["___"+t]){var i=e["___"+t];i&&"function"==typeof i.kill&&i.kill()}}})}()}},construct:function(e,t){function n(){return e.apply(this,t)}return n.prototype=e.prototype,new n},createMappingObject:function(e,t){var n="function"==typeof e.min?e.min():e.min,i="function"==typeof e.max?e.max():e.max,r="function"==typeof t.min?t.min():t.min,o="function"==typeof t.max?t.max():t.max;if("undefined"==typeof t.object&&t.Value&&(t=t.Value),"undefined"!=typeof e.object[e.Name].mapping)return void e.object[e.Name].mapping.replace(t.object,t.name,t.Name);
"undefined"!=typeof t.targets&&-1===t.targets.indexOf(e)&&t.targets.push([e,e.Name]);var s="Out"!==t.Name?t.timescale:"audioOut";mapping=Gibber.mappings[e.timescale][s](e,t),e.object[e.name].toString=function(){return"> continuous mapping: "+t.name+" -> "+e.name},Object.defineProperties(e.object[e.Name],{min:{configurable:!0,get:function(){return n},set:function(t){n=t,e.object[e.Name].mapping.outputMin=n}},max:{configurable:!0,get:function(){return i},set:function(t){i=t,e.object[e.Name].mapping.outputMax=i}}}),e.object[e.Name].mappingObjects=[],Gibber.createProxyProperty(e.object[e.Name],"min",1,0,{min:n,max:i,output:e.output,timescale:e.timescale,dimensions:1}),Gibber.createProxyProperty(e.object[e.Name],"max",1,0,{min:n,max:i,output:e.output,timescale:e.timescale,dimensions:1}),Object.defineProperties(t.object[t.Name],{min:{configurable:!0,get:function(){return r},set:function(t){r=t,e.object[e.Name].mapping.inputMin=r}},max:{configurable:!0,get:function(){return o},set:function(t){o=t,e.object[e.Name].mapping.inputMax=o}}}),e.object[e.Name].invert=function(){e.object[e.Name].mapping.invert()},"undefined"==typeof e.object.mappings&&(e.object.mappings=[]),e.object.mappings.push(mapping),Gibber.defineSequencedProperty(e.object[e.Name],"invert")},defineSequencedProperty:function(e,t,n){var i,r,o=e[t];e.seq||(e.seq=Gibber.Seqs.Seq({doNotStart:!0,scale:e.scale,priority:n})),o.seq=function(s,a){var u={key:t,values:$.isArray(s)||null!==s&&"function"!=typeof s&&"number"==typeof s.length?s:[s],durations:$.isArray(a)?a:"undefined"!=typeof a?[a]:null,target:e,priority:n};return"undefined"!=typeof i&&(i.shouldStop=!0,e.seq.seqs.splice(r,1)),e.seq.add(u),r=e.seq.seqs.length-1,i=e.seq.seqs[r],null===u.durations&&e.seq.autofire.push(i),Object.defineProperties(o.seq,{values:{configurable:!0,get:function(){return e.seq.seqs[r].values},set:function(n){Array.isArray(n)||(n=[n]),"note"===t&&e.seq.scale&&(n=makeNoteFunction(n,e.seq)),e.seq.seqs[r].values=n}},durations:{configurable:!0,get:function(){return e.seq.seqs[r].durations},set:function(t){Array.isArray(t)||(t=[t]),e.seq.seqs[r].durations=t}}}),e.seq.isRunning||(e.seq.offset=Gibber.Clock.time(e.offset),e.seq.start(!0,n)),e},o.seq.stop=function(){i.shouldStop=!0},o.seq.start=function(){i.shouldStop=!1,e.seq.timeline[0]=[i],e.seq.nextTime=0,e.seq.isRunning||e.seq.start(!1,n)}},defineRampedProperty:function(e,t){var n,i=e[t],r=t.slice(1);i.ramp=function(t,i,o){return arguments.length<2?void console.err("ramp requires at least two arguments: target and time."):("undefined"==typeof o&&(o=i,i=t,t=e[r]()),n&&n(),"object"!=typeof t?e[r]=Line(t,i,o):t.retrigger(i,Gibber.Clock.time(o)),n=future(function(){e[r]=i},o),e)}},createProxyMethods:function(e,t){for(var n=0;n<t.length;n++)Gibber.defineSequencedProperty(e,t[n])},createProxyProperty:function(e,t,n,i,r,o,s){var a,u,c=t,l=o===!1?!1:!0,p=l?r||e.mappingProperties[c]:null,h=c.charAt(0).toUpperCase()+c.slice(1);a=$.extend({},p,{Name:h,name:c,type:"mapping",value:e[c],object:e,targets:[],oldSetter:e.__lookupSetter__(c),oldGetter:e.__lookupGetter__(c),oldMappingGetter:e.__lookupGetter__(h),oldMappingSetter:e.__lookupSetter__(h)}),e.mappingObjects||(e.mappingObjects=[]),e.mappingObjects.push(a);var f=l?"_"+c:c;u=e["_"+c]=function(){var t=function(t){return"undefined"!=typeof t?(a.value=t,a.oldSetter&&a.oldSetter(a.value),e):a.value};return t}(),u.valueOf=function(){return a.value},a.toString=function(){return"> continuous mapping: "+a.name},l?Object.defineProperty(e,c,{configurable:!0,get:function(){return e["_"+c]},set:function(t){return"object"==typeof t&&"mapping"===t.type?Gibber.createMappingObject(a,t):("undefined"!=typeof e[a.Name].mapping&&e[a.Name].mapping.remove&&e[a.Name].mapping.remove(!0),e["_"+c](t)),e}}):!function(){Object.defineProperty(e,c,{configurable:!0,get:function(){return e["_"+c]},set:function(t){return e["_"+c](t),e}})}(),n&&Gibber.defineSequencedProperty(e,f,s),i&&Gibber.defineRampedProperty(e,f),l&&Object.defineProperty(e,a.Name,{configurable:!0,get:function(){return"function"==typeof a.oldMappingGetter&&a.oldMappingGetter(),a},set:function(t){e[a.Name]=t,"function"==typeof a.oldMappingSetter&&a.oldMappingSetter(t)}})},createProxyProperties:function(e,t,n,i){var r="undefined"==typeof n?!0:n,o="undefined"==typeof i?!0:i;e.gibber=!0,!e.seq&&r&&(e.seq=Gibber.Seqs.Seq({doNotStart:!0,scale:e.scale})),e.mappingProperties=t,e.mappingObjects=[];for(var s in t)t[s].doNotProxy||Gibber.createProxyProperty(e,s,r,o)},object:{"class":null,text:null,init:function(e){this.class=e,this.text=$("."+e)}},ugen:{sequencers:[],mappings:[],fx:$.extend([],{add:function(){var e=0===this.length?this.ugen:this[this.length-1];e.disconnect();for(var t=0;t<arguments.length;t++){var n=arguments[t];n.input=e,e=n,this.push(n)}return this.ugen!==Gibber.Master?e.connect():e.connect(Gibber.Audio.out),this.ugen},remove:function(){if(arguments.length>0)for(var e=0;e<arguments.length;e++){var t=arguments[e];if("string"!=typeof t){if("number"==typeof t){var n=this[t];if(n.disconnect(),this.splice(t,1),"undefined"!=typeof this[t]){var i=t-1;this[t].input=-1!==i?this[i]:this.ugen,"undefined"!=typeof this[t+1]?this[t+1].input=0===t?this.ugen:this[t]:this.ugen.connect(this.ugen!==Gibber.Master?Gibber.Master:Gibber.Audio.out)}else this.length>0?this[t-1].connect(Gibber.Master):this.ugen.connect(this.ugen!==Gibber.Master?Gibber.Master:Gibber.Audio.out)}}else for(var r=0;r<this.length;r++)this[r].name===t&&this.remove(r)}else this.length>0?(this[this.length-1].disconnect(),this.ugen.connect(this.ugen!==Gibber.Master?Gibber.Master:Gibber.Audio.out),this.ugen.codegen(),this.length=0):Gibber.log(this.ugen.name+" does not have any fx to remove. ")}}),replaceWith:function(e){for(var t=0;t<this.destinations.length;t++)e.connect(this.destinations[t]);for(var t=0;t<this.sequencers.length;t++)this.sequencers[t].target=e,e.sequencers.push(this.sequencers[t]);for(var t=0;t<this.mappingObjects.length;t++){var n=this.mappingObjects[t];if(n.targets.length>0)for(var i=0;i<n.targets.length;i++){var r=n.targets[i];e.mappingProperties[n.name]?r[0].mapping.replace(e,n.name,n.Name):r[0].mapping.remove()}}this.kill()},kill:function(){var e=0!==this.fx.length?this.fx[this.fx.length-1]:this;this.seq.isRunning&&this.seq.disconnect(),e.disconnect();for(var t=0;t<this.fx.length;t++){var n=this.fx[t];n.seq.isRunning&&n.seq.disconnect()}this.disconnect();for(var t=0;t<this.mappings.length;t++)this.mappings[t].remove();this.clearMarks&&this.clearMarks(),console.log(this.name+" has been terminated.")},play:function(e,t){return this.note?this.note.seq(e,t):this.frequency&&this.frequency.seq(e,t),this},fadeIn:function(e,t){isNaN(t)&&(t=1);var n=Gibber.Clock.time(e),i=(new Gibber.Audio.ExponentialDecay({decayCoefficient:.05,length:n}),new Gibber.Audio.Line(0,t,n));return this.amp=i,future(function(){this.amp=t}.bind(this),n),this},fadeOut:function(e){var t=Gibber.Clock.time(e),n=(new Gibber.Audio.ExponentialDecay({decayCoefficient:5e-5,length:t}),new Gibber.Audio.Line(this.amp(),0,Gibber.Clock.time(t)));return this.amp=n,future(function(){this.amp=0}.bind(this),t),this}}};Gibber.Audio=_dereq_("gibberish-dsp"),Gibber.Clock=_dereq_("./clock")(Gibber),Gibber.Seqs=_dereq_("./seq")(Gibber),Gibber.Theory=_dereq_("./audio/theory")(Gibber),Gibber.FX=_dereq_("./audio/fx")(Gibber),Gibber.Oscillators=_dereq_("./audio/oscillators")(Gibber),Gibber.Synths=_dereq_("./audio/synths")(Gibber),Gibber.Busses=_dereq_("./audio/bus")(Gibber),Gibber.Analysis=_dereq_("./audio/analysis")(Gibber),Gibber.Envelopes=_dereq_("./audio/envelopes")(Gibber),Gibber.Percussion=_dereq_("./audio/drums")(Gibber),Gibber.Input=_dereq_("./audio/audio_input")(Gibber),Gibber.Samplers=_dereq_("./audio/sampler")(Gibber),Gibber.PostProcessing=_dereq_("./audio/postprocessing")(Gibber),Gibber.Utilities=_dereq_("./utilities")(Gibber),Gibber.Arp=_dereq_("./audio/arp")(Gibber),module.exports=Gibber}()},{"./audio/analysis":3,"./audio/arp":4,"./audio/audio_input":5,"./audio/bus":6,"./audio/drums":7,"./audio/envelopes":8,"./audio/fx":9,"./audio/oscillators":10,"./audio/postprocessing":11,"./audio/sampler":12,"./audio/synths":13,"./audio/theory":14,"./clock":15,"./dollar":16,"./seq":19,"./utilities":20,"gibberish-dsp":1}],18:[function(e,t){!function(){var e={outputCurves:{LINEAR:0,LOGARITHMIC:1},audio:{graphics:function(e,t){"undefined"==typeof t.object.track&&(t.object.track={});var n,i="undefined"!=typeof t.object.track[t.name]?t.object.track[t.name]:new Gibberish.Proxy2(t.object,t.name),r=new Gibberish.OnePole({a0:.005,b1:.995});return t.object.track=i,n=e.object[e.Name].mapping=Map(i,e.min,e.max,t.min,t.max,e.output,t.wrap),r.input=n,e.object[e.name]=r,n.proxy=i,n.op=r,n.remove=function(t){t||(e.object[e.name]=e.object[e.Name].mapping.getValue()),delete e.object[e.Name].mapping},n},"interface":function(e,t){var n,i="undefined"!=typeof t.track?t.track:new Gibberish.Proxy2(t.object,t.name),r=new Gibberish.OnePole({a0:.005,b1:.995}),o=e.max-e.min,s=(e.object[e.name]-e.min)/o,a=t.min+(t.max-t.min)*s;if(t.object.setValue&&t.object.setValue(a),t.track=i,n=e.object[e.Name].mapping=Map(i,e.min,e.max,t.min,t.max,e.output,t.wrap),r.input=n,e.object[e.name]=r,n.proxy=i,n.op=r,n.remove=function(t){t||(e.object[e.name]=n.getValue()),delete n},"undefined"!=typeof t.object.label){for(var u="",c=0;c<t.targets.length;c++){var l=t.targets[c];u+=l[0].object.name+"."+l[1],c!==t.targets.length-1&&(u+=" & ")}t.object.label=u}return n.replace=function(t,n,r){i.setInput(t),-1===t[r].targets.indexOf(e)&&t[r].targets.push([e,e.Name])},n},audio:function(e,t){var n,i;return"undefined"!=typeof t.object.track?(n=t.object.track,n.count++):(n=new Gibberish.Proxy2(t.object,t.name),n.count=1),t.object.track=n,e.object[e.name]=Map(n,e.min,e.max,t.min,t.max),i=e.object[e.Name].mapping=e.object[e.name](),i.remove=function(t){t||(e.object[e.name]=i.getValue()),i.op&&i.op.remove(),delete e.object[e.Name].mapping},i.replace=function(t,n,r){var o=new Gibberish.Proxy2(t,n);i.input=o,t[r].targets&&-1===t[r].targets.indexOf(e)&&t[r].targets.push([e,e.Name])},i},audioOut:function(e,t){var n;e.object[e.name]=Map(null,e.min,e.max,0,1,0),n=e.object[e.Name].mapping=e.object[e.name](),"undefined"!=typeof t.object.track?(n.follow=t.object.track,n.follow.count++):(n.follow=new Gibberish.Follow({input:t.object,useAbsoluteValue:!0}),n.follow.count=1),t.object.track=n.follow,n.input=e.object[e.Name].mapping.follow,n.remove=function(i){i||(e.object[e.name]=e.object[e.Name].mapping.getValue()),n.bus&&n.bus.disconnect(),n.follow&&(n.follow.count--,0===n.follow.count&&(delete t.object.track,n.follow.remove())),delete e.object[e.Name].mapping},n.replace=function(t,i,r){n.follow.input=t,-1===t[r].targets.indexOf(e)&&t[r].targets.push([e,e.Name])};var i=n.follow.bufferSize;return Object.defineProperty(e.object[e.Name],"env",{configurable:!0,get:function(){return i},set:function(e){i=Gibber.Clock.time(e),n.follow.bufferSize=i}}),n}},graphics:{graphics:function(e,t){var n,i=Map(t.object[t.name],e.min,e.max,t.min,t.max,e.output,t.wrap),r=i.getValue.bind(i);return i.getValue=function(){return i.callback(t.object[t.name],e.min,e.max,t.min,t.max,e.output,t.wrap),r()},n=e.object[e.Name].mapping=i,e.object.mod?e.object.mod(e.name,n,"="):e.modObject.mod(e.modName,n,"="),n.remove=function(){e.object.mod?e.object.removeMod(e.name):e.modObject.removeMod(e.modName),e.object[e.name]=e.object[e.Name].mapping.getValue(),delete e.object[e.Name].mapping},n.replace=function(e){n.input=e},n},"interface":function(e,t){var n,i=Map(t.object[t.name],e.min,e.max,t.min,t.max,e.output,t.wrap);"undefined"==typeof t.object.functions&&(t.object.functions={},t.object.onvaluechange=function(){for(var e in t.object.functions)t.object.functions[e]()}),n=e.object[e.Name].mapping=i,e.mapping.from=t;var r=e.name+" <- "+t.object.name+"."+t.Name;if(t.object.functions[r]=function(){var i=n.callback(t.object[t.name],e.min,e.max,t.min,t.max,e.output,t.wrap);e.object[e.Name].oldSetter.call(e.object[e.Name],i)},n.replace=function(){},n.remove=function(){console.log("mapping removed"),delete t.object.functions[r]},t.object.setValue&&t.object.setValue(e.object[e.name]),"undefined"!=typeof t.object.label){for(var o="",s=0;s<t.targets.length;s++){var a=t.targets[s];o+=a[0].object.name+"."+a[1],s!==t.targets.length-1&&(o+=" & ")}t.object.label=o}return n},audio:function(e,t){var n;n=e.object[e.Name].mapping=Map(null,e.min,e.max,t.min,t.max,e.output,t.wrap),n.follow="undefined"!=typeof t.object.track?t.object.track:new Gibberish.Follow({input:t.object.properties[t.name],useAbsoluteValue:!1}),t.object.track=e.object[e.Name].mapping.follow,n.input=n.follow,n.bus=new Gibberish.Bus2({amp:0}).connect(),n.connect(n.bus),n.replace=function(t,i,r){n.follow.input=t,-1===t[r].targets.indexOf(e)&&t[r].targets.push([e,e.Name])};var i=n.follow.bufferSize;return Object.defineProperty(e.object[e.Name],"env",{get:function(){return i},set:function(e){i=Gibber.Clock.time(e),n.follow.bufferSize=i}}),e.object.mod?e.object.mod(e.name,n,"="):e.modObject.mod(e.modName,n,"="),n.remove=function(){this.bus.disconnect(),this.follow&&(this.follow.count--,0===this.follow.count&&(delete t.object.track,this.follow.remove())),e.object.mod?e.object.removeMod(e.name):e.modObject.removeMod(e.modName),delete e.object[e.Name].mapping},n},audioOut:function(e,t){if(console.log(e.Name,e.object),"undefined"!=typeof e.object[e.Name].mapping)return console.log("REPLACING MAPPING"),n.replace(t.object,t.name,t.Name),n;console.log("MAKING A MAPPING");var n=e.object[e.Name].mapping=Map(null,e.min,e.max,0,1,0);"undefined"!=typeof t.object.track?(n.follow=t.object.track,n.follow.count++):(n.follow=new Gibberish.Follow({input:t.object}),n.follow.count=1),t.object.track=n.follow;var i=n.follow.bufferSize;return Object.defineProperty(e.object[e.Name],"env",{configurable:!0,get:function(){return i},set:function(e){i=Gibber.Clock.time(e),n.follow.bufferSize=i}}),n.input=n.follow,n.bus=new Gibberish.Bus2({amp:0}).connect(),n.connect(n.bus),n.replace=function(i,r,o){if(i[o].timescale===t.timescale){var s=n.follow.input[t.Name].targets.indexOf(e);s>=-1&&n.follow.input[t.Name].targets.splice(s,1),n.follow.input=i,-1===i[o].targets.indexOf(e)&&i[o].targets.push([e,e.Name])}else n.bus.disconnect(),n.follow.remove(),Gibber.createMappingObject(e,i)},e.object.mod?e.object.mod(e.name,n,"="):e.modObject?e.modObject.mod(e.modName,n,"="):!function(){var t=n;e.object.update=function(){e.object[e.name](t.getValue())}}(),n.remove=function(){this.bus.disconnect(),this.follow&&(this.follow.count--,0===this.follow.count&&(delete t.object.track,this.follow.remove())),e.object.mod?e.object.removeMod(e.name):e.modObject?e.modObject.removeMod(e.modName):console.log("removing update "),delete e.object[e.Name].mapping},n}},notation:{graphics:function(e,t){var n,i=Map(t.object[t.name],e.min,e.max,t.min,t.max,e.output,t.wrap),r=i.getValue.bind(i);return i.getValue=function(){return i.callback(t.object[t.name],e.min,e.max,t.min,t.max,e.output,t.wrap),r()},n=e.object[e.Name].mapping=i,e.object.mod?e.object.mod(e.name,n,"="):e.modObject.mod(e.modName,n,"="),n.remove=function(){e.object.mod?e.object.removeMod(e.name):e.modObject.removeMod(e.modName),e.object[e.name]=e.object[e.Name].mapping.getValue(),delete e.object[e.Name].mapping},n.replace=function(e){n.input=e},n},"interface":function(e,t){var n,i=Map(t.object[t.name],e.min,e.max,t.min,t.max,e.output,t.wrap);"undefined"==typeof t.object.functions&&(t.object.functions={},t.object.onvaluechange=function(){for(var e in t.object.functions)t.object.functions[e]()}),n=e.object[e.Name].mapping=i,e.mapping.from=t;var r=e.name+" <- "+t.object.name+"."+t.Name;if(t.object.functions[r]=function(){var i=n.callback(t.object[t.name],e.min,e.max,t.min,t.max,e.output,t.wrap);e.object[e.Name].oldSetter.call(e.object[e.Name],i)},n.replace=function(){},n.remove=function(){console.log("mapping removed"),delete t.object.functions[r]},t.object.setValue&&t.object.setValue(e.object[e.name]),"undefined"!=typeof t.object.label){for(var o="",s=0;s<t.targets.length;s++){var a=t.targets[s];o+=a[0].object.name+"."+a[1],s!==t.targets.length-1&&(o+=" & ")}t.object.label=o}return n},audio:function(e,t){var n;n=e.object[e.Name].mapping=Map(null,e.min,e.max,t.min,t.max,e.output,t.wrap),"undefined"!=typeof t.object.track&&t.object.track.input===t.object.properties[t.name]?(n.follow=t.object.track,n.follow.count++):(n.follow=new Gibberish.Follow({input:t.object.properties[t.name],useAbsoluteValue:!1}),n.follow.count=1),t.object.track=e.object[e.Name].mapping.follow,n.input=n.follow,n.bus=new Gibberish.Bus2({amp:0}).connect(),n.connect(n.bus),n.replace=function(t,i,r){n.follow.input=t,-1===t[r].targets.indexOf(e)&&t[r].targets.push([e,e.Name])};var i=n.follow.bufferSize;return Object.defineProperty(e.object[e.Name],"env",{get:function(){return i},set:function(e){i=Gibber.Clock.time(e),n.follow.bufferSize=i}}),n.update=function(){e.object[e.name](n.getValue())},n.text=e.object,Gibber.Environment.Notation.add(n),n.remove=function(){this.bus.disconnect(),this.follow&&(this.follow.count--,0===this.follow.count&&(delete t.object.track,this.follow.remove())),Gibber.Environment.Notation.remove(n),delete e.object[e.Name].mapping},n},audioOut:function(e,t){if("undefined"!=typeof e.object[e.Name].mapping)return n.replace(t.object,t.name,t.Name),n;var n=e.object[e.Name].mapping=Map(null,e.min,e.max,0,1,0);console.log("MAPPING",t),"undefined"!=typeof t.object.track&&t.object.track.input===t.object.properties[t.name]?(n.follow=t.object.track,n.follow.count++):(n.follow=new Gibberish.Follow({input:t.object,useAbsoluteValue:!0}),n.follow.count=1),t.object.track=n.follow;var i=n.follow.bufferSize;return Object.defineProperty(e.object[e.Name],"env",{configurable:!0,get:function(){return i},set:function(e){i=Gibber.Clock.time(e),n.follow.bufferSize=i}}),n.input=n.follow,n.bus=new Gibberish.Bus2({amp:0}).connect(),n.connect(n.bus),n.replace=function(i,r,o){if(i[o].timescale===t.timescale){var s=n.follow.input[t.Name].targets.indexOf(e);s>=-1&&n.follow.input[t.Name].targets.splice(s,1),n.follow.input=i,-1===i[o].targets.indexOf(e)&&i[o].targets.push([e,e.Name])}else n.bus.disconnect(),n.follow.remove(),Gibber.createMappingObject(e,i)},n.update=function(){e.object[e.name](n.getValue())},n.text=e.object,Gibber.Environment.Notation.add(n),n.remove=function(){this.bus.disconnect(),this.follow&&(this.follow.count--,0===this.follow.count&&(delete t.object.track,this.follow.remove())),Gibber.Environment.Notation.remove(n),delete e.object[e.Name].mapping},n}}};t.exports=e}()},{}],19:[function(e,t){!function(){var n,i=e("gibberish-dsp"),r=e("./dollar"),o=["durations","target","scale","offset","doNotStart","priority"],s=function(e,t){var n=r.extend([],e),i=0;return[function(){var e,r;if(e="function"==typeof n.pick?n[n.pick()]:"function"==typeof n[i]?n[i]():n[i++],"number"==typeof t.scale.notes[e])r=t.scale.notes[e];else try{r=t.scale.notes[e].fq()}catch(o){console.error("The frequency could not be obtained from the current scale. Did you specify an invalid mode or root note?"),t.stop()}return i>=n.length&&(i=0),r}]},a=function(){var e,t={},a=[];if("object"==typeof arguments[0]){var u=arguments[0],c=typeof u.durations;typeof u.target,u.priority,t.target=u.target,"object"==typeof u.scale&&(t.scale=u.scale),"number"==typeof u.offset&&(t.offset=n.Clock.time(u.offset)),"array"===c?t.durations=u.durations:"undefined"!==c&&(t.durations=[u.durations]),t.keysAndValues={},t.seqs=[],t.autofire=[];for(var l in u)if(-1===o.indexOf(l)){var p=r.type(u[l]),h={key:l,target:t.target,durations:t.durations};"array"===p||"number"==typeof u.length?h.values=u[l]:"undefined"!==p&&(h.values=[u[l]]),t.seqs.push(h),a.push(l)}if("scale"in t){var f=a.indexOf("note"),d=a.indexOf("chord");if(f>-1&&(t.seqs[f].values=s(t.seqs[f].values,t)),d>-1){var m=r.extend([],t.seqs[d]),b=0;t.seqs[d]=[function(){var e,n=[];return e="function"==typeof m.pick?m[m.pick()]:"function"==typeof m[b]?m[b]():m[b++],n=t.scale.chord(e),b>=m.length&&(b=0),n}]}}}else"function"==typeof arguments[0]&&(t.seqs=[{key:"functions",values:[arguments[0]],durations:n.Clock.time(arguments[1])}],a.push("functions"));e=new i.PolySeq(t),e.timeModifier=n.Clock.time.bind(n.Clock),e.name="Seq",e.save={},e.oldShuffle=e.shuffle,delete e.shuffle,e.rate=n.Clock;var g=e.__lookupSetter__("rate"),y=e.rate;Object.defineProperty(e,"rate",{get:function(){return y},set:function(t){y=Mul(n.Clock,t),g.call(e,y)}});var v=e.nextTime,x=e.__lookupSetter__("nextTime");Object.defineProperty(e,"nextTime",{get:function(){return v},set:function(e){v=n.Clock.time(e),x(v)}});var w=e.offset;Object.defineProperty(e,"offset",{get:function(){return w},set:function(t){w=t,e.nextTime+=w}}),e.nextTime+=e.offset;for(var G=0;G<a.length;G++)!function(e){var t=a[G],n=G;Object.defineProperty(e,t,{get:function(){return e.seqs[n].values},set:function(i){"note"===t&&e.scale&&(i=s(i,e)),e.seqs[n].values=i}})}(e);var k=null;return Object.defineProperty(e,"durations",{get:function(){return k},set:function(t){k=t;for(var n=0;n<e.seqs.length;n++){var i=e.seqs[n];i.durations=k}}}),arguments[0]&&!arguments[0].doNotStart&&e.start(!0),e.toString=function(){return"> Seq"},e.gibber=!0,e};r.extend(i.PolySeq.prototype,{constructor:a,replaceWith:function(){this.kill()},kill:function(){this.target&&this.target.sequencers&&this.target.sequencers.splice(this.target.sequencers.indexOf(this),1),this.stop().disconnect()},applyScale:function(){for(var e=0;e<this.seqs.length;e++){var t=this.seqs[e];("note"===t.key||"frequency"===t.key)&&(t.values=s(t.values,this))}},once:function(){return this.repeat(1),this},reset:function(){if(0!==Object.keys(this.save).length)for(var e in this.save)for(var t=this.save[e],n=0;n<this.seqs.length;n++)if(this.seqs[n].key===e){this.seqs[n].values=Array.isArray(t)?this.save[e].slice(0):this.save[e];break}},shuffle:function(){if(0===Object.keys(this.save).length)for(var e=0;e<this.seqs.length;e++){var t=this.seqs[e].values;this.save[this.seqs[e].key]=Array.isArray(t)?t.slice(0):t}var n=Array.prototype.slice.call(arguments,0);this.oldShuffle.apply(this,n)}});var u=function(){var e,t=arguments[0];return t.root=t.root||"c4",t.mode=t.mode||"aeolian",console.log(t),e=n.Theory.Scale(t.root,t.mode),delete t.root,delete t.mode,t.scale=e,a(t)},c={Seq:a,ScaleSeq:u};t.exports=function(e){return"undefined"==typeof n&&(n=e),c}}()},{"./dollar":16,"gibberish-dsp":1}],20:[function(e,t){!function(){"use strict";var n,i=[],r=!1,o=(e("./dollar"),e("gibberish-dsp")),s=(e("./clock")(n),{seq:function(){var e=arguments[0],t=typeof e,n=null;return"object"===t&&Array.isArray(e)&&(t="array"),n},random:function(){for(var e={},t=null,n=0;n<arguments.length;n+=2)e[""+arguments[n]]={repeat:arguments[n+1],count:0};return this.pick=function(){var n,i,r=0;return this[t]&&(i=this[t]),null!==t&&e[i].count++<=e[i].repeat?(n=t,e[i].count>=e[i].repeat&&(e[i].count=0,t=null)):(n=s.rndi(0,this.length-1),r=this[n],"undefined"!=typeof e[""+r]?(e[""+r].count=1,t=n):t=null),n},this},random2:function(){for(var e={},t=null,n=this,i=0;i<arguments.length;i+=2)e[""+arguments[i]]={repeat:arguments[i+1],count:0};return this.pick=function(){var i,r,o=0;return n[t]&&(r=n[t]),null!==t&&e[r].count++<=e[r].repeat?(i=t,e[r].count>=e[r].repeat&&(e[r].count=0,t=null)):(i=s.rndi(0,n.length-1),o=n[i],"undefined"!=typeof e[""+o]?(e[""+o].count=1,t=i):t=null),n[i]},this.pick},choose:function(e){var t=null;if(isNaN(e)&&(e=1),1!==e){for(var n=[],i=0;e>i;i++)n[i]=this[s.rndi(0,this.length-1)];t=n}else t=this[s.rndi(0,this.length-1)];return t},future:function(e,t){var i=new o.Sequencer({values:[function(){},function(){e(),i.stop(),i.disconnect()}],durations:[n.Clock.time(t)]}).start();return function(){i.stop(),i.disconnect()}},shuffle:function(e){for(var t,n,i=e.length;i;t=parseInt(Math.random()*i),n=e[--i],e[i]=e[t],e[t]=n);},solo:function(e){var t=Array.prototype.slice.call(arguments,0);if(e){r&&s.solo();for(var n=0;n<t.length;n++){var o=t[n];o.fx.length>0&&(t[n]=o.fx[o.fx.length-1])}for(var a=0;a<Master.inputs.length;a++){var u=t.indexOf(Master.inputs[a].value),c=Master.inputs[a].value,l=c.name;-1===u&&"polyseq"!==l&&"Seq"!==l&&(Master.inputs[a].value=Mul(Master.inputs[a].value,0),i.push(Master.inputs[a]))}r=!0}else{for(var a=0;a<i.length;a++)i[a].value=i[a].value[0];i.length=0,r=!1}},fill:function(e,t){isNaN(e)&&(e=16),"function"!=typeof t&&(t=Rndf()),t=t.bind(this);for(var n=0;e>n;n++)this[n]=t();return this},merge:function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];if(Array.isArray(n))for(var i=0;i<n.length;i++)e.push(n[i]);else e.push(n)}return e},weight:function(){var e=Array.prototype.slice.call(arguments,0);return this.pick=function(){for(var t=this[0],n=0,i=s.rndf(),r=0;r<e.length;r++)if(n+=e[r],n>i){t=r;break}return t},this},gibberArray:function(){},init:function(){Array.prototype.random=Array.prototype.rnd=s.random,Array.prototype.weight=s.weight,Array.prototype.fill=s.fill,Array.prototype.choose=s.choose,Array.prototype.merge=s.merge}});t.exports=function(e){return"undefined"==typeof n&&(n=e),s}}()},{"./clock":15,"./dollar":16,"gibberish-dsp":1}]},{},[17])(17)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1]);var shim=function(){window.requestDraw=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}()}({}),constants=function(){var e=Math.PI;return{ARROW:"default",CROSS:"crosshair",HAND:"pointer",MOVE:"move",TEXT:"text",WAIT:"wait",HALF_PI:e/2,PI:e,QUARTER_PI:e/4,TAU:2*e,TWO_PI:2*e,DEGREES:"degrees",RADIANS:"radians",CORNER:"corner",CORNERS:"corners",RADIUS:"radius",RIGHT:"right",LEFT:"left",CENTER:"center",POINTS:"points",LINES:"lines",TRIANGLES:"triangles",TRIANGLE_FAN:"triangles_fan",TRIANGLE_STRIP:"triangles_strip",QUADS:"quads",QUAD_STRIP:"quad_strip",CLOSE:"close",OPEN:"open",CHORD:"chord",PIE:"pie",PROJECT:"square",SQUARE:"butt",ROUND:"round",BEVEL:"bevel",MITER:"miter",RGB:"rgb",HSB:"hsb",AUTO:"auto",ALT:18,BACKSPACE:8,CONTROL:17,DELETE:46,DOWN_ARROW:40,ENTER:13,ESCAPE:27,LEFT_ARROW:37,OPTION:18,RETURN:13,RIGHT_ARROW:39,SHIFT:16,TAB:9,UP_ARROW:38,BLEND:"normal",ADDITIVE:"lighter",DARKEST:"darken",LIGHTEST:"lighten",DIFFERENCE:"difference",EXCLUSION:"exclusion",MULTIPLY:"multiply",SCREEN:"screen",REPLACE:"source-over",OVERLAY:"overlay",HARD_LIGHT:"hard-light",SOFT_LIGHT:"soft-light",DODGE:"color-dodge",BURN:"color-burn",NORMAL:"normal",ITALIC:"italic",BOLD:"bold",LINEAR:"linear",QUADRATIC:"quadratic",BEZIER:"bezier",CURVE:"curve"}}({}),core=function(e,t,n){"use strict";var n=n,i=function(e,t){this._setupDone=!1,this._pixelDensity=window.devicePixelRatio||1,this._startTime=(new Date).getTime(),this._userNode=t,this._curElement=null,this._elements=[],this._preloadCount=0,this._updateInterval=0,this._isGlobal=!1,this._loop=!0,this.styles=[],this._defaultCanvasSize={width:100,height:100},this._events={mousemove:null,mousedown:null,mouseup:null,click:null,mousewheel:null,mouseover:null,mouseout:null,keydown:null,keyup:null,keypress:null,touchstart:null,touchmove:null,touchend:null},this._start=function(){this._userNode&&"string"==typeof this._userNode&&(this._userNode=document.getElementById(this._userNode)),this.createCanvas(this._defaultCanvasSize.width,this._defaultCanvasSize.height,!0);var e=this.preload||window.preload,t=this._isGlobal?window:this;e?(this._preloadMethods.forEach(function(e){t[e]=function(n){return t._preload(e,n)}}),e(),0===this._preloadCount&&(this._setup(),this._runFrames(),this._draw())):(this._setup(),this._runFrames(),this._draw())}.bind(this),this._preload=function(e,t){var n=this._isGlobal?window:this;return n._setProperty("_preloadCount",n._preloadCount+1),i.prototype[e].call(n,t,function(){n._setProperty("_preloadCount",n._preloadCount-1),0===n._preloadCount&&(n._setup(),n._runFrames(),n._draw())})}.bind(this),this._setup=function(){var e=this._isGlobal?window:this;"function"==typeof e.preload&&this._preloadMethods.forEach(function(t){e[t]=i.prototype[t]}),"function"==typeof e.setup&&e.setup();for(var t=new RegExp(/(^|\s)p5_hidden(?!\S)/g),n=document.getElementsByClassName("p5_hidden"),r=0;r<n.length;r++){var o=n[r];o.style.visibility="",o.className=o.className.replace(t,"")}this._setupDone=!0}.bind(this),this._draw=function(){var e=this.setup||window.setup,t=(new Date).getTime();this._frameRate=1e3/(t-this._lastFrameTime),this._lastFrameTime=t;var n=this.draw||window.draw;this._loop&&(this._drawInterval&&clearInterval(this._drawInterval),this._drawInterval=setTimeout(function(){window.requestDraw(this._draw.bind(this))}.bind(this),1e3/this._targetFrameRate)),"function"==typeof n&&(this.push(),"undefined"==typeof e&&this.scale(this._pixelDensity,this._pixelDensity),this._registeredMethods.pre.forEach(function(e){e.call(this)}),n(),this._registeredMethods.post.forEach(function(e){e.call(this)}),this.pop())}.bind(this),this._runFrames=function(){this._updateInterval&&clearInterval(this._updateInterval),this._updateInterval=setInterval(function(){this._setProperty("frameCount",this.frameCount+1)}.bind(this),1e3/this._targetFrameRate)}.bind(this),this._setProperty=function(e,t){this[e]=t,this._isGlobal&&(window[e]=t)}.bind(this),this.remove=function(){if(this._curElement){this._loop=!1,this._drawInterval&&clearTimeout(this._drawInterval),this._updateInterval&&clearTimeout(this._updateInterval);for(var e in this._events)window.removeEventListener(e,this._events[e]);for(var t=0;t<this._elements.length;t++){var n=this._elements[t];n.elt.parentNode&&n.elt.parentNode.removeChild(n.elt);for(var r in n._events)n.elt.removeEventListener(r,n._events[r])}var o=this;if(this._registeredMethods.remove.forEach(function(e){"undefined"!=typeof e&&e.call(o)}),this._isGlobal){for(var s in i.prototype)try{delete window[s]}catch(a){window[s]=void 0}for(var u in this)if(this.hasOwnProperty(u))try{delete window[u]}catch(a){window[u]=void 0}}}}.bind(this);for(var r in n)i.prototype[r]=n[r];if(e)e(this);else{this._isGlobal=!0;for(var o in i.prototype)if("function"==typeof i.prototype[o]){var s=o.substring(2);this._events.hasOwnProperty(s)||(window[o]=i.prototype[o].bind(this))}else window[o]=i.prototype[o];for(var a in this)this.hasOwnProperty(a)&&(window[a]=this[a])}for(var u in this._events){var c=this["on"+u];if(c){var l=c.bind(this);window.addEventListener(u,l),this._events[u]=l}}var p=this;window.addEventListener("focus",function(){p._setProperty("focused",!0)}),window.addEventListener("blur",function(){p._setProperty("focused",!1)}),"complete"===document.readyState?this._start():window.addEventListener("load",this._start.bind(this),!1)};return i.prototype._preloadMethods=["loadJSON","loadImage","loadStrings","loadXML","loadShape","loadTable"],i.prototype._registeredMethods={pre:[],post:[],remove:[]},i.prototype.registerPreloadMethod=function(e){i.prototype._preloadMethods.push(e)}.bind(this),i.prototype.registerMethod=function(e,t){i.prototype._registeredMethods.hasOwnProperty(e)||(i.prototype._registeredMethods[e]=[]),i.prototype._registeredMethods[e].push(t)}.bind(this),i}({},shim,constants),p5Color=function(e,t,n){var i=t,n=n;return i.Color=function(e,t){if(t instanceof Array)this.rgba=t;else{var r=i.Color.getNormalizedColor.apply(e,t);e._colorMode===n.HSB?(this.hsba=r,this.rgba=i.Color.getRGB(this.hsba)):this.rgba=r}this.colorString=i.Color.getColorString(this.rgba)},i.Color.getNormalizedColor=function(){var e=this._colorMode===n.RGB,t=e?this._maxRGB:this._maxHSB;if(arguments[0]instanceof Array)return i.Color.getNormalizedColor.apply(this,arguments[0]);var r,o,s,a;return arguments.length>=3?(r=arguments[0],o=arguments[1],s=arguments[2],a="number"==typeof arguments[3]?arguments[3]:t[3]):(e?r=o=s=arguments[0]:(r=s=arguments[0],o=0),a="number"==typeof arguments[1]?arguments[1]:t[3]),r*=255/t[0],o*=255/t[1],s*=255/t[2],a*=255/t[3],[r,o,s,a]},i.Color.getRGB=function(e){var t=e[0],n=e[1],i=e[2];t/=255,n/=255,i/=255;var r=[];if(0===n)r=[Math.round(255*i),Math.round(255*i),Math.round(255*i),e[3]];else{var o=6*t;6===o&&(o=0);var s,a,u,c=Math.floor(o),l=i*(1-n),p=i*(1-n*(o-c)),h=i*(1-n*(1-(o-c)));0===c?(s=i,a=h,u=l):1===c?(s=p,a=i,u=l):2===c?(s=l,a=i,u=h):3===c?(s=l,a=p,u=i):4===c?(s=h,a=l,u=i):(s=i,a=l,u=p),r=[Math.round(255*s),Math.round(255*a),Math.round(255*u),e[3]]}return r},i.Color.getHSB=function(e){var t,n,i=e[0]/255,r=e[1]/255,o=e[2]/255,s=Math.min(i,r,o),a=Math.max(i,r,o),u=a-s,c=a;if(0===u)t=0,n=0;else{n=u/a;var l=((a-i)/6+u/2)/u,p=((a-r)/6+u/2)/u,h=((a-o)/6+u/2)/u;i===a?t=h-p:r===a?t=1/3+l-h:o===a&&(t=2/3+p-l),0>t&&(t+=1),t>1&&(t-=1)}return[Math.round(255*t),Math.round(255*n),Math.round(255*c),e[3]]
},i.Color.getColorString=function(e){for(var t=0;3>t;t++)e[t]=Math.floor(e[t]);var n="undefined"!=typeof e[3]?e[3]/255:1;return"rgba("+e[0]+","+e[1]+","+e[2]+","+n+")"},i.Color.getColor=function(){if(arguments[0]instanceof i.Color)return arguments[0].colorString;if(arguments[0]instanceof Array)return i.Color.getColorString(arguments[0]);var e=i.Color.getNormalizedColor.apply(this,arguments);return this._colorMode===n.HSB&&(e=i.Color.getRGB(e)),i.Color.getColorString(e)},i.Color}({},core,constants),p5Element=function(e,t){function n(e,t,n){var i=n,r=function(e){t(e,i)};n.elt.addEventListener(e,r,!1),n._events[e]=r}var i=t;return i.Element=function(e,t){this.elt=e,this._pInst=t,this._events={},this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight},i.Element.prototype.parent=function(e){"string"==typeof e&&(e=document.getElementById(e)),e.appendChild(this.elt)},i.Element.prototype.id=function(e){this.elt.id=e},i.Element.prototype.class=function(e){this.elt.className+=" "+e},i.Element.prototype.mousePressed=function(e){n("mousedown",e,this)},i.Element.prototype.mouseWheel=function(e){n("mousewheel",e,this)},i.Element.prototype.mouseReleased=function(e){n("mouseup",e,this)},i.Element.prototype.mouseClicked=function(e){n("click",e,this)},i.Element.prototype.mouseMoved=function(e){n("mousemove",e,this)},i.Element.prototype.mouseOver=function(e){n("mouseover",e,this)},i.Element.prototype.mouseOut=function(e){n("mouseout",e,this)},i.Element.prototype._setProperty=function(e,t){this[e]=t},i.Element}({},core),p5Graphics=function(e,t,n){var i=t,n=n;return i.Graphics=function(e,t){i.Element.call(this,e,t),this.canvas=e,this.drawingContext=this.canvas.getContext("2d"),this._pInst?(this._pInst._setProperty("_curElement",this),this._pInst._setProperty("canvas",this.canvas),this._pInst._setProperty("drawingContext",this.drawingContext),this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height)):this.canvas.style.display="none",this.drawingContext.fillStyle="#FFFFFF",this.drawingContext.strokeStyle="#000000",this.drawingContext.lineCap=n.ROUND},i.Graphics.prototype=Object.create(i.Element.prototype),i.Graphics}({},core,constants),filters=function(){"use strict";function e(e){var t=3.5*e|0;if(t=1>t?1:248>t?t:248,i!==t){i=t,r=1+i<<1,o=new Int32Array(r),s=new Array(r);for(var n=0;r>n;n++)s[n]=new Int32Array(256);for(var a,u,c,l,p=1,h=t-1;t>p;p++){o[t+p]=o[h]=u=h*h,c=s[t+p],l=s[h--];for(var f=0;256>f;f++)c[f]=l[f]=u*f}a=o[t]=t*t,c=s[t];for(var d=0;256>d;d++)c[d]=a*d}}function t(t,a){for(var u=n._toPixels(t),c=t.width,l=t.height,p=c*l,h=new Int32Array(p),f=0;p>f;f++)h[f]=n._getARGB(u,f);var d,m,b,g,y,v,x,w,G,k=new Int32Array(p),_=new Int32Array(p),j=new Int32Array(p),C=0;e(a);var S,A,M,P;for(A=0;l>A;A++){for(S=0;c>S;S++){if(g=b=m=d=0,y=S-i,0>y)G=-y,y=0;else{if(y>=c)break;G=0}for(M=G;r>M&&!(y>=c);M++){var q=h[y+C];P=s[M],m+=P[(16711680&q)>>16],b+=P[(65280&q)>>8],g+=P[255&q],d+=o[M],y++}v=C+S,k[v]=m/d,_[v]=b/d,j[v]=g/d}C+=c}for(C=0,x=-i,w=x*c,A=0;l>A;A++){for(S=0;c>S;S++){if(g=b=m=d=0,0>x)G=v=-x,y=S;else{if(x>=l)break;G=0,v=x,y=S+w}for(M=G;r>M&&!(v>=l);M++)P=s[M],m+=P[k[y]],b+=P[_[y]],g+=P[j[y]],d+=o[M],v++,y+=c;h[S+C]=4278190080|m/d<<16|b/d<<8|g/d}C+=c,w+=c,x++}n._setPixels(u,h)}var n={};n._toPixels=function(e){return e instanceof ImageData?e.data:e.getContext("2d").getImageData(0,0,e.width,e.height).data},n._getARGB=function(e,t){var n=4*t;return e[n+3]<<24&4278190080|e[n]<<16&16711680|e[n+1]<<8&65280|255&e[n+2]},n._setPixels=function(e,t){for(var n=0,i=0,r=e.length;r>i;i++)n=4*i,e[n+0]=(16711680&t[i])>>>16,e[n+1]=(65280&t[i])>>>8,e[n+2]=255&t[i],e[n+3]=(4278190080&t[i])>>>24},n._toImageData=function(e){return e instanceof ImageData?e:e.getContext("2d").getImageData(0,0,e.width,e.height)},n._createImageData=function(e,t){return n._tmpCanvas=document.createElement("canvas"),n._tmpCtx=n._tmpCanvas.getContext("2d"),this._tmpCtx.createImageData(e,t)},n.apply=function(e,t,n){var i=e.getContext("2d"),r=i.getImageData(0,0,e.width,e.height),o=t(r,n);o instanceof ImageData?i.putImageData(o,0,0,0,0,e.width,e.height):i.putImageData(r,0,0,0,0,e.width,e.height)},n.threshold=function(e,t){var i=n._toPixels(e);void 0===t&&(t=.5);for(var r=Math.floor(255*t),o=0;o<i.length;o+=4){var s,a=i[o],u=i[o+1],c=i[o+2],l=.2126*a+.7152*u+.0722*c;s=l>=r?255:0,i[o]=i[o+1]=i[o+2]=s}},n.gray=function(e){for(var t=n._toPixels(e),i=0;i<t.length;i+=4){var r=t[i],o=t[i+1],s=t[i+2],a=.2126*r+.7152*o+.0722*s;t[i]=t[i+1]=t[i+2]=a}},n.opaque=function(e){for(var t=n._toPixels(e),i=0;i<t.length;i+=4)t[i+3]=255;return t},n.invert=function(e){for(var t=n._toPixels(e),i=0;i<t.length;i+=4)t[i]=255-t[i],t[i+1]=255-t[i+1],t[i+2]=255-t[i+2]},n.posterize=function(e,t){var i=n._toPixels(e);if(2>t||t>255)throw new Error("Level must be greater than 2 and less than 255 for posterize");for(var r=t-1,o=0;o<i.length;o+=4){var s=i[o],a=i[o+1],u=i[o+2];i[o]=255*(s*t>>8)/r,i[o+1]=255*(a*t>>8)/r,i[o+2]=255*(u*t>>8)/r}},n.dilate=function(e){for(var t,i,r,o,s,a,u,c,l,p,h,f,d,m,b,g,y,v=n._toPixels(e),x=0,w=v.length?v.length/4:0,G=new Int32Array(w);w>x;)for(t=x,i=x+e.width;i>x;)r=o=n._getARGB(v,x),u=x-1,a=x+1,c=x-e.width,l=x+e.width,t>u&&(u=x),a>=i&&(a=x),0>c&&(c=0),l>=w&&(l=x),f=n._getARGB(v,c),h=n._getARGB(v,u),d=n._getARGB(v,l),p=n._getARGB(v,a),s=77*(r>>16&255)+151*(r>>8&255)+28*(255&r),b=77*(h>>16&255)+151*(h>>8&255)+28*(255&h),m=77*(p>>16&255)+151*(p>>8&255)+28*(255&p),g=77*(f>>16&255)+151*(f>>8&255)+28*(255&f),y=77*(d>>16&255)+151*(d>>8&255)+28*(255&d),b>s&&(o=h,s=b),m>s&&(o=p,s=m),g>s&&(o=f,s=g),y>s&&(o=d,s=y),G[x++]=o;n._setPixels(v,G)},n.erode=function(e){for(var t,i,r,o,s,a,u,c,l,p,h,f,d,m,b,g,y,v=n._toPixels(e),x=0,w=v.length?v.length/4:0,G=new Int32Array(w);w>x;)for(t=x,i=x+e.width;i>x;)r=o=n._getARGB(v,x),u=x-1,a=x+1,c=x-e.width,l=x+e.width,t>u&&(u=x),a>=i&&(a=x),0>c&&(c=0),l>=w&&(l=x),f=n._getARGB(v,c),h=n._getARGB(v,u),d=n._getARGB(v,l),p=n._getARGB(v,a),s=77*(r>>16&255)+151*(r>>8&255)+28*(255&r),b=77*(h>>16&255)+151*(h>>8&255)+28*(255&h),m=77*(p>>16&255)+151*(p>>8&255)+28*(255&p),g=77*(f>>16&255)+151*(f>>8&255)+28*(255&f),y=77*(d>>16&255)+151*(d>>8&255)+28*(255&d),s>b&&(o=h,s=b),s>m&&(o=p,s=m),s>g&&(o=f,s=g),s>y&&(o=d,s=y),G[x++]=o;n._setPixels(v,G)};var i,r,o,s;return n.blur=function(e,n){t(e,n)},n}({}),p5Image=function(e,t,n){"use strict";var i=t,r=n;return i.Image=function(e,t){this.width=e,this.height=t,this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.drawingContext=this.canvas.getContext("2d"),this.pixels=[]},i.Image.prototype._setProperty=function(e,t){this[e]=t},i.Image.prototype.loadPixels=function(){i.prototype.loadPixels.call(this)},i.Image.prototype.updatePixels=function(e,t,n,r){i.prototype.updatePixels.call(this,e,t,n,r)},i.Image.prototype.get=function(e,t,n,r){return i.prototype.get.call(this,e,t,n,r)},i.Image.prototype.set=function(e,t,n){i.prototype.set.call(this,e,t,n)},i.Image.prototype.resize=function(e,t){var n=document.createElement("canvas");n.width=e,n.height=t,n.getContext("2d").drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,n.width,n.width),this.canvas.width=this.width=e,this.canvas.height=this.height=t,this.drawingContext.drawImage(n,0,0,e,t,0,0,e,t),this.pixels.length>0&&this.loadPixels()},i.Image.prototype.copy=function(){i.prototype.copy.apply(this,arguments)},i.Image.prototype.mask=function(e){void 0===e&&(e=this);var t=this.drawingContext.globalCompositeOperation,n=[e,0,0,e.width,e.height,0,0,this.width,this.height];this.drawingContext.globalCompositeOperation="destination-out",this.copy.apply(this,n),this.drawingContext.globalCompositeOperation=t},i.Image.prototype.filter=function(e,t){r.apply(this.canvas,r[e.toLowerCase()],t)},i.Image.prototype.blend=function(){i.prototype.blend.apply(this,arguments)},i.Image.prototype.save=function(e,t){var n;if(t)switch(t.toLowerCase()){case"png":n="image/png";break;case"jpeg":n="image/jpeg";break;case"jpg":n="image/jpeg";break;default:n="image/png"}else t="png",n="image/png";var r="image/octet-stream",o=this.canvas.toDataURL(n);o=o.replace(n,r),i.prototype.downloadFile(o,e,t)},i.Image}({},core,filters),polargeometry=function(){return{degreesToRadians:function(e){return 2*Math.PI*e/360},radiansToDegrees:function(e){return 360*e/(2*Math.PI)}}}({}),p5Vector=function(e,t,n,i){"use strict";var r=t,o=n,i=i;return r.Vector=function(){var e,t,n;arguments[0]instanceof r?(this.p5=arguments[0],e=arguments[1][0]||0,t=arguments[1][1]||0,n=arguments[1][2]||0):(e=arguments[0]||0,t=arguments[1]||0,n=arguments[2]||0),this.x=e,this.y=t,this.z=n},r.Vector.prototype.set=function(e,t,n){return e instanceof r.Vector?(this.x=e.x||0,this.y=e.y||0,this.z=e.z||0,this):e instanceof Array?(this.x=e[0]||0,this.y=e[1]||0,this.z=e[2]||0,this):(this.x=e||0,this.y=t||0,this.z=n||0,this)},r.Vector.prototype.get=function(){return this.p5?new r.Vector(this.p5,[this.x,this.y,this.z]):new r.Vector(this.x,this.y,this.z)},r.Vector.prototype.add=function(e,t,n){return e instanceof r.Vector?(this.x+=e.x||0,this.y+=e.y||0,this.z+=e.z||0,this):e instanceof Array?(this.x+=e[0]||0,this.y+=e[1]||0,this.z+=e[2]||0,this):(this.x+=e||0,this.y+=t||0,this.z+=n||0,this)},r.Vector.prototype.sub=function(e,t,n){return e instanceof r.Vector?(this.x-=e.x||0,this.y-=e.y||0,this.z-=e.z||0,this):e instanceof Array?(this.x-=e[0]||0,this.y-=e[1]||0,this.z-=e[2]||0,this):(this.x-=e||0,this.y-=t||0,this.z-=n||0,this)},r.Vector.prototype.mult=function(e){return this.x*=e||0,this.y*=e||0,this.z*=e||0,this},r.Vector.prototype.div=function(e){return this.x/=e,this.y/=e,this.z/=e,this},r.Vector.prototype.mag=function(){return Math.sqrt(this.magSq())},r.Vector.prototype.magSq=function(){var e=this.x,t=this.y,n=this.z;return e*e+t*t+n*n},r.Vector.prototype.dot=function(e,t,n){return e instanceof r.Vector?this.dot(e.x,e.y,e.z):this.x*(e||0)+this.y*(t||0)+this.z*(n||0)},r.Vector.prototype.cross=function(e){var t=this.y*e.z-this.z*e.y,n=this.z*e.x-this.x*e.z,i=this.x*e.y-this.y*e.x;return this.p5?new r.Vector(this.p5,[t,n,i]):new r.Vector(t,n,i)},r.Vector.prototype.dist=function(e){var t=e.get().sub(this);return t.mag()},r.Vector.prototype.normalize=function(){return this.div(this.mag())},r.Vector.prototype.limit=function(e){var t=this.magSq();return t>e*e&&(this.div(Math.sqrt(t)),this.mult(e)),this},r.Vector.prototype.setMag=function(e){return this.normalize().mult(e)},r.Vector.prototype.heading=function(){var e=Math.atan2(this.y,this.x);return this.p5?this.p5._angleMode===i.RADIANS?e:o.radiansToDegrees(e):e},r.Vector.prototype.rotate=function(e){this.p5&&this.p5._angleMode===i.DEGREES&&(e=o.degreesToRadians(e));var t=this.heading()+e,n=this.mag();return this.x=Math.cos(t)*n,this.y=Math.sin(t)*n,this},r.Vector.prototype.lerp=function(e,t,n,i){return e instanceof r.Vector?this.lerp(e.x,e.y,e.z,t):(this.x+=(e-this.x)*i||0,this.y+=(t-this.y)*i||0,this.z+=(n-this.z)*i||0,this)},r.Vector.prototype.array=function(){return[this.x||0,this.y||0,this.z||0]},r.Vector.fromAngle=function(e){return this.p5&&this.p5._angleMode===i.DEGREES&&(e=o.degreesToRadians(e)),this.p5?new r.Vector(this.p5,[Math.cos(e),Math.sin(e),0]):new r.Vector(Math.cos(e),Math.sin(e),0)},r.Vector.random2D=function(){var e;return e=this.p5?this.p5.random(this.p5._angleMode===i.DEGREES?360:i.TWO_PI):Math.random()*Math.PI*2,this.fromAngle(e)},r.Vector.random3D=function(){var e,t;this.p5?(e=this.p5.random(0,i.TWO_PI),t=this.p5.random(-1,1)):(e=Math.random()*Math.PI*2,t=2*Math.random()-1);var n=Math.sqrt(1-t*t)*Math.cos(e),o=Math.sqrt(1-t*t)*Math.sin(e);return this.p5?new r.Vector(this.p5,[n,o,t]):new r.Vector(n,o,t)},r.Vector.add=function(e,t){return e.get().add(t)},r.Vector.sub=function(e,t){return e.get().sub(t)},r.Vector.mult=function(e,t){return e.get().mult(t)},r.Vector.div=function(e,t){return e.get().div(t)},r.Vector.dot=function(e,t){return e.dot(t)},r.Vector.cross=function(e,t){return e.cross(t)},r.Vector.dist=function(e,t){return e.dist(t)},r.Vector.lerp=function(e,t,n){return e.get().lerp(t,n)},r.Vector.angleBetween=function(e,t){var n=Math.acos(e.dot(t)/(e.mag()*t.mag()));return this.p5&&this.p5._angleMode===i.DEGREES&&(n=o.radiansToDegrees(n)),n},r.Vector}({},core,polargeometry,constants),p5TableRow=function(e,t){"use strict";var n=t;return n.TableRow=function(e,t){var n=[],i={};e&&(t=t||",",n=e.split(t));for(var r=0;r<n.length;r++){var o=r,s=n[r];i[o]=s}this.arr=n,this.obj=i,this.table=null},n.TableRow.prototype.set=function(e,t){if("string"==typeof e){var n=this.table.columns.indexOf(e);if(!(n>=0))throw'This table has no column named "'+e+'"';this.obj[e]=t,this.arr[n]=t}else{if(!(e<this.table.columns.length))throw"Column #"+e+" is out of the range of this table";this.arr[e]=t;var i=this.table.columns[e];this.obj[i]=t}},n.TableRow.prototype.setNum=function(e,t){var n=parseFloat(t,10);this.set(e,n)},n.TableRow.prototype.setString=function(e,t){var n=t.toString();this.set(e,n)},n.TableRow.prototype.get=function(e){return"string"==typeof e?this.obj[e]:this.arr[e]},n.TableRow.prototype.getNum=function(e){var t;if(t="string"==typeof e?parseFloat(this.obj[e],10):parseFloat(this.arr[e],10),"NaN"===t.toString())throw"Error: "+this.obj[e]+" is NaN (Not a Number)";return t},n.TableRow.prototype.getString=function(e){return"string"==typeof e?this.obj[e].toString():this.arr[e].toString()},n.TableRow}({},core),p5Table=function(e,t){"use strict";var n=t;return n.Table=function(){this.columns=[],this.rows=[]},n.Table.prototype.addRow=function(e){var t=e||new n.TableRow;if("undefined"==typeof t.arr||"undefined"==typeof t.obj)throw"invalid TableRow: "+t;return t.table=this,this.rows.push(t),t},n.Table.prototype.removeRow=function(e){this.rows[e].table=null;var t=this.rows.splice(e+1,this.rows.length);this.rows.pop(),this.rows=this.rows.concat(t)},n.Table.prototype.getRow=function(e){return this.rows[e]},n.Table.prototype.getRows=function(){return this.rows},n.Table.prototype.findRow=function(e,t){if("string"==typeof t){for(var n=0;n<this.rows.length;n++)if(this.rows[n].obj[t]===e)return this.rows[n]}else for(var i=0;i<this.rows.length;i++)if(this.rows[i].arr[t]===e)return this.rows[i];return null},n.Table.prototype.findRows=function(e,t){var n=[];if("string"==typeof t)for(var i=0;i<this.rows.length;i++)this.rows[i].obj[t]===e&&n.push(this.rows[i]);else for(var r=0;r<this.rows.length;r++)this.rows[r].arr[t]===e&&n.push(this.rows[r]);return n},n.Table.prototype.matchRow=function(e,t){if("number"==typeof t){for(var n=0;n<this.rows.length;n++)if(this.rows[n].arr[t].match(e))return this.rows[n]}else for(var i=0;i<this.rows.length;i++)if(this.rows[i].obj[t].match(e))return this.rows[i];return null},n.Table.prototype.matchRows=function(e,t){var n=[];if("number"==typeof t)for(var i=0;i<this.rows.length;i++)this.rows[i].arr[t].match(e)&&n.push(this.rows[i]);else for(var r=0;r<this.rows.length;r++)this.rows[r].obj[t].match(e)&&n.push(this.rows[r]);return n},n.Table.prototype.getColumn=function(e){var t=[];if("string"==typeof e)for(var n=0;n<this.rows.length;n++)t.push(this.rows[n].obj[e]);else for(var i=0;i<this.rows.length;i++)t.push(this.rows[i].arr[e]);return t},n.Table.prototype.clearRows=function(){delete this.rows,this.rows=[]},n.Table.prototype.addColumn=function(e){var t=e||null;this.columns.push(t)},n.Table.prototype.getColumnCount=function(){return this.columns.length},n.Table.prototype.getRowCount=function(){return this.rows.length},n.Table.prototype.removeTokens=function(e,t){for(var n=function(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},i=[],r=0;r<e.length;r++)i.push(n(e.charAt(r)));var o=new RegExp(i.join("|"),"g");if("undefined"==typeof t)for(var s=0;s<this.columns.length;s++)for(var a=0;a<this.rows.length;a++){var u=this.rows[a].arr[s];u=u.replace(o,""),this.rows[a].arr[s]=u,this.rows[a].obj[this.columns[s]]=u}else if("string"==typeof t)for(var c=0;c<this.rows.length;c++){var l=this.rows[c].obj[t];l=l.replace(o,""),this.rows[c].obj[t]=l;var p=this.columns.indexOf(t);this.rows[c].arr[p]=l}else for(var h=0;h<this.rows.length;h++){var f=this.rows[h].arr[t];f=f.replace(o,""),this.rows[h].arr[t]=f,this.rows[h].obj[this.columns[t]]=f}},n.Table.prototype.trim=function(e){var t=new RegExp(" ","g");if("undefined"==typeof e)for(var n=0;n<this.columns.length;n++)for(var i=0;i<this.rows.length;i++){var r=this.rows[i].arr[n];r=r.replace(t,""),this.rows[i].arr[n]=r,this.rows[i].obj[this.columns[n]]=r}else if("string"==typeof e)for(var o=0;o<this.rows.length;o++){var s=this.rows[o].obj[e];s=s.replace(t,""),this.rows[o].obj[e]=s;var a=this.columns.indexOf(e);this.rows[o].arr[a]=s}else for(var u=0;u<this.rows.length;u++){var c=this.rows[u].arr[e];c=c.replace(t,""),this.rows[u].arr[e]=c,this.rows[u].obj[this.columns[e]]=c}},n.Table.prototype.removeColumn=function(e){var t,n;"string"==typeof e?(t=e,n=this.columns.indexOf(e),console.log("string")):(n=e,t=this.columns[e]);var i=this.columns.splice(n+1,this.columns.length);this.columns.pop(),this.columns=this.columns.concat(i);for(var r=0;r<this.rows.length;r++){var o=this.rows[r].arr,s=o.splice(n+1,o.length);o.pop(),this.rows[r].arr=o.concat(s),delete this.rows[r].obj[t]}},n.Table}({},core),colorcreating_reading=function(e,t){"use strict";var n=t;return n.prototype.alpha=function(e){if(e instanceof n.Color)return e.rgba[3];if(e instanceof Array)return e[3];throw new Error("Needs p5.Color or pixel array as argument.")},n.prototype.blue=function(e){if(e instanceof Array)return e[2];if(e instanceof n.Color)return e.rgba[2];throw new Error("Needs p5.Color or pixel array as argument.")},n.prototype.brightness=function(e){if(!e instanceof n.Color)throw new Error("Needs p5.Color as argument.");return e.hsba||(e.hsba=n.Color.getRGB(e.rgba),e.hsba=e.hsba.concat(e.rgba[3])),e.hsba[2]},n.prototype.color=function(){return arguments[0]instanceof Array?new n.Color(this,arguments[0],!0):new n.Color(this,arguments)},n.prototype.green=function(e){if(e instanceof Array)return e[1];if(e instanceof n.Color)return e.rgba[1];throw new Error("Needs p5.Color or pixel array as argument.")},n.prototype.hue=function(e){if(!e instanceof n.Color)throw new Error("Needs p5.Color as argument.");return e.hsba||(e.hsba=n.Color.getRGB(e.rgba)),e.hsba[0]},n.prototype.lerpColor=function(e,t,i){if(e instanceof Array){for(var r=[],o=0;o<e.length;o++)r.push(n.prototype.lerp(e[o],t[o],i));return r}if(e instanceof n.Color){for(var s=[],a=0;4>a;a++)s.push(n.prototype.lerp(e.rgba[a],t.rgba[a],i));return new n.Color(this,s)}return n.prototype.lerp(e,t,i)},n.prototype.red=function(e){if(e instanceof Array)return e[0];if(e instanceof n.Color)return e.rgba[0];throw new Error("Needs p5.Color or pixel array as argument.")},n.prototype.saturation=function(e){if(!e instanceof n.Color)throw new Error("Needs p5.Color as argument.");return e.hsba||(e.hsba=n.Color.getRGB(e.rgba),e.hsba=e.hsba.concat(e.rgba[3])),e.hsba[1]},n}({},core,p5Color),colorsetting=function(e,t,n){"use strict";var i=t,n=n;return i.prototype._doStroke=!0,i.prototype._doFill=!0,i.prototype._colorMode=n.RGB,i.prototype._maxRGB=[255,255,255,255],i.prototype._maxHSB=[255,255,255,255],i.prototype.background=function(){if(arguments[0]instanceof i.Image)this.image(arguments[0],0,0,this.width,this.height);else{var e=this.drawingContext.fillStyle,t=this.drawingContext;t.fillStyle=i.Color.getColor.apply(this,arguments),t.fillRect(0,0,this.width,this.height),t.fillStyle=e}},i.prototype.clear=function(){this.drawingContext.clearRect(0,0,this.width,this.height)},i.prototype.colorMode=function(){if(arguments[0]===n.RGB||arguments[0]===n.HSB){this._colorMode=arguments[0];var e=this._colorMode===n.RGB,t=e?this._maxRGB:this._maxHSB;2===arguments.length?(t[0]=arguments[1],t[1]=arguments[1],t[2]=arguments[1]):arguments.length>2&&(t[0]=arguments[1],t[1]=arguments[2],t[2]=arguments[3]),5===arguments.length&&(t[3]=arguments[4])}},i.prototype.fill=function(){this._setProperty("_doFill",!0);var e=this.drawingContext;e.fillStyle=i.Color.getColor.apply(this,arguments)},i.prototype.noFill=function(){this._setProperty("_doFill",!1)},i.prototype.noStroke=function(){this._setProperty("_doStroke",!1)},i.prototype.stroke=function(){this._setProperty("_doStroke",!0);var e=this.drawingContext;e.strokeStyle=i.Color.getColor.apply(this,arguments)},i}({},core,constants,p5Color),dataarray_functions=function(e,t){"use strict";var n=t;return n.prototype.append=function(e,t){return e.push(t),e},n.prototype.arrayCopy=function(e,t,n,i,r){var o,s;"undefined"!=typeof r?(s=Math.min(r,e.length),o=i,e=e.slice(t,s+t)):("undefined"!=typeof n?(s=n,s=Math.min(s,e.length)):s=e.length,o=0,n=t,e=e.slice(0,s)),Array.prototype.splice.apply(n,[o,s].concat(e))},n.prototype.concat=function(e,t){return e.concat(t)},n.prototype.reverse=function(e){return e.reverse()},n.prototype.shorten=function(e){return e.pop(),e},n.prototype.sort=function(e,t){var n=t?e.slice(0,Math.min(t,e.length)):e,i=t?e.slice(Math.min(t,e.length)):[];return n="string"==typeof n[0]?n.sort():n.sort(function(e,t){return e-t}),n.concat(i)},n.prototype.splice=function(e,t,n){return Array.prototype.splice.apply(e,[n,0].concat(t)),e},n.prototype.subset=function(e,t,n){return"undefined"!=typeof n?e.slice(t,t+n):e.slice(t,e.length)},n}({},core),datastring_functions=function(e,t){"use strict";function n(){var e=arguments[0],t=0>e,n=t?e.toString().substring(1):e.toString(),i=n.indexOf("."),r=-1!==i?n.substring(0,i):n,o=-1!==i?n.substring(i+1):"",s=t?"-":"";if(3===arguments.length){for(var a=0;a<arguments[1]-r.length;a++)s+="0";s+=r,s+=".",s+=o;for(var u=0;u<arguments[2]-o.length;u++)s+="0";return s}for(var c=0;c<Math.max(arguments[1]-r.length,0);c++)s+="0";return s+=n}function i(){var e=arguments[0].toString(),t=e.indexOf("."),n=-1!==t?e.substring(t):"",i=-1!==t?e.substring(0,t):e;return i=i.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),arguments.length>1&&(n=n.substring(0,arguments[1]+1)),i+n}function r(){return parseFloat(arguments[0])>0?"+"+arguments[0].toString():arguments[0].toString()}function o(){return parseFloat(arguments[0])>0?" "+arguments[0].toString():arguments[0].toString()}var s=t;return s.prototype.join=function(e,t){return e.join(t)},s.prototype.match=function(e,t){return e.match(t)},s.prototype.matchAll=function(e,t){for(var n=new RegExp(t,"g"),i=n.exec(e),r=[];null!==i;)r.push(i),i=n.exec(e);return r},s.prototype.nf=function(){if(arguments[0]instanceof Array){var e=arguments[1],t=arguments[2];return arguments[0].map(function(i){return n(i,e,t)})}return n.apply(this,arguments)},s.prototype.nfc=function(){if(arguments[0]instanceof Array){var e=arguments[1];return arguments[0].map(function(t){return i(t,e)})}return i.apply(this,arguments)},s.prototype.nfp=function(){var e=this.nf(arguments);return e instanceof Array?e.map(r):r(e)},s.prototype.nfs=function(){var e=this.nf(arguments);return e instanceof Array?e.map(o):o(e)},s.prototype.split=function(e,t){return e.split(t)},s.prototype.splitTokens=function(){var e=arguments.length>0?arguments[1]:/\s/g;return arguments[0].split(e).filter(function(e){return e})},s.prototype.trim=function(e){return e instanceof Array?e.map(this.trim):e.trim()},s}({},core),environment=function(e,t,n){"use strict";function i(e){var t=document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled;if(!t)throw new Error("Fullscreen not enabled in this browser.");e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()}function r(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()}var o=t,s=n,a=[s.ARROW,s.CROSS,s.HAND,s.MOVE,s.TEXT,s.WAIT];return o.prototype._frameRate=0,o.prototype._lastFrameTime=0,o.prototype._targetFrameRate=60,o.prototype.frameCount=0,o.prototype.focused=!0,o.prototype.cursor=function(e,t,n){var i="auto",r=this._curElement.elt;if(a.indexOf(e)>-1)i=e;else if("string"==typeof e){var o="";t&&n&&"number"==typeof t&&"number"==typeof n&&(o=t+" "+n),i="http://"!==e.substring(0,6)?"url("+e+") "+o+", auto":/\.(cur|jpg|jpeg|gif|png|CUR|JPG|JPEG|GIF|PNG)$/.test(e)?"url("+e+") "+o+", auto":e}r.style.cursor=i},o.prototype.frameRate=function(e){return"undefined"==typeof e?this._frameRate:(this._setProperty("_targetFrameRate",e),this._runFrames(),this)},o.prototype.getFrameRate=function(){return this.frameRate()},o.prototype.setFrameRate=function(e){return this.frameRate(e)},o.prototype.noCursor=function(){this._curElement.elt.style.cursor="none"},o.prototype.displayWidth=screen.width,o.prototype.displayHeight=screen.height,o.prototype.windowWidth=window.innerWidth,o.prototype.windowHeight=window.innerHeight,window.addEventListener("resize",function(){this.windowWidth=window.innerWidth,this.windowHeight=window.innerHeight}),o.prototype.width=0,o.prototype.height=0,o.prototype.fullscreen=function(e){return"undefined"==typeof e?document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement:void(e?i(document.documentElement):r())},o}({},core,constants),imageimage=function(e,t,n){"use strict";var i=t,n=n;return i.prototype._imageMode=n.CORNER,i.prototype._tint=null,i.prototype.createImage=function(e,t){return new i.Image(e,t)},i}({},core,constants),canvas=function(e,t){var t=t;return{modeAdjust:function(e,n,i,r,o){return o===t.CORNER?{x:e,y:n,w:i,h:r}:o===t.CORNERS?{x:e,y:n,w:i-e,h:r-n}:o===t.RADIUS?{x:e-i,y:n-r,w:2*i,h:2*r}:o===t.CENTER?{x:e-.5*i,y:n-.5*r,w:i,h:r}:void 0},arcModeAdjust:function(e,n,i,r,o){return o===t.CORNER?{x:e+.5*i,y:n+.5*r,w:i,h:r}:o===t.CORNERS?{x:e,y:n,w:i+e,h:r+n}:o===t.RADIUS?{x:e,y:n,w:2*i,h:2*r}:o===t.CENTER?{x:e,y:n,w:i,h:r}:void 0}}}({},constants),imageloading_displaying=function(e,t,n,i,r){"use strict";var o=t,s=n,i=i,r=r;return o.prototype.loadImage=function(e,t){var n=new Image,i=new o.Image(1,1,this);return n.onload=function(){i.width=i.canvas.width=n.width,i.height=i.canvas.height=n.height,i.canvas.getContext("2d").drawImage(n,0,0),"undefined"!=typeof t&&t(i)},n.crossOrigin="Anonymous",n.src=e,i},o.prototype.image=function(e,t,n,r,o){var s=e.canvas?e.canvas:e.elt;void 0===r&&(r=e.width),void 0===o&&(o=e.height);var a=i.modeAdjust(t,n,r,o,this._imageMode);this._tint?this.drawingContext.drawImage(this._getTintedImageCanvas(e),a.x,a.y,a.w,a.h):this.drawingContext.drawImage(s,a.x,a.y,a.w,a.h)},o.prototype.tint=function(){var e=o.Color.getNormalizedColor.apply(this,arguments);this._tint=e},o.prototype.noTint=function(){this._tint=null},o.prototype._getTintedImageCanvas=function(e){if(!e.canvas)return e;var t=s._toPixels(e.canvas),n=document.createElement("canvas");n.width=e.canvas.width,n.height=e.canvas.height;for(var i=n.getContext("2d"),r=i.createImageData(e.canvas.width,e.canvas.height),o=r.data,a=0;a<t.length;a+=4){var u=t[a],c=t[a+1],l=t[a+2],p=t[a+3];o[a]=u*this._tint[0]/255,o[a+1]=c*this._tint[1]/255,o[a+2]=l*this._tint[2]/255,o[a+3]=p*this._tint[3]/255}return i.putImageData(r,0,0),n},o.prototype.imageMode=function(e){(e===r.CORNER||e===r.CORNERS||e===r.CENTER)&&(this._imageMode=e)},o}({},core,filters,canvas,constants),imagepixels=function(e,t,n){"use strict";var i=t,r=n;return i.prototype.pixels=[],i.prototype.blend=function(){var e=this.drawingContext.globalCompositeOperation,t=arguments[arguments.length-1],n=Array.prototype.slice.call(arguments,0,arguments.length-1);this.drawingContext.globalCompositeOperation=t,this.copy.apply(this,n),this.drawingContext.globalCompositeOperation=e},i.prototype.copy=function(){var e,t,n,i,r,o,s,a,u;if(9===arguments.length)e=arguments[0],t=arguments[1],n=arguments[2],i=arguments[3],r=arguments[4],o=arguments[5],s=arguments[6],a=arguments[7],u=arguments[8];else{if(8!==arguments.length)throw new Error("Signature not supported");t=arguments[0],n=arguments[1],i=arguments[2],r=arguments[3],o=arguments[4],s=arguments[5],a=arguments[6],u=arguments[7],e=this}this.drawingContext.drawImage(e.canvas,t,n,i,r,o,s,a,u)},i.prototype.filter=function(e,t){r.apply(this.canvas,r[e.toLowerCase()],t)},i.prototype.get=function(e,t,n,r){if(void 0===e&&void 0===t&&void 0===n&&void 0===r?(e=0,t=0,n=this.width,r=this.height):void 0===n&&void 0===r&&(n=1,r=1),e>this.width||t>this.height||0>e||0>t)return[0,0,0,255];var o=this.drawingContext.getImageData(e,t,n,r),s=o.data;if(1===n&&1===r){for(var a=[],u=0;u<s.length;u+=4)a.push(s[u],s[u+1],s[u+2],s[u+3]);return a}n=Math.min(n,this.width),r=Math.min(r,this.height);var c=new i.Image(n,r);return c.canvas.getContext("2d").putImageData(o,0,0,0,0,n,r),c},i.prototype.loadPixels=function(){var e=this.width,t=this.height,n=this.drawingContext.getImageData(0,0,e,t);this._setProperty("imageData",n),this._setProperty("pixels",n.data)},i.prototype.set=function(e,t,n){if(n instanceof i.Image)this.drawingContext.drawImage(n.canvas,e,t),this.loadPixels.call(this);else{var r=4*(t*this.width+e);if(this.imageData||this.loadPixels.call(this),"number"==typeof n)r<this.pixels.length&&(this.pixels[r]=n,this.pixels[r+1]=n,this.pixels[r+2]=n,this.pixels[r+3]=255);else if(n instanceof Array){if(n.length<4)throw new Error("pixel array must be of the form [R, G, B, A]");r<this.pixels.length&&(this.pixels[r]=n[0],this.pixels[r+1]=n[1],this.pixels[r+2]=n[2],this.pixels[r+3]=n[3])}else n instanceof i.Color&&r<this.pixels.length&&(this.pixels[r]=n.rgba[0],this.pixels[r+1]=n.rgba[1],this.pixels[r+2]=n.rgba[2],this.pixels[r+3]=n.rgba[3])}},i.prototype.updatePixels=function(e,t,n,i){void 0===e&&void 0===t&&void 0===n&&void 0===i&&(e=0,t=0,n=this.width,i=this.height),this.drawingContext.putImageData(this.imageData,e,t,0,0,n,i)},i}({},core,filters,p5Color);!function(e,t,n){"undefined"!=typeof module&&module.exports?module.exports=n():"function"==typeof define&&define.amd?define("reqwest",n):t[e]=n()}("reqwest",this,function(){function handleReadyState(e,t,n){return function(){return e._aborted?n(e.request):void(e.request&&4==e.request[readyState]&&(e.request.onreadystatechange=noop,twoHundo.test(e.request.status)?t(e.request):n(e.request)))}}function setHeaders(e,t){var n,i=t.headers||{};i.Accept=i.Accept||defaultHeaders.accept[t.type]||defaultHeaders.accept["*"],t.crossOrigin||i[requestedWith]||(i[requestedWith]=defaultHeaders.requestedWith),i[contentType]||(i[contentType]=t.contentType||defaultHeaders.contentType);for(n in i)i.hasOwnProperty(n)&&"setRequestHeader"in e&&e.setRequestHeader(n,i[n])}function setCredentials(e,t){"undefined"!=typeof t.withCredentials&&"undefined"!=typeof e.withCredentials&&(e.withCredentials=!!t.withCredentials)}function generalCallback(e){lastValue=e}function urlappend(e,t){return e+(/\?/.test(e)?"&":"?")+t}function handleJsonp(e,t,n,i){var r=uniqid++,o=e.jsonpCallback||"callback",s=e.jsonpCallbackName||reqwest.getcallbackPrefix(r),a=new RegExp("((^|\\?|&)"+o+")=([^&]+)"),u=i.match(a),c=doc.createElement("script"),l=0,p=-1!==navigator.userAgent.indexOf("MSIE 10.0");return u?"?"===u[3]?i=i.replace(a,"$1="+s):s=u[3]:i=urlappend(i,o+"="+s),win[s]=generalCallback,c.type="text/javascript",c.src=i,c.async=!0,"undefined"==typeof c.onreadystatechange||p||(c.event="onclick",c.htmlFor=c.id="_reqwest_"+r),c.onload=c.onreadystatechange=function(){return c[readyState]&&"complete"!==c[readyState]&&"loaded"!==c[readyState]||l?!1:(c.onload=c.onreadystatechange=null,c.onclick&&c.onclick(),t(lastValue),lastValue=void 0,head.removeChild(c),void(l=1))},head.appendChild(c),{abort:function(){c.onload=c.onreadystatechange=null,n({},"Request is aborted: timeout",{}),lastValue=void 0,head.removeChild(c),l=1}}}function getRequest(e,t){var n,i=this.o,r=(i.method||"GET").toUpperCase(),o="string"==typeof i?i:i.url,s=i.processData!==!1&&i.data&&"string"!=typeof i.data?reqwest.toQueryString(i.data):i.data||null,a=!1;return"jsonp"!=i.type&&"GET"!=r||!s||(o=urlappend(o,s),s=null),"jsonp"==i.type?handleJsonp(i,e,t,o):(n=i.xhr&&i.xhr(i)||xhr(i),n.open(r,o,i.async===!1?!1:!0),setHeaders(n,i),setCredentials(n,i),win[xDomainRequest]&&n instanceof win[xDomainRequest]?(n.onload=e,n.onerror=t,n.onprogress=function(){},a=!0):n.onreadystatechange=handleReadyState(this,e,t),i.before&&i.before(n),a?setTimeout(function(){n.send(s)},200):n.send(s),n)}function Reqwest(e,t){this.o=e,this.fn=t,init.apply(this,arguments)}function setType(e){var t=e.match(/\.(json|jsonp|html|xml)(\?|$)/);return t?t[1]:"js"}function init(o,fn){function complete(e){for(o.timeout&&clearTimeout(self.timeout),self.timeout=null;self._completeHandlers.length>0;)self._completeHandlers.shift()(e)}function success(resp){resp="jsonp"!==type?self.request:resp;var filteredResponse=globalSetupOptions.dataFilter(resp.responseText,type),r=filteredResponse;
try{resp.responseText=r}catch(e){}if(r)switch(type){case"json":try{resp=win.JSON?win.JSON.parse(r):eval("("+r+")")}catch(err){return error(resp,"Could not parse JSON in response",err)}break;case"js":resp=eval(r);break;case"html":resp=r;break;case"xml":resp=resp.responseXML&&resp.responseXML.parseError&&resp.responseXML.parseError.errorCode&&resp.responseXML.parseError.reason?null:resp.responseXML}for(self._responseArgs.resp=resp,self._fulfilled=!0,fn(resp),self._successHandler(resp);self._fulfillmentHandlers.length>0;)resp=self._fulfillmentHandlers.shift()(resp);complete(resp)}function error(e,t,n){for(e=self.request,self._responseArgs.resp=e,self._responseArgs.msg=t,self._responseArgs.t=n,self._erred=!0;self._errorHandlers.length>0;)self._errorHandlers.shift()(e,t,n);complete(e)}this.url="string"==typeof o?o:o.url,this.timeout=null,this._fulfilled=!1,this._successHandler=function(){},this._fulfillmentHandlers=[],this._errorHandlers=[],this._completeHandlers=[],this._erred=!1,this._responseArgs={};var self=this,type=o.type||setType(this.url);fn=fn||function(){},o.timeout&&(this.timeout=setTimeout(function(){self.abort()},o.timeout)),o.success&&(this._successHandler=function(){o.success.apply(o,arguments)}),o.error&&this._errorHandlers.push(function(){o.error.apply(o,arguments)}),o.complete&&this._completeHandlers.push(function(){o.complete.apply(o,arguments)}),this.request=getRequest.call(this,success,error)}function reqwest(e,t){return new Reqwest(e,t)}function normalize(e){return e?e.replace(/\r?\n/g,"\r\n"):""}function serial(e,t){var n,i,r,o,s=e.name,a=e.tagName.toLowerCase(),u=function(e){e&&!e.disabled&&t(s,normalize(e.attributes.value&&e.attributes.value.specified?e.value:e.text))};if(!e.disabled&&s)switch(a){case"input":/reset|button|image|file/i.test(e.type)||(n=/checkbox/i.test(e.type),i=/radio/i.test(e.type),r=e.value,(!(n||i)||e.checked)&&t(s,normalize(n&&""===r?"on":r)));break;case"textarea":t(s,normalize(e.value));break;case"select":if("select-one"===e.type.toLowerCase())u(e.selectedIndex>=0?e.options[e.selectedIndex]:null);else for(o=0;e.length&&o<e.length;o++)e.options[o].selected&&u(e.options[o])}}function eachFormElement(){var e,t,n=this,i=function(e,t){var i,r,o;for(i=0;i<t.length;i++)for(o=e[byTag](t[i]),r=0;r<o.length;r++)serial(o[r],n)};for(t=0;t<arguments.length;t++)e=arguments[t],/input|select|textarea/i.test(e.tagName)&&serial(e,n),i(e,["input","select","textarea"])}function serializeQueryString(){return reqwest.toQueryString(reqwest.serializeArray.apply(null,arguments))}function serializeHash(){var e={};return eachFormElement.apply(function(t,n){t in e?(e[t]&&!isArray(e[t])&&(e[t]=[e[t]]),e[t].push(n)):e[t]=n},arguments),e}function buildParams(e,t,n,i){var r,o,s,a=/\[\]$/;if(isArray(t))for(o=0;t&&o<t.length;o++)s=t[o],n||a.test(e)?i(e,s):buildParams(e+"["+("object"==typeof s?o:"")+"]",s,n,i);else if(t&&"[object Object]"===t.toString())for(r in t)buildParams(e+"["+r+"]",t[r],n,i);else i(e,t)}var win=window,doc=document,twoHundo=/^(20\d|1223)$/,byTag="getElementsByTagName",readyState="readyState",contentType="Content-Type",requestedWith="X-Requested-With",head=doc[byTag]("head")[0],uniqid=0,callbackPrefix="reqwest_"+ +new Date,lastValue,xmlHttpRequest="XMLHttpRequest",xDomainRequest="XDomainRequest",noop=function(){},isArray="function"==typeof Array.isArray?Array.isArray:function(e){return e instanceof Array},defaultHeaders={contentType:"application/x-www-form-urlencoded",requestedWith:xmlHttpRequest,accept:{"*":"text/javascript, text/html, application/xml, text/xml, */*",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",js:"application/javascript, text/javascript"}},xhr=function(e){if(e.crossOrigin===!0){var t=win[xmlHttpRequest]?new XMLHttpRequest:null;if(t&&"withCredentials"in t)return t;if(win[xDomainRequest])return new XDomainRequest;throw new Error("Browser does not support cross-origin requests")}return win[xmlHttpRequest]?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")},globalSetupOptions={dataFilter:function(e){return e}};return Reqwest.prototype={abort:function(){this._aborted=!0,this.request.abort()},retry:function(){init.call(this,this.o,this.fn)},then:function(e,t){return e=e||function(){},t=t||function(){},this._fulfilled?this._responseArgs.resp=e(this._responseArgs.resp):this._erred?t(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):(this._fulfillmentHandlers.push(e),this._errorHandlers.push(t)),this},always:function(e){return this._fulfilled||this._erred?e(this._responseArgs.resp):this._completeHandlers.push(e),this},fail:function(e){return this._erred?e(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):this._errorHandlers.push(e),this}},reqwest.serializeArray=function(){var e=[];return eachFormElement.apply(function(t,n){e.push({name:t,value:n})},arguments),e},reqwest.serialize=function(){if(0===arguments.length)return"";var e,t,n=Array.prototype.slice.call(arguments,0);return e=n.pop(),e&&e.nodeType&&n.push(e)&&(e=null),e&&(e=e.type),t="map"==e?serializeHash:"array"==e?reqwest.serializeArray:serializeQueryString,t.apply(null,n)},reqwest.toQueryString=function(e,t){var n,i,r=t||!1,o=[],s=encodeURIComponent,a=function(e,t){t="function"==typeof t?t():null==t?"":t,o[o.length]=s(e)+"="+s(t)};if(isArray(e))for(i=0;e&&i<e.length;i++)a(e[i].name,e[i].value);else for(n in e)e.hasOwnProperty(n)&&buildParams(n,e[n],r,a);return o.join("&").replace(/%20/g,"+")},reqwest.getcallbackPrefix=function(){return callbackPrefix},reqwest.compat=function(e,t){return e&&(e.type&&(e.method=e.type)&&delete e.type,e.dataType&&(e.type=e.dataType),e.jsonpCallback&&(e.jsonpCallbackName=e.jsonpCallback)&&delete e.jsonpCallback,e.jsonp&&(e.jsonpCallback=e.jsonp)),new Reqwest(e,t)},reqwest.ajaxSetup=function(e){e=e||{};for(var t in e)globalSetupOptions[t]=e[t]},reqwest});var inputfiles=function(e,t,n){"use strict";function i(e,t){var n={};if(t=t||[],"undefined"==typeof t)for(var i=0;i<e.length;i++)t[i.toString()]=i;for(var r=0;r<t.length;r++){var o=t[r],s=e[r];n[o]=s}return n}var r=t,n=n;return r.prototype.createInput=function(){throw"not yet implemented"},r.prototype.createReader=function(){throw"not yet implemented"},r.prototype.loadBytes=function(){throw"not yet implemented"},r.prototype.loadJSON=function(e,t){var i=[],r=-1===e.indexOf("http")?"json":"jsonp";return n({url:e,type:r,success:function(e){for(var n in e)i[n]=e[n];"undefined"!=typeof t&&t(i)}}),i},r.prototype.loadStrings=function(e,t){var n=[],i=new XMLHttpRequest;return i.open("GET",e,!0),i.onreadystatechange=function(){if(4===i.readyState&&(200===i.status||0===i.status)){var e=i.responseText.match(/[^\r\n]+/g);for(var r in e)n[r]=e[r];"undefined"!=typeof t&&t(n)}},i.send(null),n},r.prototype.loadTable=function(e){for(var t=null,n=[],o=!1,s=",",a=1;a<arguments.length;a++)"function"==typeof arguments[a]?t=arguments[a]:"string"==typeof arguments[a]&&(n.push(arguments[a]),"header"===arguments[a]&&(o=!0),"csv"===arguments[a]?s=",":"tsv"===arguments[a]&&(s="	"));var u=[],c=new r.Table,l=new XMLHttpRequest;return l.open("GET",e,!0),l.onreadystatechange=function(){if(4===l.readyState&&(200===l.status||0===l.status)){var e=l.responseText.match(/[^\r\n]+/g);for(var n in e)u[n]=e[n];if("undefined"!=typeof t){var a,p;if(o)for(c.columns=new r.TableRow(u[0]).arr,a=1;a<u.length;a++)p=new r.TableRow(u[a],s),p.obj=i(p.arr,c.columns),c.addRow(p);else{for(a=0;a<u[0].split(s).length;a++)c.columns[a]=a.toString();for(a=0;a<u.length;a++)p=new r.TableRow(u[a],s),c.addRow(p)}t(c)}}},l.send(null),c},r.prototype.loadXML=function(e,t){var i=[];return n({url:e,type:"xml",success:function(e){i[0]=e,"undefined"!=typeof t&&t(i)}}),i},r.prototype.parseXML=function(){throw"not yet implemented"},r.prototype.selectFolder=function(){throw"not yet implemented"},r.prototype.selectInput=function(){throw"not yet implemented"},r}({},core,reqwest),inputkeyboard=function(e,t){"use strict";var n=t;return n.prototype.isKeyPressed=!1,n.prototype.keyIsPressed=!1,n.prototype.key="",n.prototype.keyCode=0,n.prototype.onkeydown=function(e){this._setProperty("isKeyPressed",!0),this._setProperty("keyIsPressed",!0),this._setProperty("keyCode",e.which);var t=String.fromCharCode(e.which);t||(t=e.which),this._setProperty("key",t);var n=this.keyPressed||window.keyPressed;"function"!=typeof n||e.charCode||n(e)},n.prototype.onkeyup=function(e){var t=this.keyReleased||window.keyReleased;this._setProperty("isKeyPressed",!1),this._setProperty("keyIsPressed",!1),"function"==typeof t&&t(e)},n.prototype.onkeypress=function(e){this._setProperty("keyCode",e.which),this._setProperty("key",String.fromCharCode(e.which));var t=this.keyTyped||window.keyTyped;"function"==typeof t&&t(e)},n}({},core),inputmouse=function(e,t,n){"use strict";function i(e,t){var n=e.getBoundingClientRect();return{x:t.clientX-n.left,y:t.clientY-n.top}}var r=t,n=n;return r.prototype.mouseX=0,r.prototype.mouseY=0,r.prototype.pmouseX=0,r.prototype.pmouseY=0,r.prototype.winMouseX=0,r.prototype.winMouseY=0,r.prototype.pwinMouseX=0,r.prototype.pwinMouseY=0,r.prototype.mouseButton=0,r.prototype.mouseIsPressed=!1,r.prototype.isMousePressed=!1,r.prototype.updateMouseCoords=function(e){var t=i(this._curElement.elt,e);this._setProperty("pmouseX",this.mouseX),this._setProperty("pmouseY",this.mouseY),"touchstart"===e.type||"touchmove"===e.type?(this._setProperty("mouseX",this.touchX),this._setProperty("mouseY",this.touchY)):(this._setProperty("mouseX",t.x),this._setProperty("mouseY",t.y)),this._setProperty("pwinMouseX",this.winMouseX),this._setProperty("pwinMouseY",this.winMouseY),this._setProperty("winMouseX",e.pageX),this._setProperty("winMouseY",e.pageY)},r.prototype.setMouseButton=function(e){1===e.button?this._setProperty("mouseButton",n.CENTER):2===e.button?this._setProperty("mouseButton",n.RIGHT):(this._setProperty("mouseButton",n.LEFT),("touchstart"===e.type||"touchmove"===e.type)&&(this._setProperty("mouseX",this.touchX),this._setProperty("mouseY",this.touchY)))},r.prototype.onmousemove=function(e){var t=this._isGlobal?window:this;this.updateMouseCoords(e),this.isMousePressed?"function"==typeof t.mouseDragged?t.mouseDragged(e):"function"==typeof t.touchMoved&&(e.preventDefault(),this.setTouchPoints(e),t.touchMoved(e)):"function"==typeof t.mouseMoved&&t.mouseMoved(e)},r.prototype.onmousedown=function(e){var t=this._isGlobal?window:this;this._setProperty("isMousePressed",!0),this._setProperty("mouseIsPressed",!0),this.setMouseButton(e),"function"==typeof t.mousePressed?t.mousePressed(e):"function"==typeof t.touchStarted&&(e.preventDefault(),this.setTouchPoints(e),t.touchStarted(e))},r.prototype.onmouseup=function(e){var t=this._isGlobal?window:this;this._setProperty("isMousePressed",!1),this._setProperty("mouseIsPressed",!1),"function"==typeof t.mouseReleased?t.mouseReleased(e):"function"==typeof t.touchEnded&&(e.preventDefault(),this.setTouchPoints(e),t.touchEnded(e))},r.prototype.onclick=function(e){var t=this._isGlobal?window:this;"function"==typeof t.mouseClicked&&t.mouseClicked(e)},r.prototype.onmousewheel=function(e){var t=this._isGlobal?window:this;"function"==typeof t.mouseWheel&&(e.preventDefault(),t.mouseWheel(e))},r}({},core,constants),inputtime_date=function(e,t){"use strict";var n=t;return n.prototype.day=function(){return(new Date).getDate()},n.prototype.hour=function(){return(new Date).getHours()},n.prototype.minute=function(){return(new Date).getMinutes()},n.prototype.millis=function(){return(new Date).getTime()-this._startTime},n.prototype.month=function(){return(new Date).getMonth()+1},n.prototype.second=function(){return(new Date).getSeconds()},n.prototype.year=function(){return(new Date).getFullYear()},n}({},core),inputtouch=function(e,t){"use strict";var n=t;return n.prototype.touchX=0,n.prototype.touchY=0,n.prototype.touches=[],n.prototype.setTouchPoints=function(e){var t=this._isGlobal?window:this;if("mousedown"===e.type||"mousemove"===e.type)t._setProperty("touchX",t.mouseX),t._setProperty("touchY",t.mouseY);else{t._setProperty("touchX",e.changedTouches[0].pageX),t._setProperty("touchY",e.changedTouches[0].pageY);for(var n=[],i=0;i<e.changedTouches.length;i++){var r=e.changedTouches[i];n[i]={x:r.pageX,y:r.pageY}}t._setProperty("touches",n)}},n.prototype.ontouchstart=function(e){var t=this._isGlobal?window:this;this.setTouchPoints(e),"function"==typeof t.touchStarted?(e.preventDefault(),t.touchStarted(e)):"function"==typeof t.mousePressed&&(e.preventDefault(),this.setMouseButton(e),t.mousePressed(e))},n.prototype.ontouchmove=function(e){var t=this._isGlobal?window:this;this.setTouchPoints(e),"function"==typeof t.touchMoved?(e.preventDefault(),t.touchMoved(e)):"function"==typeof t.mouseDragged&&(e.preventDefault(),this.updateMouseCoords(e),t.mouseDragged(e))},n.prototype.ontouchend=function(e){var t=this._isGlobal?window:this;"function"==typeof t.touchEnded?(e.preventDefault(),t.touchEnded(e)):"function"==typeof t.mouseReleased&&(e.preventDefault(),this.updateMouseCoords(e),t.mouseReleased(e))},n}({},core),mathmath=function(e,t){"use strict";var n=t;return n.prototype.createVector=function(){return new n.Vector(this,arguments)},n}({},core),mathcalculation=function(e,t){"use strict";var n=t;return n.prototype.abs=Math.abs,n.prototype.ceil=Math.ceil,n.prototype.constrain=function(e,t,n){return Math.max(Math.min(e,n),t)},n.prototype.dist=function(e,t,n,i){return Math.sqrt((n-e)*(n-e)+(i-t)*(i-t))},n.prototype.exp=Math.exp,n.prototype.floor=Math.floor,n.prototype.lerp=function(e,t,n){return n*(t-e)+e},n.prototype.log=Math.log,n.prototype.mag=function(e,t){return Math.sqrt(e*e+t*t)},n.prototype.map=function(e,t,n,i,r){return(e-t)/(n-t)*(r-i)+i},n.prototype.max=function(){return arguments[0]instanceof Array?Math.max.apply(null,arguments[0]):Math.max.apply(null,arguments)},n.prototype.min=function(){return arguments[0]instanceof Array?Math.min.apply(null,arguments[0]):Math.min.apply(null,arguments)},n.prototype.norm=function(e,t,n){return this.map(e,t,n,0,1)},n.prototype.pow=Math.pow,n.prototype.round=Math.round,n.prototype.sq=function(e){return e*e},n.prototype.sqrt=Math.sqrt,n}({},core),mathrandom=function(e,t){"use strict";var n=t,i=!1,r=function(){var e,t,n=4294967296,i=1664525,r=1013904223;return{setSeed:function(i){t=e=i||Math.round(Math.random()*n)},getSeed:function(){return e},rand:function(){return t=(i*t+r)%n,t/n}}}();n.prototype.randomSeed=function(e){r.setSeed(e),i=!0},n.prototype.random=function(e,t){var n;if(n=i?r.rand():Math.random(),0===arguments.length)return n;if(1===arguments.length)return n*e;if(e>t){var o=e;e=t,t=o}return n*(t-e)+e};var o,s=!1;return n.prototype.randomGaussian=function(e,t){var n,i,r,a;if(s)n=o,s=!1;else{do i=this.random(2)-1,r=this.random(2)-1,a=i*i+r*r;while(a>=1);a=Math.sqrt(-2*Math.log(a)/a),n=i*a,o=r*a,s=!0}var u=e||0,c=t||1;return n*c+u},n}({},core),mathnoise=function(e,t){"use strict";for(var n=t,i=4,r=1<<i,o=8,s=1<<o,a=4095,u=4,c=.5,l=.5,p=Math.floor(360/l),h=new Array(p),f=new Array(p),d=Math.PI/180,m=0;p>m;m++)h[m]=Math.sin(m*d*l),f[m]=Math.cos(m*d*l);var b=p;b>>=1;var g;return n.prototype.noise=function(e,t,n){if(t=t||0,n=n||0,null==g){g=new Array(a+1);for(var l=0;a+1>l;l++)g[l]=Math.random()}0>e&&(e=-e),0>t&&(t=-t),0>n&&(n=-n);for(var h,d,m,y,v,x=Math.floor(e),w=Math.floor(t),G=Math.floor(n),k=e-x,_=t-w,j=n-G,C=0,S=.5,A=function(e){return.5*(1-f[Math.floor(e*b)%p])},M=0;u>M;M++){var P=x+(w<<i)+(G<<o);h=A(k),d=A(_),m=g[P&a],m+=h*(g[P+1&a]-m),y=g[P+r&a],y+=h*(g[P+r+1&a]-y),m+=d*(y-m),P+=s,y=g[P&a],y+=h*(g[P+1&a]-y),v=g[P+r&a],v+=h*(g[P+r+1&a]-v),y+=d*(v-y),m+=A(j)*(y-m),C+=m*S,S*=c,x<<=1,k*=2,w<<=1,_*=2,G<<=1,j*=2,k>=1&&(x++,k--),_>=1&&(w++,_--),j>=1&&(G++,j--)}return C},n.prototype.noiseDetail=function(e,t){e>0&&(u=e),t>0&&(c=t)},n.prototype.noiseSeed=function(e){var t=function(){var e,t,n=4294967296,i=1664525,r=1013904223;return{setSeed:function(i){t=e=i||Math.round(Math.random()*n)},getSeed:function(){return e},rand:function(){return t=(i*t+r)%n,t/n}}}();t.setSeed(e),g=new Array(a+1);for(var n=0;a+1>n;n++)g[n]=t.rand()},n}({},core),mathtrigonometry=function(e,t,n,i){"use strict";var r=t,o=n,i=i;return r.prototype._angleMode=i.RADIANS,r.prototype.acos=function(e){return this._angleMode===i.RADIANS?Math.acos(e):o.radiansToDegrees(Math.acos(e))},r.prototype.asin=function(e){return this._angleMode===i.RADIANS?Math.asin(e):o.radiansToDegrees(Math.asin(e))},r.prototype.atan=function(e){return this._angleMode===i.RADIANS?Math.atan(e):o.radiansToDegrees(Math.atan(e))},r.prototype.atan2=function(e,t){return this._angleMode===i.RADIANS?Math.atan2(e,t):o.radiansToDegrees(Math.atan2(e,t))},r.prototype.cos=function(e){return Math.cos(this._angleMode===i.RADIANS?e:this.radians(e))},r.prototype.sin=function(e){return Math.sin(this._angleMode===i.RADIANS?e:this.radians(e))},r.prototype.tan=function(e){return Math.tan(this._angleMode===i.RADIANS?e:this.radians(e))},r.prototype.degrees=function(e){return o.radiansToDegrees(e)},r.prototype.radians=function(e){return o.degreesToRadians(e)},r.prototype.angleMode=function(e){(e===i.DEGREES||e===i.RADIANS)&&(this._angleMode=e)},r}({},core,polargeometry,constants),outputfiles=function(e,t){"use strict";function n(e,t){t||(t="");var n="";return e?n=e.split(".").pop():e="untitled",t&&n!==t&&(n=t,e=e+"."+n),[e,n]}function i(e){document.body.removeChild(e.target)}var r=t;return window.URL=window.URL||window.webkitURL,r.prototype._pWriters=[],r.prototype.beginRaw=function(){throw"not yet implemented"},r.prototype.beginRecord=function(){throw"not yet implemented"},r.prototype.createOutput=function(){throw"not yet implemented"},r.prototype.createWriter=function(e,t){var n;for(var i in r.prototype._pWriters)if(r.prototype._pWriters[i].name===e)return n=new r.PrintWriter(e+window.millis(),t),r.prototype._pWriters.push(n),n;return n=new r.PrintWriter(e,t),r.prototype._pWriters.push(n),n},r.prototype.endRaw=function(){throw"not yet implemented"},r.prototype.endRecord=function(){throw"not yet implemented"},r.prototype.escape=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},r.PrintWriter=function(e,t){var n=this;this.name=e,this.content="",this.print=function(e){this.content+=e},this.println=function(e){this.content+=e+"\n"},this.flush=function(){this.content=""},this.close=function(){var i=[];i.push(this.content),r.prototype.writeFile(i,e,t);for(var o in r.prototype._pWriters)r.prototype._pWriters[o].name===this.name&&r.prototype._pWriters.splice(o,1);n.flush(),n={}}},r.prototype.saveBytes=function(){throw"not yet implemented"},r.prototype.save=function(){var e=arguments,t=this._curElement.elt;if(0===e.length)return void r.prototype.saveCanvas(null,null,t);if("string"==typeof e[0])return void("object"==typeof e[2]?r.prototype.saveCanvas(e[0],e[1],e[2]):"string"==typeof e[1]?r.prototype.saveCanvas(e[0],e[1],t):r.prototype.saveCanvas(e[0],null,t));var i=n(e[1],e[2])[1];switch(i){case"json":r.prototype.saveJSON(e[0],e[1],e[2]);break;case"txt":r.prototype.saveStrings(e[0],e[1],e[2]);break;default:e[0]instanceof Array?r.prototype.saveStrings(e[0],e[1],e[2]):e[0]instanceof r.Table?r.prototype.saveTable(e[0],e[1],e[2],e[3]):e[0]instanceof r.Image?r.prototype.saveCanvas(e[1],e[2],e[0].canvas):e[0]instanceof r.SoundFile?r.prototype.saveSound(e[0],e[1],e[2],e[3]):e[0]instanceof Object&&r.prototype.saveJSON(e[0],e[1],e[2])}},r.prototype.saveJSON=function(e,t,n){var i;i=n?JSON.stringify(e):JSON.stringify(e,void 0,2),this.saveStrings(i.split("\n"),t,"json")},r.prototype.saveJSONObject=r.prototype.saveJSON,r.prototype.saveJSONArray=r.prototype.saveJSON,r.prototype.saveStream=function(){throw"not yet implemented"},r.prototype.saveStrings=function(e,t,n){var i=n||"txt",r=this.createWriter(t,i);for(var o in e)o<e.length-1?r.println(e[o]):r.print(e[o]);r.close(),r.flush()},r.prototype.saveXML=function(){throw"not yet implemented"},r.prototype.selectOutput=function(){throw"not yet implemented"},r.prototype.saveTable=function(e,t,n){var i=this.createWriter(t,n),o=e.columns,s=",";if("tsv"===n&&(s="	"),"html"!==n){if("0"!==o[0])for(var a=0;a<o.length;a++)a<o.length-1?i.print(o[a]+s):i.println(o[a]);for(var u=0;u<e.rows.length;u++){var c;for(c=0;c<e.rows[u].arr.length;c++)c<e.rows[u].arr.length-1?i.print(e.rows[u].arr[c]+s):u<e.rows.length-1?i.println(e.rows[u].arr[c]):i.print(e.rows[u].arr[c])}}else{i.println("<html>"),i.println("<head>");var l='  <meta http-equiv="content-type" content';if(l+='="text/html;charset=utf-8" />',i.println(l),i.println("</head>"),i.println("<body>"),i.println("  <table>"),"0"!==o[0]){i.println("    <tr>");for(var p=0;p<o.length;p++){var h=r.prototype.escape(o[p]);i.println("      <td>"+h),i.println("      </td>")}i.println("    </tr>")}for(var f=0;f<e.rows.length;f++){i.println("    <tr>");for(var d=0;d<e.columns.length;d++){var m=e.rows[f].getString(d),b=r.prototype.escape(m);i.println("      <td>"+b),i.println("      </td>")}i.println("    </tr>")}i.println("  </table>"),i.println("</body>"),i.print("</html>")}i.close(),i.flush()},r.prototype.writeFile=function(e,t,n){var i="application/octet-stream";r.prototype._isSafari()&&(i="text/plain");var o=new Blob(e,{type:i}),s=window.URL.createObjectURL(o);r.prototype.downloadFile(s,t,n)},r.prototype.downloadFile=function(e,t,o){var s=n(t,o),a=s[0],u=s[1],c=document.createElement("a");if(c.href=e,c.download=a,c.onclick=i,c.style.display="none",document.body.appendChild(c),r.prototype._isSafari()){var l="Hello, Safari user! To download this file...\n";l+="1. Go to File --> Save As.\n",l+='2. Choose "Page Source" as the Format.\n',l+='3. Name it with this extension: ."'+u+'"',alert(l)}c.click(),e=null},r.prototype._isSafari=function(){var e=Object.prototype.toString.call(window.HTMLElement);return e.indexOf("Constructor")>0},r}({},core),outputimage=function(e,t){"use strict";var n=t,i=[];return n.prototype.saveCanvas=function(e,t,i){var r;if(i?r=i:this._curElement&&this._curElement.elt&&(r=this._curElement.elt),n.prototype._isSafari()){var o="Hello, Safari user!\n";o+="Now capturing a screenshot...\n",o+="To save this image,\n",o+="go to File --> Save As.\n",alert(o),window.location.href=r.toDataURL()}else{var s;if(t)switch(t.toLowerCase()){case"png":s="image/png";break;case"jpeg":s="image/jpeg";break;case"jpg":s="image/jpeg";break;default:s="image/png"}else t="png",s="image/png";var a="image/octet-stream",u=r.toDataURL(s);u=u.replace(s,a),n.prototype.downloadFile(u,e,t)}},n.prototype.saveFrames=function(e,t,r,o,s){var a=r||3;a=n.prototype.constrain(a,0,15),a=1e3*a;var u=o||15;u=n.prototype.constrain(u,0,22);var c=0,l=n.prototype._makeFrame,p=this._curElement.elt,h=setInterval(function(){l(e+c,t,p),c++},1e3/u);setTimeout(function(){if(clearInterval(h),s)s(i);else for(var e=0;e<i.length;e++){var t=i[e];n.prototype.downloadFile(t.imageData,t.filename,t.ext)}i=[]},a+.01)},n.prototype._makeFrame=function(e,t,n){var r;r=this?this._curElement.elt:n;var o;if(t)switch(t.toLowerCase()){case"png":o="image/png";break;case"jpeg":o="image/jpeg";break;case"jpg":o="image/jpeg";break;default:o="image/png"}else t="png",o="image/png";var s="image/octet-stream",a=r.toDataURL(o);a=a.replace(o,s);var u={};u.imageData=a,u.filename=e,u.ext=t,i.push(u)},n}({},core),outputtext_area=function(e,t){"use strict";var n=t;return n.prototype.print=window.console&&console.log?console.log.bind(console):function(){},n.prototype.println=n.prototype.print,n}({},core),renderingrendering=function(e,t,n){var i=t,n=n;return i.prototype.createCanvas=function(e,t,n){var r;if(n)r=document.createElement("canvas"),r.id="defaultCanvas";else if(r=document.getElementById("defaultCanvas"))r.id="";else{var o="Warning: createCanvas more than once NOT recommended.";o+=" Very unpredictable behavior may result.",console.log(o)}r.setAttribute("width",e*this._pixelDensity),r.setAttribute("height",t*this._pixelDensity),r.setAttribute("style","width:"+e+"px !important; height:"+t+"px !important;"),this._setupDone||(r.className+=" p5_hidden",r.style.visibility="hidden"),this._userNode?this._userNode.appendChild(r):document.body.appendChild(r);var s=new i.Graphics(r,this);return n&&this._elements.push(s),this.scale(this._pixelDensity,this._pixelDensity),s},i.prototype.createGraphics=function(e,t){var n=document.createElement("canvas");n.setAttribute("width",e*this._pixelDensity),n.setAttribute("height",t*this._pixelDensity),n.setAttribute("style","width:"+e+"px !important; height:"+t+"px !important;");var r=this._userNode||document.body;r.appendChild(n);var o=new i.Graphics(n);this._elements.push(o);for(var s in i.prototype)o.hasOwnProperty(s)||(o[s]="function"==typeof i.prototype[s]?i.prototype[s].bind(o):i.prototype[s]);return o.scale(this._pixelDensity,this._pixelDensity),o},i.prototype.blendMode=function(e){if(e!==n.BLEND&&e!==n.DARKEST&&e!==n.LIGHTEST&&e!==n.DIFFERENCE&&e!==n.MULTIPLY&&e!==n.EXCLUSION&&e!==n.SCREEN&&e!==n.REPLACE&&e!==n.OVERLAY&&e!==n.HARD_LIGHT&&e!==n.SOFT_LIGHT&&e!==n.DODGE&&e!==n.BURN)throw new Error("Mode "+e+" not recognized.");this.drawingContext.globalCompositeOperation=e},i}({},core,constants),shape2d_primitives=function(e,t,n,i){"use strict";var r=t,n=n,i=i;return r.prototype.arc=function(e,t,r,o,s,a,u){if(this._doStroke||this._doFill){var c=this.drawingContext,l=n.arcModeAdjust(e,t,r,o,this._ellipseMode),p=l.h>l.w?l.h/2:l.w/2,h=l.h>l.w?l.w/l.h:1,f=l.h>l.w?1:l.h/l.w;return c.scale(h,f),c.beginPath(),c.arc(l.x,l.y,p,s,a),this._doStroke&&c.stroke(),u===i.CHORD||u===i.OPEN?c.closePath():(u===i.PIE||void 0===u)&&(c.lineTo(l.x,l.y),c.closePath()),this._doFill&&c.fill(),this._doStroke&&u!==i.OPEN&&void 0!==u&&c.stroke(),this}},r.prototype.ellipse=function(e,t,i,r){if(this._doStroke||this._doFill){var o=this.drawingContext,s=n.modeAdjust(e,t,i,r,this._ellipseMode);if(o.beginPath(),i===r)o.arc(s.x+s.w/2,s.y+s.w/2,s.w/2,0,2*Math.PI,!1);else{var a=.5522848,u=s.w/2*a,c=s.h/2*a,l=s.x+s.w,p=s.y+s.h,h=s.x+s.w/2,f=s.y+s.h/2;o.moveTo(s.x,f),o.bezierCurveTo(s.x,f-c,h-u,s.y,h,s.y),o.bezierCurveTo(h+u,s.y,l,f-c,l,f),o.bezierCurveTo(l,f+c,h+u,p,h,p),o.bezierCurveTo(h-u,p,s.x,f+c,s.x,f),o.closePath()}return this._doFill&&o.fill(),this._doStroke&&o.stroke(),this}},r.prototype.line=function(e,t,n,i){if(this._doStroke){var r=this.drawingContext;if("rgba(0,0,0,0)"!==r.strokeStyle)return r.beginPath(),r.moveTo(e,t),r.lineTo(n,i),r.stroke(),this}},r.prototype.point=function(e,t){if(this._doStroke){var n=this.drawingContext,r=n.strokeStyle,o=n.fillStyle;if("rgba(0,0,0,0)"!==r)return e=Math.round(e),t=Math.round(t),n.fillStyle=r,n.lineWidth>1?(n.beginPath(),n.arc(e,t,n.lineWidth/2,0,i.TWO_PI,!1),n.fill()):n.fillRect(e,t,1,1),n.fillStyle=o,this}},r.prototype.quad=function(e,t,n,i,r,o,s,a){if(this._doStroke||this._doFill){var u=this.drawingContext;return u.beginPath(),u.moveTo(e,t),u.lineTo(n,i),u.lineTo(r,o),u.lineTo(s,a),u.closePath(),this._doFill&&u.fill(),this._doStroke&&u.stroke(),this}},r.prototype.rect=function(e,t,i,r){if(this._doStroke||this._doFill){var o=n.modeAdjust(e,t,i,r,this._rectMode),s=this.drawingContext;return this._doStroke&&s.lineWidth%2===1&&s.translate(.5,.5),s.beginPath(),s.rect(o.x,o.y,o.w,o.h),this._doFill&&s.fill(),this._doStroke&&s.stroke(),this._doStroke&&s.lineWidth%2===1&&s.translate(-.5,-.5),this}},r.prototype.triangle=function(e,t,n,i,r,o){if(this._doStroke||this._doFill){var s=this.drawingContext;return s.beginPath(),s.moveTo(e,t),s.lineTo(n,i),s.lineTo(r,o),s.closePath(),this._doFill&&s.fill(),this._doStroke&&s.stroke(),this}},r}({},core,canvas,constants),shapeattributes=function(e,t,n){"use strict";var i=t,n=n;return i.prototype._rectMode=n.CORNER,i.prototype._ellipseMode=n.CENTER,i.prototype.ellipseMode=function(e){return(e===n.CORNER||e===n.CORNERS||e===n.RADIUS||e===n.CENTER)&&(this._ellipseMode=e),this},i.prototype.noSmooth=function(){return this.drawingContext.mozImageSmoothingEnabled=!1,this.drawingContext.webkitImageSmoothingEnabled=!1,this},i.prototype.rectMode=function(e){return(e===n.CORNER||e===n.CORNERS||e===n.RADIUS||e===n.CENTER)&&(this._rectMode=e),this},i.prototype.smooth=function(){return this.drawingContext.mozImageSmoothingEnabled=!0,this.drawingContext.webkitImageSmoothingEnabled=!0,this},i.prototype.strokeCap=function(e){return(e===n.ROUND||e===n.SQUARE||e===n.PROJECT)&&(this.drawingContext.lineCap=e),this},i.prototype.strokeJoin=function(e){return(e===n.ROUND||e===n.BEVEL||e===n.MITER)&&(this.drawingContext.lineJoin=e),this},i.prototype.strokeWeight=function(e){return this.drawingContext.lineWidth="undefined"==typeof e||0===e?1e-4:e,this},i}({},core,constants),shapecurves=function(e,t){"use strict";var n=t;return n.prototype._bezierDetail=20,n.prototype._curveDetail=20,n.prototype.bezier=function(e,t,i,r,o,s,a,u){if(this._doStroke){var c=this.drawingContext;c.beginPath(),c.moveTo(e,t);for(var l=0;l<=this._bezierDetail;l++){var p=l/parseFloat(this._bezierDetail),h=n.prototype.bezierPoint(e,i,o,a,p),f=n.prototype.bezierPoint(t,r,s,u,p);c.lineTo(h,f)}return c.stroke(),this}},n.prototype.bezierDetail=function(e){return this._setProperty("_bezierDetail",e),this},n.prototype.bezierPoint=function(e,t,n,i,r){var o=1-r;return Math.pow(o,3)*e+3*Math.pow(o,2)*r*t+3*o*Math.pow(r,2)*n+Math.pow(r,3)*i},n.prototype.bezierTangent=function(e,t,n,i,r){var o=1-r;return 3*i*Math.pow(r,2)-3*n*Math.pow(r,2)+6*n*o*r-6*t*o*r+3*t*Math.pow(o,2)-3*e*Math.pow(o,2)},n.prototype.curve=function(e,t,i,r,o,s,a,u){if(this._doStroke){var c=this.drawingContext;c.moveTo(e,t),c.beginPath();for(var l=0;l<=this._curveDetail;l++){var p=parseFloat(l/this._curveDetail),h=n.prototype.curvePoint(e,i,o,a,p),f=n.prototype.curvePoint(t,r,s,u,p);c.lineTo(h,f)}return c.stroke(),c.closePath(),this}},n.prototype.curveDetail=function(e){return this._setProperty("_curveDetail",e),this},n.prototype.curvePoint=function(e,t,n,i,r){var o=r*r*r,s=r*r,a=-.5*o+s-.5*r,u=1.5*o-2.5*s+1,c=-1.5*o+2*s+.5*r,l=.5*o-.5*s;return e*a+t*u+n*c+i*l},n.prototype.curveTangent=function(e,t,n,i,r){var o=r*r,s=-3*o/2+2*r-.5,a=9*o/2-5*r,u=-9*o/2+4*r+.5,c=3*o/2-r;return e*s+t*a+n*u+i*c},n.prototype.curveTightness=function(){throw"not yet implemented"},n}({},core),shapevertex=function(e,t,n){"use strict";var i=t,n=n;return i.prototype._shapeKind=null,i.prototype._shapeInited=!1,i.prototype._contourInited=!1,i.prototype._contourVertices=[],i.prototype._curveVertices=[],i.prototype.beginContour=function(){return this._contourVertices=[],this._contourInited=!0,this},i.prototype.beginShape=function(e){return this._shapeKind=e===n.POINTS||e===n.LINES||e===n.TRIANGLES||e===n.TRIANGLE_FAN||e===n.TRIANGLE_STRIP||e===n.QUADS||e===n.QUAD_STRIP?e:null,this._shapeInited=!0,this.drawingContext.beginPath(),this},i.prototype.bezierVertex=function(e,t,i,r,o,s){if(this._contourInited){var a={};return a.x=e,a.y=t,a.x3=i,a.y3=r,a.x4=o,a.y4=s,a.type=n.BEZIER,this._contourVertices.push(a),this}return this.drawingContext.bezierCurveTo(e,t,i,r,o,s),this},i.prototype.curveVertex=function(e,t){var n={};return n.x=e,n.y=t,this._curveVertices.push(n),this._curveVertices.length>=4&&(this.curve(this._curveVertices[0].x,this._curveVertices[0].y,this._curveVertices[1].x,this._curveVertices[1].y,this._curveVertices[2].x,this._curveVertices[2].y,this._curveVertices[3].x,this._curveVertices[3].y),this._curveVertices.shift()),this},i.prototype.endContour=function(){this._contourVertices.reverse(),this.drawingContext.moveTo(this._contourVertices[0].x,this._contourVertices[0].y);var e=this.drawingContext;return this._contourVertices.slice(1).forEach(function(t){switch(t.type){case n.LINEAR:e.lineTo(t.x,t.y);break;case n.QUADRATIC:e.quadraticCurveTo(t.x,t.y,t.x3,t.y3);break;case n.BEZIER:e.bezierCurveTo(t.x,t.y,t.x3,t.y3,t.x4,t.y4);break;case n.CURVE:}}),this.drawingContext.closePath(),this._contourInited=!1,this},i.prototype.endShape=function(e){return e===n.CLOSE&&(this.drawingContext.closePath(),this._doFill&&this.drawingContext.fill()),this._doStroke&&this._curveVertices.length<=0?this.drawingContext.stroke():this._curveVertices=[],this},i.prototype.quadraticVertex=function(e,t,i,r){if(this._contourInited){var o={};return o.x=e,o.y=t,o.x3=i,o.y3=r,o.type=n.QUADRATIC,this._contourVertices.push(o),this}return this.drawingContext.quadraticCurveTo(e,t,i,r),this},i.prototype.vertex=function(e,t){if(this._contourInited){var i={};return i.x=e,i.y=t,i.type=n.LINEAR,this._contourVertices.push(i),this}return this._shapeInited?this.drawingContext.moveTo(e,t):this.drawingContext.lineTo(e,t),this._shapeInited=!1,this},i}({},core,constants),structure=function(e,t){"use strict";var n=t;return n.prototype.exit=function(){throw"exit() not implemented, see remove()"},n.prototype.noLoop=function(){this._loop=!1,this._drawInterval&&clearInterval(this._drawInterval)},n.prototype.loop=function(){this._loop=!0,this._draw()
},n.prototype.push=function(){this.drawingContext.save(),this.styles.push({doStroke:this._doStroke,doFill:this._doFill,tint:this._tint,imageMode:this._imageMode,rectMode:this._rectMode,ellipseMode:this._ellipseMode,colorMode:this._colorMode,textFont:this.textFont,textLeading:this.textLeading,textSize:this.textSize,textStyle:this.textStyle})},n.prototype.pop=function(){this.drawingContext.restore();var e=this.styles.pop();this._doStroke=e.doStroke,this._doFill=e.doFill,this._tint=e.tint,this._imageMode=e.imageMode,this._rectMode=e.rectMode,this._ellipseMode=e.ellipseMode,this._colorMode=e.colorMode,this.textFont=e.textFont,this.textLeading=e.textLeading,this.textSize=e.textSize,this.textStyle=e.textStyle},n.prototype.pushStyle=function(){throw new Error("pushStyle() not used, see push()")},n.prototype.popStyle=function(){throw new Error("popStyle() not used, see pop()")},n.prototype.redraw=function(){var e=this._isGlobal?window:this;e.draw&&e.draw()},n.prototype.size=function(){throw"size() not implemented, see createCanvas()"},n}({},core),transform=function(e,t,n){"use strict";var i=t,n=n;return i.prototype.applyMatrix=function(e,t,n,i,r,o){return this.drawingContext.transform(e,t,n,i,r,o),this},i.prototype.popMatrix=function(){throw new Error("popMatrix() not used, see pop()")},i.prototype.printMatrix=function(){throw new Error("printMatrix() not implemented")},i.prototype.pushMatrix=function(){throw new Error("pushMatrix() not used, see push()")},i.prototype.resetMatrix=function(){return this.drawingContext.setTransform(),this},i.prototype.rotate=function(e){return this._angleMode===n.DEGREES&&(e=this.radians(e)),this.drawingContext.rotate(e),this},i.prototype.rotateX=function(){throw"not yet implemented"},i.prototype.rotateY=function(){throw"not yet implemented"},i.prototype.scale=function(){var e=1,t=1;return 1===arguments.length?e=t=arguments[0]:(e=arguments[0],t=arguments[1]),this.drawingContext.scale(e,t),this},i.prototype.shearX=function(e){return this._angleMode===n.DEGREES&&(e=this.radians(e)),this.drawingContext.transform(1,0,this.tan(e),1,0,0),this},i.prototype.shearY=function(e){return this._angleMode===n.DEGREES&&(e=this.radians(e)),this.drawingContext.transform(1,this.tan(e),0,1,0,0),this},i.prototype.translate=function(e,t){return this.drawingContext.translate(e,t),this},i}({},core,constants,outputtext_area),typographyattributes=function(e,t,n){"use strict";var i=t,n=n;return i.prototype._textLeading=15,i.prototype._textFont="sans-serif",i.prototype._textSize=12,i.prototype._textStyle=n.NORMAL,i.prototype.textAlign=function(e){(e===n.LEFT||e===n.RIGHT||e===n.CENTER)&&(this.drawingContext.textAlign=e)},i.prototype.textHeight=function(e){return this.drawingContext.measureText(e).height},i.prototype.textLeading=function(e){this._setProperty("_textLeading",e)},i.prototype.textSize=function(e){this._setProperty("_textSize",e)},i.prototype.textStyle=function(e){(e===n.NORMAL||e===n.ITALIC||e===n.BOLD)&&this._setProperty("_textStyle",e)},i.prototype.textWidth=function(e){return this.drawingContext.measureText(e).width},i}({},core,constants),typographyloading_displaying=function(e,t,n){"use strict";var i=t,n=n;return i.prototype.text=function(){var e=this._textStyle+" "+this._textSize+"px "+this._textFont;if(this.drawingContext.font=e,3===arguments.length)this._doFill&&this.drawingContext.fillText(arguments[0],arguments[1],arguments[2]),this._doStroke&&this.drawingContext.strokeText(arguments[0],arguments[1],arguments[2]);else if(5===arguments.length){for(var t=arguments[0].split(" "),i="",r=n.modeAdjust(arguments[1],arguments[2],arguments[3],arguments[4],this._rectMode),o=r.y+this._textLeading,s=0;s<t.length;s++){var a=i+t[s]+" ",u=this.drawingContext.measureText(a),c=u.width;if(o>r.y+r.h)break;c>r.w&&s>0?(this._doFill&&this.drawingContext.fillText(i,r.x,o),this._doStroke&&this.drawingContext.strokeText(i,r.x,o),i=t[s]+" ",o+=this._textLeading):i=a}o<=r.y+r.h&&(this._doFill&&this.drawingContext.fillText(i,r.x,o),this._doStroke&&this.drawingContext.strokeText(i,r.x,o))}},i.prototype.textFont=function(e){this._setProperty("_textFont",e)},i}({},core,canvas),src_app=function(e,t){"use strict";var n=t,i=function(){window.PHANTOMJS||(window.setup&&"function"==typeof window.setup||window.draw&&"function"==typeof window.draw)&&new n};return"complete"===document.readyState?i():window.addEventListener("load",i,!1),window.p5=n,n}({},core,p5Color,p5Element,p5Graphics,p5Image,p5Vector,p5TableRow,p5Table,colorcreating_reading,colorsetting,constants,dataarray_functions,datastring_functions,environment,imageimage,imageloading_displaying,imagepixels,inputfiles,inputkeyboard,inputmouse,inputtime_date,inputtouch,mathmath,mathcalculation,mathrandom,mathnoise,mathtrigonometry,outputfiles,outputimage,outputtext_area,renderingrendering,shape2d_primitives,shapeattributes,shapecurves,shapevertex,structure,transform,typographyattributes,typographyloading_displaying),fftSize=32;